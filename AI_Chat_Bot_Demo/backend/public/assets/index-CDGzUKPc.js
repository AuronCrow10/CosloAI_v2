var FO=Object.defineProperty;var zO=(e,t,n)=>t in e?FO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fm=(e,t,n)=>zO(e,typeof t!="symbol"?t+"":t,n);function RO(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in e)){const r=Object.getOwnPropertyDescriptor(a,i);r&&Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function Ia(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dN={exports:{}},Uu={},uN={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kl=Symbol.for("react.element"),_O=Symbol.for("react.portal"),BO=Symbol.for("react.fragment"),$O=Symbol.for("react.strict_mode"),UO=Symbol.for("react.profiler"),WO=Symbol.for("react.provider"),qO=Symbol.for("react.context"),HO=Symbol.for("react.forward_ref"),KO=Symbol.for("react.suspense"),VO=Symbol.for("react.memo"),GO=Symbol.for("react.lazy"),Dy=Symbol.iterator;function YO(e){return e===null||typeof e!="object"?null:(e=Dy&&e[Dy]||e["@@iterator"],typeof e=="function"?e:null)}var pN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mN=Object.assign,hN={};function zr(e,t,n){this.props=e,this.context=t,this.refs=hN,this.updater=n||pN}zr.prototype.isReactComponent={};zr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fN(){}fN.prototype=zr.prototype;function Lg(e,t,n){this.props=e,this.context=t,this.refs=hN,this.updater=n||pN}var Mg=Lg.prototype=new fN;Mg.constructor=Lg;mN(Mg,zr.prototype);Mg.isPureReactComponent=!0;var Fy=Array.isArray,gN=Object.prototype.hasOwnProperty,Dg={current:null},vN={key:!0,ref:!0,__self:!0,__source:!0};function bN(e,t,n){var a,i={},r=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)gN.call(t,a)&&!vN.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)i[a]===void 0&&(i[a]=l[a]);return{$$typeof:kl,type:e,key:r,ref:o,props:i,_owner:Dg.current}}function QO(e,t){return{$$typeof:kl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fg(e){return typeof e=="object"&&e!==null&&e.$$typeof===kl}function ZO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var zy=/\/+/g;function gm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ZO(""+e.key):t.toString(36)}function Qc(e,t,n,a,i){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case kl:case _O:o=!0}}if(o)return o=e,i=i(o),e=a===""?"."+gm(o,0):a,Fy(i)?(n="",e!=null&&(n=e.replace(zy,"$&/")+"/"),Qc(i,t,n,"",function(d){return d})):i!=null&&(Fg(i)&&(i=QO(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(zy,"$&/")+"/")+e)),t.push(i)),1;if(o=0,a=a===""?".":a+":",Fy(e))for(var l=0;l<e.length;l++){r=e[l];var c=a+gm(r,l);o+=Qc(r,t,n,c,i)}else if(c=YO(e),typeof c=="function")for(e=c.call(e),l=0;!(r=e.next()).done;)r=r.value,c=a+gm(r,l++),o+=Qc(r,t,n,c,i);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function lc(e,t,n){if(e==null)return e;var a=[],i=0;return Qc(e,a,"","",function(r){return t.call(n,r,i++)}),a}function XO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pn={current:null},Zc={transition:null},JO={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:Zc,ReactCurrentOwner:Dg};function yN(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:lc,forEach:function(e,t,n){lc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return lc(e,function(){t++}),t},toArray:function(e){return lc(e,function(t){return t})||[]},only:function(e){if(!Fg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};De.Component=zr;De.Fragment=BO;De.Profiler=UO;De.PureComponent=Lg;De.StrictMode=$O;De.Suspense=KO;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JO;De.act=yN;De.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=mN({},e.props),i=e.key,r=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=Dg.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)gN.call(t,c)&&!vN.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:kl,type:e.type,key:i,ref:r,props:a,_owner:o}};De.createContext=function(e){return e={$$typeof:qO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:WO,_context:e},e.Consumer=e};De.createElement=bN;De.createFactory=function(e){var t=bN.bind(null,e);return t.type=e,t};De.createRef=function(){return{current:null}};De.forwardRef=function(e){return{$$typeof:HO,render:e}};De.isValidElement=Fg;De.lazy=function(e){return{$$typeof:GO,_payload:{_status:-1,_result:e},_init:XO}};De.memo=function(e,t){return{$$typeof:VO,type:e,compare:t===void 0?null:t}};De.startTransition=function(e){var t=Zc.transition;Zc.transition={};try{e()}finally{Zc.transition=t}};De.unstable_act=yN;De.useCallback=function(e,t){return pn.current.useCallback(e,t)};De.useContext=function(e){return pn.current.useContext(e)};De.useDebugValue=function(){};De.useDeferredValue=function(e){return pn.current.useDeferredValue(e)};De.useEffect=function(e,t){return pn.current.useEffect(e,t)};De.useId=function(){return pn.current.useId()};De.useImperativeHandle=function(e,t,n){return pn.current.useImperativeHandle(e,t,n)};De.useInsertionEffect=function(e,t){return pn.current.useInsertionEffect(e,t)};De.useLayoutEffect=function(e,t){return pn.current.useLayoutEffect(e,t)};De.useMemo=function(e,t){return pn.current.useMemo(e,t)};De.useReducer=function(e,t,n){return pn.current.useReducer(e,t,n)};De.useRef=function(e){return pn.current.useRef(e)};De.useState=function(e){return pn.current.useState(e)};De.useSyncExternalStore=function(e,t,n){return pn.current.useSyncExternalStore(e,t,n)};De.useTransition=function(){return pn.current.useTransition()};De.version="18.3.1";uN.exports=De;var m=uN.exports;const ft=Ia(m),xN=RO({__proto__:null,default:ft},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eL=m,tL=Symbol.for("react.element"),nL=Symbol.for("react.fragment"),aL=Object.prototype.hasOwnProperty,sL=eL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iL={key:!0,ref:!0,__self:!0,__source:!0};function wN(e,t,n){var a,i={},r=null,o=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)aL.call(t,a)&&!iL.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)i[a]===void 0&&(i[a]=t[a]);return{$$typeof:tL,type:e,key:r,ref:o,props:i,_owner:sL.current}}Uu.Fragment=nL;Uu.jsx=wN;Uu.jsxs=wN;dN.exports=Uu;var s=dN.exports,Ph={},jN={exports:{}},zn={},SN={exports:{}},NN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,_){var B=A.length;A.push(_);e:for(;0<B;){var H=B-1>>>1,Z=A[H];if(0<i(Z,_))A[H]=_,A[B]=Z,B=H;else break e}}function n(A){return A.length===0?null:A[0]}function a(A){if(A.length===0)return null;var _=A[0],B=A.pop();if(B!==_){A[0]=B;e:for(var H=0,Z=A.length,ie=Z>>>1;H<ie;){var U=2*(H+1)-1,G=A[U],V=U+1,$=A[V];if(0>i(G,B))V<Z&&0>i($,G)?(A[H]=$,A[V]=B,H=V):(A[H]=G,A[U]=B,H=U);else if(V<Z&&0>i($,B))A[H]=$,A[V]=B,H=V;else break e}}return _}function i(A,_){var B=A.sortIndex-_.sortIndex;return B!==0?B:A.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,p=null,h=3,f=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var _=n(d);_!==null;){if(_.callback===null)a(d);else if(_.startTime<=A)a(d),_.sortIndex=_.expirationTime,t(c,_);else break;_=n(d)}}function j(A){if(v=!1,w(A),!g)if(n(c)!==null)g=!0,R(S);else{var _=n(d);_!==null&&C(j,_.startTime-A)}}function S(A,_){g=!1,v&&(v=!1,b(L),L=-1),f=!0;var B=h;try{for(w(_),p=n(c);p!==null&&(!(p.expirationTime>_)||A&&!M());){var H=p.callback;if(typeof H=="function"){p.callback=null,h=p.priorityLevel;var Z=H(p.expirationTime<=_);_=e.unstable_now(),typeof Z=="function"?p.callback=Z:p===n(c)&&a(c),w(_)}else a(c);p=n(c)}if(p!==null)var ie=!0;else{var U=n(d);U!==null&&C(j,U.startTime-_),ie=!1}return ie}finally{p=null,h=B,f=!1}}var k=!1,T=null,L=-1,F=5,O=-1;function M(){return!(e.unstable_now()-O<F)}function P(){if(T!==null){var A=e.unstable_now();O=A;var _=!0;try{_=T(!0,A)}finally{_?D():(k=!1,T=null)}}else k=!1}var D;if(typeof x=="function")D=function(){x(P)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,N=E.port2;E.port1.onmessage=P,D=function(){N.postMessage(null)}}else D=function(){y(P,0)};function R(A){T=A,k||(k=!0,D())}function C(A,_){L=y(function(){A(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,R(S))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(h){case 1:case 2:case 3:var _=3;break;default:_=h}var B=h;h=_;try{return A()}finally{h=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,_){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var B=h;h=A;try{return _()}finally{h=B}},e.unstable_scheduleCallback=function(A,_,B){var H=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?H+B:H):B=H,A){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=B+Z,A={id:u++,callback:_,priorityLevel:A,startTime:B,expirationTime:Z,sortIndex:-1},B>H?(A.sortIndex=B,t(d,A),n(c)===null&&A===n(d)&&(v?(b(L),L=-1):v=!0,C(j,B-H))):(A.sortIndex=Z,t(c,A),g||f||(g=!0,R(S))),A},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(A){var _=h;return function(){var B=h;h=_;try{return A.apply(this,arguments)}finally{h=B}}}})(NN);SN.exports=NN;var rL=SN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oL=m,Dn=rL;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CN=new Set,Uo={};function Di(e,t){br(e,t),br(e+"Capture",t)}function br(e,t){for(Uo[e]=t,e=0;e<t.length;e++)CN.add(t[e])}var Va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ah=Object.prototype.hasOwnProperty,lL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ry={},_y={};function cL(e){return Ah.call(_y,e)?!0:Ah.call(Ry,e)?!1:lL.test(e)?_y[e]=!0:(Ry[e]=!0,!1)}function dL(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function uL(e,t,n,a){if(t===null||typeof t>"u"||dL(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mn(e,t,n,a,i,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Gt[e]=new mn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Gt[t]=new mn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Gt[e]=new mn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Gt[e]=new mn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Gt[e]=new mn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Gt[e]=new mn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Gt[e]=new mn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Gt[e]=new mn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Gt[e]=new mn(e,5,!1,e.toLowerCase(),null,!1,!1)});var zg=/[\-:]([a-z])/g;function Rg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zg,Rg);Gt[t]=new mn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zg,Rg);Gt[t]=new mn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zg,Rg);Gt[t]=new mn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Gt[e]=new mn(e,1,!1,e.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Gt[e]=new mn(e,1,!1,e.toLowerCase(),null,!0,!0)});function _g(e,t,n,a){var i=Gt.hasOwnProperty(t)?Gt[t]:null;(i!==null?i.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uL(t,n,i,a)&&(n=null),a||i===null?cL(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,a=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var rs=oL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cc=Symbol.for("react.element"),Gi=Symbol.for("react.portal"),Yi=Symbol.for("react.fragment"),Bg=Symbol.for("react.strict_mode"),Eh=Symbol.for("react.profiler"),kN=Symbol.for("react.provider"),PN=Symbol.for("react.context"),$g=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),Ug=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),AN=Symbol.for("react.offscreen"),By=Symbol.iterator;function eo(e){return e===null||typeof e!="object"?null:(e=By&&e[By]||e["@@iterator"],typeof e=="function"?e:null)}var ot=Object.assign,vm;function No(e){if(vm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vm=t&&t[1]||""}return`
`+vm+e}var bm=!1;function ym(e,t){if(!e||bm)return"";bm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var a=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){a=d}e.call(t.prototype)}else{try{throw Error()}catch(d){a=d}e()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),r=a.stack.split(`
`),o=i.length-1,l=r.length-1;1<=o&&0<=l&&i[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==r[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{bm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?No(e):""}function pL(e){switch(e.tag){case 5:return No(e.type);case 16:return No("Lazy");case 13:return No("Suspense");case 19:return No("SuspenseList");case 0:case 2:case 15:return e=ym(e.type,!1),e;case 11:return e=ym(e.type.render,!1),e;case 1:return e=ym(e.type,!0),e;default:return""}}function Oh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yi:return"Fragment";case Gi:return"Portal";case Eh:return"Profiler";case Bg:return"StrictMode";case Th:return"Suspense";case Ih:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case PN:return(e.displayName||"Context")+".Consumer";case kN:return(e._context.displayName||"Context")+".Provider";case $g:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ug:return t=e.displayName||null,t!==null?t:Oh(e.type)||"Memo";case ys:t=e._payload,e=e._init;try{return Oh(e(t))}catch{}}return null}function mL(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oh(t);case 8:return t===Bg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _s(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function EN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hL(e){var t=EN(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){a=""+o,r.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dc(e){e._valueTracker||(e._valueTracker=hL(e))}function TN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=EN(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function bd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lh(e,t){var n=t.checked;return ot({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function $y(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=_s(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function IN(e,t){t=t.checked,t!=null&&_g(e,"checked",t,!1)}function Mh(e,t){IN(e,t);var n=_s(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dh(e,t.type,n):t.hasOwnProperty("defaultValue")&&Dh(e,t.type,_s(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Dh(e,t,n){(t!=="number"||bd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Co=Array.isArray;function cr(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+_s(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Fh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return ot({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ce(92));if(Co(n)){if(1<n.length)throw Error(ce(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_s(n)}}function ON(e,t){var n=_s(t.value),a=_s(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function qy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function LN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?LN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uc,MN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uc=uc||document.createElement("div"),uc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var To={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fL=["Webkit","ms","Moz","O"];Object.keys(To).forEach(function(e){fL.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),To[t]=To[e]})});function DN(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||To.hasOwnProperty(e)&&To[e]?(""+t).trim():t+"px"}function FN(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,i=DN(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,i):e[n]=i}}var gL=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rh(e,t){if(t){if(gL[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function _h(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bh=null;function Wg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $h=null,dr=null,ur=null;function Hy(e){if(e=El(e)){if(typeof $h!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=Vu(t),$h(e.stateNode,e.type,t))}}function zN(e){dr?ur?ur.push(e):ur=[e]:dr=e}function RN(){if(dr){var e=dr,t=ur;if(ur=dr=null,Hy(e),t)for(e=0;e<t.length;e++)Hy(t[e])}}function _N(e,t){return e(t)}function BN(){}var xm=!1;function $N(e,t,n){if(xm)return e(t,n);xm=!0;try{return _N(e,t,n)}finally{xm=!1,(dr!==null||ur!==null)&&(BN(),RN())}}function qo(e,t){var n=e.stateNode;if(n===null)return null;var a=Vu(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ce(231,t,typeof n));return n}var Uh=!1;if(Va)try{var to={};Object.defineProperty(to,"passive",{get:function(){Uh=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{Uh=!1}function vL(e,t,n,a,i,r,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var Io=!1,yd=null,xd=!1,Wh=null,bL={onError:function(e){Io=!0,yd=e}};function yL(e,t,n,a,i,r,o,l,c){Io=!1,yd=null,vL.apply(bL,arguments)}function xL(e,t,n,a,i,r,o,l,c){if(yL.apply(this,arguments),Io){if(Io){var d=yd;Io=!1,yd=null}else throw Error(ce(198));xd||(xd=!0,Wh=d)}}function Fi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function UN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ky(e){if(Fi(e)!==e)throw Error(ce(188))}function wL(e){var t=e.alternate;if(!t){if(t=Fi(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(a=i.return,a!==null){n=a;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return Ky(i),e;if(r===a)return Ky(i),t;r=r.sibling}throw Error(ce(188))}if(n.return!==a.return)n=i,a=r;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,a=r;break}if(l===a){o=!0,a=i,n=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===n){o=!0,n=r,a=i;break}if(l===a){o=!0,a=r,n=i;break}l=l.sibling}if(!o)throw Error(ce(189))}}if(n.alternate!==a)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?e:t}function WN(e){return e=wL(e),e!==null?qN(e):null}function qN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qN(e);if(t!==null)return t;e=e.sibling}return null}var HN=Dn.unstable_scheduleCallback,Vy=Dn.unstable_cancelCallback,jL=Dn.unstable_shouldYield,SL=Dn.unstable_requestPaint,gt=Dn.unstable_now,NL=Dn.unstable_getCurrentPriorityLevel,qg=Dn.unstable_ImmediatePriority,KN=Dn.unstable_UserBlockingPriority,wd=Dn.unstable_NormalPriority,CL=Dn.unstable_LowPriority,VN=Dn.unstable_IdlePriority,Wu=null,Ca=null;function kL(e){if(Ca&&typeof Ca.onCommitFiberRoot=="function")try{Ca.onCommitFiberRoot(Wu,e,void 0,(e.current.flags&128)===128)}catch{}}var ca=Math.clz32?Math.clz32:EL,PL=Math.log,AL=Math.LN2;function EL(e){return e>>>=0,e===0?32:31-(PL(e)/AL|0)|0}var pc=64,mc=4194304;function ko(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jd(e,t){var n=e.pendingLanes;if(n===0)return 0;var a=0,i=e.suspendedLanes,r=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?a=ko(l):(r&=o,r!==0&&(a=ko(r)))}else o=n&~i,o!==0?a=ko(o):r!==0&&(a=ko(r));if(a===0)return 0;if(t!==0&&t!==a&&!(t&i)&&(i=a&-a,r=t&-t,i>=r||i===16&&(r&4194240)!==0))return t;if(a&4&&(a|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-ca(t),i=1<<n,a|=e[n],t&=~i;return a}function TL(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IL(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes;0<r;){var o=31-ca(r),l=1<<o,c=i[o];c===-1?(!(l&n)||l&a)&&(i[o]=TL(l,t)):c<=t&&(e.expiredLanes|=l),r&=~l}}function qh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function GN(){var e=pc;return pc<<=1,!(pc&4194240)&&(pc=64),e}function wm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ca(t),e[t]=n}function OL(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ca(n),r=1<<i;t[i]=0,a[i]=-1,e[i]=-1,n&=~r}}function Hg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-ca(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}var Ke=0;function YN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var QN,Kg,ZN,XN,JN,Hh=!1,hc=[],Es=null,Ts=null,Is=null,Ho=new Map,Ko=new Map,Ss=[],LL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gy(e,t){switch(e){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":Ho.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(t.pointerId)}}function no(e,t,n,a,i,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[i]},t!==null&&(t=El(t),t!==null&&Kg(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ML(e,t,n,a,i){switch(t){case"focusin":return Es=no(Es,e,t,n,a,i),!0;case"dragenter":return Ts=no(Ts,e,t,n,a,i),!0;case"mouseover":return Is=no(Is,e,t,n,a,i),!0;case"pointerover":var r=i.pointerId;return Ho.set(r,no(Ho.get(r)||null,e,t,n,a,i)),!0;case"gotpointercapture":return r=i.pointerId,Ko.set(r,no(Ko.get(r)||null,e,t,n,a,i)),!0}return!1}function eC(e){var t=oi(e.target);if(t!==null){var n=Fi(t);if(n!==null){if(t=n.tag,t===13){if(t=UN(n),t!==null){e.blockedOn=t,JN(e.priority,function(){ZN(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Bh=a,n.target.dispatchEvent(a),Bh=null}else return t=El(n),t!==null&&Kg(t),e.blockedOn=n,!1;t.shift()}return!0}function Yy(e,t,n){Xc(e)&&n.delete(t)}function DL(){Hh=!1,Es!==null&&Xc(Es)&&(Es=null),Ts!==null&&Xc(Ts)&&(Ts=null),Is!==null&&Xc(Is)&&(Is=null),Ho.forEach(Yy),Ko.forEach(Yy)}function ao(e,t){e.blockedOn===t&&(e.blockedOn=null,Hh||(Hh=!0,Dn.unstable_scheduleCallback(Dn.unstable_NormalPriority,DL)))}function Vo(e){function t(i){return ao(i,e)}if(0<hc.length){ao(hc[0],e);for(var n=1;n<hc.length;n++){var a=hc[n];a.blockedOn===e&&(a.blockedOn=null)}}for(Es!==null&&ao(Es,e),Ts!==null&&ao(Ts,e),Is!==null&&ao(Is,e),Ho.forEach(t),Ko.forEach(t),n=0;n<Ss.length;n++)a=Ss[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ss.length&&(n=Ss[0],n.blockedOn===null);)eC(n),n.blockedOn===null&&Ss.shift()}var pr=rs.ReactCurrentBatchConfig,Sd=!0;function FL(e,t,n,a){var i=Ke,r=pr.transition;pr.transition=null;try{Ke=1,Vg(e,t,n,a)}finally{Ke=i,pr.transition=r}}function zL(e,t,n,a){var i=Ke,r=pr.transition;pr.transition=null;try{Ke=4,Vg(e,t,n,a)}finally{Ke=i,pr.transition=r}}function Vg(e,t,n,a){if(Sd){var i=Kh(e,t,n,a);if(i===null)Im(e,t,a,Nd,n),Gy(e,a);else if(ML(i,e,t,n,a))a.stopPropagation();else if(Gy(e,a),t&4&&-1<LL.indexOf(e)){for(;i!==null;){var r=El(i);if(r!==null&&QN(r),r=Kh(e,t,n,a),r===null&&Im(e,t,a,Nd,n),r===i)break;i=r}i!==null&&a.stopPropagation()}else Im(e,t,a,null,n)}}var Nd=null;function Kh(e,t,n,a){if(Nd=null,e=Wg(a),e=oi(e),e!==null)if(t=Fi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=UN(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Nd=e,null}function tC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NL()){case qg:return 1;case KN:return 4;case wd:case CL:return 16;case VN:return 536870912;default:return 16}default:return 16}}var ks=null,Gg=null,Jc=null;function nC(){if(Jc)return Jc;var e,t=Gg,n=t.length,a,i="value"in ks?ks.value:ks.textContent,r=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(a=1;a<=o&&t[n-a]===i[r-a];a++);return Jc=i.slice(e,1<a?1-a:void 0)}function ed(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fc(){return!0}function Qy(){return!1}function Rn(e){function t(n,a,i,r,o){this._reactName=n,this._targetInst=i,this.type=a,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?fc:Qy,this.isPropagationStopped=Qy,this}return ot(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fc)},persist:function(){},isPersistent:fc}),t}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yg=Rn(Rr),Al=ot({},Rr,{view:0,detail:0}),RL=Rn(Al),jm,Sm,so,qu=ot({},Al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==so&&(so&&e.type==="mousemove"?(jm=e.screenX-so.screenX,Sm=e.screenY-so.screenY):Sm=jm=0,so=e),jm)},movementY:function(e){return"movementY"in e?e.movementY:Sm}}),Zy=Rn(qu),_L=ot({},qu,{dataTransfer:0}),BL=Rn(_L),$L=ot({},Al,{relatedTarget:0}),Nm=Rn($L),UL=ot({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),WL=Rn(UL),qL=ot({},Rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),HL=Rn(qL),KL=ot({},Rr,{data:0}),Xy=Rn(KL),VL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=YL[e])?!!t[e]:!1}function Qg(){return QL}var ZL=ot({},Al,{key:function(e){if(e.key){var t=VL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ed(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?GL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qg,charCode:function(e){return e.type==="keypress"?ed(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ed(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),XL=Rn(ZL),JL=ot({},qu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=Rn(JL),eM=ot({},Al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qg}),tM=Rn(eM),nM=ot({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),aM=Rn(nM),sM=ot({},qu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iM=Rn(sM),rM=[9,13,27,32],Zg=Va&&"CompositionEvent"in window,Oo=null;Va&&"documentMode"in document&&(Oo=document.documentMode);var oM=Va&&"TextEvent"in window&&!Oo,aC=Va&&(!Zg||Oo&&8<Oo&&11>=Oo),ex=" ",tx=!1;function sC(e,t){switch(e){case"keyup":return rM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qi=!1;function lM(e,t){switch(e){case"compositionend":return iC(t);case"keypress":return t.which!==32?null:(tx=!0,ex);case"textInput":return e=t.data,e===ex&&tx?null:e;default:return null}}function cM(e,t){if(Qi)return e==="compositionend"||!Zg&&sC(e,t)?(e=nC(),Jc=Gg=ks=null,Qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return aC&&t.locale!=="ko"?null:t.data;default:return null}}var dM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dM[e.type]:t==="textarea"}function rC(e,t,n,a){zN(a),t=Cd(t,"onChange"),0<t.length&&(n=new Yg("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Lo=null,Go=null;function uM(e){vC(e,0)}function Hu(e){var t=Ji(e);if(TN(t))return e}function pM(e,t){if(e==="change")return t}var oC=!1;if(Va){var Cm;if(Va){var km="oninput"in document;if(!km){var ax=document.createElement("div");ax.setAttribute("oninput","return;"),km=typeof ax.oninput=="function"}Cm=km}else Cm=!1;oC=Cm&&(!document.documentMode||9<document.documentMode)}function sx(){Lo&&(Lo.detachEvent("onpropertychange",lC),Go=Lo=null)}function lC(e){if(e.propertyName==="value"&&Hu(Go)){var t=[];rC(t,Go,e,Wg(e)),$N(uM,t)}}function mM(e,t,n){e==="focusin"?(sx(),Lo=t,Go=n,Lo.attachEvent("onpropertychange",lC)):e==="focusout"&&sx()}function hM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hu(Go)}function fM(e,t){if(e==="click")return Hu(t)}function gM(e,t){if(e==="input"||e==="change")return Hu(t)}function vM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pa=typeof Object.is=="function"?Object.is:vM;function Yo(e,t){if(pa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!Ah.call(t,i)||!pa(e[i],t[i]))return!1}return!0}function ix(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rx(e,t){var n=ix(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ix(n)}}function cC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dC(){for(var e=window,t=bd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bd(e.document)}return t}function Xg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bM(e){var t=dC(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cC(n.ownerDocument.documentElement,n)){if(a!==null&&Xg(n)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,r=Math.min(a.start,i);a=a.end===void 0?r:Math.min(a.end,i),!e.extend&&r>a&&(i=a,a=r,r=i),i=rx(n,r);var o=rx(n,a);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),r>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yM=Va&&"documentMode"in document&&11>=document.documentMode,Zi=null,Vh=null,Mo=null,Gh=!1;function ox(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gh||Zi==null||Zi!==bd(a)||(a=Zi,"selectionStart"in a&&Xg(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Mo&&Yo(Mo,a)||(Mo=a,a=Cd(Vh,"onSelect"),0<a.length&&(t=new Yg("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=Zi)))}function gc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xi={animationend:gc("Animation","AnimationEnd"),animationiteration:gc("Animation","AnimationIteration"),animationstart:gc("Animation","AnimationStart"),transitionend:gc("Transition","TransitionEnd")},Pm={},uC={};Va&&(uC=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function Ku(e){if(Pm[e])return Pm[e];if(!Xi[e])return e;var t=Xi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uC)return Pm[e]=t[n];return e}var pC=Ku("animationend"),mC=Ku("animationiteration"),hC=Ku("animationstart"),fC=Ku("transitionend"),gC=new Map,lx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(e,t){gC.set(e,t),Di(t,[e])}for(var Am=0;Am<lx.length;Am++){var Em=lx[Am],xM=Em.toLowerCase(),wM=Em[0].toUpperCase()+Em.slice(1);qs(xM,"on"+wM)}qs(pC,"onAnimationEnd");qs(mC,"onAnimationIteration");qs(hC,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(fC,"onTransitionEnd");br("onMouseEnter",["mouseout","mouseover"]);br("onMouseLeave",["mouseout","mouseover"]);br("onPointerEnter",["pointerout","pointerover"]);br("onPointerLeave",["pointerout","pointerover"]);Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Di("onBeforeInput",["compositionend","keypress","textInput","paste"]);Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Po));function cx(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,xL(a,t,void 0,e),e.currentTarget=null}function vC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var o=a.length-1;0<=o;o--){var l=a[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==r&&i.isPropagationStopped())break e;cx(i,l,d),r=c}else for(o=0;o<a.length;o++){if(l=a[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==r&&i.isPropagationStopped())break e;cx(i,l,d),r=c}}}if(xd)throw e=Wh,xd=!1,Wh=null,e}function Xe(e,t){var n=t[Jh];n===void 0&&(n=t[Jh]=new Set);var a=e+"__bubble";n.has(a)||(bC(t,e,2,!1),n.add(a))}function Tm(e,t,n){var a=0;t&&(a|=4),bC(n,e,a,t)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Qo(e){if(!e[vc]){e[vc]=!0,CN.forEach(function(n){n!=="selectionchange"&&(jM.has(n)||Tm(n,!1,e),Tm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vc]||(t[vc]=!0,Tm("selectionchange",!1,t))}}function bC(e,t,n,a){switch(tC(t)){case 1:var i=FL;break;case 4:i=zL;break;default:i=Vg}n=i.bind(null,t,n,e),i=void 0,!Uh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Im(e,t,n,a,i){var r=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var l=a.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=a.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=oi(l),o===null)return;if(c=o.tag,c===5||c===6){a=r=o;continue e}l=l.parentNode}}a=a.return}$N(function(){var d=r,u=Wg(n),p=[];e:{var h=gC.get(e);if(h!==void 0){var f=Yg,g=e;switch(e){case"keypress":if(ed(n)===0)break e;case"keydown":case"keyup":f=XL;break;case"focusin":g="focus",f=Nm;break;case"focusout":g="blur",f=Nm;break;case"beforeblur":case"afterblur":f=Nm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Zy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=BL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=tM;break;case pC:case mC:case hC:f=WL;break;case fC:f=aM;break;case"scroll":f=RL;break;case"wheel":f=iM;break;case"copy":case"cut":case"paste":f=HL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Jy}var v=(t&4)!==0,y=!v&&e==="scroll",b=v?h!==null?h+"Capture":null:h;v=[];for(var x=d,w;x!==null;){w=x;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,b!==null&&(j=qo(x,b),j!=null&&v.push(Zo(x,j,w)))),y)break;x=x.return}0<v.length&&(h=new f(h,g,null,n,u),p.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&n!==Bh&&(g=n.relatedTarget||n.fromElement)&&(oi(g)||g[Ga]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=d,g=g?oi(g):null,g!==null&&(y=Fi(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=d),f!==g)){if(v=Zy,j="onMouseLeave",b="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=Jy,j="onPointerLeave",b="onPointerEnter",x="pointer"),y=f==null?h:Ji(f),w=g==null?h:Ji(g),h=new v(j,x+"leave",f,n,u),h.target=y,h.relatedTarget=w,j=null,oi(u)===d&&(v=new v(b,x+"enter",g,n,u),v.target=w,v.relatedTarget=y,j=v),y=j,f&&g)t:{for(v=f,b=g,x=0,w=v;w;w=_i(w))x++;for(w=0,j=b;j;j=_i(j))w++;for(;0<x-w;)v=_i(v),x--;for(;0<w-x;)b=_i(b),w--;for(;x--;){if(v===b||b!==null&&v===b.alternate)break t;v=_i(v),b=_i(b)}v=null}else v=null;f!==null&&dx(p,h,f,v,!1),g!==null&&y!==null&&dx(p,y,g,v,!0)}}e:{if(h=d?Ji(d):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=pM;else if(nx(h))if(oC)S=gM;else{S=hM;var k=mM}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=fM);if(S&&(S=S(e,d))){rC(p,S,n,u);break e}k&&k(e,h,d),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Dh(h,"number",h.value)}switch(k=d?Ji(d):window,e){case"focusin":(nx(k)||k.contentEditable==="true")&&(Zi=k,Vh=d,Mo=null);break;case"focusout":Mo=Vh=Zi=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,ox(p,n,u);break;case"selectionchange":if(yM)break;case"keydown":case"keyup":ox(p,n,u)}var T;if(Zg)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Qi?sC(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(aC&&n.locale!=="ko"&&(Qi||L!=="onCompositionStart"?L==="onCompositionEnd"&&Qi&&(T=nC()):(ks=u,Gg="value"in ks?ks.value:ks.textContent,Qi=!0)),k=Cd(d,L),0<k.length&&(L=new Xy(L,e,null,n,u),p.push({event:L,listeners:k}),T?L.data=T:(T=iC(n),T!==null&&(L.data=T)))),(T=oM?lM(e,n):cM(e,n))&&(d=Cd(d,"onBeforeInput"),0<d.length&&(u=new Xy("onBeforeInput","beforeinput",null,n,u),p.push({event:u,listeners:d}),u.data=T))}vC(p,t)})}function Zo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Cd(e,t){for(var n=t+"Capture",a=[];e!==null;){var i=e,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=qo(e,n),r!=null&&a.unshift(Zo(e,r,i)),r=qo(e,t),r!=null&&a.push(Zo(e,r,i))),e=e.return}return a}function _i(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dx(e,t,n,a,i){for(var r=t._reactName,o=[];n!==null&&n!==a;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===a)break;l.tag===5&&d!==null&&(l=d,i?(c=qo(n,r),c!=null&&o.unshift(Zo(n,c,l))):i||(c=qo(n,r),c!=null&&o.push(Zo(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var SM=/\r\n?/g,NM=/\u0000|\uFFFD/g;function ux(e){return(typeof e=="string"?e:""+e).replace(SM,`
`).replace(NM,"")}function bc(e,t,n){if(t=ux(t),ux(e)!==t&&n)throw Error(ce(425))}function kd(){}var Yh=null,Qh=null;function Zh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xh=typeof setTimeout=="function"?setTimeout:void 0,CM=typeof clearTimeout=="function"?clearTimeout:void 0,px=typeof Promise=="function"?Promise:void 0,kM=typeof queueMicrotask=="function"?queueMicrotask:typeof px<"u"?function(e){return px.resolve(null).then(e).catch(PM)}:Xh;function PM(e){setTimeout(function(){throw e})}function Om(e,t){var n=t,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(a===0){e.removeChild(i),Vo(t);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=i}while(n);Vo(t)}function Os(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var _r=Math.random().toString(36).slice(2),ja="__reactFiber$"+_r,Xo="__reactProps$"+_r,Ga="__reactContainer$"+_r,Jh="__reactEvents$"+_r,AM="__reactListeners$"+_r,EM="__reactHandles$"+_r;function oi(e){var t=e[ja];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ga]||n[ja]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=mx(e);e!==null;){if(n=e[ja])return n;e=mx(e)}return t}e=n,n=e.parentNode}return null}function El(e){return e=e[ja]||e[Ga],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ji(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function Vu(e){return e[Xo]||null}var ef=[],er=-1;function Hs(e){return{current:e}}function et(e){0>er||(e.current=ef[er],ef[er]=null,er--)}function Ze(e,t){er++,ef[er]=e.current,e.current=t}var Bs={},tn=Hs(Bs),jn=Hs(!1),ji=Bs;function yr(e,t){var n=e.type.contextTypes;if(!n)return Bs;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in n)i[r]=t[r];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Sn(e){return e=e.childContextTypes,e!=null}function Pd(){et(jn),et(tn)}function hx(e,t,n){if(tn.current!==Bs)throw Error(ce(168));Ze(tn,t),Ze(jn,n)}function yC(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var i in a)if(!(i in t))throw Error(ce(108,mL(e)||"Unknown",i));return ot({},n,a)}function Ad(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bs,ji=tn.current,Ze(tn,e),Ze(jn,jn.current),!0}function fx(e,t,n){var a=e.stateNode;if(!a)throw Error(ce(169));n?(e=yC(e,t,ji),a.__reactInternalMemoizedMergedChildContext=e,et(jn),et(tn),Ze(tn,e)):et(jn),Ze(jn,n)}var Da=null,Gu=!1,Lm=!1;function xC(e){Da===null?Da=[e]:Da.push(e)}function TM(e){Gu=!0,xC(e)}function Ks(){if(!Lm&&Da!==null){Lm=!0;var e=0,t=Ke;try{var n=Da;for(Ke=1;e<n.length;e++){var a=n[e];do a=a(!0);while(a!==null)}Da=null,Gu=!1}catch(i){throw Da!==null&&(Da=Da.slice(e+1)),HN(qg,Ks),i}finally{Ke=t,Lm=!1}}return null}var tr=[],nr=0,Ed=null,Td=0,Wn=[],qn=0,Si=null,_a=1,Ba="";function ti(e,t){tr[nr++]=Td,tr[nr++]=Ed,Ed=e,Td=t}function wC(e,t,n){Wn[qn++]=_a,Wn[qn++]=Ba,Wn[qn++]=Si,Si=e;var a=_a;e=Ba;var i=32-ca(a)-1;a&=~(1<<i),n+=1;var r=32-ca(t)+i;if(30<r){var o=i-i%5;r=(a&(1<<o)-1).toString(32),a>>=o,i-=o,_a=1<<32-ca(t)+i|n<<i|a,Ba=r+e}else _a=1<<r|n<<i|a,Ba=e}function Jg(e){e.return!==null&&(ti(e,1),wC(e,1,0))}function ev(e){for(;e===Ed;)Ed=tr[--nr],tr[nr]=null,Td=tr[--nr],tr[nr]=null;for(;e===Si;)Si=Wn[--qn],Wn[qn]=null,Ba=Wn[--qn],Wn[qn]=null,_a=Wn[--qn],Wn[qn]=null}var Ln=null,In=null,nt=!1,ia=null;function jC(e,t){var n=Hn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function gx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ln=e,In=Os(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ln=e,In=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Si!==null?{id:_a,overflow:Ba}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Hn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ln=e,In=null,!0):!1;default:return!1}}function tf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nf(e){if(nt){var t=In;if(t){var n=t;if(!gx(e,t)){if(tf(e))throw Error(ce(418));t=Os(n.nextSibling);var a=Ln;t&&gx(e,t)?jC(a,n):(e.flags=e.flags&-4097|2,nt=!1,Ln=e)}}else{if(tf(e))throw Error(ce(418));e.flags=e.flags&-4097|2,nt=!1,Ln=e}}}function vx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ln=e}function yc(e){if(e!==Ln)return!1;if(!nt)return vx(e),nt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zh(e.type,e.memoizedProps)),t&&(t=In)){if(tf(e))throw SC(),Error(ce(418));for(;t;)jC(e,t),t=Os(t.nextSibling)}if(vx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){In=Os(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}In=null}}else In=Ln?Os(e.stateNode.nextSibling):null;return!0}function SC(){for(var e=In;e;)e=Os(e.nextSibling)}function xr(){In=Ln=null,nt=!1}function tv(e){ia===null?ia=[e]:ia.push(e)}var IM=rs.ReactCurrentBatchConfig;function io(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var a=n.stateNode}if(!a)throw Error(ce(147,e));var i=a,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var l=i.refs;o===null?delete l[r]:l[r]=o},t._stringRef=r,t)}if(typeof e!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,e))}return e}function xc(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bx(e){var t=e._init;return t(e._payload)}function NC(e){function t(b,x){if(e){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!e)return null;for(;x!==null;)t(b,x),x=x.sibling;return null}function a(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function i(b,x){return b=Fs(b,x),b.index=0,b.sibling=null,b}function r(b,x,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,x,w,j){return x===null||x.tag!==6?(x=Bm(w,b.mode,j),x.return=b,x):(x=i(x,w),x.return=b,x)}function c(b,x,w,j){var S=w.type;return S===Yi?u(b,x,w.props.children,j,w.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ys&&bx(S)===x.type)?(j=i(x,w.props),j.ref=io(b,x,w),j.return=b,j):(j=od(w.type,w.key,w.props,null,b.mode,j),j.ref=io(b,x,w),j.return=b,j)}function d(b,x,w,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=$m(w,b.mode,j),x.return=b,x):(x=i(x,w.children||[]),x.return=b,x)}function u(b,x,w,j,S){return x===null||x.tag!==7?(x=gi(w,b.mode,j,S),x.return=b,x):(x=i(x,w),x.return=b,x)}function p(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Bm(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cc:return w=od(x.type,x.key,x.props,null,b.mode,w),w.ref=io(b,null,x),w.return=b,w;case Gi:return x=$m(x,b.mode,w),x.return=b,x;case ys:var j=x._init;return p(b,j(x._payload),w)}if(Co(x)||eo(x))return x=gi(x,b.mode,w,null),x.return=b,x;xc(b,x)}return null}function h(b,x,w,j){var S=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(b,x,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case cc:return w.key===S?c(b,x,w,j):null;case Gi:return w.key===S?d(b,x,w,j):null;case ys:return S=w._init,h(b,x,S(w._payload),j)}if(Co(w)||eo(w))return S!==null?null:u(b,x,w,j,null);xc(b,w)}return null}function f(b,x,w,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return b=b.get(w)||null,l(x,b,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case cc:return b=b.get(j.key===null?w:j.key)||null,c(x,b,j,S);case Gi:return b=b.get(j.key===null?w:j.key)||null,d(x,b,j,S);case ys:var k=j._init;return f(b,x,w,k(j._payload),S)}if(Co(j)||eo(j))return b=b.get(w)||null,u(x,b,j,S,null);xc(x,j)}return null}function g(b,x,w,j){for(var S=null,k=null,T=x,L=x=0,F=null;T!==null&&L<w.length;L++){T.index>L?(F=T,T=null):F=T.sibling;var O=h(b,T,w[L],j);if(O===null){T===null&&(T=F);break}e&&T&&O.alternate===null&&t(b,T),x=r(O,x,L),k===null?S=O:k.sibling=O,k=O,T=F}if(L===w.length)return n(b,T),nt&&ti(b,L),S;if(T===null){for(;L<w.length;L++)T=p(b,w[L],j),T!==null&&(x=r(T,x,L),k===null?S=T:k.sibling=T,k=T);return nt&&ti(b,L),S}for(T=a(b,T);L<w.length;L++)F=f(T,b,L,w[L],j),F!==null&&(e&&F.alternate!==null&&T.delete(F.key===null?L:F.key),x=r(F,x,L),k===null?S=F:k.sibling=F,k=F);return e&&T.forEach(function(M){return t(b,M)}),nt&&ti(b,L),S}function v(b,x,w,j){var S=eo(w);if(typeof S!="function")throw Error(ce(150));if(w=S.call(w),w==null)throw Error(ce(151));for(var k=S=null,T=x,L=x=0,F=null,O=w.next();T!==null&&!O.done;L++,O=w.next()){T.index>L?(F=T,T=null):F=T.sibling;var M=h(b,T,O.value,j);if(M===null){T===null&&(T=F);break}e&&T&&M.alternate===null&&t(b,T),x=r(M,x,L),k===null?S=M:k.sibling=M,k=M,T=F}if(O.done)return n(b,T),nt&&ti(b,L),S;if(T===null){for(;!O.done;L++,O=w.next())O=p(b,O.value,j),O!==null&&(x=r(O,x,L),k===null?S=O:k.sibling=O,k=O);return nt&&ti(b,L),S}for(T=a(b,T);!O.done;L++,O=w.next())O=f(T,b,L,O.value,j),O!==null&&(e&&O.alternate!==null&&T.delete(O.key===null?L:O.key),x=r(O,x,L),k===null?S=O:k.sibling=O,k=O);return e&&T.forEach(function(P){return t(b,P)}),nt&&ti(b,L),S}function y(b,x,w,j){if(typeof w=="object"&&w!==null&&w.type===Yi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case cc:e:{for(var S=w.key,k=x;k!==null;){if(k.key===S){if(S=w.type,S===Yi){if(k.tag===7){n(b,k.sibling),x=i(k,w.props.children),x.return=b,b=x;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ys&&bx(S)===k.type){n(b,k.sibling),x=i(k,w.props),x.ref=io(b,k,w),x.return=b,b=x;break e}n(b,k);break}else t(b,k);k=k.sibling}w.type===Yi?(x=gi(w.props.children,b.mode,j,w.key),x.return=b,b=x):(j=od(w.type,w.key,w.props,null,b.mode,j),j.ref=io(b,x,w),j.return=b,b=j)}return o(b);case Gi:e:{for(k=w.key;x!==null;){if(x.key===k)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=i(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else t(b,x);x=x.sibling}x=$m(w,b.mode,j),x.return=b,b=x}return o(b);case ys:return k=w._init,y(b,x,k(w._payload),j)}if(Co(w))return g(b,x,w,j);if(eo(w))return v(b,x,w,j);xc(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=i(x,w),x.return=b,b=x):(n(b,x),x=Bm(w,b.mode,j),x.return=b,b=x),o(b)):n(b,x)}return y}var wr=NC(!0),CC=NC(!1),Id=Hs(null),Od=null,ar=null,nv=null;function av(){nv=ar=Od=null}function sv(e){var t=Id.current;et(Id),e._currentValue=t}function af(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function mr(e,t){Od=e,nv=ar=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yn=!0),e.firstContext=null)}function Gn(e){var t=e._currentValue;if(nv!==e)if(e={context:e,memoizedValue:t,next:null},ar===null){if(Od===null)throw Error(ce(308));ar=e,Od.dependencies={lanes:0,firstContext:e}}else ar=ar.next=e;return t}var li=null;function iv(e){li===null?li=[e]:li.push(e)}function kC(e,t,n,a){var i=t.interleaved;return i===null?(n.next=n,iv(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ya(e,a)}function Ya(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xs=!1;function rv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ls(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Fe&2){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,Ya(e,n)}return i=a.interleaved,i===null?(t.next=t,iv(a)):(t.next=i.next,i.next=t),a.interleaved=t,Ya(e,n)}function td(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Hg(e,n)}}function yx(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?i=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?i=r=t:r=r.next=t}else i=r=t;n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ld(e,t,n,a){var i=e.updateQueue;xs=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?r=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(r!==null){var p=i.baseState;o=0,u=d=c=null,l=r;do{var h=l.lane,f=l.eventTime;if((a&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,f=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){p=g.call(f,p,h);break e}p=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(f,p,h):g,h==null)break e;p=ot({},p,h);break e;case 2:xs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else f={eventTime:f,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=f,c=p):u=u.next=f,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else r===null&&(i.shared.lanes=0);Ci|=o,e.lanes=o,e.memoizedState=p}}function xx(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],i=a.callback;if(i!==null){if(a.callback=null,a=n,typeof i!="function")throw Error(ce(191,i));i.call(a)}}}var Tl={},ka=Hs(Tl),Jo=Hs(Tl),el=Hs(Tl);function ci(e){if(e===Tl)throw Error(ce(174));return e}function ov(e,t){switch(Ze(el,t),Ze(Jo,e),Ze(ka,Tl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zh(t,e)}et(ka),Ze(ka,t)}function jr(){et(ka),et(Jo),et(el)}function AC(e){ci(el.current);var t=ci(ka.current),n=zh(t,e.type);t!==n&&(Ze(Jo,e),Ze(ka,n))}function lv(e){Jo.current===e&&(et(ka),et(Jo))}var it=Hs(0);function Md(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mm=[];function cv(){for(var e=0;e<Mm.length;e++)Mm[e]._workInProgressVersionPrimary=null;Mm.length=0}var nd=rs.ReactCurrentDispatcher,Dm=rs.ReactCurrentBatchConfig,Ni=0,rt=null,Ct=null,zt=null,Dd=!1,Do=!1,tl=0,OM=0;function Qt(){throw Error(ce(321))}function dv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pa(e[n],t[n]))return!1;return!0}function uv(e,t,n,a,i,r){if(Ni=r,rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nd.current=e===null||e.memoizedState===null?FM:zM,e=n(a,i),Do){r=0;do{if(Do=!1,tl=0,25<=r)throw Error(ce(301));r+=1,zt=Ct=null,t.updateQueue=null,nd.current=RM,e=n(a,i)}while(Do)}if(nd.current=Fd,t=Ct!==null&&Ct.next!==null,Ni=0,zt=Ct=rt=null,Dd=!1,t)throw Error(ce(300));return e}function pv(){var e=tl!==0;return tl=0,e}function xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?rt.memoizedState=zt=e:zt=zt.next=e,zt}function Yn(){if(Ct===null){var e=rt.alternate;e=e!==null?e.memoizedState:null}else e=Ct.next;var t=zt===null?rt.memoizedState:zt.next;if(t!==null)zt=t,Ct=e;else{if(e===null)throw Error(ce(310));Ct=e,e={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},zt===null?rt.memoizedState=zt=e:zt=zt.next=e}return zt}function nl(e,t){return typeof t=="function"?t(e):t}function Fm(e){var t=Yn(),n=t.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=e;var a=Ct,i=a.baseQueue,r=n.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}a.baseQueue=i=r,n.pending=null}if(i!==null){r=i.next,a=a.baseState;var l=o=null,c=null,d=r;do{var u=d.lane;if((Ni&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,o=a):c=c.next=p,rt.lanes|=u,Ci|=u}d=d.next}while(d!==null&&d!==r);c===null?o=a:c.next=l,pa(a,t.memoizedState)||(yn=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,n.lastRenderedState=a}if(e=n.interleaved,e!==null){i=e;do r=i.lane,rt.lanes|=r,Ci|=r,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zm(e){var t=Yn(),n=t.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,r=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do r=e(r,o.action),o=o.next;while(o!==i);pa(r,t.memoizedState)||(yn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,a]}function EC(){}function TC(e,t){var n=rt,a=Yn(),i=t(),r=!pa(a.memoizedState,i);if(r&&(a.memoizedState=i,yn=!0),a=a.queue,mv(LC.bind(null,n,a,e),[e]),a.getSnapshot!==t||r||zt!==null&&zt.memoizedState.tag&1){if(n.flags|=2048,al(9,OC.bind(null,n,a,i,t),void 0,null),_t===null)throw Error(ce(349));Ni&30||IC(n,t,i)}return i}function IC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function OC(e,t,n,a){t.value=n,t.getSnapshot=a,MC(t)&&DC(e)}function LC(e,t,n){return n(function(){MC(t)&&DC(e)})}function MC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pa(e,n)}catch{return!0}}function DC(e){var t=Ya(e,1);t!==null&&da(t,e,1,-1)}function wx(e){var t=xa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:e},t.queue=e,e=e.dispatch=DM.bind(null,rt,e),[t.memoizedState,e]}function al(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function FC(){return Yn().memoizedState}function ad(e,t,n,a){var i=xa();rt.flags|=e,i.memoizedState=al(1|t,n,void 0,a===void 0?null:a)}function Yu(e,t,n,a){var i=Yn();a=a===void 0?null:a;var r=void 0;if(Ct!==null){var o=Ct.memoizedState;if(r=o.destroy,a!==null&&dv(a,o.deps)){i.memoizedState=al(t,n,r,a);return}}rt.flags|=e,i.memoizedState=al(1|t,n,r,a)}function jx(e,t){return ad(8390656,8,e,t)}function mv(e,t){return Yu(2048,8,e,t)}function zC(e,t){return Yu(4,2,e,t)}function RC(e,t){return Yu(4,4,e,t)}function _C(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function BC(e,t,n){return n=n!=null?n.concat([e]):null,Yu(4,4,_C.bind(null,t,e),n)}function hv(){}function $C(e,t){var n=Yn();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&dv(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function UC(e,t){var n=Yn();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&dv(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function WC(e,t,n){return Ni&21?(pa(n,t)||(n=GN(),rt.lanes|=n,Ci|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yn=!0),e.memoizedState=n)}function LM(e,t){var n=Ke;Ke=n!==0&&4>n?n:4,e(!0);var a=Dm.transition;Dm.transition={};try{e(!1),t()}finally{Ke=n,Dm.transition=a}}function qC(){return Yn().memoizedState}function MM(e,t,n){var a=Ds(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},HC(e))KC(t,n);else if(n=kC(e,t,n,a),n!==null){var i=on();da(n,e,a,i),VC(n,t,a)}}function DM(e,t,n){var a=Ds(e),i={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(HC(e))KC(t,i);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,l=r(o,n);if(i.hasEagerState=!0,i.eagerState=l,pa(l,o)){var c=t.interleaved;c===null?(i.next=i,iv(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=kC(e,t,i,a),n!==null&&(i=on(),da(n,e,a,i),VC(n,t,a))}}function HC(e){var t=e.alternate;return e===rt||t!==null&&t===rt}function KC(e,t){Do=Dd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function VC(e,t,n){if(n&4194240){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Hg(e,n)}}var Fd={readContext:Gn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},FM={readContext:Gn,useCallback:function(e,t){return xa().memoizedState=[e,t===void 0?null:t],e},useContext:Gn,useEffect:jx,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ad(4194308,4,_C.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ad(4194308,4,e,t)},useInsertionEffect:function(e,t){return ad(4,2,e,t)},useMemo:function(e,t){var n=xa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=xa();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=MM.bind(null,rt,e),[a.memoizedState,e]},useRef:function(e){var t=xa();return e={current:e},t.memoizedState=e},useState:wx,useDebugValue:hv,useDeferredValue:function(e){return xa().memoizedState=e},useTransition:function(){var e=wx(!1),t=e[0];return e=LM.bind(null,e[1]),xa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=rt,i=xa();if(nt){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=t(),_t===null)throw Error(ce(349));Ni&30||IC(a,t,n)}i.memoizedState=n;var r={value:n,getSnapshot:t};return i.queue=r,jx(LC.bind(null,a,r,e),[e]),a.flags|=2048,al(9,OC.bind(null,a,r,n,t),void 0,null),n},useId:function(){var e=xa(),t=_t.identifierPrefix;if(nt){var n=Ba,a=_a;n=(a&~(1<<32-ca(a)-1)).toString(32)+n,t=":"+t+"R"+n,n=tl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=OM++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},zM={readContext:Gn,useCallback:$C,useContext:Gn,useEffect:mv,useImperativeHandle:BC,useInsertionEffect:zC,useLayoutEffect:RC,useMemo:UC,useReducer:Fm,useRef:FC,useState:function(){return Fm(nl)},useDebugValue:hv,useDeferredValue:function(e){var t=Yn();return WC(t,Ct.memoizedState,e)},useTransition:function(){var e=Fm(nl)[0],t=Yn().memoizedState;return[e,t]},useMutableSource:EC,useSyncExternalStore:TC,useId:qC,unstable_isNewReconciler:!1},RM={readContext:Gn,useCallback:$C,useContext:Gn,useEffect:mv,useImperativeHandle:BC,useInsertionEffect:zC,useLayoutEffect:RC,useMemo:UC,useReducer:zm,useRef:FC,useState:function(){return zm(nl)},useDebugValue:hv,useDeferredValue:function(e){var t=Yn();return Ct===null?t.memoizedState=e:WC(t,Ct.memoizedState,e)},useTransition:function(){var e=zm(nl)[0],t=Yn().memoizedState;return[e,t]},useMutableSource:EC,useSyncExternalStore:TC,useId:qC,unstable_isNewReconciler:!1};function aa(e,t){if(e&&e.defaultProps){t=ot({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function sf(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:ot({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Qu={isMounted:function(e){return(e=e._reactInternals)?Fi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=on(),i=Ds(e),r=qa(a,i);r.payload=t,n!=null&&(r.callback=n),t=Ls(e,r,i),t!==null&&(da(t,e,i,a),td(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=on(),i=Ds(e),r=qa(a,i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Ls(e,r,i),t!==null&&(da(t,e,i,a),td(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=on(),a=Ds(e),i=qa(n,a);i.tag=2,t!=null&&(i.callback=t),t=Ls(e,i,a),t!==null&&(da(t,e,a,n),td(t,e,a))}};function Sx(e,t,n,a,i,r,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,r,o):t.prototype&&t.prototype.isPureReactComponent?!Yo(n,a)||!Yo(i,r):!0}function GC(e,t,n){var a=!1,i=Bs,r=t.contextType;return typeof r=="object"&&r!==null?r=Gn(r):(i=Sn(t)?ji:tn.current,a=t.contextTypes,r=(a=a!=null)?yr(e,i):Bs),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qu,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=r),t}function Nx(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Qu.enqueueReplaceState(t,t.state,null)}function rf(e,t,n,a){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},rv(e);var r=t.contextType;typeof r=="object"&&r!==null?i.context=Gn(r):(r=Sn(t)?ji:tn.current,i.context=yr(e,r)),i.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(sf(e,t,r,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Qu.enqueueReplaceState(i,i.state,null),Ld(e,n,i,a),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Sr(e,t){try{var n="",a=t;do n+=pL(a),a=a.return;while(a);var i=n}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:i,digest:null}}function Rm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function of(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var _M=typeof WeakMap=="function"?WeakMap:Map;function YC(e,t,n){n=qa(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Rd||(Rd=!0,vf=a),of(e,t)},n}function QC(e,t,n){n=qa(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var i=t.value;n.payload=function(){return a(i)},n.callback=function(){of(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){of(e,t),typeof a!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Cx(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new _M;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(n)||(i.add(n),e=JM.bind(null,e,t,n),t.then(e,e))}function kx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Px(e,t,n,a,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qa(-1,1),t.tag=2,Ls(n,t,1))),n.lanes|=1),e)}var BM=rs.ReactCurrentOwner,yn=!1;function an(e,t,n,a){t.child=e===null?CC(t,null,n,a):wr(t,e.child,n,a)}function Ax(e,t,n,a,i){n=n.render;var r=t.ref;return mr(t,i),a=uv(e,t,n,a,r,i),n=pv(),e!==null&&!yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qa(e,t,i)):(nt&&n&&Jg(t),t.flags|=1,an(e,t,a,i),t.child)}function Ex(e,t,n,a,i){if(e===null){var r=n.type;return typeof r=="function"&&!jv(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,ZC(e,t,r,a,i)):(e=od(n.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&i)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:Yo,n(o,a)&&e.ref===t.ref)return Qa(e,t,i)}return t.flags|=1,e=Fs(r,a),e.ref=t.ref,e.return=t,t.child=e}function ZC(e,t,n,a,i){if(e!==null){var r=e.memoizedProps;if(Yo(r,a)&&e.ref===t.ref)if(yn=!1,t.pendingProps=a=r,(e.lanes&i)!==0)e.flags&131072&&(yn=!0);else return t.lanes=e.lanes,Qa(e,t,i)}return lf(e,t,n,a,i)}function XC(e,t,n){var a=t.pendingProps,i=a.children,r=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(ir,An),An|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ze(ir,An),An|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=r!==null?r.baseLanes:n,Ze(ir,An),An|=a}else r!==null?(a=r.baseLanes|n,t.memoizedState=null):a=n,Ze(ir,An),An|=a;return an(e,t,i,n),t.child}function JC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function lf(e,t,n,a,i){var r=Sn(n)?ji:tn.current;return r=yr(t,r),mr(t,i),n=uv(e,t,n,a,r,i),a=pv(),e!==null&&!yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qa(e,t,i)):(nt&&a&&Jg(t),t.flags|=1,an(e,t,n,i),t.child)}function Tx(e,t,n,a,i){if(Sn(n)){var r=!0;Ad(t)}else r=!1;if(mr(t,i),t.stateNode===null)sd(e,t),GC(t,n,a),rf(t,n,a,i),a=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Gn(d):(d=Sn(n)?ji:tn.current,d=yr(t,d));var u=n.getDerivedStateFromProps,p=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==a||c!==d)&&Nx(t,o,a,d),xs=!1;var h=t.memoizedState;o.state=h,Ld(t,a,o,i),c=t.memoizedState,l!==a||h!==c||jn.current||xs?(typeof u=="function"&&(sf(t,n,u,a),c=t.memoizedState),(l=xs||Sx(t,n,l,a,h,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),o.props=a,o.state=c,o.context=d,a=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,PC(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:aa(t.type,l),o.props=d,p=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Gn(c):(c=Sn(n)?ji:tn.current,c=yr(t,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||h!==c)&&Nx(t,o,a,c),xs=!1,h=t.memoizedState,o.state=h,Ld(t,a,o,i);var g=t.memoizedState;l!==p||h!==g||jn.current||xs?(typeof f=="function"&&(sf(t,n,f,a),g=t.memoizedState),(d=xs||Sx(t,n,d,a,h,g,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=g),o.props=a,o.state=g,o.context=c,a=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return cf(e,t,n,a,r,i)}function cf(e,t,n,a,i,r){JC(e,t);var o=(t.flags&128)!==0;if(!a&&!o)return i&&fx(t,n,!1),Qa(e,t,r);a=t.stateNode,BM.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=wr(t,e.child,null,r),t.child=wr(t,null,l,r)):an(e,t,l,r),t.memoizedState=a.state,i&&fx(t,n,!0),t.child}function ek(e){var t=e.stateNode;t.pendingContext?hx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hx(e,t.context,!1),ov(e,t.containerInfo)}function Ix(e,t,n,a,i){return xr(),tv(i),t.flags|=256,an(e,t,n,a),t.child}var df={dehydrated:null,treeContext:null,retryLane:0};function uf(e){return{baseLanes:e,cachePool:null,transitions:null}}function tk(e,t,n){var a=t.pendingProps,i=it.current,r=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ze(it,i&1),e===null)return nf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,r?(a=t.mode,r=t.child,o={mode:"hidden",children:o},!(a&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Ju(o,a,0,null),e=gi(e,a,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=uf(n),t.memoizedState=df,e):fv(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return $M(e,t,o,a,l,i,n);if(r){r=a.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:a.children};return!(o&1)&&t.child!==i?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=Fs(i,c),a.subtreeFlags=i.subtreeFlags&14680064),l!==null?r=Fs(l,r):(r=gi(r,o,n,null),r.flags|=2),r.return=t,a.return=t,a.sibling=r,t.child=a,a=r,r=t.child,o=e.child.memoizedState,o=o===null?uf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=e.childLanes&~n,t.memoizedState=df,a}return r=e.child,e=r.sibling,a=Fs(r,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=n),a.return=t,a.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function fv(e,t){return t=Ju({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wc(e,t,n,a){return a!==null&&tv(a),wr(t,e.child,null,n),e=fv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $M(e,t,n,a,i,r,o){if(n)return t.flags&256?(t.flags&=-257,a=Rm(Error(ce(422))),wc(e,t,o,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=a.fallback,i=t.mode,a=Ju({mode:"visible",children:a.children},i,0,null),r=gi(r,i,o,null),r.flags|=2,a.return=t,r.return=t,a.sibling=r,t.child=a,t.mode&1&&wr(t,e.child,null,o),t.child.memoizedState=uf(o),t.memoizedState=df,r);if(!(t.mode&1))return wc(e,t,o,null);if(i.data==="$!"){if(a=i.nextSibling&&i.nextSibling.dataset,a)var l=a.dgst;return a=l,r=Error(ce(419)),a=Rm(r,a,void 0),wc(e,t,o,a)}if(l=(o&e.childLanes)!==0,yn||l){if(a=_t,a!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(a.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Ya(e,i),da(a,e,i,-1))}return wv(),a=Rm(Error(ce(421))),wc(e,t,o,a)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=eD.bind(null,e),i._reactRetry=t,null):(e=r.treeContext,In=Os(i.nextSibling),Ln=t,nt=!0,ia=null,e!==null&&(Wn[qn++]=_a,Wn[qn++]=Ba,Wn[qn++]=Si,_a=e.id,Ba=e.overflow,Si=t),t=fv(t,a.children),t.flags|=4096,t)}function Ox(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),af(e.return,t,n)}function _m(e,t,n,a,i){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=n,r.tailMode=i)}function nk(e,t,n){var a=t.pendingProps,i=a.revealOrder,r=a.tail;if(an(e,t,a.children,n),a=it.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ox(e,n,t);else if(e.tag===19)Ox(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ze(it,a),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Md(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),_m(t,!1,i,n,r);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Md(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}_m(t,!0,n,null,r);break;case"together":_m(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ci|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,n=Fs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Fs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function UM(e,t,n){switch(t.tag){case 3:ek(t),xr();break;case 5:AC(t);break;case 1:Sn(t.type)&&Ad(t);break;case 4:ov(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,i=t.memoizedProps.value;Ze(Id,a._currentValue),a._currentValue=i;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Ze(it,it.current&1),t.flags|=128,null):n&t.child.childLanes?tk(e,t,n):(Ze(it,it.current&1),e=Qa(e,t,n),e!==null?e.sibling:null);Ze(it,it.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&128){if(a)return nk(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ze(it,it.current),a)break;return null;case 22:case 23:return t.lanes=0,XC(e,t,n)}return Qa(e,t,n)}var ak,pf,sk,ik;ak=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pf=function(){};sk=function(e,t,n,a){var i=e.memoizedProps;if(i!==a){e=t.stateNode,ci(ka.current);var r=null;switch(n){case"input":i=Lh(e,i),a=Lh(e,a),r=[];break;case"select":i=ot({},i,{value:void 0}),a=ot({},a,{value:void 0}),r=[];break;case"textarea":i=Fh(e,i),a=Fh(e,a),r=[];break;default:typeof i.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=kd)}Rh(n,a);var o;n=null;for(d in i)if(!a.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Uo.hasOwnProperty(d)?r||(r=[]):(r=r||[]).push(d,null));for(d in a){var c=a[d];if(l=i!=null?i[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(r||(r=[]),r.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Xe("scroll",e),r||l===c||(r=[])):(r=r||[]).push(d,c))}n&&(r=r||[]).push("style",n);var d=r;(t.updateQueue=d)&&(t.flags|=4)}};ik=function(e,t,n,a){n!==a&&(t.flags|=4)};function ro(e,t){if(!nt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags&14680064,a|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function WM(e,t,n){var a=t.pendingProps;switch(ev(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(t),null;case 1:return Sn(t.type)&&Pd(),Zt(t),null;case 3:return a=t.stateNode,jr(),et(jn),et(tn),cv(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(yc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ia!==null&&(xf(ia),ia=null))),pf(e,t),Zt(t),null;case 5:lv(t);var i=ci(el.current);if(n=t.type,e!==null&&t.stateNode!=null)sk(e,t,n,a,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(ce(166));return Zt(t),null}if(e=ci(ka.current),yc(t)){a=t.stateNode,n=t.type;var r=t.memoizedProps;switch(a[ja]=t,a[Xo]=r,e=(t.mode&1)!==0,n){case"dialog":Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":case"embed":Xe("load",a);break;case"video":case"audio":for(i=0;i<Po.length;i++)Xe(Po[i],a);break;case"source":Xe("error",a);break;case"img":case"image":case"link":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"input":$y(a,r),Xe("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!r.multiple},Xe("invalid",a);break;case"textarea":Wy(a,r),Xe("invalid",a)}Rh(n,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?a.textContent!==l&&(r.suppressHydrationWarning!==!0&&bc(a.textContent,l,e),i=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&bc(a.textContent,l,e),i=["children",""+l]):Uo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Xe("scroll",a)}switch(n){case"input":dc(a),Uy(a,r,!0);break;case"textarea":dc(a),qy(a);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(a.onclick=kd)}a=i,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=LN(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(n,{is:a.is}):(e=o.createElement(n),n==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,n),e[ja]=t,e[Xo]=a,ak(e,t,!1,!1),t.stateNode=e;e:{switch(o=_h(n,a),n){case"dialog":Xe("cancel",e),Xe("close",e),i=a;break;case"iframe":case"object":case"embed":Xe("load",e),i=a;break;case"video":case"audio":for(i=0;i<Po.length;i++)Xe(Po[i],e);i=a;break;case"source":Xe("error",e),i=a;break;case"img":case"image":case"link":Xe("error",e),Xe("load",e),i=a;break;case"details":Xe("toggle",e),i=a;break;case"input":$y(e,a),i=Lh(e,a),Xe("invalid",e);break;case"option":i=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},i=ot({},a,{value:void 0}),Xe("invalid",e);break;case"textarea":Wy(e,a),i=Fh(e,a),Xe("invalid",e);break;default:i=a}Rh(n,i),l=i;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?FN(e,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&MN(e,c)):r==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Wo(e,c):typeof c=="number"&&Wo(e,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Uo.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Xe("scroll",e):c!=null&&_g(e,r,c,o))}switch(n){case"input":dc(e),Uy(e,a,!1);break;case"textarea":dc(e),qy(e);break;case"option":a.value!=null&&e.setAttribute("value",""+_s(a.value));break;case"select":e.multiple=!!a.multiple,r=a.value,r!=null?cr(e,!!a.multiple,r,!1):a.defaultValue!=null&&cr(e,!!a.multiple,a.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=kd)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zt(t),null;case 6:if(e&&t.stateNode!=null)ik(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(ce(166));if(n=ci(el.current),ci(ka.current),yc(t)){if(a=t.stateNode,n=t.memoizedProps,a[ja]=t,(r=a.nodeValue!==n)&&(e=Ln,e!==null))switch(e.tag){case 3:bc(a.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bc(a.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[ja]=t,t.stateNode=a}return Zt(t),null;case 13:if(et(it),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nt&&In!==null&&t.mode&1&&!(t.flags&128))SC(),xr(),t.flags|=98560,r=!1;else if(r=yc(t),a!==null&&a.dehydrated!==null){if(e===null){if(!r)throw Error(ce(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ce(317));r[ja]=t}else xr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zt(t),r=!1}else ia!==null&&(xf(ia),ia=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||it.current&1?Pt===0&&(Pt=3):wv())),t.updateQueue!==null&&(t.flags|=4),Zt(t),null);case 4:return jr(),pf(e,t),e===null&&Qo(t.stateNode.containerInfo),Zt(t),null;case 10:return sv(t.type._context),Zt(t),null;case 17:return Sn(t.type)&&Pd(),Zt(t),null;case 19:if(et(it),r=t.memoizedState,r===null)return Zt(t),null;if(a=(t.flags&128)!==0,o=r.rendering,o===null)if(a)ro(r,!1);else{if(Pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Md(e),o!==null){for(t.flags|=128,ro(r,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;n!==null;)r=n,e=a,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,e=o.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ze(it,it.current&1|2),t.child}e=e.sibling}r.tail!==null&&gt()>Nr&&(t.flags|=128,a=!0,ro(r,!1),t.lanes=4194304)}else{if(!a)if(e=Md(o),e!==null){if(t.flags|=128,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ro(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!nt)return Zt(t),null}else 2*gt()-r.renderingStartTime>Nr&&n!==1073741824&&(t.flags|=128,a=!0,ro(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(n=r.last,n!==null?n.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=gt(),t.sibling=null,n=it.current,Ze(it,a?n&1|2:n&1),t):(Zt(t),null);case 22:case 23:return xv(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?An&1073741824&&(Zt(t),t.subtreeFlags&6&&(t.flags|=8192)):Zt(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function qM(e,t){switch(ev(t),t.tag){case 1:return Sn(t.type)&&Pd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jr(),et(jn),et(tn),cv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return lv(t),null;case 13:if(et(it),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));xr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(it),null;case 4:return jr(),null;case 10:return sv(t.type._context),null;case 22:case 23:return xv(),null;case 24:return null;default:return null}}var jc=!1,Jt=!1,HM=typeof WeakSet=="function"?WeakSet:Set,ge=null;function sr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){ut(e,t,a)}else n.current=null}function mf(e,t,n){try{n()}catch(a){ut(e,t,a)}}var Lx=!1;function KM(e,t){if(Yh=Sd,e=dC(),Xg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var i=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,p=e,h=null;t:for(;;){for(var f;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==r||a!==0&&p.nodeType!==3||(c=o+a),p.nodeType===3&&(o+=p.nodeValue.length),(f=p.firstChild)!==null;)h=p,p=f;for(;;){if(p===e)break t;if(h===n&&++d===i&&(l=o),h===r&&++u===a&&(c=o),(f=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qh={focusedElem:e,selectionRange:n},Sd=!1,ge=t;ge!==null;)if(t=ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ge=e;else for(;ge!==null;){t=ge;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,b=t.stateNode,x=b.getSnapshotBeforeUpdate(t.elementType===t.type?v:aa(t.type,v),y);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(j){ut(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,ge=e;break}ge=t.return}return g=Lx,Lx=!1,g}function Fo(e,t,n){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var i=a=a.next;do{if((i.tag&e)===e){var r=i.destroy;i.destroy=void 0,r!==void 0&&mf(t,n,r)}i=i.next}while(i!==a)}}function Zu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function hf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function rk(e){var t=e.alternate;t!==null&&(e.alternate=null,rk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ja],delete t[Xo],delete t[Jh],delete t[AM],delete t[EM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ok(e){return e.tag===5||e.tag===3||e.tag===4}function Mx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ok(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ff(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=kd));else if(a!==4&&(e=e.child,e!==null))for(ff(e,t,n),e=e.sibling;e!==null;)ff(e,t,n),e=e.sibling}function gf(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(gf(e,t,n),e=e.sibling;e!==null;)gf(e,t,n),e=e.sibling}var Ht=null,sa=!1;function hs(e,t,n){for(n=n.child;n!==null;)lk(e,t,n),n=n.sibling}function lk(e,t,n){if(Ca&&typeof Ca.onCommitFiberUnmount=="function")try{Ca.onCommitFiberUnmount(Wu,n)}catch{}switch(n.tag){case 5:Jt||sr(n,t);case 6:var a=Ht,i=sa;Ht=null,hs(e,t,n),Ht=a,sa=i,Ht!==null&&(sa?(e=Ht,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ht.removeChild(n.stateNode));break;case 18:Ht!==null&&(sa?(e=Ht,n=n.stateNode,e.nodeType===8?Om(e.parentNode,n):e.nodeType===1&&Om(e,n),Vo(e)):Om(Ht,n.stateNode));break;case 4:a=Ht,i=sa,Ht=n.stateNode.containerInfo,sa=!0,hs(e,t,n),Ht=a,sa=i;break;case 0:case 11:case 14:case 15:if(!Jt&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){i=a=a.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&mf(n,t,o),i=i.next}while(i!==a)}hs(e,t,n);break;case 1:if(!Jt&&(sr(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(l){ut(n,t,l)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:n.mode&1?(Jt=(a=Jt)||n.memoizedState!==null,hs(e,t,n),Jt=a):hs(e,t,n);break;default:hs(e,t,n)}}function Dx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new HM),t.forEach(function(a){var i=tD.bind(null,e,a);n.has(a)||(n.add(a),a.then(i,i))})}}function na(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var i=n[a];try{var r=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ht=l.stateNode,sa=!1;break e;case 3:Ht=l.stateNode.containerInfo,sa=!0;break e;case 4:Ht=l.stateNode.containerInfo,sa=!0;break e}l=l.return}if(Ht===null)throw Error(ce(160));lk(r,o,i),Ht=null,sa=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){ut(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ck(t,e),t=t.sibling}function ck(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(na(t,e),ya(e),a&4){try{Fo(3,e,e.return),Zu(3,e)}catch(v){ut(e,e.return,v)}try{Fo(5,e,e.return)}catch(v){ut(e,e.return,v)}}break;case 1:na(t,e),ya(e),a&512&&n!==null&&sr(n,n.return);break;case 5:if(na(t,e),ya(e),a&512&&n!==null&&sr(n,n.return),e.flags&32){var i=e.stateNode;try{Wo(i,"")}catch(v){ut(e,e.return,v)}}if(a&4&&(i=e.stateNode,i!=null)){var r=e.memoizedProps,o=n!==null?n.memoizedProps:r,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&IN(i,r),_h(l,o);var d=_h(l,r);for(o=0;o<c.length;o+=2){var u=c[o],p=c[o+1];u==="style"?FN(i,p):u==="dangerouslySetInnerHTML"?MN(i,p):u==="children"?Wo(i,p):_g(i,u,p,d)}switch(l){case"input":Mh(i,r);break;case"textarea":ON(i,r);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?cr(i,!!r.multiple,f,!1):h!==!!r.multiple&&(r.defaultValue!=null?cr(i,!!r.multiple,r.defaultValue,!0):cr(i,!!r.multiple,r.multiple?[]:"",!1))}i[Xo]=r}catch(v){ut(e,e.return,v)}}break;case 6:if(na(t,e),ya(e),a&4){if(e.stateNode===null)throw Error(ce(162));i=e.stateNode,r=e.memoizedProps;try{i.nodeValue=r}catch(v){ut(e,e.return,v)}}break;case 3:if(na(t,e),ya(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Vo(t.containerInfo)}catch(v){ut(e,e.return,v)}break;case 4:na(t,e),ya(e);break;case 13:na(t,e),ya(e),i=e.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(bv=gt())),a&4&&Dx(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Jt=(d=Jt)||u,na(t,e),Jt=d):na(t,e),ya(e),a&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(ge=e,u=e.child;u!==null;){for(p=ge=u;ge!==null;){switch(h=ge,f=h.child,h.tag){case 0:case 11:case 14:case 15:Fo(4,h,h.return);break;case 1:sr(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){a=h,n=h.return;try{t=a,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){ut(a,n,v)}}break;case 5:sr(h,h.return);break;case 22:if(h.memoizedState!==null){zx(p);continue}}f!==null?(f.return=h,ge=f):zx(p)}u=u.sibling}e:for(u=null,p=e;;){if(p.tag===5){if(u===null){u=p;try{i=p.stateNode,d?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=DN("display",o))}catch(v){ut(e,e.return,v)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(v){ut(e,e.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:na(t,e),ya(e),a&4&&Dx(e);break;case 21:break;default:na(t,e),ya(e)}}function ya(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ok(n)){var a=n;break e}n=n.return}throw Error(ce(160))}switch(a.tag){case 5:var i=a.stateNode;a.flags&32&&(Wo(i,""),a.flags&=-33);var r=Mx(e);gf(e,r,i);break;case 3:case 4:var o=a.stateNode.containerInfo,l=Mx(e);ff(e,l,o);break;default:throw Error(ce(161))}}catch(c){ut(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function VM(e,t,n){ge=e,dk(e)}function dk(e,t,n){for(var a=(e.mode&1)!==0;ge!==null;){var i=ge,r=i.child;if(i.tag===22&&a){var o=i.memoizedState!==null||jc;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Jt;l=jc;var d=Jt;if(jc=o,(Jt=c)&&!d)for(ge=i;ge!==null;)o=ge,c=o.child,o.tag===22&&o.memoizedState!==null?Rx(i):c!==null?(c.return=o,ge=c):Rx(i);for(;r!==null;)ge=r,dk(r),r=r.sibling;ge=i,jc=l,Jt=d}Fx(e)}else i.subtreeFlags&8772&&r!==null?(r.return=i,ge=r):Fx(e)}}function Fx(e){for(;ge!==null;){var t=ge;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Jt||Zu(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Jt)if(n===null)a.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:aa(t.type,n.memoizedProps);a.componentDidUpdate(i,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&xx(t,r,a);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xx(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&Vo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Jt||t.flags&512&&hf(t)}catch(h){ut(t,t.return,h)}}if(t===e){ge=null;break}if(n=t.sibling,n!==null){n.return=t.return,ge=n;break}ge=t.return}}function zx(e){for(;ge!==null;){var t=ge;if(t===e){ge=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ge=n;break}ge=t.return}}function Rx(e){for(;ge!==null;){var t=ge;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zu(4,t)}catch(c){ut(t,n,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var i=t.return;try{a.componentDidMount()}catch(c){ut(t,i,c)}}var r=t.return;try{hf(t)}catch(c){ut(t,r,c)}break;case 5:var o=t.return;try{hf(t)}catch(c){ut(t,o,c)}}}catch(c){ut(t,t.return,c)}if(t===e){ge=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ge=l;break}ge=t.return}}var GM=Math.ceil,zd=rs.ReactCurrentDispatcher,gv=rs.ReactCurrentOwner,Vn=rs.ReactCurrentBatchConfig,Fe=0,_t=null,xt=null,Vt=0,An=0,ir=Hs(0),Pt=0,sl=null,Ci=0,Xu=0,vv=0,zo=null,bn=null,bv=0,Nr=1/0,La=null,Rd=!1,vf=null,Ms=null,Sc=!1,Ps=null,_d=0,Ro=0,bf=null,id=-1,rd=0;function on(){return Fe&6?gt():id!==-1?id:id=gt()}function Ds(e){return e.mode&1?Fe&2&&Vt!==0?Vt&-Vt:IM.transition!==null?(rd===0&&(rd=GN()),rd):(e=Ke,e!==0||(e=window.event,e=e===void 0?16:tC(e.type)),e):1}function da(e,t,n,a){if(50<Ro)throw Ro=0,bf=null,Error(ce(185));Pl(e,n,a),(!(Fe&2)||e!==_t)&&(e===_t&&(!(Fe&2)&&(Xu|=n),Pt===4&&Ns(e,Vt)),Nn(e,a),n===1&&Fe===0&&!(t.mode&1)&&(Nr=gt()+500,Gu&&Ks()))}function Nn(e,t){var n=e.callbackNode;IL(e,t);var a=jd(e,e===_t?Vt:0);if(a===0)n!==null&&Vy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(n!=null&&Vy(n),t===1)e.tag===0?TM(_x.bind(null,e)):xC(_x.bind(null,e)),kM(function(){!(Fe&6)&&Ks()}),n=null;else{switch(YN(a)){case 1:n=qg;break;case 4:n=KN;break;case 16:n=wd;break;case 536870912:n=VN;break;default:n=wd}n=bk(n,uk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uk(e,t){if(id=-1,rd=0,Fe&6)throw Error(ce(327));var n=e.callbackNode;if(hr()&&e.callbackNode!==n)return null;var a=jd(e,e===_t?Vt:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Bd(e,a);else{t=a;var i=Fe;Fe|=2;var r=mk();(_t!==e||Vt!==t)&&(La=null,Nr=gt()+500,fi(e,t));do try{ZM();break}catch(l){pk(e,l)}while(!0);av(),zd.current=r,Fe=i,xt!==null?t=0:(_t=null,Vt=0,t=Pt)}if(t!==0){if(t===2&&(i=qh(e),i!==0&&(a=i,t=yf(e,i))),t===1)throw n=sl,fi(e,0),Ns(e,a),Nn(e,gt()),n;if(t===6)Ns(e,a);else{if(i=e.current.alternate,!(a&30)&&!YM(i)&&(t=Bd(e,a),t===2&&(r=qh(e),r!==0&&(a=r,t=yf(e,r))),t===1))throw n=sl,fi(e,0),Ns(e,a),Nn(e,gt()),n;switch(e.finishedWork=i,e.finishedLanes=a,t){case 0:case 1:throw Error(ce(345));case 2:ni(e,bn,La);break;case 3:if(Ns(e,a),(a&130023424)===a&&(t=bv+500-gt(),10<t)){if(jd(e,0)!==0)break;if(i=e.suspendedLanes,(i&a)!==a){on(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Xh(ni.bind(null,e,bn,La),t);break}ni(e,bn,La);break;case 4:if(Ns(e,a),(a&4194240)===a)break;for(t=e.eventTimes,i=-1;0<a;){var o=31-ca(a);r=1<<o,o=t[o],o>i&&(i=o),a&=~r}if(a=i,a=gt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*GM(a/1960))-a,10<a){e.timeoutHandle=Xh(ni.bind(null,e,bn,La),a);break}ni(e,bn,La);break;case 5:ni(e,bn,La);break;default:throw Error(ce(329))}}}return Nn(e,gt()),e.callbackNode===n?uk.bind(null,e):null}function yf(e,t){var n=zo;return e.current.memoizedState.isDehydrated&&(fi(e,t).flags|=256),e=Bd(e,t),e!==2&&(t=bn,bn=n,t!==null&&xf(t)),e}function xf(e){bn===null?bn=e:bn.push.apply(bn,e)}function YM(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var i=n[a],r=i.getSnapshot;i=i.value;try{if(!pa(r(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ns(e,t){for(t&=~vv,t&=~Xu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ca(t),a=1<<n;e[n]=-1,t&=~a}}function _x(e){if(Fe&6)throw Error(ce(327));hr();var t=jd(e,0);if(!(t&1))return Nn(e,gt()),null;var n=Bd(e,t);if(e.tag!==0&&n===2){var a=qh(e);a!==0&&(t=a,n=yf(e,a))}if(n===1)throw n=sl,fi(e,0),Ns(e,t),Nn(e,gt()),n;if(n===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ni(e,bn,La),Nn(e,gt()),null}function yv(e,t){var n=Fe;Fe|=1;try{return e(t)}finally{Fe=n,Fe===0&&(Nr=gt()+500,Gu&&Ks())}}function ki(e){Ps!==null&&Ps.tag===0&&!(Fe&6)&&hr();var t=Fe;Fe|=1;var n=Vn.transition,a=Ke;try{if(Vn.transition=null,Ke=1,e)return e()}finally{Ke=a,Vn.transition=n,Fe=t,!(Fe&6)&&Ks()}}function xv(){An=ir.current,et(ir)}function fi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,CM(n)),xt!==null)for(n=xt.return;n!==null;){var a=n;switch(ev(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Pd();break;case 3:jr(),et(jn),et(tn),cv();break;case 5:lv(a);break;case 4:jr();break;case 13:et(it);break;case 19:et(it);break;case 10:sv(a.type._context);break;case 22:case 23:xv()}n=n.return}if(_t=e,xt=e=Fs(e.current,null),Vt=An=t,Pt=0,sl=null,vv=Xu=Ci=0,bn=zo=null,li!==null){for(t=0;t<li.length;t++)if(n=li[t],a=n.interleaved,a!==null){n.interleaved=null;var i=a.next,r=n.pending;if(r!==null){var o=r.next;r.next=i,a.next=o}n.pending=a}li=null}return e}function pk(e,t){do{var n=xt;try{if(av(),nd.current=Fd,Dd){for(var a=rt.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Dd=!1}if(Ni=0,zt=Ct=rt=null,Do=!1,tl=0,gv.current=null,n===null||n.return===null){Pt=1,sl=t,xt=null;break}e:{var r=e,o=n.return,l=n,c=t;if(t=Vt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=kx(o);if(f!==null){f.flags&=-257,Px(f,o,l,r,t),f.mode&1&&Cx(r,d,t),t=f,c=d;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){Cx(r,d,t),wv();break e}c=Error(ce(426))}}else if(nt&&l.mode&1){var y=kx(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Px(y,o,l,r,t),tv(Sr(c,l));break e}}r=c=Sr(c,l),Pt!==4&&(Pt=2),zo===null?zo=[r]:zo.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var b=YC(r,c,t);yx(r,b);break e;case 1:l=c;var x=r.type,w=r.stateNode;if(!(r.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ms===null||!Ms.has(w)))){r.flags|=65536,t&=-t,r.lanes|=t;var j=QC(r,l,t);yx(r,j);break e}}r=r.return}while(r!==null)}fk(n)}catch(S){t=S,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function mk(){var e=zd.current;return zd.current=Fd,e===null?Fd:e}function wv(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),_t===null||!(Ci&268435455)&&!(Xu&268435455)||Ns(_t,Vt)}function Bd(e,t){var n=Fe;Fe|=2;var a=mk();(_t!==e||Vt!==t)&&(La=null,fi(e,t));do try{QM();break}catch(i){pk(e,i)}while(!0);if(av(),Fe=n,zd.current=a,xt!==null)throw Error(ce(261));return _t=null,Vt=0,Pt}function QM(){for(;xt!==null;)hk(xt)}function ZM(){for(;xt!==null&&!jL();)hk(xt)}function hk(e){var t=vk(e.alternate,e,An);e.memoizedProps=e.pendingProps,t===null?fk(e):xt=t,gv.current=null}function fk(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=qM(n,t),n!==null){n.flags&=32767,xt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pt=6,xt=null;return}}else if(n=WM(n,t,An),n!==null){xt=n;return}if(t=t.sibling,t!==null){xt=t;return}xt=t=e}while(t!==null);Pt===0&&(Pt=5)}function ni(e,t,n){var a=Ke,i=Vn.transition;try{Vn.transition=null,Ke=1,XM(e,t,n,a)}finally{Vn.transition=i,Ke=a}return null}function XM(e,t,n,a){do hr();while(Ps!==null);if(Fe&6)throw Error(ce(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(OL(e,r),e===_t&&(xt=_t=null,Vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sc||(Sc=!0,bk(wd,function(){return hr(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Vn.transition,Vn.transition=null;var o=Ke;Ke=1;var l=Fe;Fe|=4,gv.current=null,KM(e,n),ck(n,e),bM(Qh),Sd=!!Yh,Qh=Yh=null,e.current=n,VM(n),SL(),Fe=l,Ke=o,Vn.transition=r}else e.current=n;if(Sc&&(Sc=!1,Ps=e,_d=i),r=e.pendingLanes,r===0&&(Ms=null),kL(n.stateNode),Nn(e,gt()),t!==null)for(a=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],a(i.value,{componentStack:i.stack,digest:i.digest});if(Rd)throw Rd=!1,e=vf,vf=null,e;return _d&1&&e.tag!==0&&hr(),r=e.pendingLanes,r&1?e===bf?Ro++:(Ro=0,bf=e):Ro=0,Ks(),null}function hr(){if(Ps!==null){var e=YN(_d),t=Vn.transition,n=Ke;try{if(Vn.transition=null,Ke=16>e?16:e,Ps===null)var a=!1;else{if(e=Ps,Ps=null,_d=0,Fe&6)throw Error(ce(331));var i=Fe;for(Fe|=4,ge=e.current;ge!==null;){var r=ge,o=r.child;if(ge.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ge=d;ge!==null;){var u=ge;switch(u.tag){case 0:case 11:case 15:Fo(8,u,r)}var p=u.child;if(p!==null)p.return=u,ge=p;else for(;ge!==null;){u=ge;var h=u.sibling,f=u.return;if(rk(u),u===d){ge=null;break}if(h!==null){h.return=f,ge=h;break}ge=f}}}var g=r.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}ge=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,ge=o;else e:for(;ge!==null;){if(r=ge,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Fo(9,r,r.return)}var b=r.sibling;if(b!==null){b.return=r.return,ge=b;break e}ge=r.return}}var x=e.current;for(ge=x;ge!==null;){o=ge;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ge=w;else e:for(o=x;ge!==null;){if(l=ge,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zu(9,l)}}catch(S){ut(l,l.return,S)}if(l===o){ge=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,ge=j;break e}ge=l.return}}if(Fe=i,Ks(),Ca&&typeof Ca.onPostCommitFiberRoot=="function")try{Ca.onPostCommitFiberRoot(Wu,e)}catch{}a=!0}return a}finally{Ke=n,Vn.transition=t}}return!1}function Bx(e,t,n){t=Sr(n,t),t=YC(e,t,1),e=Ls(e,t,1),t=on(),e!==null&&(Pl(e,1,t),Nn(e,t))}function ut(e,t,n){if(e.tag===3)Bx(e,e,n);else for(;t!==null;){if(t.tag===3){Bx(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ms===null||!Ms.has(a))){e=Sr(n,e),e=QC(t,e,1),t=Ls(t,e,1),e=on(),t!==null&&(Pl(t,1,e),Nn(t,e));break}}t=t.return}}function JM(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=on(),e.pingedLanes|=e.suspendedLanes&n,_t===e&&(Vt&n)===n&&(Pt===4||Pt===3&&(Vt&130023424)===Vt&&500>gt()-bv?fi(e,0):vv|=n),Nn(e,t)}function gk(e,t){t===0&&(e.mode&1?(t=mc,mc<<=1,!(mc&130023424)&&(mc=4194304)):t=1);var n=on();e=Ya(e,t),e!==null&&(Pl(e,t,n),Nn(e,n))}function eD(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gk(e,n)}function tD(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(ce(314))}a!==null&&a.delete(t),gk(e,n)}var vk;vk=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||jn.current)yn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yn=!1,UM(e,t,n);yn=!!(e.flags&131072)}else yn=!1,nt&&t.flags&1048576&&wC(t,Td,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;sd(e,t),e=t.pendingProps;var i=yr(t,tn.current);mr(t,n),i=uv(null,t,a,e,i,n);var r=pv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sn(a)?(r=!0,Ad(t)):r=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rv(t),i.updater=Qu,t.stateNode=i,i._reactInternals=t,rf(t,a,e,n),t=cf(null,t,a,!0,r,n)):(t.tag=0,nt&&r&&Jg(t),an(null,t,i,n),t=t.child),t;case 16:a=t.elementType;e:{switch(sd(e,t),e=t.pendingProps,i=a._init,a=i(a._payload),t.type=a,i=t.tag=aD(a),e=aa(a,e),i){case 0:t=lf(null,t,a,e,n);break e;case 1:t=Tx(null,t,a,e,n);break e;case 11:t=Ax(null,t,a,e,n);break e;case 14:t=Ex(null,t,a,aa(a.type,e),n);break e}throw Error(ce(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:aa(a,i),lf(e,t,a,i,n);case 1:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:aa(a,i),Tx(e,t,a,i,n);case 3:e:{if(ek(t),e===null)throw Error(ce(387));a=t.pendingProps,r=t.memoizedState,i=r.element,PC(e,t),Ld(t,a,null,n);var o=t.memoizedState;if(a=o.element,r.isDehydrated)if(r={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){i=Sr(Error(ce(423)),t),t=Ix(e,t,a,n,i);break e}else if(a!==i){i=Sr(Error(ce(424)),t),t=Ix(e,t,a,n,i);break e}else for(In=Os(t.stateNode.containerInfo.firstChild),Ln=t,nt=!0,ia=null,n=CC(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xr(),a===i){t=Qa(e,t,n);break e}an(e,t,a,n)}t=t.child}return t;case 5:return AC(t),e===null&&nf(t),a=t.type,i=t.pendingProps,r=e!==null?e.memoizedProps:null,o=i.children,Zh(a,i)?o=null:r!==null&&Zh(a,r)&&(t.flags|=32),JC(e,t),an(e,t,o,n),t.child;case 6:return e===null&&nf(t),null;case 13:return tk(e,t,n);case 4:return ov(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=wr(t,null,a,n):an(e,t,a,n),t.child;case 11:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:aa(a,i),Ax(e,t,a,i,n);case 7:return an(e,t,t.pendingProps,n),t.child;case 8:return an(e,t,t.pendingProps.children,n),t.child;case 12:return an(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,r=t.memoizedProps,o=i.value,Ze(Id,a._currentValue),a._currentValue=o,r!==null)if(pa(r.value,o)){if(r.children===i.children&&!jn.current){t=Qa(e,t,n);break e}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===a){if(r.tag===1){c=qa(-1,n&-n),c.tag=2;var d=r.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}r.lanes|=n,c=r.alternate,c!==null&&(c.lanes|=n),af(r.return,n,t),l.lanes|=n;break}c=c.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(ce(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),af(o,n,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}an(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,mr(t,n),i=Gn(i),a=a(i),t.flags|=1,an(e,t,a,n),t.child;case 14:return a=t.type,i=aa(a,t.pendingProps),i=aa(a.type,i),Ex(e,t,a,i,n);case 15:return ZC(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:aa(a,i),sd(e,t),t.tag=1,Sn(a)?(e=!0,Ad(t)):e=!1,mr(t,n),GC(t,a,i),rf(t,a,i,n),cf(null,t,a,!0,e,n);case 19:return nk(e,t,n);case 22:return XC(e,t,n)}throw Error(ce(156,t.tag))};function bk(e,t){return HN(e,t)}function nD(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(e,t,n,a){return new nD(e,t,n,a)}function jv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function aD(e){if(typeof e=="function")return jv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$g)return 11;if(e===Ug)return 14}return 2}function Fs(e,t){var n=e.alternate;return n===null?(n=Hn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function od(e,t,n,a,i,r){var o=2;if(a=e,typeof e=="function")jv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Yi:return gi(n.children,i,r,t);case Bg:o=8,i|=8;break;case Eh:return e=Hn(12,n,t,i|2),e.elementType=Eh,e.lanes=r,e;case Th:return e=Hn(13,n,t,i),e.elementType=Th,e.lanes=r,e;case Ih:return e=Hn(19,n,t,i),e.elementType=Ih,e.lanes=r,e;case AN:return Ju(n,i,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kN:o=10;break e;case PN:o=9;break e;case $g:o=11;break e;case Ug:o=14;break e;case ys:o=16,a=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=Hn(o,n,t,i),t.elementType=e,t.type=a,t.lanes=r,t}function gi(e,t,n,a){return e=Hn(7,e,a,t),e.lanes=n,e}function Ju(e,t,n,a){return e=Hn(22,e,a,t),e.elementType=AN,e.lanes=n,e.stateNode={isHidden:!1},e}function Bm(e,t,n){return e=Hn(6,e,null,t),e.lanes=n,e}function $m(e,t,n){return t=Hn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sD(e,t,n,a,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wm(0),this.expirationTimes=wm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wm(0),this.identifierPrefix=a,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Sv(e,t,n,a,i,r,o,l,c){return e=new sD(e,t,n,l,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Hn(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rv(r),e}function iD(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gi,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function yk(e){if(!e)return Bs;e=e._reactInternals;e:{if(Fi(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Sn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var n=e.type;if(Sn(n))return yC(e,n,t)}return t}function xk(e,t,n,a,i,r,o,l,c){return e=Sv(n,a,!0,e,i,r,o,l,c),e.context=yk(null),n=e.current,a=on(),i=Ds(n),r=qa(a,i),r.callback=t??null,Ls(n,r,i),e.current.lanes=i,Pl(e,i,a),Nn(e,a),e}function ep(e,t,n,a){var i=t.current,r=on(),o=Ds(i);return n=yk(n),t.context===null?t.context=n:t.pendingContext=n,t=qa(r,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Ls(i,t,o),e!==null&&(da(e,i,o,r),td(e,i,o)),o}function $d(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $x(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nv(e,t){$x(e,t),(e=e.alternate)&&$x(e,t)}function rD(){return null}var wk=typeof reportError=="function"?reportError:function(e){console.error(e)};function Cv(e){this._internalRoot=e}tp.prototype.render=Cv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));ep(e,t,null,null)};tp.prototype.unmount=Cv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ki(function(){ep(null,e,null,null)}),t[Ga]=null}};function tp(e){this._internalRoot=e}tp.prototype.unstable_scheduleHydration=function(e){if(e){var t=XN();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ss.length&&t!==0&&t<Ss[n].priority;n++);Ss.splice(n,0,e),n===0&&eC(e)}};function kv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function np(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ux(){}function oD(e,t,n,a,i){if(i){if(typeof a=="function"){var r=a;a=function(){var d=$d(o);r.call(d)}}var o=xk(t,a,e,0,null,!1,!1,"",Ux);return e._reactRootContainer=o,e[Ga]=o.current,Qo(e.nodeType===8?e.parentNode:e),ki(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof a=="function"){var l=a;a=function(){var d=$d(c);l.call(d)}}var c=Sv(e,0,!1,null,null,!1,!1,"",Ux);return e._reactRootContainer=c,e[Ga]=c.current,Qo(e.nodeType===8?e.parentNode:e),ki(function(){ep(t,c,n,a)}),c}function ap(e,t,n,a,i){var r=n._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var l=i;i=function(){var c=$d(o);l.call(c)}}ep(t,o,e,i)}else o=oD(n,t,e,i,a);return $d(o)}QN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ko(t.pendingLanes);n!==0&&(Hg(t,n|1),Nn(t,gt()),!(Fe&6)&&(Nr=gt()+500,Ks()))}break;case 13:ki(function(){var a=Ya(e,1);if(a!==null){var i=on();da(a,e,1,i)}}),Nv(e,1)}};Kg=function(e){if(e.tag===13){var t=Ya(e,134217728);if(t!==null){var n=on();da(t,e,134217728,n)}Nv(e,134217728)}};ZN=function(e){if(e.tag===13){var t=Ds(e),n=Ya(e,t);if(n!==null){var a=on();da(n,e,t,a)}Nv(e,t)}};XN=function(){return Ke};JN=function(e,t){var n=Ke;try{return Ke=e,t()}finally{Ke=n}};$h=function(e,t,n){switch(t){case"input":if(Mh(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=Vu(a);if(!i)throw Error(ce(90));TN(a),Mh(a,i)}}}break;case"textarea":ON(e,n);break;case"select":t=n.value,t!=null&&cr(e,!!n.multiple,t,!1)}};_N=yv;BN=ki;var lD={usingClientEntryPoint:!1,Events:[El,Ji,Vu,zN,RN,yv]},oo={findFiberByHostInstance:oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cD={bundleType:oo.bundleType,version:oo.version,rendererPackageName:oo.rendererPackageName,rendererConfig:oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=WN(e),e===null?null:e.stateNode},findFiberByHostInstance:oo.findFiberByHostInstance||rD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{Wu=Nc.inject(cD),Ca=Nc}catch{}}zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lD;zn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kv(t))throw Error(ce(200));return iD(e,t,null,n)};zn.createRoot=function(e,t){if(!kv(e))throw Error(ce(299));var n=!1,a="",i=wk;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Sv(e,1,!1,null,null,n,!1,a,i),e[Ga]=t.current,Qo(e.nodeType===8?e.parentNode:e),new Cv(t)};zn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=WN(t),e=e===null?null:e.stateNode,e};zn.flushSync=function(e){return ki(e)};zn.hydrate=function(e,t,n){if(!np(t))throw Error(ce(200));return ap(null,e,t,!0,n)};zn.hydrateRoot=function(e,t,n){if(!kv(e))throw Error(ce(405));var a=n!=null&&n.hydratedSources||null,i=!1,r="",o=wk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=xk(t,null,e,1,n??null,i,!1,r,o),e[Ga]=t.current,Qo(e),a)for(e=0;e<a.length;e++)n=a[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new tp(t)};zn.render=function(e,t,n){if(!np(t))throw Error(ce(200));return ap(null,e,t,!1,n)};zn.unmountComponentAtNode=function(e){if(!np(e))throw Error(ce(40));return e._reactRootContainer?(ki(function(){ap(null,null,e,!1,function(){e._reactRootContainer=null,e[Ga]=null})}),!0):!1};zn.unstable_batchedUpdates=yv;zn.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!np(n))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return ap(e,t,n,!1,a)};zn.version="18.3.1-next-f1338f8080-20240426";function jk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jk)}catch(e){console.error(e)}}jk(),jN.exports=zn;var sp=jN.exports,Wx=sp;Ph.createRoot=Wx.createRoot,Ph.hydrateRoot=Wx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},il.apply(this,arguments)}var As;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(As||(As={}));const qx="popstate";function dD(e){e===void 0&&(e={});function t(a,i){let{pathname:r,search:o,hash:l}=a.location;return wf("",{pathname:r,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(a,i){return typeof i=="string"?i:Ud(i)}return pD(t,n,null,e)}function vt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Pv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function uD(){return Math.random().toString(36).substr(2,8)}function Hx(e,t){return{usr:e.state,key:e.key,idx:t}}function wf(e,t,n,a){return n===void 0&&(n=null),il({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Br(t):t,{state:n,key:t&&t.key||a||uD()})}function Ud(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Br(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function pD(e,t,n,a){a===void 0&&(a={});let{window:i=document.defaultView,v5Compat:r=!1}=a,o=i.history,l=As.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(il({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function p(){l=As.Pop;let y=u(),b=y==null?null:y-d;d=y,c&&c({action:l,location:v.location,delta:b})}function h(y,b){l=As.Push;let x=wf(v.location,y,b);d=u()+1;let w=Hx(x,d),j=v.createHref(x);try{o.pushState(w,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(j)}r&&c&&c({action:l,location:v.location,delta:1})}function f(y,b){l=As.Replace;let x=wf(v.location,y,b);d=u();let w=Hx(x,d),j=v.createHref(x);o.replaceState(w,"",j),r&&c&&c({action:l,location:v.location,delta:0})}function g(y){let b=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof y=="string"?y:Ud(y);return x=x.replace(/ $/,"%20"),vt(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let v={get action(){return l},get location(){return e(i,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(qx,p),c=y,()=>{i.removeEventListener(qx,p),c=null}},createHref(y){return t(i,y)},createURL:g,encodeLocation(y){let b=g(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:f,go(y){return o.go(y)}};return v}var Kx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Kx||(Kx={}));function mD(e,t,n){return n===void 0&&(n="/"),hD(e,t,n)}function hD(e,t,n,a){let i=typeof t=="string"?Br(t):t,r=Av(i.pathname||"/",n);if(r==null)return null;let o=Sk(e);fD(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=PD(r);l=ND(o[c],d)}return l}function Sk(e,t,n,a){t===void 0&&(t=[]),n===void 0&&(n=[]),a===void 0&&(a="");let i=(r,o,l)=>{let c={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};c.relativePath.startsWith("/")&&(vt(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=zs([a,c.relativePath]),u=n.concat(c);r.children&&r.children.length>0&&(vt(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Sk(r.children,t,u,d)),!(r.path==null&&!r.index)&&t.push({path:d,score:jD(d,r.index),routesMeta:u})};return e.forEach((r,o)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))i(r,o);else for(let c of Nk(r.path))i(r,o,c)}),t}function Nk(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,i=n.endsWith("?"),r=n.replace(/\?$/,"");if(a.length===0)return i?[r,""]:[r];let o=Nk(a.join("/")),l=[];return l.push(...o.map(c=>c===""?r:[r,c].join("/"))),i&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function fD(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:SD(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const gD=/^:[\w-]+$/,vD=3,bD=2,yD=1,xD=10,wD=-2,Vx=e=>e==="*";function jD(e,t){let n=e.split("/"),a=n.length;return n.some(Vx)&&(a+=wD),t&&(a+=bD),n.filter(i=>!Vx(i)).reduce((i,r)=>i+(gD.test(r)?vD:r===""?yD:xD),a)}function SD(e,t){return e.length===t.length&&e.slice(0,-1).every((a,i)=>a===t[i])?e[e.length-1]-t[t.length-1]:0}function ND(e,t,n){let{routesMeta:a}=e,i={},r="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,u=r==="/"?t:t.slice(r.length)||"/",p=CD({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:zs([r,p.pathname]),pathnameBase:OD(zs([r,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(r=zs([r,p.pathnameBase]))}return o}function CD(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=kD(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:a.reduce((d,u,p)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let v=l[p]||"";o=r.slice(0,r.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[p];return f&&!g?d[h]=void 0:d[h]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:r,pathnameBase:o,pattern:e}}function kD(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Pv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),a]}function PD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Pv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Av(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}const AD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ED=e=>AD.test(e);function TD(e,t){t===void 0&&(t="/");let{pathname:n,search:a="",hash:i=""}=typeof e=="string"?Br(e):e,r;if(n)if(ED(n))r=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Pv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?r=Gx(n.substring(1),"/"):r=Gx(n,t)}else r=t;return{pathname:r,search:LD(a),hash:MD(i)}}function Gx(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Um(e,t,n,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ID(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ev(e,t){let n=ID(e);return t?n.map((a,i)=>i===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function Tv(e,t,n,a){a===void 0&&(a=!1);let i;typeof e=="string"?i=Br(e):(i=il({},e),vt(!i.pathname||!i.pathname.includes("?"),Um("?","pathname","search",i)),vt(!i.pathname||!i.pathname.includes("#"),Um("#","pathname","hash",i)),vt(!i.search||!i.search.includes("#"),Um("#","search","hash",i)));let r=e===""||i.pathname==="",o=r?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!a&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),p-=1;i.pathname=h.join("/")}l=p>=0?t[p]:"/"}let c=TD(i,l),d=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const zs=e=>e.join("/").replace(/\/\/+/g,"/"),OD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),LD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,MD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function DD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ck=["post","put","patch","delete"];new Set(Ck);const FD=["get",...Ck];new Set(FD);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rl.apply(this,arguments)}const Iv=m.createContext(null),zD=m.createContext(null),Vs=m.createContext(null),ip=m.createContext(null),Oa=m.createContext({outlet:null,matches:[],isDataRoute:!1}),kk=m.createContext(null);function RD(e,t){let{relative:n}=t===void 0?{}:t;$r()||vt(!1);let{basename:a,navigator:i}=m.useContext(Vs),{hash:r,pathname:o,search:l}=Ak(e,{relative:n}),c=o;return a!=="/"&&(c=o==="/"?a:zs([a,o])),i.createHref({pathname:c,search:l,hash:r})}function $r(){return m.useContext(ip)!=null}function lt(){return $r()||vt(!1),m.useContext(ip).location}function Pk(e){m.useContext(Vs).static||m.useLayoutEffect(e)}function Bt(){let{isDataRoute:e}=m.useContext(Oa);return e?JD():_D()}function _D(){$r()||vt(!1);let e=m.useContext(Iv),{basename:t,future:n,navigator:a}=m.useContext(Vs),{matches:i}=m.useContext(Oa),{pathname:r}=lt(),o=JSON.stringify(Ev(i,n.v7_relativeSplatPath)),l=m.useRef(!1);return Pk(()=>{l.current=!0}),m.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){a.go(d);return}let p=Tv(d,JSON.parse(o),r,u.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:zs([t,p.pathname])),(u.replace?a.replace:a.push)(p,u.state,u)},[t,a,o,r,e])}const BD=m.createContext(null);function $D(e){let t=m.useContext(Oa).outlet;return t&&m.createElement(BD.Provider,{value:e},t)}function St(){let{matches:e}=m.useContext(Oa),t=e[e.length-1];return t?t.params:{}}function Ak(e,t){let{relative:n}=t===void 0?{}:t,{future:a}=m.useContext(Vs),{matches:i}=m.useContext(Oa),{pathname:r}=lt(),o=JSON.stringify(Ev(i,a.v7_relativeSplatPath));return m.useMemo(()=>Tv(e,JSON.parse(o),r,n==="path"),[e,o,r,n])}function UD(e,t){return WD(e,t)}function WD(e,t,n,a){$r()||vt(!1);let{navigator:i}=m.useContext(Vs),{matches:r}=m.useContext(Oa),o=r[r.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=lt(),u;if(t){var p;let y=typeof t=="string"?Br(t):t;c==="/"||(p=y.pathname)!=null&&p.startsWith(c)||vt(!1),u=y}else u=d;let h=u.pathname||"/",f=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=mD(e,{pathname:f}),v=GD(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:zs([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:zs([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),r,n,a);return t&&v?m.createElement(ip.Provider,{value:{location:rl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:As.Pop}},v):v}function qD(){let e=XD(),t=DD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:i},n):null,null)}const HD=m.createElement(qD,null);class KD extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?m.createElement(Oa.Provider,{value:this.props.routeContext},m.createElement(kk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VD(e){let{routeContext:t,match:n,children:a}=e,i=m.useContext(Iv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(Oa.Provider,{value:t},a)}function GD(e,t,n,a){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),a===void 0&&(a=null),e==null){var r;if(!n)return null;if(n.errors)e=n.matches;else if((r=a)!=null&&r.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let u=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);u>=0||vt(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(n&&a&&a.v7_partialHydration)for(let u=0;u<o.length;u++){let p=o[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=u),p.route.id){let{loaderData:h,errors:f}=n,g=p.route.loader&&h[p.route.id]===void 0&&(!f||f[p.route.id]===void 0);if(p.route.lazy||g){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,p,h)=>{let f,g=!1,v=null,y=null;n&&(f=l&&p.route.id?l[p.route.id]:void 0,v=p.route.errorElement||HD,c&&(d<0&&h===0?(eF("route-fallback"),g=!0,y=null):d===h&&(g=!0,y=p.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,h+1)),x=()=>{let w;return f?w=v:g?w=y:p.route.Component?w=m.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=u,m.createElement(VD,{match:p,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:w})};return n&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?m.createElement(KD,{location:n.location,revalidation:n.revalidation,component:v,error:f,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var Ek=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ek||{}),Tk=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Tk||{});function YD(e){let t=m.useContext(Iv);return t||vt(!1),t}function QD(e){let t=m.useContext(zD);return t||vt(!1),t}function ZD(e){let t=m.useContext(Oa);return t||vt(!1),t}function Ik(e){let t=ZD(),n=t.matches[t.matches.length-1];return n.route.id||vt(!1),n.route.id}function XD(){var e;let t=m.useContext(kk),n=QD(),a=Ik();return t!==void 0?t:(e=n.errors)==null?void 0:e[a]}function JD(){let{router:e}=YD(Ek.UseNavigateStable),t=Ik(Tk.UseNavigateStable),n=m.useRef(!1);return Pk(()=>{n.current=!0}),m.useCallback(function(i,r){r===void 0&&(r={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,rl({fromRouteId:t},r)))},[e,t])}const Yx={};function eF(e,t,n){Yx[e]||(Yx[e]=!0)}function tF(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function rp(e){let{to:t,replace:n,state:a,relative:i}=e;$r()||vt(!1);let{future:r,static:o}=m.useContext(Vs),{matches:l}=m.useContext(Oa),{pathname:c}=lt(),d=Bt(),u=Tv(t,Ev(l,r.v7_relativeSplatPath),c,i==="path"),p=JSON.stringify(u);return m.useEffect(()=>d(JSON.parse(p),{replace:n,state:a,relative:i}),[d,p,i,n,a]),null}function Ok(e){return $D(e.context)}function je(e){vt(!1)}function nF(e){let{basename:t="/",children:n=null,location:a,navigationType:i=As.Pop,navigator:r,static:o=!1,future:l}=e;$r()&&vt(!1);let c=t.replace(/^\/*/,"/"),d=m.useMemo(()=>({basename:c,navigator:r,static:o,future:rl({v7_relativeSplatPath:!1},l)}),[c,l,r,o]);typeof a=="string"&&(a=Br(a));let{pathname:u="/",search:p="",hash:h="",state:f=null,key:g="default"}=a,v=m.useMemo(()=>{let y=Av(u,c);return y==null?null:{location:{pathname:y,search:p,hash:h,state:f,key:g},navigationType:i}},[c,u,p,h,f,g,i]);return v==null?null:m.createElement(Vs.Provider,{value:d},m.createElement(ip.Provider,{children:n,value:v}))}function aF(e){let{children:t,location:n}=e;return UD(jf(t),n)}new Promise(()=>{});function jf(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(a,i)=>{if(!m.isValidElement(a))return;let r=[...t,i];if(a.type===m.Fragment){n.push.apply(n,jf(a.props.children,r));return}a.type!==je&&vt(!1),!a.props.index||!a.props.children||vt(!1);let o={id:a.props.id||r.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=jf(a.props.children,r)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sf(){return Sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sf.apply(this,arguments)}function sF(e,t){if(e==null)return{};var n={},a=Object.keys(e),i,r;for(r=0;r<a.length;r++)i=a[r],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function iF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function rF(e,t){return e.button===0&&(!t||t==="_self")&&!iF(e)}function Nf(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let a=e[n];return t.concat(Array.isArray(a)?a.map(i=>[n,i]):[[n,a]])},[]))}function oF(e,t){let n=Nf(e);return t&&t.forEach((a,i)=>{n.has(i)||t.getAll(i).forEach(r=>{n.append(i,r)})}),n}const lF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cF="6";try{window.__reactRouterVersion=cF}catch{}const dF="startTransition",Qx=xN[dF];function uF(e){let{basename:t,children:n,future:a,window:i}=e,r=m.useRef();r.current==null&&(r.current=dD({window:i,v5Compat:!0}));let o=r.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:d}=a||{},u=m.useCallback(p=>{d&&Qx?Qx(()=>c(p)):c(p)},[c,d]);return m.useLayoutEffect(()=>o.listen(u),[o,u]),m.useEffect(()=>tF(a),[a]),m.createElement(nF,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:a})}const pF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,de=m.forwardRef(function(t,n){let{onClick:a,relative:i,reloadDocument:r,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:p}=t,h=sF(t,lF),{basename:f}=m.useContext(Vs),g,v=!1;if(typeof d=="string"&&mF.test(d)&&(g=d,pF))try{let w=new URL(window.location.href),j=d.startsWith("//")?new URL(w.protocol+d):new URL(d),S=Av(j.pathname,f);j.origin===w.origin&&S!=null?d=S+j.search+j.hash:v=!0}catch{}let y=RD(d,{relative:i}),b=hF(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:i,viewTransition:p});function x(w){a&&a(w),w.defaultPrevented||b(w)}return m.createElement("a",Sf({},h,{href:g||y,onClick:v||r?a:x,ref:n,target:c}))});var Zx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Zx||(Zx={}));var Xx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Xx||(Xx={}));function hF(e,t){let{target:n,replace:a,state:i,preventScrollReset:r,relative:o,viewTransition:l}=t===void 0?{}:t,c=Bt(),d=lt(),u=Ak(e,{relative:o});return m.useCallback(p=>{if(rF(p,n)){p.preventDefault();let h=a!==void 0?a:Ud(d)===Ud(u);c(e,{replace:h,state:i,preventScrollReset:r,relative:o,viewTransition:l})}},[d,c,u,a,i,n,e,r,o,l])}function Lk(e){let t=m.useRef(Nf(e)),n=m.useRef(!1),a=lt(),i=m.useMemo(()=>oF(a.search,n.current?null:t.current),[a.search]),r=Bt(),o=m.useCallback((l,c)=>{const d=Nf(typeof l=="function"?l(i):l);n.current=!0,r("?"+d,c)},[r,i]);return[i,o]}const ma="/api";async function cn(e){const t=await e.text();let n;try{n=t?JSON.parse(t):{}}catch{throw new Error("Invalid JSON response from server")}if(!e.ok){let a=`Request failed with status ${e.status}`;if(n&&typeof n=="object"&&"error"in n){const i=n.error;if(typeof i=="string")a=i;else if(i&&typeof i=="object"){const r=Array.isArray(i.formErrors)?i.formErrors:[],o=i.fieldErrors||{},l=Object.values(o).flat().filter(Boolean),c=[...r,...l];c.length>0&&(a=c.join(`
`))}}throw new Error(a)}return n}async function Mk(e){const t=await fetch(`${ma}/bots/live/${encodeURIComponent(e)}`,{credentials:"include"});return cn(t)}async function fF(e,t){const n=await fetch(`${ma}/chat/${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});return cn(n)}const Jx={en:{empty:e=>`Youre chatting with ${e}. Ask anything about their website.`,placeholder:e=>`Ask ${e} a question...`,sending:"Sending...",send:"Send",you:"You",error:"Sorry, there was an error sending your message. Please try again."},it:{empty:e=>`Stai parlando con ${e}. Chiedimi qualsiasi cosa sul loro sito.`,placeholder:e=>`Fai una domanda a ${e}...`,sending:"Invio...",send:"Invia",you:"Tu",error:"Si  verificato un errore nell'invio del messaggio. Per favore riprova."}},Dk=({slug:e,botName:t,lang:n,showPoweredBy:a})=>{let i=(n||"en").toLowerCase();if(!n&&typeof window<"u")try{const A=new URLSearchParams(window.location.search).get("lang");A&&(i=A.toLowerCase())}catch{}const r=Jx[i]??Jx.en,o={view:i==="it"?"Vedi prodotto":i==="es"?"Ver producto":"View product",add:i==="it"?"Aggiungi al carrello":i==="es"?"Agregar al carrito":"Add to cart",cart:i==="it"?"Vedi carrello":i==="es"?"Ver carrito":"View cart"},[l,c]=m.useState([]),[d,u]=m.useState(""),[p,h]=m.useState(null),[f,g]=m.useState(!1),[v,y]=m.useState(null),b=m.useRef(null),[x,w]=m.useState(null),j=()=>{if(typeof window>"u")return null;const C=new URLSearchParams(window.location.search),A=C.get("shop"),_=C.get("botId"),B=C.get("wt");return!A||!_||!B?null:{shopDomain:A,botId:_,widgetToken:B}};m.useEffect(()=>{const C=j();if(C){w(C);return}e&&fetch(`/api/shopify/widget-context?slug=${encodeURIComponent(e)}`).then(A=>A.ok?A.json():null).then(A=>{A&&A.shopDomain&&A.botId&&A.widgetToken&&w({shopDomain:A.shopDomain,botId:A.botId,widgetToken:A.widgetToken})}).catch(()=>{})},[e]);const S=()=>{if(typeof window>"u")return null;const C="coslo_widget_session_id",A=window.sessionStorage.getItem(C);if(A)return A;const _=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`sess_${Date.now()}_${Math.random().toString(16).slice(2)}`;return window.sessionStorage.setItem(C,_),_},k=async(C,A)=>{const _=x||j();if(!_)return;const B=S();try{await fetch("/api/shopify/events",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({shopDomain:_.shopDomain,botId:_.botId,token:_.widgetToken,eventType:C,sessionId:B,conversationId:p,productId:A.productId??void 0,variantId:A.variantId??void 0,meta:A.meta??void 0}),keepalive:!0})}catch{}},T=C=>{const A=/!\[([^\]]*)\]\((https?:\/\/[^)]+)\)/gi,_=[];let B=0,H;for(;(H=A.exec(C))!==null;){const ie=C.slice(B,H.index).trim(),U=ie.split(/\n\s*\n/).filter(Boolean).pop()||ie,G=(H[1]||"").trim(),V=H[2],$=L(F(U)),z=(G||$).split(`
`).map(ne=>ne.trim()).filter(Boolean),ee=z.length>0?z[z.length-1]:"Product",J=ie.split(`
`).map(ne=>ne.trim()).filter(Boolean).slice(-6).join(`
`),X=P(J);_.push({caption:ee,imageUrl:V,rawText:$,productUrl:X.productUrl,addToCartUrl:X.addToCartUrl}),B=A.lastIndex}const Z=C.slice(B).trim();return{segments:_,remainder:Z}},L=C=>C.replace(/\[([^\]]+)\]\((https?:\/\/[^)]+)\)/gi,"$1"),F=C=>C.split(`
`).filter(B=>{const H=B.trim();return!(!H||/^\[.+\]\(https?:\/\/[^)]+\)$/.test(H)||/^https?:\/\/\S+$/.test(H)||/^(view product|add to cart|vedi prodotto|aggiungi al carrello|ver producto|agregar al carrito)$/i.test(H))}).join(`
`),O=C=>C.replace(/https?:\/\/\S+/gi,"").replace(/\s{2,}/g," ").trim(),M=C=>C.replace(/!\[[^\]]*\]\((https?:\/\/[^)]+)\)/gi,"").replace(/\s{2,}/g," ").trim(),P=C=>{const A=C.match(/https?:\/\/[^\s)]+/g)||[];let _=null,B=null,H=null,Z=0,ie=0;for(const U of A){const G=U.replace(/[.,!?]$/,"");G.includes("/cart/add")?(_=G,ie+=1):G.includes("/cart")?B=G:G.includes("/products/")&&(H=G,Z+=1)}return{addToCartUrl:_,cartUrl:B,productUrl:H,productCount:Z,addToCartCount:ie}},D=C=>{if(!C)return null;try{const _=new URL(C).pathname.split("/").filter(Boolean),B=_.indexOf("products");if(B>=0&&_[B+1])return _[B+1]}catch{}return null},E=async C=>{const A=x||j(),_=S();let B=null;try{const Z=new URL(C);if(B=Z.searchParams.get("id"),Z.origin===window.location.origin){const ie=Z.searchParams.get("id"),U=Number(Z.searchParams.get("quantity")||"1");if(ie&&(await k("add_to_cart",{variantId:ie,meta:{method:"ajax_cart"}}),(await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:ie,quantity:U,properties:A&&_?{coslo_session_id:_,coslo_bot_id:A.botId,coslo_conversation_id:p||""}:void 0})})).ok)){const V={id:`system-${Date.now()}`,role:"system",content:"Added to cart."};c($=>[...$,V]);return}}}catch{}try{await k("add_to_cart",{variantId:B,meta:{method:"link"}})}catch{}let H=C;if(A&&_)try{const Z=new URL(C);Z.searchParams.set("properties[coslo_session_id]",_),Z.searchParams.set("properties[coslo_bot_id]",A.botId),p&&Z.searchParams.set("properties[coslo_conversation_id]",p),H=Z.toString()}catch{}window.open(H,"_blank","noopener,noreferrer")};m.useEffect(()=>{var C;(C=b.current)==null||C.scrollIntoView({behavior:"smooth",block:"end"})},[l.length]);const N=async()=>{const C=d.trim();if(!C||f)return;y(null);const A={id:`user-${Date.now()}`,role:"user",content:C};c(_=>[..._,A]),u(""),g(!0);try{const _=await fF(e,{message:C,conversationId:p});_.conversationId&&_.conversationId!==p&&h(_.conversationId);const B={id:`assistant-${Date.now()}`,role:"assistant",content:_.reply};c(H=>[...H,B])}catch(_){console.error(_),y(_.message||"Failed to send message");const B={id:`system-${Date.now()}`,role:"system",content:r.error};c(H=>[...H,B])}finally{g(!1)}},R=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),N())};return s.jsxs("div",{className:"chat-container",children:[s.jsxs("div",{className:"chat-messages",children:[l.length===0&&s.jsx("div",{className:"chat-empty",children:s.jsx("p",{children:r.empty(t)})}),l.map(C=>{const A=C.role==="assistant"?T(C.content):null,_=(A==null?void 0:A.segments)||[],B=C.role==="assistant"?O(L(F(M(C.content)))).replace(/\b(view product|add to cart|vedi prodotto|aggiungi al carrello|ver producto|agregar al carrito)\b/gi,"").replace(/\s{2,}/g," ").trim():C.content,H=C.role==="assistant"?P(C.content):null;return s.jsx("div",{className:`chat-message chat-message-${C.role}`,children:s.jsxs("div",{className:"chat-message-bubble",children:[C.role!=="system"&&s.jsx("div",{className:"chat-message-role",children:C.role==="user"?r.you:t}),s.jsx("div",{className:"chat-message-content",children:B}),_.length>0&&s.jsx("div",{style:{display:"grid",gap:10,marginTop:10},children:_.map((Z,ie)=>s.jsxs("figure",{style:{margin:0,padding:8,borderRadius:12,border:"1px solid rgba(148, 163, 184, 0.35)",background:"rgba(15, 23, 42, 0.55)",display:"grid",gap:6,maxWidth:380},children:[s.jsx("img",{src:Z.imageUrl,alt:Z.caption,style:{width:"100%",borderRadius:10,display:"block"},loading:"lazy"}),s.jsx("figcaption",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:Z.caption}),(Z.productUrl||Z.addToCartUrl)&&s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:4},children:[Z.productUrl&&s.jsx("button",{type:"button",className:"chat-send-button",onClick:()=>{const U=D(Z.productUrl);k("view_product",{productId:U,meta:{productUrl:Z.productUrl}}),window.open(Z.productUrl,"_blank","noopener,noreferrer")},children:o.view}),Z.addToCartUrl&&s.jsx("button",{type:"button",className:"chat-send-button",onClick:()=>E(Z.addToCartUrl),children:o.add})]})]},`${C.id}-img-${ie}`))}),H&&_.length===0&&(H.addToCartUrl||H.cartUrl||H.productUrl)&&s.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:[H.productUrl&&H.productCount<=1&&s.jsx("button",{type:"button",className:"chat-send-button",onClick:()=>{const Z=D(H.productUrl);k("view_product",{productId:Z,meta:{productUrl:H.productUrl}}),window.open(H.productUrl,"_blank","noopener,noreferrer")},children:o.view}),H.addToCartUrl&&H.addToCartCount<=1&&s.jsx("button",{type:"button",className:"chat-send-button",onClick:()=>E(H.addToCartUrl),children:o.add}),H.cartUrl&&s.jsx("button",{type:"button",className:"chat-send-button",onClick:()=>window.open(H.cartUrl,"_blank","noopener,noreferrer"),children:o.cart})]})]})},C.id)}),s.jsx("div",{ref:b})]}),s.jsxs("div",{className:"chat-input-container",children:[v&&s.jsx("div",{className:"chat-error",children:v}),s.jsx("textarea",{className:"chat-input",placeholder:r.placeholder(t),value:d,onChange:C=>u(C.target.value),onKeyDown:R,rows:3,maxLength:2e3}),s.jsx("button",{className:"chat-send-button",onClick:N,disabled:f||!d.trim(),children:f?r.sending:r.send}),a&&s.jsx("div",{className:"chat-powered-by",children:s.jsx("a",{href:"https://coslo.it",target:"_blank",rel:"noopener noreferrer",children:"Powered by Coslo"})})]})]})},Pe=e=>typeof e=="string",lo=()=>{let e,t;const n=new Promise((a,i)=>{e=a,t=i});return n.resolve=e,n.reject=t,n},ew=e=>e==null?"":""+e,gF=(e,t,n)=>{e.forEach(a=>{t[a]&&(n[a]=t[a])})},vF=/###/g,tw=e=>e&&e.indexOf("###")>-1?e.replace(vF,"."):e,nw=e=>!e||Pe(e),_o=(e,t,n)=>{const a=Pe(t)?t.split("."):t;let i=0;for(;i<a.length-1;){if(nw(e))return{};const r=tw(a[i]);!e[r]&&n&&(e[r]=new n),Object.prototype.hasOwnProperty.call(e,r)?e=e[r]:e={},++i}return nw(e)?{}:{obj:e,k:tw(a[i])}},aw=(e,t,n)=>{const{obj:a,k:i}=_o(e,t,Object);if(a!==void 0||t.length===1){a[i]=n;return}let r=t[t.length-1],o=t.slice(0,t.length-1),l=_o(e,o,Object);for(;l.obj===void 0&&o.length;)r=`${o[o.length-1]}.${r}`,o=o.slice(0,o.length-1),l=_o(e,o,Object),l!=null&&l.obj&&typeof l.obj[`${l.k}.${r}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${r}`]=n},bF=(e,t,n,a)=>{const{obj:i,k:r}=_o(e,t,Object);i[r]=i[r]||[],i[r].push(n)},Wd=(e,t)=>{const{obj:n,k:a}=_o(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,a))return n[a]},yF=(e,t,n)=>{const a=Wd(e,n);return a!==void 0?a:Wd(t,n)},Fk=(e,t,n)=>{for(const a in t)a!=="__proto__"&&a!=="constructor"&&(a in e?Pe(e[a])||e[a]instanceof String||Pe(t[a])||t[a]instanceof String?n&&(e[a]=t[a]):Fk(e[a],t[a],n):e[a]=t[a]);return e},Bi=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var xF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const wF=e=>Pe(e)?e.replace(/[&<>"'\/]/g,t=>xF[t]):e;class jF{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const a=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,a),this.regExpQueue.push(t),a}}const SF=[" ",",","?","!",";"],NF=new jF(20),CF=(e,t,n)=>{t=t||"",n=n||"";const a=SF.filter(o=>t.indexOf(o)<0&&n.indexOf(o)<0);if(a.length===0)return!0;const i=NF.getRegExp(`(${a.map(o=>o==="?"?"\\?":o).join("|")})`);let r=!i.test(e);if(!r){const o=e.indexOf(n);o>0&&!i.test(e.substring(0,o))&&(r=!0)}return r},Cf=(e,t,n=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const a=t.split(n);let i=e;for(let r=0;r<a.length;){if(!i||typeof i!="object")return;let o,l="";for(let c=r;c<a.length;++c)if(c!==r&&(l+=n),l+=a[c],o=i[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<a.length-1)continue;r+=c-r+1;break}i=o}return i},ol=e=>e==null?void 0:e.replace("_","-"),kF={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,a;(a=(n=console==null?void 0:console[e])==null?void 0:n.apply)==null||a.call(n,console,t)}};class qd{constructor(t,n={}){this.init(t,n)}init(t,n={}){this.prefix=n.prefix||"i18next:",this.logger=t||kF,this.options=n,this.debug=n.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,a,i){return i&&!this.debug?null:(Pe(t[0])&&(t[0]=`${a}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new qd(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new qd(this.logger,t)}}var Sa=new qd;let op=class{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(a=>{this.observers[a]||(this.observers[a]=new Map);const i=this.observers[a].get(n)||0;this.observers[a].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t,...n){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([i,r])=>{for(let o=0;o<r;o++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,r])=>{for(let o=0;o<r;o++)i.apply(i,[t,...n])})}};class sw extends op{constructor(t,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,a,i={}){var d,u;const r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,n],a&&(Array.isArray(a)?l.push(...a):Pe(a)&&r?l.push(...a.split(r)):l.push(a)));const c=Wd(this.data,l);return!c&&!n&&!a&&t.indexOf(".")>-1&&(t=l[0],n=l[1],a=l.slice(2).join(".")),c||!o||!Pe(a)?c:Cf((u=(d=this.data)==null?void 0:d[t])==null?void 0:u[n],a,r)}addResource(t,n,a,i,r={silent:!1}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let l=[t,n];a&&(l=l.concat(o?a.split(o):a)),t.indexOf(".")>-1&&(l=t.split("."),i=n,n=l[1]),this.addNamespaces(n),aw(this.data,l,i),r.silent||this.emit("added",t,n,a,i)}addResources(t,n,a,i={silent:!1}){for(const r in a)(Pe(a[r])||Array.isArray(a[r]))&&this.addResource(t,n,r,a[r],{silent:!0});i.silent||this.emit("added",t,n,a)}addResourceBundle(t,n,a,i,r,o={silent:!1,skipCopy:!1}){let l=[t,n];t.indexOf(".")>-1&&(l=t.split("."),i=a,a=n,n=l[1]),this.addNamespaces(n);let c=Wd(this.data,l)||{};o.skipCopy||(a=JSON.parse(JSON.stringify(a))),i?Fk(c,a,r):c={...c,...a},aw(this.data,l,c),o.silent||this.emit("added",t,n,a)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var zk={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,a,i){return e.forEach(r=>{var o;t=((o=this.processors[r])==null?void 0:o.process(t,n,a,i))??t}),t}};const Rk=Symbol("i18next/PATH_KEY");function PF(){const e=[],t=Object.create(null);let n;return t.get=(a,i)=>{var r;return(r=n==null?void 0:n.revoke)==null||r.call(n),i===Rk?e:(e.push(i),n=Proxy.revocable(a,t),n.proxy)},Proxy.revocable(Object.create(null),t).proxy}function Hd(e,t){const{[Rk]:n}=e(PF());return n.join((t==null?void 0:t.keySeparator)??".")}const iw={},Wm=e=>!Pe(e)&&typeof e!="boolean"&&typeof e!="number";class Kd extends op{constructor(t,n={}){super(),gF(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Sa.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,n={interpolation:{}}){const a={...n};if(t==null)return!1;const i=this.resolve(t,a);if((i==null?void 0:i.res)===void 0)return!1;const r=Wm(i.res);return!(a.returnObjects===!1&&r)}extractFromKey(t,n){let a=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let r=n.ns||this.options.defaultNS||[];const o=a&&t.indexOf(a)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!CF(t,a,i);if(o&&!l){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:Pe(r)?[r]:r};const d=t.split(a);(a!==i||a===i&&this.options.ns.indexOf(d[0])>-1)&&(r=d.shift()),t=d.join(i)}return{key:t,namespaces:Pe(r)?[r]:r}}translate(t,n,a){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),t==null)return"";typeof t=="function"&&(t=Hd(t,{...this.options,...i})),Array.isArray(t)||(t=[String(t)]);const r=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(t[t.length-1],i),d=c[c.length-1];let u=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;u===void 0&&(u=":");const p=i.lng||this.language,h=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((p==null?void 0:p.toLowerCase())==="cimode")return h?r?{res:`${d}${u}${l}`,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:`${d}${u}${l}`:r?{res:l,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:l;const f=this.resolve(t,i);let g=f==null?void 0:f.res;const v=(f==null?void 0:f.usedKey)||l,y=(f==null?void 0:f.exactUsedKey)||l,b=["[object Number]","[object Function]","[object RegExp]"],x=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,j=i.count!==void 0&&!Pe(i.count),S=Kd.hasDefaultValue(i),k=j?this.pluralResolver.getSuffix(p,i.count,i):"",T=i.ordinal&&j?this.pluralResolver.getSuffix(p,i.count,{ordinal:!1}):"",L=j&&!i.ordinal&&i.count===0,F=L&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${k}`]||i[`defaultValue${T}`]||i.defaultValue;let O=g;w&&!g&&S&&(O=F);const M=Wm(O),P=Object.prototype.toString.apply(O);if(w&&O&&M&&b.indexOf(P)<0&&!(Pe(x)&&Array.isArray(O))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const D=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,O,{...i,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return r?(f.res=D,f.usedParams=this.getUsedParamsDetails(i),f):D}if(o){const D=Array.isArray(O),E=D?[]:{},N=D?y:v;for(const R in O)if(Object.prototype.hasOwnProperty.call(O,R)){const C=`${N}${o}${R}`;S&&!g?E[R]=this.translate(C,{...i,defaultValue:Wm(F)?F[R]:void 0,joinArrays:!1,ns:c}):E[R]=this.translate(C,{...i,joinArrays:!1,ns:c}),E[R]===C&&(E[R]=O[R])}g=E}}else if(w&&Pe(x)&&Array.isArray(g))g=g.join(x),g&&(g=this.extendTranslation(g,t,i,a));else{let D=!1,E=!1;!this.isValidLookup(g)&&S&&(D=!0,g=F),this.isValidLookup(g)||(E=!0,g=l);const R=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&E?void 0:g,C=S&&F!==g&&this.options.updateMissing;if(E||D||C){if(this.logger.log(C?"updateKey":"missingKey",p,d,l,C?F:g),o){const H=this.resolve(l,{...i,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let A=[];const _=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&_&&_[0])for(let H=0;H<_.length;H++)A.push(_[H]);else this.options.saveMissingTo==="all"?A=this.languageUtils.toResolveHierarchy(i.lng||this.language):A.push(i.lng||this.language);const B=(H,Z,ie)=>{var G;const U=S&&ie!==g?ie:R;this.options.missingKeyHandler?this.options.missingKeyHandler(H,d,Z,U,C,i):(G=this.backendConnector)!=null&&G.saveMissing&&this.backendConnector.saveMissing(H,d,Z,U,C,i),this.emit("missingKey",H,d,Z,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?A.forEach(H=>{const Z=this.pluralResolver.getSuffixes(H,i);L&&i[`defaultValue${this.options.pluralSeparator}zero`]&&Z.indexOf(`${this.options.pluralSeparator}zero`)<0&&Z.push(`${this.options.pluralSeparator}zero`),Z.forEach(ie=>{B([H],l+ie,i[`defaultValue${ie}`]||F)})}):B(A,l,F))}g=this.extendTranslation(g,t,i,f,a),E&&g===l&&this.options.appendNamespaceToMissingKey&&(g=`${d}${u}${l}`),(E||D)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${u}${l}`:l,D?g:void 0,i))}return r?(f.res=g,f.usedParams=this.getUsedParamsDetails(i),f):g}extendTranslation(t,n,a,i,r){var c,d;if((c=this.i18nFormat)!=null&&c.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...a},a.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init({...a,interpolation:{...this.options.interpolation,...a.interpolation}});const u=Pe(t)&&(((d=a==null?void 0:a.interpolation)==null?void 0:d.skipOnVariables)!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let p;if(u){const f=t.match(this.interpolator.nestingRegexp);p=f&&f.length}let h=a.replace&&!Pe(a.replace)?a.replace:a;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),t=this.interpolator.interpolate(t,h,a.lng||this.language||i.usedLng,a),u){const f=t.match(this.interpolator.nestingRegexp),g=f&&f.length;p<g&&(a.nest=!1)}!a.lng&&i&&i.res&&(a.lng=this.language||i.usedLng),a.nest!==!1&&(t=this.interpolator.nest(t,(...f)=>(r==null?void 0:r[0])===f[0]&&!a.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):this.translate(...f,n),a)),a.interpolation&&this.interpolator.reset()}const o=a.postProcess||this.options.postProcess,l=Pe(o)?[o]:o;return t!=null&&(l!=null&&l.length)&&a.applyPostProcessor!==!1&&(t=zk.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(a)},...a}:a,this)),t}resolve(t,n={}){let a,i,r,o,l;return Pe(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(a))return;const d=this.extractFromKey(c,n),u=d.key;i=u;let p=d.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const h=n.count!==void 0&&!Pe(n.count),f=h&&!n.ordinal&&n.count===0,g=n.context!==void 0&&(Pe(n.context)||typeof n.context=="number")&&n.context!=="",v=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);p.forEach(y=>{var b,x;this.isValidLookup(a)||(l=y,!iw[`${v[0]}-${y}`]&&((b=this.utils)!=null&&b.hasLoadedNamespace)&&!((x=this.utils)!=null&&x.hasLoadedNamespace(l))&&(iw[`${v[0]}-${y}`]=!0,this.logger.warn(`key "${i}" for languages "${v.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(w=>{var k;if(this.isValidLookup(a))return;o=w;const j=[u];if((k=this.i18nFormat)!=null&&k.addLookupKeys)this.i18nFormat.addLookupKeys(j,u,w,y,n);else{let T;h&&(T=this.pluralResolver.getSuffix(w,n.count,n));const L=`${this.options.pluralSeparator}zero`,F=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(n.ordinal&&T.indexOf(F)===0&&j.push(u+T.replace(F,this.options.pluralSeparator)),j.push(u+T),f&&j.push(u+L)),g){const O=`${u}${this.options.contextSeparator||"_"}${n.context}`;j.push(O),h&&(n.ordinal&&T.indexOf(F)===0&&j.push(O+T.replace(F,this.options.pluralSeparator)),j.push(O+T),f&&j.push(O+L))}}let S;for(;S=j.pop();)this.isValidLookup(a)||(r=S,a=this.getResource(w,y,S,n))}))})}),{res:a,usedKey:i,exactUsedKey:r,usedLng:o,usedNS:l}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,a,i={}){var r;return(r=this.i18nFormat)!=null&&r.getResource?this.i18nFormat.getResource(t,n,a,i):this.resourceStore.getResource(t,n,a,i)}getUsedParamsDetails(t={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],a=t.replace&&!Pe(t.replace);let i=a?t.replace:t;if(a&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!a){i={...i};for(const r of n)delete i[r]}return i}static hasDefaultValue(t){const n="defaultValue";for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&n===a.substring(0,n.length)&&t[a]!==void 0)return!0;return!1}}class rw{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Sa.create("languageUtils")}getScriptPartFromCode(t){if(t=ol(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=ol(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(Pe(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(a=>{if(n)return;const i=this.formatLanguageCode(a);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(a=>{if(n)return;const i=this.getScriptPartFromCode(a);if(this.isSupportedCode(i))return n=i;const r=this.getLanguagePartFromCode(a);if(this.isSupportedCode(r))return n=r;n=this.options.supportedLngs.find(o=>{if(o===r)return o;if(!(o.indexOf("-")<0&&r.indexOf("-")<0)&&(o.indexOf("-")>0&&r.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===r||o.indexOf(r)===0&&r.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),Pe(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let a=t[n];return a||(a=t[this.getScriptPartFromCode(n)]),a||(a=t[this.formatLanguageCode(n)]),a||(a=t[this.getLanguagePartFromCode(n)]),a||(a=t.default),a||[]}toResolveHierarchy(t,n){const a=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],t),i=[],r=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Pe(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(t))):Pe(t)&&r(this.formatLanguageCode(t)),a.forEach(o=>{i.indexOf(o)<0&&r(this.formatLanguageCode(o))}),i}}const ow={zero:0,one:1,two:2,few:3,many:4,other:5},lw={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class AF{constructor(t,n={}){this.languageUtils=t,this.options=n,this.logger=Sa.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t,n={}){const a=ol(t==="dev"?"en":t),i=n.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:a,type:i});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let o;try{o=new Intl.PluralRules(a,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),lw;if(!t.match(/-|_/))return lw;const c=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(c,n)}return this.pluralRulesCache[r]=o,o}needsPlural(t,n={}){let a=this.getRule(t,n);return a||(a=this.getRule("dev",n)),(a==null?void 0:a.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,n,a={}){return this.getSuffixes(t,a).map(i=>`${n}${i}`)}getSuffixes(t,n={}){let a=this.getRule(t,n);return a||(a=this.getRule("dev",n)),a?a.resolvedOptions().pluralCategories.sort((i,r)=>ow[i]-ow[r]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(t,n,a={}){const i=this.getRule(t,a);return i?`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,a))}}const cw=(e,t,n,a=".",i=!0)=>{let r=yF(e,t,n);return!r&&i&&Pe(n)&&(r=Cf(e,n,a),r===void 0&&(r=Cf(t,n,a))),r},qm=e=>e.replace(/\$/g,"$$$$");class dw{constructor(t={}){var n;this.logger=Sa.create("interpolator"),this.options=t,this.format=((n=t==null?void 0:t.interpolation)==null?void 0:n.format)||(a=>a),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:a,useRawValueToEscape:i,prefix:r,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:d,unescapeSuffix:u,unescapePrefix:p,nestingPrefix:h,nestingPrefixEscaped:f,nestingSuffix:g,nestingSuffixEscaped:v,nestingOptionsSeparator:y,maxReplaces:b,alwaysFormat:x}=t.interpolation;this.escape=n!==void 0?n:wF,this.escapeValue=a!==void 0?a:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=r?Bi(r):o||"{{",this.suffix=l?Bi(l):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=h?Bi(h):f||Bi("$t("),this.nestingSuffix=g?Bi(g):v||Bi(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=b||1e3,this.alwaysFormat=x!==void 0?x:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,a)=>(n==null?void 0:n.source)===a?(n.lastIndex=0,n):new RegExp(a,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,n,a,i){var f;let r,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=g=>{if(g.indexOf(this.formatSeparator)<0){const x=cw(n,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(x,void 0,a,{...i,...n,interpolationkey:g}):x}const v=g.split(this.formatSeparator),y=v.shift().trim(),b=v.join(this.formatSeparator).trim();return this.format(cw(n,c,y,this.options.keySeparator,this.options.ignoreJSONStructure),b,a,{...i,...n,interpolationkey:y})};this.resetRegExp();const u=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,p=((f=i==null?void 0:i.interpolation)==null?void 0:f.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>qm(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?qm(this.escape(g)):qm(g)}].forEach(g=>{for(l=0;r=g.regex.exec(t);){const v=r[1].trim();if(o=d(v),o===void 0)if(typeof u=="function"){const b=u(t,r,i);o=Pe(b)?b:""}else if(i&&Object.prototype.hasOwnProperty.call(i,v))o="";else if(p){o=r[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${t}`),o="";else!Pe(o)&&!this.useRawValueToEscape&&(o=ew(o));const y=g.safeValue(o);if(t=t.replace(r[0],y),p?(g.regex.lastIndex+=o.length,g.regex.lastIndex-=r[0].length):g.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),t}nest(t,n,a={}){let i,r,o;const l=(c,d)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const p=c.split(new RegExp(`${u}[ ]*{`));let h=`{${p[1]}`;c=p[0],h=this.interpolate(h,o);const f=h.match(/'/g),g=h.match(/"/g);(((f==null?void 0:f.length)??0)%2===0&&!g||g.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),d&&(o={...d,...o})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,v),`${c}${u}${h}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;i=this.nestingRegexp.exec(t);){let c=[];o={...a},o=o.replace&&!Pe(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const d=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(d!==-1&&(c=i[1].slice(d).split(this.formatSeparator).map(u=>u.trim()).filter(Boolean),i[1]=i[1].slice(0,d)),r=n(l.call(this,i[1].trim(),o),o),r&&i[0]===t&&!Pe(r))return r;Pe(r)||(r=ew(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),r=""),c.length&&(r=c.reduce((u,p)=>this.format(u,p,a.lng,{...a,interpolationkey:i[1].trim()}),r.trim())),t=t.replace(i[0],r),this.regexp.lastIndex=0}return t}}const EF=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const a=e.split("(");t=a[0].toLowerCase().trim();const i=a[1].substring(0,a[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),u=l.trim();n[u]||(n[u]=d),d==="false"&&(n[u]=!1),d==="true"&&(n[u]=!0),isNaN(d)||(n[u]=parseInt(d,10))}})}return{formatName:t,formatOptions:n}},uw=e=>{const t={};return(n,a,i)=>{let r=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(r={...r,[i.interpolationkey]:void 0});const o=a+JSON.stringify(r);let l=t[o];return l||(l=e(ol(a),i),t[o]=l),l(n)}},TF=e=>(t,n,a)=>e(ol(n),a)(t);class IF{constructor(t={}){this.logger=Sa.create("formatter"),this.options=t,this.init(t)}init(t,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const a=n.cacheInBuiltFormats?uw:TF;this.formats={number:a((i,r)=>{const o=new Intl.NumberFormat(i,{...r});return l=>o.format(l)}),currency:a((i,r)=>{const o=new Intl.NumberFormat(i,{...r,style:"currency"});return l=>o.format(l)}),datetime:a((i,r)=>{const o=new Intl.DateTimeFormat(i,{...r});return l=>o.format(l)}),relativetime:a((i,r)=>{const o=new Intl.RelativeTimeFormat(i,{...r});return l=>o.format(l,r.range||"day")}),list:a((i,r)=>{const o=new Intl.ListFormat(i,{...r});return l=>o.format(l)})}}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=uw(n)}format(t,n,a,i={}){const r=n.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(l=>l.indexOf(")")>-1)){const l=r.findIndex(c=>c.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,l)].join(this.formatSeparator)}return r.reduce((l,c)=>{var p;const{formatName:d,formatOptions:u}=EF(c);if(this.formats[d]){let h=l;try{const f=((p=i==null?void 0:i.formatParams)==null?void 0:p[i.interpolationkey])||{},g=f.locale||f.lng||i.locale||i.lng||a;h=this.formats[d](l,g,{...u,...i,...f})}catch(f){this.logger.warn(f)}return h}else this.logger.warn(`there was no format function for ${d}`);return l},t)}}const OF=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class LF extends op{constructor(t,n,a,i={}){var r,o;super(),this.backend=t,this.store=n,this.services=a,this.languageUtils=a.languageUtils,this.options=i,this.logger=Sa.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(o=(r=this.backend)==null?void 0:r.init)==null||o.call(r,a,i.backend,i)}queueLoad(t,n,a,i){const r={},o={},l={},c={};return t.forEach(d=>{let u=!0;n.forEach(p=>{const h=`${d}|${p}`;!a.reload&&this.store.hasResourceBundle(d,p)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,u=!1,o[h]===void 0&&(o[h]=!0),r[h]===void 0&&(r[h]=!0),c[p]===void 0&&(c[p]=!0)))}),u||(l[d]=!0)}),(Object.keys(r).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(t,n,a){const i=t.split("|"),r=i[0],o=i[1];n&&this.emit("failedLoading",r,o,n),!n&&a&&this.store.addResourceBundle(r,o,a,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&a&&(this.state[t]=0);const l={};this.queue.forEach(c=>{bF(c.loaded,[r],o),OF(c,t),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{l[d]||(l[d]={});const u=c.loaded[d];u.length&&u.forEach(p=>{l[d][p]===void 0&&(l[d][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(t,n,a,i=0,r=this.retryTimeout,o){if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:a,tried:i,wait:r,callback:o});return}this.readingCalls++;const l=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(d&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,a,i+1,r*2,o)},r);return}o(d,u)},c=this.backend[a].bind(this.backend);if(c.length===2){try{const d=c(t,n);d&&typeof d.then=="function"?d.then(u=>l(null,u)).catch(l):l(null,d)}catch(d){l(d)}return}return c(t,n,l)}prepareLoading(t,n,a={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Pe(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Pe(n)&&(n=[n]);const r=this.queueLoad(t,n,a,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach(o=>{this.loadOne(o)})}load(t,n,a){this.prepareLoading(t,n,{},a)}reload(t,n,a){this.prepareLoading(t,n,{reload:!0},a)}loadOne(t,n=""){const a=t.split("|"),i=a[0],r=a[1];this.read(i,r,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${n}loading namespace ${r} for language ${i} failed`,o),!o&&l&&this.logger.log(`${n}loaded namespace ${r} for language ${i}`,l),this.loaded(t,o,l)})}saveMissing(t,n,a,i,r,o={},l=()=>{}){var c,d,u,p,h;if((d=(c=this.services)==null?void 0:c.utils)!=null&&d.hasLoadedNamespace&&!((p=(u=this.services)==null?void 0:u.utils)!=null&&p.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${a}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if((h=this.backend)!=null&&h.create){const f={...o,isUpdate:r},g=this.backend.create.bind(this.backend);if(g.length<6)try{let v;g.length===5?v=g(t,n,a,i,f):v=g(t,n,a,i),v&&typeof v.then=="function"?v.then(y=>l(null,y)).catch(l):l(null,v)}catch(v){l(v)}else g(t,n,a,i,l,f)}!t||!t[0]||this.store.addResource(t[0],n,a,i)}}}const pw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Pe(e[1])&&(t.defaultValue=e[1]),Pe(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(a=>{t[a]=n[a]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),mw=e=>{var t,n;return Pe(e.ns)&&(e.ns=[e.ns]),Pe(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Pe(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((n=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},Cc=()=>{},MF=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Bo extends op{constructor(t={},n){if(super(),this.options=mw(t),this.services={},this.logger=Sa,this.modules={external:[]},MF(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(t={},n){this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(Pe(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const a=pw();this.options={...a,...this.options,...mw(t)},this.options.interpolation={...a.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=a.overloadTranslationOptionHandler);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Sa.init(i(this.modules.logger),this.options):Sa.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=IF;const u=new rw(this.options);this.store=new sw(this.options.resources,this.options);const p=this.services;p.logger=Sa,p.resourceStore=this.store,p.languageUtils=u,p.pluralResolver=new AF(u,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(p.formatter=i(d),p.formatter.init&&p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new dw(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new LF(i(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",(f,...g)=>{this.emit(f,...g)}),this.modules.languageDetector&&(p.languageDetector=i(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=i(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new Kd(this.services,this.options),this.translator.on("*",(f,...g)=>{this.emit(f,...g)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Cc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...u)=>this.store[d](...u)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...u)=>(this.store[d](...u),this)});const l=lo(),c=()=>{const d=(u,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),n(u,p)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(t,n=Cc){var r,o;let a=n;const i=Pe(t)?t:this.language;if(typeof t=="function"&&(a=t),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return a();const l=[],c=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(p=>{p!=="cimode"&&l.indexOf(p)<0&&l.push(p)})};i?c(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>c(u)),(o=(r=this.options.preload)==null?void 0:r.forEach)==null||o.call(r,d=>c(d)),this.services.backendConnector.load(l,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),a(d)})}else a(null)}reloadResources(t,n,a){const i=lo();return typeof t=="function"&&(a=t,t=void 0),typeof n=="function"&&(a=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),a||(a=Cc),this.services.backendConnector.reload(t,n,r=>{i.resolve(),a(r)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&zk.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let n=0;n<this.languages.length;n++){const a=this.languages[n];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,n){this.isLanguageChangingTo=t;const a=lo();this.emit("languageChanging",t);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},r=(l,c)=>{c?this.isLanguageChangingTo===t&&(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,a.resolve((...d)=>this.t(...d)),n&&n(l,(...d)=>this.t(...d))},o=l=>{var u,p;!t&&!l&&this.services.languageDetector&&(l=[]);const c=Pe(l)?l:l&&l[0],d=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Pe(l)?[l]:l);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),(p=(u=this.services.languageDetector)==null?void 0:u.cacheUserLanguage)==null||p.call(u,d)),this.loadResources(d,h=>{r(h,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),a}getFixedT(t,n,a){const i=(r,o,...l)=>{let c;typeof o!="object"?c=this.options.overloadTranslationOptionHandler([r,o].concat(l)):c={...o},c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||a||i.keyPrefix);const d=this.options.keySeparator||".";let u;return c.keyPrefix&&Array.isArray(r)?u=r.map(p=>(typeof p=="function"&&(p=Hd(p,{...this.options,...o})),`${c.keyPrefix}${d}${p}`)):(typeof r=="function"&&(r=Hd(r,{...this.options,...o})),u=c.keyPrefix?`${c.keyPrefix}${d}${r}`:r),this.t(u,c)};return Pe(t)?i.lng=t:i.lngs=t,i.ns=n,i.keyPrefix=a,i}t(...t){var n;return(n=this.translator)==null?void 0:n.translate(...t)}exists(...t){var n;return(n=this.translator)==null?void 0:n.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const d=this.services.backendConnector.state[`${l}|${c}`];return d===-1||d===0||d===2};if(n.precheck){const l=n.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(a,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(a,t)&&(!i||o(r,t)))}loadNamespaces(t,n){const a=lo();return this.options.ns?(Pe(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{a.resolve(),n&&n(i)}),a):(n&&n(),Promise.resolve())}loadLanguages(t,n){const a=lo();Pe(t)&&(t=[t]);const i=this.options.preload||[],r=t.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return r.length?(this.options.preload=i.concat(r),this.loadResources(o=>{a.resolve(),n&&n(o)}),a):(n&&n(),Promise.resolve())}dir(t){var i,r;if(t||(t=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!t)return"rtl";try{const o=new Intl.Locale(t);if(o&&o.getTextInfo){const l=o.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=((r=this.services)==null?void 0:r.languageUtils)||new rw(pw());return t.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(a.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},n){const a=new Bo(t,n);return a.createInstance=Bo.createInstance,a}cloneInstance(t={},n=Cc){const a=t.forkResourceStore;a&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},r=new Bo(i);if((t.debug!==void 0||t.prefix!==void 0)&&(r.logger=r.logger.clone(t)),["store","services","language"].forEach(l=>{r[l]=this[l]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},a){const l=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},c[d]=Object.keys(c[d]).reduce((u,p)=>(u[p]={...c[d][p]},u),c[d]),c),{});r.store=new sw(l,i),r.services.resourceStore=r.store}return t.interpolation&&(r.services.interpolator=new dw(i)),r.translator=new Kd(r.services,i),r.translator.on("*",(l,...c)=>{r.emit(l,...c)}),r.init(i,n),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const hn=Bo.createInstance();hn.createInstance;hn.dir;hn.init;hn.loadResources;hn.reloadResources;hn.use;hn.changeLanguage;hn.getFixedT;hn.t;hn.exists;hn.setDefaultNamespace;hn.hasLoadedNamespace;hn.loadNamespaces;hn.loadLanguages;var DF={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const FF=Ia(DF);var zF=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function hw(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(FF[n[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var a=e.indexOf("-->");return{type:"comment",comment:a!==-1?e.slice(4,a):""}}for(var i=new RegExp(zF),r=null;(r=i.exec(e))!==null;)if(r[0].trim())if(r[1]){var o=r[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),t.attrs[l[0]]=l[1],i.lastIndex--}else r[2]&&(t.attrs[r[2]]=r[3].trim().substring(1,r[3].length-1));return t}var RF=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,_F=/^\s*$/,BF=Object.create(null);function _k(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(n){var a=[];for(var i in n)a.push(i+'="'+n[i]+'"');return a.length?" "+a.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(_k,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var $F={parse:function(e,t){t||(t={}),t.components||(t.components=BF);var n,a=[],i=[],r=-1,o=!1;if(e.indexOf("<")!==0){var l=e.indexOf("<");a.push({type:"text",content:l===-1?e:e.substring(0,l)})}return e.replace(RF,function(c,d){if(o){if(c!=="</"+n.name+">")return;o=!1}var u,p=c.charAt(1)!=="/",h=c.startsWith("<!--"),f=d+c.length,g=e.charAt(f);if(h){var v=hw(c);return r<0?(a.push(v),a):((u=i[r]).children.push(v),a)}if(p&&(r++,(n=hw(c)).type==="tag"&&t.components[n.name]&&(n.type="component",o=!0),n.voidElement||o||!g||g==="<"||n.children.push({type:"text",content:e.slice(f,e.indexOf("<",f))}),r===0&&a.push(n),(u=i[r-1])&&u.children.push(n),i[r]=n),(!p||n.voidElement)&&(r>-1&&(n.voidElement||n.name===c.slice(2,-1))&&(r--,n=r===-1?a:i[r]),!o&&g!=="<"&&g)){u=r===-1?a:i[r].children;var y=e.indexOf("<",f),b=e.slice(f,y===-1?void 0:y);_F.test(b)&&(b=" "),(y>-1&&r+u.length>=0||b!==" ")&&u.push({type:"text",content:b})}}),a},stringify:function(e){return e.reduce(function(t,n){return t+_k("",n)},"")}};const ld=(e,t,n,a)=>{var r,o,l,c;const i=[n,{code:t,...a||{}}];if((o=(r=e==null?void 0:e.services)==null?void 0:r.logger)!=null&&o.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);Cn(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(c=(l=e==null?void 0:e.services)==null?void 0:l.logger)!=null&&c.warn?e.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},fw={},lp=(e,t,n,a)=>{Cn(n)&&fw[n]||(Cn(n)&&(fw[n]=new Date),ld(e,t,n,a))},Bk=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},kf=(e,t,n)=>{e.loadNamespaces(t,Bk(e,n))},gw=(e,t,n,a)=>{if(Cn(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return kf(e,n,a);n.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,Bk(e,a))},UF=(e,t,n={})=>!t.languages||!t.languages.length?(lp(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(a,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!i(a.isLanguageChangingTo,e))return!1}}),Cn=e=>typeof e=="string",$a=e=>typeof e=="object"&&e!==null,WF=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,qF={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},HF=e=>qF[e],$k=e=>e.replace(WF,HF);let Pf={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:$k};const KF=(e={})=>{Pf={...Pf,...e}},Ov=()=>Pf;let Uk;const VF=e=>{Uk=e},Lv=()=>Uk,cd=(e,t)=>{var a;if(!e)return!1;const n=((a=e.props)==null?void 0:a.children)??e.children;return t?n.length>0:!!n},dd=e=>{var n,a;if(!e)return[];const t=((n=e.props)==null?void 0:n.children)??e.children;return(a=e.props)!=null&&a.i18nIsDynamicList?di(t):t},GF=e=>Array.isArray(e)&&e.every(m.isValidElement),di=e=>Array.isArray(e)?e:[e],YF=(e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n},QF=e=>{const t={};if(!e)return t;const n=a=>{di(a).forEach(r=>{Cn(r)||(cd(r)?n(dd(r)):$a(r)&&!m.isValidElement(r)&&Object.assign(t,r))})};return n(e),t},Wk=(e,t,n,a)=>{if(!e)return"";let i="";const r=di(e),o=t!=null&&t.transSupportBasicHtmlNodes?t.transKeepBasicHtmlNodesFor??[]:[];return r.forEach((l,c)=>{if(Cn(l)){i+=`${l}`;return}if(m.isValidElement(l)){const{props:d,type:u}=l,p=Object.keys(d).length,h=o.indexOf(u)>-1,f=d.children;if(!f&&h&&!p){i+=`<${u}/>`;return}if(!f&&(!h||p)||d.i18nIsDynamicList){i+=`<${c}></${c}>`;return}if(h&&p===1&&Cn(f)){i+=`<${u}>${f}</${u}>`;return}const g=Wk(f,t,n,a);i+=`<${c}>${g}</${c}>`;return}if(l===null){ld(n,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:a});return}if($a(l)){const{format:d,...u}=l,p=Object.keys(u);if(p.length===1){const h=d?`${p[0]}, ${d}`:p[0];i+=`{{${h}}}`;return}ld(n,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:a,child:l});return}ld(n,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:a,child:l})}),i},ZF=(e,t=[],n={})=>{if(!e)return e;const a=Object.keys(n),i=[...t,...a];let r="",o=0;for(;o<e.length;)if(e[o]==="<"){let l=!1;const c=e.slice(o).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9-]*)>/);if(c){const d=c[1];(/^\d+$/.test(d)||i.includes(d))&&(l=!0,r+=c[0],o+=c[0].length)}if(!l){const d=e.slice(o).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(d){const u=d[1];(/^\d+$/.test(u)||i.includes(u))&&(l=!0,r+=d[0],o+=d[0].length)}}l||(r+="&lt;",o+=1)}else r+=e[o],o+=1;return r},XF=(e,t,n,a,i,r,o)=>{if(n==="")return[];const l=i.transKeepBasicHtmlNodesFor||[],c=n&&new RegExp(l.map(x=>`<${x}`).join("|")).test(n);if(!e&&!t&&!c&&!o)return[n];const d=t??{},u=x=>{di(x).forEach(j=>{Cn(j)||(cd(j)?u(dd(j)):$a(j)&&!m.isValidElement(j)&&Object.assign(d,j))})};u(e);const p=ZF(n,l,d),h=$F.parse(`<0>${p}</0>`),f={...d,...r},g=(x,w,j)=>{var T;const S=dd(x),k=y(S,w.children,j);return GF(S)&&k.length===0||(T=x.props)!=null&&T.i18nIsDynamicList?S:k},v=(x,w,j,S,k)=>{x.dummy?(x.children=w,j.push(m.cloneElement(x,{key:S},k?void 0:w))):j.push(...m.Children.map([x],T=>{const L="data-i18n-is-dynamic-list",F={key:S,[L]:void 0};return T&&T.props&&Object.keys(T.props).forEach(O=>{O==="ref"||O==="children"||O==="i18nIsDynamicList"||O===L||(F[O]=T.props[O])}),m.cloneElement(T,F,k?null:w)}))},y=(x,w,j)=>{const S=di(x);return di(w).reduce((T,L,F)=>{var M,P;const O=((P=(M=L.children)==null?void 0:M[0])==null?void 0:P.content)&&a.services.interpolator.interpolate(L.children[0].content,f,a.language);if(L.type==="tag"){let D=S[parseInt(L.name,10)];!D&&t&&(D=t[L.name]),j.length===1&&!D&&(D=j[0][L.name]),D||(D={});const E={...L.attrs};o&&Object.keys(E).forEach(B=>{const H=E[B];Cn(H)&&(E[B]=$k(H))});const N=Object.keys(E).length!==0?YF({props:E},D):D,R=m.isValidElement(N),C=R&&cd(L,!0)&&!L.voidElement,A=c&&$a(N)&&N.dummy&&!R,_=$a(t)&&Object.hasOwnProperty.call(t,L.name);if(Cn(N)){const B=a.services.interpolator.interpolate(N,f,a.language);T.push(B)}else if(cd(N)||C){const B=g(N,L,j);v(N,B,T,F)}else if(A){const B=y(S,L.children,j);v(N,B,T,F)}else if(Number.isNaN(parseFloat(L.name)))if(_){const B=g(N,L,j);v(N,B,T,F,L.voidElement)}else if(i.transSupportBasicHtmlNodes&&l.indexOf(L.name)>-1)if(L.voidElement)T.push(m.createElement(L.name,{key:`${L.name}-${F}`}));else{const B=y(S,L.children,j);T.push(m.createElement(L.name,{key:`${L.name}-${F}`},B))}else if(L.voidElement)T.push(`<${L.name} />`);else{const B=y(S,L.children,j);T.push(`<${L.name}>${B}</${L.name}>`)}else if($a(N)&&!R){const B=L.children[0]?O:null;B&&T.push(B)}else v(N,O,T,F,L.children.length!==1||!O)}else if(L.type==="text"){const D=i.transWrapTextNodes,E=typeof i.unescape=="function"?i.unescape:Ov().unescape,N=o?E(a.services.interpolator.interpolate(L.content,f,a.language)):a.services.interpolator.interpolate(L.content,f,a.language);D?T.push(m.createElement(D,{key:`${L.name}-${F}`},N)):T.push(N)}return T},[])},b=y([{dummy:!0,children:e||[]}],h,di(e||[]));return dd(b[0])},qk=(e,t,n)=>{const a=e.key||t,i=m.cloneElement(e,{key:a});if(!i.props||!i.props.children||n.indexOf(`${t}/>`)<0&&n.indexOf(`${t} />`)<0)return i;function r(){return m.createElement(m.Fragment,null,i)}return m.createElement(r,{key:a})},JF=(e,t)=>e.map((n,a)=>qk(n,a,t)),ez=(e,t)=>{const n={};return Object.keys(e).forEach(a=>{Object.assign(n,{[a]:qk(e[a],a,t)})}),n},tz=(e,t,n,a)=>e?Array.isArray(e)?JF(e,t):$a(e)?ez(e,t):(lp(n,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:a}),null):null,nz=e=>!$a(e)||Array.isArray(e)?!1:Object.keys(e).reduce((t,n)=>t&&Number.isNaN(Number.parseFloat(n)),!0);function az({children:e,count:t,parent:n,i18nKey:a,context:i,tOptions:r={},values:o,defaults:l,components:c,ns:d,i18n:u,t:p,shouldUnescape:h,...f}){var N,R,C,A,_,B;const g=u||Lv();if(!g)return lp(g,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:a}),e;const v=p||g.t.bind(g)||(H=>H),y={...Ov(),...(N=g.options)==null?void 0:N.react};let b=d||v.ns||((R=g.options)==null?void 0:R.defaultNS);b=Cn(b)?[b]:b||["translation"];const x=Wk(e,y,g,a),w=l||(r==null?void 0:r.defaultValue)||x||y.transEmptyNodeValue||(typeof a=="function"?Hd(a):a),{hashTransKey:j}=y,S=a||(j?j(x||w):x||w);(A=(C=g.options)==null?void 0:C.interpolation)!=null&&A.defaultVariables&&(o=o&&Object.keys(o).length>0?{...o,...g.options.interpolation.defaultVariables}:{...g.options.interpolation.defaultVariables});const k=QF(e);k&&typeof k.count=="number"&&t===void 0&&(t=k.count);const T=o||t!==void 0&&!((B=(_=g.options)==null?void 0:_.interpolation)!=null&&B.alwaysFormat)||!e?r.interpolation:{interpolation:{...r.interpolation,prefix:"#$?",suffix:"?$#"}},L={...r,context:i||r.context,count:t,...o,...T,defaultValue:w,ns:b};let F=S?v(S,L):w;F===S&&w&&(F=w);const O=tz(c,F,g,a);let M=O||e,P=null;nz(O)&&(P=O,M=e);const D=XF(M,P,F,g,y,L,h),E=n??y.defaultTransParent;return E?m.createElement(E,f,D):D}const sz={type:"3rdParty",init(e){KF(e.options.react),VF(e)}},Hk=m.createContext();class iz{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function Kk({children:e,count:t,parent:n,i18nKey:a,context:i,tOptions:r={},values:o,defaults:l,components:c,ns:d,i18n:u,t:p,shouldUnescape:h,...f}){var x;const{i18n:g,defaultNS:v}=m.useContext(Hk)||{},y=u||g||Lv(),b=p||(y==null?void 0:y.t.bind(y));return az({children:e,count:t,parent:n,i18nKey:a,context:i,tOptions:r,values:o,defaults:l,components:c,ns:d||(b==null?void 0:b.ns)||v||((x=y==null?void 0:y.options)==null?void 0:x.defaultNS),i18n:y,t:p,shouldUnescape:h,...f})}var Vk={exports:{}},Gk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=m;function rz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oz=typeof Object.is=="function"?Object.is:rz,lz=Cr.useState,cz=Cr.useEffect,dz=Cr.useLayoutEffect,uz=Cr.useDebugValue;function pz(e,t){var n=t(),a=lz({inst:{value:n,getSnapshot:t}}),i=a[0].inst,r=a[1];return dz(function(){i.value=n,i.getSnapshot=t,Hm(i)&&r({inst:i})},[e,n,t]),cz(function(){return Hm(i)&&r({inst:i}),e(function(){Hm(i)&&r({inst:i})})},[e]),uz(n),n}function Hm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oz(e,n)}catch{return!0}}function mz(e,t){return t()}var hz=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mz:pz;Gk.useSyncExternalStore=Cr.useSyncExternalStore!==void 0?Cr.useSyncExternalStore:hz;Vk.exports=Gk;var Yk=Vk.exports;const fz=(e,t)=>Cn(t)?t:$a(t)&&Cn(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,gz={t:fz,ready:!1},vz=()=>()=>{},Le=(e,t={})=>{var F,O,M;const{i18n:n}=t,{i18n:a,defaultNS:i}=m.useContext(Hk)||{},r=n||a||Lv();r&&!r.reportNamespaces&&(r.reportNamespaces=new iz),r||lp(r,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=m.useMemo(()=>{var P;return{...Ov(),...(P=r==null?void 0:r.options)==null?void 0:P.react,...t}},[r,t]),{useSuspense:l,keyPrefix:c}=o,d=i||((F=r==null?void 0:r.options)==null?void 0:F.defaultNS),u=Cn(d)?[d]:d||["translation"],p=m.useMemo(()=>u,u);(M=(O=r==null?void 0:r.reportNamespaces)==null?void 0:O.addUsedNamespaces)==null||M.call(O,p);const h=m.useRef(0),f=m.useCallback(P=>{if(!r)return vz;const{bindI18n:D,bindI18nStore:E}=o,N=()=>{h.current+=1,P()};return D&&r.on(D,N),E&&r.store.on(E,N),()=>{D&&D.split(" ").forEach(R=>r.off(R,N)),E&&E.split(" ").forEach(R=>r.store.off(R,N))}},[r,o]),g=m.useRef(),v=m.useCallback(()=>{if(!r)return gz;const P=!!(r.isInitialized||r.initializedStoreOnce)&&p.every(A=>UF(A,r,o)),D=t.lng||r.language,E=h.current,N=g.current;if(N&&N.ready===P&&N.lng===D&&N.keyPrefix===c&&N.revision===E)return N;const C={t:r.getFixedT(D,o.nsMode==="fallback"?p:p[0],c),ready:P,lng:D,keyPrefix:c,revision:E};return g.current=C,C},[r,p,c,o,t.lng]),[y,b]=m.useState(0),{t:x,ready:w}=Yk.useSyncExternalStore(f,v,v);m.useEffect(()=>{if(r&&!w&&!l){const P=()=>b(D=>D+1);t.lng?gw(r,t.lng,p,P):kf(r,p,P)}},[r,t.lng,p,w,l,y]);const j=r||{},S=m.useRef(null),k=m.useRef(),T=P=>{const D=Object.getOwnPropertyDescriptors(P);D.__original&&delete D.__original;const E=Object.create(Object.getPrototypeOf(P),D);if(!Object.prototype.hasOwnProperty.call(E,"__original"))try{Object.defineProperty(E,"__original",{value:P,writable:!1,enumerable:!1,configurable:!1})}catch{}return E},L=m.useMemo(()=>{const P=j,D=P==null?void 0:P.language;let E=P;P&&(S.current&&S.current.__original===P?k.current!==D?(E=T(P),S.current=E,k.current=D):E=S.current:(E=T(P),S.current=E,k.current=D));const N=[x,E,w];return N.t=x,N.i18n=E,N.ready=w,N},[x,j,w,j.resolvedLanguage,j.language,j.languages]);if(r&&l&&!w)throw new Promise(P=>{const D=()=>P();t.lng?gw(r,t.lng,p,D):kf(r,p,D)});return L},bz=()=>{const{slug:e}=St(),[t,n]=m.useState(null),[a,i]=m.useState(!0),[r,o]=m.useState(null),{t:l}=Le();return m.useEffect(()=>{e&&(i(!0),o(null),Mk(e).then(c=>{n(c)}).catch(c=>{console.error(c),o(c.message||l("demoBot.defaultError"))}).finally(()=>{i(!1)}))},[e,l]),e?a?s.jsx("div",{className:"page-container",children:s.jsx("p",{children:l("demoBot.loading")})}):r?s.jsxs("div",{className:"page-container",children:[s.jsx("h2",{children:l("demoBot.errorTitle")}),s.jsx("p",{children:r})]}):t?s.jsxs("div",{className:"page-container",children:[s.jsxs("header",{className:"bot-header",children:[s.jsx("div",{className:"bot-avatar",children:t.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h1",{className:"bot-title",children:t.name}),t.description&&s.jsx("p",{className:"bot-description",children:t.description})]})]}),s.jsx(Dk,{slug:t.slug,botName:t.name})]}):s.jsxs("div",{className:"page-container",children:[s.jsx("h2",{children:l("demoBot.notFoundTitle")}),s.jsx("p",{children:l("demoBot.notFoundBody")})]}):s.jsx("div",{className:"page-container",children:s.jsx("p",{children:l("demoBot.noSlug")})})},ud="/assets/coslo-hero-CZqlO02Z.png",Ma="/assets/coslo-assist-247-8YH0sxOy.png",yz="/assets/coslo-growth-Bkje4LAW.png",Mv=()=>{const e=new Date().getFullYear();return s.jsx("footer",{className:"site-footer",children:s.jsxs("div",{className:"lp-container site-footer-inner",children:[s.jsxs("div",{className:"site-footer-left",children:[s.jsx("span",{className:"site-footer-brand",children:"Coslo - Assistente AI"}),s.jsxs("p",{className:"site-footer-copy",children:[" ",e," Coslo. Tutti i diritti riservati."]})]}),s.jsxs("nav",{className:"site-footer-links","aria-label":"Link legali",children:[s.jsx(de,{to:"/policy",children:"Privacy & Policy"}),s.jsx(de,{to:"/terms",children:"Termini & Condizioni"})]}),s.jsxs("div",{className:"site-footer-social","aria-label":"Social network",children:[s.jsx("a",{href:"https://www.linkedin.com",target:"_blank",rel:"noreferrer","aria-label":"LinkedIn",children:s.jsx("span",{children:"in"})}),s.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noreferrer","aria-label":"X / Twitter",children:s.jsx("span",{children:""})}),s.jsx("a",{href:"https://www.instagram.com",target:"_blank",rel:"noreferrer","aria-label":"Instagram",children:s.jsx("span",{children:"IG"})})]})]})})},Km=[{code:"en",labelKey:"common.language.en",flag:""},{code:"it",labelKey:"common.language.it",flag:""},{code:"es",labelKey:"common.language.es",flag:""}],xz=()=>{const{t:e,i18n:t}=Le(),[n,a]=m.useState(!1),i=m.useRef(null),r=(t.language||"en").split("-")[0],o=Km.find(c=>c.code===r)??Km[0],l=c=>{t.changeLanguage(c),a(!1)};return m.useEffect(()=>{const c=u=>{i.current&&(i.current.contains(u.target)||a(!1))},d=u=>{u.key==="Escape"&&a(!1)};return document.addEventListener("mousedown",c),document.addEventListener("keydown",d),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("keydown",d)}},[]),s.jsxs("div",{className:"lang-dropdown",ref:i,children:[s.jsxs("button",{type:"button",className:"lang-dropdown-button",onClick:()=>a(c=>!c),"aria-haspopup":"listbox","aria-expanded":n,children:[s.jsx("span",{className:"lang-dropdown-label",children:e(o.labelKey)}),s.jsx("span",{className:"lang-dropdown-chevron",children:""})]}),n&&s.jsx("div",{className:"lang-dropdown-menu",role:"listbox",children:Km.map(c=>s.jsxs("button",{type:"button",className:c.code===o.code?"lang-dropdown-item lang-dropdown-item-active":"lang-dropdown-item",onClick:()=>l(c.code),role:"option","aria-selected":c.code===o.code,children:[s.jsx("span",{className:"lang-dropdown-flag",children:c.flag}),s.jsx("span",{className:"lang-dropdown-item-label",children:e(c.labelKey)})]},c.code))})]})},wz=()=>{const[e]=Lk(),t=e.get("bot"),{t:n}=Le();return t?s.jsx(rp,{to:`/demo/${t}`,replace:!0}):s.jsxs("div",{className:"landing-page",children:[s.jsx("div",{className:"landing-lang-bar",children:s.jsx(xz,{})}),s.jsx("section",{className:"lp-hero",children:s.jsx("div",{className:"lp-container",children:s.jsxs("div",{className:"lp-hero-grid",children:[s.jsxs("div",{className:"lp-hero-content",children:[s.jsx("h1",{className:"lp-hero-title",children:n("landing.hero.title")}),s.jsx("p",{className:"lp-hero-subtitle",children:n("landing.hero.subtitle")}),s.jsxs("div",{className:"lp-hero-cta",children:[s.jsx(de,{to:"/register",className:"lp-btn lp-btn-primary",children:n("landing.hero.ctaPrimary")}),s.jsx(de,{to:"/login",className:"lp-btn lp-btn-secondary",children:n("landing.hero.ctaSecondary")})]}),s.jsx("p",{className:"lp-hero-note",children:n("landing.hero.note")})]}),s.jsx("div",{className:"lp-hero-image",children:s.jsxs("div",{className:"lp-hero-mascotte-frame",children:[s.jsx("div",{className:"lp-hero-mascotte-glow"}),s.jsx("img",{src:ud,alt:n("landing.hero.altHero"),className:"lp-hero-mascotte-img"}),s.jsxs("div",{className:"lp-hero-mascotte-badge",children:[s.jsx("span",{className:"lp-hero-mascotte-dot"}),n("landing.hero.badge")]})]})})]})})}),s.jsx("section",{className:"lp-section",children:s.jsxs("div",{className:"lp-container lp-intro-with-image",children:[s.jsx("div",{className:"lp-intro-heading",children:s.jsx("h2",{className:"lp-section-title",children:n("landing.intro.title")})}),s.jsx("div",{className:"lp-intro-image",children:s.jsx("div",{className:"lp-intro-illustration-frame",children:s.jsx("img",{src:Ma,alt:n("landing.intro.imageAlt")})})}),s.jsxs("div",{className:"lp-intro-body",children:[s.jsx("p",{className:"lp-text",children:n("landing.intro.p1")}),s.jsx("p",{className:"lp-text",children:n("landing.intro.p2")}),s.jsx("p",{className:"lp-text",children:n("landing.intro.p3")})]})]})}),s.jsx("section",{className:"lp-section lp-section-alt",children:s.jsxs("div",{className:"lp-container",children:[s.jsxs("div",{className:"lp-grid-2 lp-section-intro",children:[s.jsx("div",{children:s.jsx("h2",{className:"lp-section-title",children:n("landing.multichannel.title")})}),s.jsxs("div",{children:[s.jsx("p",{className:"lp-text",children:n("landing.multichannel.p1")}),s.jsx("p",{className:"lp-text",children:n("landing.multichannel.p2")})]})]}),s.jsxs("div",{className:"lp-grid-cards",children:[s.jsxs("div",{className:"lp-card",children:[s.jsx("h3",{className:"lp-card-title",children:n("landing.multichannel.cards.webWidget.title")}),s.jsx("p",{className:"lp-card-text",children:n("landing.multichannel.cards.webWidget.text")})]}),s.jsxs("div",{className:"lp-card",children:[s.jsx("h3",{className:"lp-card-title",children:n("landing.multichannel.cards.whatsapp.title")}),s.jsx("p",{className:"lp-card-text",children:n("landing.multichannel.cards.whatsapp.text")})]}),s.jsxs("div",{className:"lp-card",children:[s.jsx("h3",{className:"lp-card-title",children:n("landing.multichannel.cards.messenger.title")}),s.jsx("p",{className:"lp-card-text",children:n("landing.multichannel.cards.messenger.text")})]}),s.jsxs("div",{className:"lp-card",children:[s.jsx("h3",{className:"lp-card-title",children:n("landing.multichannel.cards.instagram.title")}),s.jsx("p",{className:"lp-card-text",children:n("landing.multichannel.cards.instagram.text")})]})]})]})}),s.jsx("section",{className:"lp-section",children:s.jsxs("div",{className:"lp-container lp-grid-2",children:[s.jsxs("div",{className:"lp-knowledge-left",children:[s.jsx("h2",{className:"lp-section-title",children:n("landing.knowledge.title")}),s.jsxs("div",{className:"lp-knowledge-card",children:[s.jsx("div",{className:"lp-knowledge-avatar",children:s.jsx("img",{src:ud,alt:n("landing.knowledge.imageAlt")})}),s.jsx("div",{className:"lp-knowledge-doc lp-knowledge-doc-1",children:s.jsx("span",{className:"lp-knowledge-doc-label",children:n("landing.knowledge.labels.pdf")})}),s.jsx("div",{className:"lp-knowledge-doc lp-knowledge-doc-2",children:s.jsx("span",{className:"lp-knowledge-doc-label",children:n("landing.knowledge.labels.site")})}),s.jsx("div",{className:"lp-knowledge-doc lp-knowledge-doc-3",children:s.jsx("span",{className:"lp-knowledge-doc-label",children:n("landing.knowledge.labels.faq")})})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"lp-text",children:n("landing.knowledge.p1")}),s.jsx("p",{className:"lp-text",children:n("landing.knowledge.p2")}),s.jsxs("ul",{className:"lp-list",children:[s.jsx("li",{children:n("landing.knowledge.list.l1")}),s.jsx("li",{children:n("landing.knowledge.list.l2")}),s.jsx("li",{children:n("landing.knowledge.list.l3")}),s.jsx("li",{children:n("landing.knowledge.list.l4")})]}),s.jsx("p",{className:"lp-text",children:n("landing.knowledge.p3")}),s.jsx("p",{className:"lp-text",children:n("landing.knowledge.p4")})]})]})}),s.jsx("section",{className:"lp-section lp-section-alt",children:s.jsxs("div",{className:"lp-container lp-grid-2 lp-section-calendar",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"lp-section-title",children:n("landing.booking.title")}),s.jsx("p",{className:"lp-text",children:n("landing.booking.p1")}),s.jsx("p",{className:"lp-text",children:n("landing.booking.p2")}),s.jsxs("ul",{className:"lp-list",children:[s.jsx("li",{children:n("landing.booking.list.l1")}),s.jsx("li",{children:n("landing.booking.list.l2")}),s.jsx("li",{children:n("landing.booking.list.l3")}),s.jsx("li",{children:n("landing.booking.list.l4")})]}),s.jsx("p",{className:"lp-text",children:n("landing.booking.p3")})]}),s.jsxs("div",{className:"lp-calendar-mock",children:[s.jsx("div",{className:"lp-calendar-header",children:n("landing.booking.calendar.header")}),s.jsxs("div",{className:"lp-calendar-body",children:[s.jsxs("div",{className:"lp-calendar-event",children:[s.jsx("div",{className:"lp-event-time",children:n("landing.booking.calendar.event1.time")}),s.jsxs("div",{className:"lp-event-details",children:[s.jsx("strong",{children:n("landing.booking.calendar.event1.title")}),s.jsx("span",{children:n("landing.booking.calendar.event1.subtitle")})]})]}),s.jsxs("div",{className:"lp-calendar-event",children:[s.jsx("div",{className:"lp-event-time",children:n("landing.booking.calendar.event2.time")}),s.jsxs("div",{className:"lp-event-details",children:[s.jsx("strong",{children:n("landing.booking.calendar.event2.title")}),s.jsx("span",{children:n("landing.booking.calendar.event2.subtitle")})]})]})]})]})]})}),s.jsx("section",{className:"lp-section",children:s.jsxs("div",{className:"lp-container lp-growth-grid",children:[s.jsx("div",{className:"lp-growth-visual",children:s.jsx("div",{className:"lp-growth-card",children:s.jsx("img",{src:yz,alt:n("landing.growth.imageAlt"),className:"lp-growth-img"})})}),s.jsxs("div",{children:[s.jsx("h2",{className:"lp-section-title",children:n("landing.growth.title")}),s.jsx("p",{className:"lp-text",children:n("landing.growth.p1")}),s.jsx("p",{className:"lp-text",children:n("landing.growth.p2")}),s.jsxs("div",{className:"lp-pills",children:[s.jsx("span",{className:"lp-pill",children:n("landing.growth.pills.p1")}),s.jsx("span",{className:"lp-pill",children:n("landing.growth.pills.p2")}),s.jsx("span",{className:"lp-pill",children:n("landing.growth.pills.p3")}),s.jsx("span",{className:"lp-pill",children:n("landing.growth.pills.p4")}),s.jsx("span",{className:"lp-pill",children:n("landing.growth.pills.p5")}),s.jsx("span",{className:"lp-pill",children:n("landing.growth.pills.p6")})]}),s.jsx("p",{className:"lp-text",children:n("landing.growth.p3")})]})]})}),s.jsx("section",{className:"lp-section lp-section-alt lp-section-benefits",children:s.jsxs("div",{className:"lp-container",children:[s.jsx("h2",{className:"lp-section-title lp-centered",children:n("landing.benefits.title")}),s.jsxs("div",{className:"lp-grid-cards lp-grid-3",children:[s.jsxs("div",{className:"lp-card",children:[s.jsx("h3",{className:"lp-card-title",children:n("landing.benefits.cards.c1.title")}),s.jsx("p",{className:"lp-card-text",children:n("landing.benefits.cards.c1.text")})]}),s.jsxs("div",{className:"lp-card",children:[s.jsx("h3",{className:"lp-card-title",children:n("landing.benefits.cards.c2.title")}),s.jsx("p",{className:"lp-card-text",children:n("landing.benefits.cards.c2.text")})]}),s.jsxs("div",{className:"lp-card",children:[s.jsx("h3",{className:"lp-card-title",children:n("landing.benefits.cards.c3.title")}),s.jsx("p",{className:"lp-card-text",children:n("landing.benefits.cards.c3.text")})]}),s.jsxs("div",{className:"lp-card",children:[s.jsx("h3",{className:"lp-card-title",children:n("landing.benefits.cards.c4.title")}),s.jsx("p",{className:"lp-card-text",children:n("landing.benefits.cards.c4.text")})]})]})]})}),s.jsx("section",{className:"lp-section",children:s.jsxs("div",{className:"lp-container lp-mini-coslo-grid",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"lp-section-title",children:n("landing.miniCoslo.title")}),s.jsx("p",{className:"lp-text",children:n("landing.miniCoslo.p1")}),s.jsx("p",{className:"lp-text",children:n("landing.miniCoslo.p2")})]}),s.jsxs("div",{className:"lp-mini-coslo-widget",children:[s.jsx("div",{className:"lp-mini-coslo-avatar",children:s.jsx("img",{src:ud,alt:n("landing.miniCoslo.imageAlt")})}),s.jsxs("div",{className:"lp-mini-coslo-bubbles",children:[s.jsx("div",{className:"lp-mini-coslo-bubble lp-mini-coslo-bubble-user",children:n("landing.miniCoslo.bubbleUser")}),s.jsx("div",{className:"lp-mini-coslo-bubble lp-mini-coslo-bubble-bot",children:n("landing.miniCoslo.bubbleBot")})]})]})]})}),s.jsx("section",{className:"lp-section lp-cta-final",children:s.jsxs("div",{className:"lp-container",children:[s.jsx("h2",{className:"lp-section-title lp-centered",children:n("landing.cta.title")}),s.jsx("p",{className:"lp-text lp-centered lp-cta-text",children:n("landing.cta.text")}),s.jsxs("div",{className:"lp-hero-cta",children:[s.jsx(de,{to:"/register",className:"lp-btn lp-btn-primary",children:n("landing.cta.primaryCta")}),s.jsx(de,{to:"/login",className:"lp-btn lp-btn-secondary",children:n("landing.cta.secondaryCta")})]})]})}),s.jsx(Mv,{})]})},Dv="shopify_origin_shop",Fv="shopify_onboarding_bot_id",zv="shopify_onboarding_shop";function Ur(){return typeof window<"u"&&!!window.localStorage}function Wr(e){return e.trim().toLowerCase()}function ll(e){if(!Ur())return;const t=Wr(e);t&&window.localStorage.setItem(Dv,t)}function Rv(){if(!Ur())return null;const e=window.localStorage.getItem(Dv);return e?Wr(e):null}function vi(){Ur()&&window.localStorage.removeItem(Dv)}function _v(e,t){if(!Ur())return;const n=Wr(t);!e||!n||(window.localStorage.setItem(Fv,e),window.localStorage.setItem(zv,n))}function Il(){if(!Ur())return null;const e=window.localStorage.getItem(Fv),t=window.localStorage.getItem(zv);return!e||!t?null:{botId:e,shopDomain:Wr(t)}}function Qk(){Ur()&&(window.localStorage.removeItem(Fv),window.localStorage.removeItem(zv))}function Ol(e){if(!e)return!1;const t=Il();return(t==null?void 0:t.botId)===e}function Ll(e){const n=new URLSearchParams(e).get("shop");return n?Wr(n):null}function Zk(e){return new URLSearchParams(e).get("shopify")==="1"}function qr(e){const t=new URLSearchParams;return t.set("shopify","1"),e&&t.set("shop",Wr(e)),`?${t.toString()}`}function Ml(e,t){if(!e)return;const n=Ll(t);n&&Zk(t)&&_v(e,n)}const jz=()=>{const{t:e}=Le(),t=typeof window<"u"?window.location.origin:"",n=typeof window<"u"?new URLSearchParams(window.location.search).get("shop"):null;m.useEffect(()=>{n&&ll(n)},[n]),m.useEffect(()=>{if(!n)return;const o=`shopify_public_install_started_${n}`;if(typeof window<"u"&&window.sessionStorage.getItem(o)==="1")return;(async()=>{try{console.log("[shopify] public status check start",{shop:n});const d=await fetch(`${ma}/shopify/public/status?shop=${encodeURIComponent(n)}`);if(console.log("[shopify] public status response",{shop:n,ok:d.ok,status:d.status}),!d.ok)return;const u=await d.json();if(console.log("[shopify] public status payload",u),u!=null&&u.isActive)return;typeof window<"u"&&window.sessionStorage.setItem(o,"1");const p=`/?embedded=1&shop=${encodeURIComponent(n)}`,h=`${ma}/shopify/install/public?shop=${encodeURIComponent(n)}&returnTo=${encodeURIComponent(p)}`;console.log("[shopify] public install redirect",{installUrl:h}),window.top&&window.top!==window?window.top.location.href=h:window.location.href=h}catch(d){console.error("Failed to check Shopify install status",d)}})()},[n]);const a=n?`?shopify=1&shop=${encodeURIComponent(n)}`:"",i=`${t}/login${a}`,r=`${t}/register${a}`;return s.jsx("div",{className:"landing-page",children:s.jsx("section",{className:"lp-hero",children:s.jsx("div",{className:"lp-container",children:s.jsxs("div",{className:"lp-hero-grid",children:[s.jsxs("div",{className:"lp-hero-content",children:[s.jsx("div",{style:{marginBottom:"0.9rem"},children:s.jsxs("span",{className:"status-badge status-badge-ok",style:{color:"black"},children:[e("shopifyEmbed.kicker"," Integration Active"),n?`  ${n}`:""]})}),s.jsx("h1",{className:"lp-hero-title",children:e("shopifyEmbed.title","Finish linking your store")}),s.jsx("p",{className:"lp-hero-subtitle",children:e("shopifyEmbed.subtitle","Your Shopify store is now authorized. Open the Coslo dashboard to sync your products and activate your AI Assistant.")}),s.jsxs("div",{className:"lp-hero-cta",children:[s.jsx("a",{className:"lp-btn lp-btn-primary",href:i,target:"_blank",rel:"noreferrer",children:e("shopifyEmbed.login","Open Dashboard & Link Account")}),s.jsx("a",{className:"lp-btn lp-btn-secondary",href:r,target:"_blank",rel:"noreferrer",children:e("shopifyEmbed.register","Create account")})]}),s.jsx("p",{className:"lp-hero-note",children:e("shopifyEmbed.freeTier","A Free plan is available (no credit card required).")})]}),s.jsx("div",{className:"lp-hero-image",children:s.jsxs("div",{className:"lp-hero-mascotte-frame",children:[s.jsx("div",{className:"lp-hero-mascotte-glow"}),s.jsx("img",{src:ud,alt:e("shopifyEmbed.heroAlt","Coslo assistant"),className:"lp-hero-mascotte-img"}),s.jsxs("div",{className:"lp-hero-mascotte-badge",children:[s.jsx("span",{className:"lp-hero-mascotte-dot"}),e("shopifyEmbed.kicker","Shopify app")]})]})})]})})})})},Sz="2026-01-26",Nz="Andrei Cosmin Marica",Cz="Via Petrazzo 18, Messina (ME), 98142, Italia",kc="assistenza@coslo.it",kz="IT03858840832",Pz=()=>{const{t:e}=Le(),t=["whoWeAre","appliesTo","dataWeProcess","howWeUse","shopifyData","aiProcessing","tenantSeparation","messagingChannels","automationEscalation","googleCalendar","thirdParties","retention","deletion","security","transfers","children","rights","changes","questions"],n=a=>{const i=e(a,{returnObjects:!0});return Array.isArray(i)?s.jsx("ul",{className:"policy-list",children:i.map((r,o)=>s.jsx("li",{children:String(r)},o))}):null};return s.jsxs("div",{className:"policy-page",children:[s.jsx("section",{className:"lp-section",children:s.jsxs("div",{className:"lp-container policy-container",children:[s.jsxs("header",{className:"policy-header",children:[s.jsx("p",{className:"policy-kicker",children:e("policy.hero.kicker")}),s.jsx("h1",{className:"lp-section-title",children:e("policy.hero.title")}),s.jsx("p",{className:"lp-text policy-intro",children:e("policy.hero.intro")}),s.jsxs("p",{className:"lp-text",children:[s.jsxs("strong",{children:[e("policy.hero.lastUpdatedLabel"),":"]})," ",Sz]})]}),s.jsxs("div",{className:"policy-grid",children:[s.jsxs("section",{className:"policy-section","aria-labelledby":"policy-who",children:[s.jsx("h2",{id:"policy-who",className:"policy-subtitle",children:e("policy.sections.whoWeAre.title")}),s.jsxs("p",{className:"lp-text",children:[s.jsxs("strong",{children:[e("policy.sections.whoWeAre.serviceLabel"),":"]})," ",e("policy.sections.whoWeAre.serviceValue"),s.jsx("br",{}),s.jsxs("strong",{children:[e("policy.sections.whoWeAre.providerLabel"),":"]})," ",Nz+("(P.IVA: "+kz+")"),s.jsx("br",{}),s.jsxs("strong",{children:[e("policy.sections.whoWeAre.addressLabel"),":"]})," ",Cz,s.jsx("br",{}),s.jsxs("strong",{children:[e("policy.sections.whoWeAre.emailLabel"),":"]})," ",s.jsx("a",{href:`mailto:${kc}`,children:kc})]})]}),t.filter(a=>a!=="whoWeAre").map(a=>s.jsxs("section",{className:"policy-section",children:[s.jsx("h2",{className:"policy-subtitle",children:e(`policy.sections.${a}.title`)}),(()=>{const i=e(`policy.sections.${a}.paragraphs`,{returnObjects:!0});return Array.isArray(i)?i.map((r,o)=>{const l=`policy.sections.${a}.paragraphs.${o}`;return e(`policy.sections.${a}.useTrans`,{defaultValue:"false"})==="true"?s.jsx("p",{className:"lp-text",children:s.jsx(Kk,{i18nKey:l,values:{email:kc},components:{a:s.jsx("a",{href:`mailto:${kc}`}),strong:s.jsx("strong",{})}})},o):s.jsx("p",{className:"lp-text",children:e(l)},o)}):null})(),n(`policy.sections.${a}.list`)]},a))]})]})}),s.jsx(Mv,{})]})},Bv="authUser";let $v=null;function Xk(){return $v}function Jk(){const e=localStorage.getItem(Bv);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function eP(e){$v=e.accessToken,localStorage.setItem(Bv,JSON.stringify(e.user))}function kr(){$v=null,localStorage.removeItem(Bv)}async function Az(e,t,n){const a=await fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t,inviteToken:n||void 0})});await cn(a)}async function Ez(e,t){const n=await fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})});return cn(n)}async function Tz(e){const t=await fetch("/auth/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:e})});return cn(t)}async function Iz(e){const t=await fetch(`/auth/invite?token=${encodeURIComponent(e)}`,{method:"GET",credentials:"include"});return cn(t)}async function tP(e){const n=await fetch("/auth/refresh",{method:"POST",headers:void 0,credentials:"include",body:void 0});return cn(n)}async function Oz(e){const t=e?JSON.stringify({refreshToken:e}):void 0,n=await fetch("/auth/logout",{method:"POST",headers:t?{"Content-Type":"application/json"}:void 0,credentials:"include",body:t});await cn(n)}async function Lz(e){const t=await fetch("/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({idToken:e})});return cn(t)}async function Mz(e,t){const n=await fetch("/auth/mfa/totp/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({mfaToken:e,code:t})});return cn(n)}async function Dz(e){const t=await fetch("/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e})});return cn(t)}async function Fz(e,t,n){const a=await fetch("/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,code:t,newPassword:n})});return cn(a)}const nP=m.createContext(void 0),zz=({children:e})=>{const[t,n]=m.useState(()=>Jk()),[a,i]=m.useState(()=>Xk()),[r,o]=m.useState(!1);function l(v){eP(v),n(v.user),i(v.accessToken)}const c=async(v,y)=>{o(!0);try{const b=await Ez(v,y);if("accessToken"in b&&"user"in b)return l(b),{kind:"success"};const x=b;if(x.mfaRequired&&x.mfaToken)return{kind:"mfa-required",mfaToken:x.mfaToken};throw new Error("Unexpected login response.")}finally{o(!1)}},d=async v=>{o(!0);try{const y=await Lz(v);if("accessToken"in y&&"user"in y)return l(y),{kind:"success"};const b=y;if(b.mfaRequired&&b.mfaToken)return{kind:"mfa-required",mfaToken:b.mfaToken};throw new Error("Unexpected Google login response.")}finally{o(!1)}},u=async(v,y)=>{o(!0);try{const b=await Mz(v,y);l(b)}finally{o(!1)}},p=async(v,y,b)=>{o(!0);try{await Az(v,y,b)}finally{o(!1)}},h=async()=>{o(!0);try{const v=getStoredRefreshToken();await Oz(v)}catch{}finally{kr(),n(null),i(null),o(!1)}},f=async()=>{o(!0);try{const v=await tP();l(v)}catch(v){throw kr(),n(null),i(null),v}finally{o(!1)}};m.useEffect(()=>{a||f().catch(()=>{})},[]);const g={user:t,accessToken:a,isLoading:r,login:c,loginWithGoogle:d,loginWithMfaTotp:u,register:p,logout:h,refreshSession:f};return s.jsx(nP.Provider,{value:g,children:e})};function os(){const e=m.useContext(nP);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}let Pc=null;async function Rz(){return Pc||(Pc=(async()=>{try{const e=await tP();eP(e)}catch(e){throw kr(),e}finally{Pc=null}})()),Pc}function _z(e){return e.startsWith("http")?e:`${ma}${e}`}async function vw(e,t={}){const n=_z(e),a=new Headers(t.headers||{}),i=t.body,r=Xk();return r&&a.set("Authorization",`Bearer ${r}`),!a.has("Content-Type")&&typeof i=="string"&&a.set("Content-Type","application/json"),fetch(n,{...t,headers:a,credentials:"include"})}async function le(e,t={}){let n=await vw(e,t);if(n.status!==401)return cn(n);try{await Rz()}catch{throw new Error("Session expired. Please log in again.")}if(n=await vw(e,t),n.status===401)throw kr(),new Error("Session expired. Please log in again.");return cn(n)}async function cp(){return le("/bots")}async function aP(e){return le("/bots",{method:"POST",body:JSON.stringify(e)})}async function ln(e,t){return le(`/bots/${encodeURIComponent(e)}`,{method:"PATCH",body:JSON.stringify(t)})}async function Bz(e,t){await le(`/bots/${encodeURIComponent(e)}`,{method:"DELETE",body:JSON.stringify({slug:t})})}async function wt(e){return le(`/bots/${encodeURIComponent(e)}`)}async function sP(e,t){return le(`/bots/${encodeURIComponent(e)}/checkout`,{method:"POST",body:JSON.stringify(t)})}async function iP(e,t){return le(`/bots/${encodeURIComponent(e)}/activate-free`,{method:"POST",body:JSON.stringify(t)})}async function rP(e,t){return le(`/bots/${encodeURIComponent(e)}/pricing-preview`,{method:"POST",body:JSON.stringify(t||{})})}async function $z(e){return le(`/bots/${encodeURIComponent(e)}/cancel-subscription`,{method:"POST"})}async function oP(e,t){return le(`/bots/${encodeURIComponent(e)}/change-plan`,{method:"POST",body:JSON.stringify(t)})}async function lP(){return le("/usage-plans")}async function fr(e,t,n){const a={};return t&&(a.domain=t),n!=null&&n.confirm&&(a.confirm=!0),n!=null&&n.estimateId&&(a.estimateId=n.estimateId),le(`/bots/${encodeURIComponent(e)}/knowledge/crawl-domain`,{method:"POST",body:JSON.stringify(a)})}async function bw(e,t){const n=new FormData;return Array.from(t).forEach(a=>{n.append("files",a)}),le(`/bots/${encodeURIComponent(e)}/knowledge/upload-docs`,{method:"POST",body:n})}async function cP(e,t){return le(`/bots/${encodeURIComponent(e)}/knowledge/estimate-crawl-status?estimateId=${encodeURIComponent(t)}`)}async function Vd(e,t){return le(`/bots/${encodeURIComponent(e)}/knowledge/crawl-status?jobId=${encodeURIComponent(t)}`)}async function Uz(e,t){return le(`/bots/${encodeURIComponent(e)}/knowledge/crawl-history?page=${encodeURIComponent(String(t))}`)}async function Wz(e,t){return le(`/bots/${encodeURIComponent(e)}/knowledge/deactivate-job`,{method:"POST",body:JSON.stringify({jobId:t})})}async function qz(e,t){const n=new URLSearchParams({jobId:t});return le(`/bots/${encodeURIComponent(e)}/knowledge/chunks?${n.toString()}`)}async function Hz(e,t,n){return le(`/bots/${encodeURIComponent(e)}/knowledge/chunks/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify({text:n})})}async function Kz(e,t){return le(`/bots/${encodeURIComponent(e)}/knowledge/chunks/${encodeURIComponent(t)}`,{method:"DELETE"})}async function Vz(e,t){const n=new FormData;return Array.from(t).forEach(a=>{n.append("files",a)}),le(`/bots/${encodeURIComponent(e)}/knowledge/estimate-docs`,{method:"POST",body:n})}async function Pi(e){return le(`/bots/${encodeURIComponent(e)}/channels`)}async function Gz(e,t,n){return le(`/bots/${encodeURIComponent(e)}/channels/${encodeURIComponent(t)}`,{method:"PATCH",body:JSON.stringify(n)})}async function dP(e,t){await le(`/bots/${encodeURIComponent(e)}/channels/${encodeURIComponent(t)}`,{method:"DELETE"})}async function Yz(e,t=1){const n=`?page=${encodeURIComponent(String(t))}`;return le(`/conversations/bots/${encodeURIComponent(e)}${n}`)}async function yw(e){return le(`/conversations/${encodeURIComponent(e)}/messages`)}async function Qz(e,t){return le(`/conversations/${encodeURIComponent(e)}/mode`,{method:"POST",body:JSON.stringify({mode:t})})}async function Zz(e){return le(`/conversations/${encodeURIComponent(e)}/details`)}async function Xz(e,t){return le(`/conversations/${encodeURIComponent(e)}/send`,{method:"POST",body:JSON.stringify({text:t})})}async function Jz(e){return le(`/conversations/${encodeURIComponent(e)}/eval`,{method:"POST"})}async function eR(e){return(await le("/conversations/eval-bulk",{method:"POST",body:JSON.stringify({conversationIds:e})})).items||[]}async function uP(e,t,n){const a=new URLSearchParams;return a.set("type",t),n&&a.set("returnPath",n),le(`/bots/meta/${encodeURIComponent(e)}/connect?${a.toString()}`)}async function pP(e){return le(`/meta/sessions/${encodeURIComponent(e)}`)}async function mP(e,t){return le(`/meta/sessions/${encodeURIComponent(e)}/attach`,{method:"POST",body:JSON.stringify({pageId:t})})}async function hP(e,t){return le(`/bots/${encodeURIComponent(e)}/whatsapp/embedded/complete`,{method:"POST",body:JSON.stringify(t)})}async function fP(e,t,n){const a={phoneId:t},i=n==null?void 0:n.trim();return i&&(a.pin=i),le(`/whatsapp/sessions/${encodeURIComponent(e)}/attach`,{method:"POST",body:JSON.stringify(a)})}async function gP(e,t){const n=new URLSearchParams;t!=null&&t.search&&n.set("search",t.search),t!=null&&t.status&&t.status!=="ALL"&&n.set("status",t.status),t!=null&&t.category&&t.category!=="ALL"&&n.set("category",t.category),t!=null&&t.language&&n.set("language",t.language),t!=null&&t.cursor&&n.set("cursor",t.cursor),t!=null&&t.limit&&n.set("limit",String(t.limit));const a=n.toString(),i=`/bots/${encodeURIComponent(e)}/whatsapp/templates`+(a?`?${a}`:"");return le(i)}async function vP(e,t){return le(`/bots/${encodeURIComponent(e)}/whatsapp/templates`,{method:"POST",body:JSON.stringify(t)})}async function bP(e,t,n){return le(`/bots/${encodeURIComponent(e)}/whatsapp/templates/${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify(n)})}async function Uv(e){return le(`/bots/${encodeURIComponent(e)}/meta-leads/automation`)}async function yP(e,t){return le(`/bots/${encodeURIComponent(e)}/meta-leads/automation`,{method:"PUT",body:JSON.stringify(t)})}async function xw(e,t){const n=new URLSearchParams;(t==null?void 0:t.limit)!=null&&n.set("limit",String(t.limit));const a=n.toString(),i=`/bots/${encodeURIComponent(e)}/meta-leads`+(a?`?${a}`:"");return le(i)}async function cl(e){const t=new URLSearchParams({botId:e});return le(`/shopify/shops?${t.toString()}`)}async function xP(e){const t=new URLSearchParams({shop:e});return le(`/shopify/shops/lookup?${t.toString()}`)}async function Af(e,t){return le(`/shopify/shops/${encodeURIComponent(e)}/link`,{method:"PATCH",body:JSON.stringify({botId:t})})}async function Wv(e){return le(`/shopify/${encodeURIComponent(e)}/sync/products`,{method:"POST"})}async function tR(e){return le(`/shopify/widget-config?shop=${encodeURIComponent(e)}`)}const nR=()=>{var D;const{login:e,loginWithGoogle:t,loginWithMfaTotp:n,isLoading:a,user:i}=os(),r=Bt(),o=lt(),[l,c]=m.useState(""),[d,u]=m.useState(""),[p,h]=m.useState("credentials"),[f,g]=m.useState(null),[v,y]=m.useState(""),[b,x]=m.useState(null),[w,j]=m.useState(null),S=m.useRef(null),{t:k}=Le(),T=((D=o.state)==null?void 0:D.from)||"/app/bots",L=Ll(o.search);m.useEffect(()=>{L&&ll(L)},[L]);const F=async()=>{try{const E=Jk();if((E==null?void 0:E.role)==="TEAM_MEMBER"){r("/app/bots",{replace:!0});return}const N=L||Rv();if(N)try{const C=await xP(N);if(C.status==="linked_to_you"&&C.botId){vi(),r(`/app/bots/${encodeURIComponent(C.botId)}`,{replace:!0});return}if(C.status==="available"){ll(N),r(`/onboarding/bots/new${qr(N)}`,{replace:!0});return}C.status==="linked_to_other"?(vi(),window.alert(k("shopifyOnboarding.errors.linkedToOther","This Shopify store is already linked to another Coslo account. Please unlink it first."))):C.status==="inactive"&&(vi(),window.alert(k("shopifyOnboarding.errors.inactiveShop","This Shopify store is inactive. Please reinstall the app and try again.")))}catch(C){console.error("Shopify lookup failed, falling back to default flow",C)}const R=await cp();!R||R.length===0?r("/onboarding/bots/new",{replace:!0}):r("/app/bots",{replace:!0})}catch(E){console.error("Failed to fetch bots after login, falling back to /app/bots",E),r("/app/bots",{replace:!0})}},O=async E=>{E.preventDefault(),x(null),j(null);try{const N=await e(l,d);N.kind==="success"?await F():(g(N.mfaToken),h("mfa"),y(""))}catch(N){console.error(N),x(N.message||k("login.loginError"))}},M=async E=>{if(E.preventDefault(),!!f){j(null);try{await n(f,v.trim()),await F()}catch(N){console.error(N),j(N.message||k("login.mfaError")),y("")}}},P=()=>{h("credentials"),g(null),y(""),j(null)};return m.useEffect(()=>{const E="568984409972-ql252sre4kumaja8kc4d8j4m7fmrdb6a.apps.googleusercontent.com";!window.google||!S.current||(window.google.accounts.id.initialize({client_id:E,callback:async N=>{const R=N.credential;if(R)try{x(null),j(null);const C=await t(R);C.kind==="success"?await F():(g(C.mfaToken),h("mfa"),y(""))}catch(C){console.error(C),x(C.message||k("login.googleError"))}}}),window.google.accounts.id.renderButton(S.current,{theme:"outline",size:"large"}))},[T,t,r,k]),m.useEffect(()=>{!i||a||F().catch(E=>{console.error("Auto-redirect after existing session failed",E)})},[i,a]),s.jsx("section",{className:"auth-landing",children:s.jsx("div",{className:"lp-container",children:s.jsxs("div",{className:"auth-layout",children:[s.jsxs("div",{className:"auth-copy",children:[s.jsx("h1",{className:"auth-title",children:k("login.pageTitle")}),s.jsx("p",{className:"auth-subtitle",children:k("login.subtitle")}),s.jsxs("ul",{className:"auth-bullets",children:[s.jsx("li",{children:k("login.bullets.b1")}),s.jsx("li",{children:k("login.bullets.b2")}),s.jsx("li",{children:k("login.bullets.b3")})]})]}),s.jsx("div",{className:"auth-card",children:p==="credentials"?s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"auth-card-title",children:k("login.cardTitle")}),s.jsxs("form",{className:"form auth-form",onSubmit:O,children:[b&&s.jsx("div",{className:"form-error onboarding-form-error-txt auth-form-error",children:b}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:k("login.email")}),s.jsx("input",{type:"email",value:l,onChange:E=>c(E.target.value),required:!0})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:k("login.password")}),s.jsx("input",{type:"password",value:d,onChange:E=>u(E.target.value),required:!0})]}),s.jsx("div",{style:{textAlign:"right",marginTop:"-0.25rem"},children:s.jsx(de,{to:"/forgot-password",style:{fontSize:"0.85rem"},children:k("login.forgotPassword","Forgot password?")})}),s.jsx("button",{className:"lp-btn lp-btn-primary auth-submit",type:"submit",disabled:a,children:k(a?"login.submitting":"login.submit")})]}),s.jsx("div",{className:"auth-divider",children:s.jsx("span",{children:k("login.divider")})}),s.jsx("div",{className:"auth-google",children:s.jsx("div",{ref:S})}),s.jsxs("p",{className:"auth-legal",style:{color:"black"},children:[k("auth.legalNotice.p1")," ",s.jsx(de,{to:"/terms",children:k("auth.legalNotice.terms")})," ",k("auth.legalNotice.and")," ",s.jsx(de,{to:"/policy",children:k("auth.legalNotice.privacy")}),"."]}),s.jsxs("p",{className:"auth-switch",children:[k("login.noAccount")," ",s.jsx(de,{to:"/register",children:k("login.register")})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"auth-card-title",children:k("login.mfaTitle")}),s.jsx("p",{className:"auth-subtitle",children:k("login.mfaSubtitle")}),s.jsxs("form",{className:"form auth-form",onSubmit:M,children:[w&&s.jsx("div",{className:"form-error onboarding-form-error-txt auth-form-error",children:w}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:k("login.mfaCodeLabel")}),s.jsx("input",{type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:6,value:v,onChange:E=>y(E.target.value),required:!0})]}),s.jsx("button",{className:"lp-btn lp-btn-primary auth-submit",type:"submit",disabled:a,children:k(a?"login.mfaSubmitting":"login.mfaSubmit")}),s.jsx("button",{type:"button",className:"lp-btn lp-btn-ghost",style:{marginTop:"0.75rem"},onClick:P,disabled:a,children:k("login.backToCredentials")})]}),s.jsx("p",{className:"auth-switch",children:k("login.mfaHelp")})]})})]})})})};function aR(e){const t=[];return e.length<8&&t.push("minLength"),/[A-Z]/.test(e)||t.push("uppercase"),/[a-z]/.test(e)||t.push("lowercase"),/[0-9]/.test(e)||t.push("digit"),/[^A-Za-z0-9]/.test(e)||t.push("special"),t}const sR=()=>{const{register:e,loginWithGoogle:t,isLoading:n,user:a}=os(),i=Bt(),r=lt(),{t:o}=Le(),[l,c]=m.useState(""),[d,u]=m.useState(""),[p,h]=m.useState(""),[f,g]=m.useState(null),[v,y]=m.useState(!1),b=m.useRef(null),x=aR(d),w=d===p||p==="",j=Ll(r.search),S=new URLSearchParams(r.search).get("invite");m.useEffect(()=>{j&&ll(j)},[j]),m.useEffect(()=>{S&&Iz(S).then(F=>{F!=null&&F.email&&c(F.email)}).catch(F=>{console.warn("Invite lookup failed",F)})},[S]);const k=async()=>{try{const F=j||Rv();if(F)try{const M=await xP(F);if(M.status==="linked_to_you"&&M.botId){vi(),i(`/app/bots/${encodeURIComponent(M.botId)}`,{replace:!0});return}if(M.status==="available"){ll(F),i(`/onboarding/bots/new${qr(F)}`,{replace:!0});return}M.status==="linked_to_other"?(vi(),window.alert(o("shopifyOnboarding.errors.linkedToOther","This Shopify store is already linked to another Coslo account. Please unlink it first."))):M.status==="inactive"&&(vi(),window.alert(o("shopifyOnboarding.errors.inactiveShop","This Shopify store is inactive. Please reinstall the app and try again.")))}catch(M){console.error("Shopify lookup failed, falling back to default flow",M)}const O=await cp();!O||O.length===0?i("/onboarding/bots/new",{replace:!0}):i("/app/bots",{replace:!0})}catch(F){console.error("Failed to fetch bots after register/login, falling back to /app/bots",F),i("/app/bots",{replace:!0})}},T=async F=>{if(F.preventDefault(),g(null),y(!1),d!==p){g(o("register.errorPasswordMismatch"));return}if(x.length>0){g(o("register.errorPasswordRequirements"));return}try{await e(l,d,S),y(!0),u(""),h("")}catch(O){console.error(O),g(O.message||o("register.errorGeneric"))}};m.useEffect(()=>{const F="568984409972-ql252sre4kumaja8kc4d8j4m7fmrdb6a.apps.googleusercontent.com";!window.google||!b.current||(window.google.accounts.id.initialize({client_id:F,callback:async O=>{const M=O.credential;if(M)try{g(null),y(!1);const P=await t(M);if(P&&P.kind&&P.kind!=="success"){g(o("register.googleErrorMfaNotSupported",{defaultValue:"Your account requires additional verification. Please use the Login page."}));return}await k()}catch(P){console.error(P),g(P.message||o("register.googleError"))}}}),window.google.accounts.id.renderButton(b.current,{theme:"outline",size:"large"}))},[t,o,i]),m.useEffect(()=>{!a||n||k().catch(F=>{console.error("Auto-redirect after existing session failed",F)})},[a,n]);const L=F=>x.includes(F);return s.jsx("section",{className:"auth-landing",children:s.jsx("div",{className:"lp-container",children:s.jsxs("div",{className:"auth-layout",children:[s.jsxs("div",{className:"auth-copy",children:[s.jsx("h1",{className:"auth-title",children:o("register.pageTitle")}),s.jsx("p",{className:"auth-subtitle",children:o("register.subtitle")}),s.jsxs("ul",{className:"auth-bullets",children:[s.jsx("li",{children:o("register.bullets.b1")}),s.jsx("li",{children:o("register.bullets.b2")}),s.jsx("li",{children:o("register.bullets.b3")})]})]}),s.jsxs("div",{className:"auth-card",children:[s.jsx("h2",{className:"auth-card-title",children:o("register.cardTitle")}),s.jsxs("form",{className:"form auth-form",onSubmit:T,children:[f&&s.jsx("div",{className:"form-error onboarding-form-error-txt auth-form-error",children:f}),v&&s.jsx("div",{className:"form-success onboarding-form-success-txt auth-form-success",children:o("register.success")}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:o("register.email")}),s.jsx("input",{type:"email",value:l,onChange:F=>c(F.target.value),required:!0,readOnly:!!S})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:o("register.password")}),s.jsx("input",{type:"password",value:d,onChange:F=>u(F.target.value),required:!0})]}),s.jsxs("div",{className:"password-requirements",children:[s.jsx("p",{className:"pw-title",children:o("register.pwTitle")}),s.jsxs("ul",{children:[s.jsx("li",{className:L("minLength")?"pw-rule pw-rule-bad":"pw-rule pw-rule-ok",children:o("register.pwRules.minLength")}),s.jsx("li",{className:L("uppercase")?"pw-rule pw-rule-bad":"pw-rule pw-rule-ok",children:o("register.pwRules.uppercase")}),s.jsx("li",{className:L("lowercase")?"pw-rule pw-rule-bad":"pw-rule pw-rule-ok",children:o("register.pwRules.lowercase")}),s.jsx("li",{className:L("digit")?"pw-rule pw-rule-bad":"pw-rule pw-rule-ok",children:o("register.pwRules.digit")}),s.jsx("li",{className:L("special")?"pw-rule pw-rule-bad":"pw-rule pw-rule-ok",children:o("register.pwRules.special")})]})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:o("register.passwordConfirm")}),s.jsx("input",{type:"password",value:p,onChange:F=>h(F.target.value),required:!0})]}),!w&&s.jsx("div",{className:"field-error",children:o("register.errorPasswordMismatch")}),s.jsx("button",{className:"lp-btn lp-btn-primary auth-submit",type:"submit",disabled:n,children:o(n?"register.submitting":"register.submit")})]}),s.jsx("div",{className:"auth-divider",children:s.jsx("span",{children:o("login.divider")})}),s.jsx("div",{className:"auth-google",children:s.jsx("div",{ref:b})}),s.jsxs("p",{className:"auth-legal",style:{color:"black"},children:[o("auth.legalNotice.p1")," ",s.jsx(de,{to:"/terms",children:o("auth.legalNotice.terms")})," ",o("auth.legalNotice.and")," ",s.jsx(de,{to:"/policy",children:o("auth.legalNotice.privacy")}),"."]}),s.jsxs("p",{className:"auth-switch",children:[o("register.alreadyAccount")," ",s.jsx(de,{to:"/login",children:o("register.login")})]})]})]})})})},iR=()=>{const[e]=Lk(),[t,n]=m.useState("idle"),[a,i]=m.useState(null),{t:r}=Le();return m.useEffect(()=>{const o=e.get("token");if(!o){n("error"),i(r("verifyEmail.missingToken"));return}n("loading"),Tz(o).then(l=>{n(l.success?"success":"error"),i(l.message||(l.success?r("verifyEmail.successDefault"):r("verifyEmail.invalidOrExpired")))}).catch(l=>{console.error(l),n("error"),i(l.message||r("verifyEmail.genericError"))})},[e,r]),s.jsx("section",{className:"auth-landing",children:s.jsx("div",{className:"lp-container",children:s.jsx("div",{className:"auth-center",children:s.jsxs("div",{className:"auth-card auth-card-verify",children:[s.jsx("h1",{className:"auth-card-title",children:r("verifyEmail.title")}),t==="loading"&&s.jsx("p",{className:"auth-subtitle",children:r("verifyEmail.loading")}),t!=="loading"&&a&&s.jsx("p",{className:"auth-subtitle",children:a}),(t==="success"||t==="error")&&s.jsxs("p",{className:"auth-switch",style:{marginTop:"1.25rem"},children:[r("verifyEmail.backToLogin")," ",s.jsx(de,{to:"/login",children:r("verifyEmail.loginLink")}),"."]})]})})})})};function rR(e){const t=[];return e.length<8&&t.push("minLength"),/[A-Z]/.test(e)||t.push("uppercase"),/[a-z]/.test(e)||t.push("lowercase"),/[0-9]/.test(e)||t.push("digit"),/[^A-Za-z0-9]/.test(e)||t.push("special"),t}const oR=()=>{const{t:e}=Le(),[t,n]=m.useState("request"),[a,i]=m.useState(""),[r,o]=m.useState(""),[l,c]=m.useState(""),[d,u]=m.useState(""),[p,h]=m.useState(!1),[f,g]=m.useState(null),[v,y]=m.useState(null),b=rR(l),x=l===d||d==="",w=async S=>{S.preventDefault(),g(null),y(null),h(!0);try{const k=await Dz(a.trim());y(k.message||e("forgotPassword.success.requested","If an account exists, we sent a reset code to your email.")),n("reset")}catch(k){console.error(k),g((k==null?void 0:k.message)||e("forgotPassword.errors.requestFailed","We couldn't send the reset code. Please try again."))}finally{h(!1)}},j=async S=>{if(S.preventDefault(),g(null),y(null),!x){g(e("forgotPassword.errors.mismatch","Passwords do not match."));return}if(b.length>0){g(e("forgotPassword.errors.requirements","Password does not meet the requirements."));return}h(!0);try{const k=await Fz(a.trim(),r.trim(),l);y(k.message||e("forgotPassword.success.reset","Password updated successfully. You can log in now.")),c(""),u(""),o("")}catch(k){console.error(k),g((k==null?void 0:k.message)||e("forgotPassword.errors.resetFailed","Invalid or expired code. Please try again."))}finally{h(!1)}};return s.jsx("section",{className:"auth-landing",children:s.jsx("div",{className:"lp-container",children:s.jsxs("div",{className:"auth-layout",children:[s.jsxs("div",{className:"auth-copy",children:[s.jsx("h1",{className:"auth-title",children:e("forgotPassword.title","Recover your password")}),s.jsx("p",{className:"auth-subtitle",children:t==="request"?e("forgotPassword.subtitle.request","Enter the email you used to register. We'll send you a 6-digit code."):e("forgotPassword.subtitle.reset","Enter the code we emailed you and choose a new password.")}),s.jsxs("ul",{className:"auth-bullets",children:[s.jsx("li",{children:e("forgotPassword.bullets.b1","Use the same email you registered with.")}),s.jsx("li",{children:e("forgotPassword.bullets.b2","Codes expire in 10 minutes.")}),s.jsx("li",{children:e("forgotPassword.bullets.b3","You'll choose a new password after verifying the code.")})]})]}),s.jsx("div",{className:"auth-card",children:t==="request"?s.jsxs("form",{className:"form auth-form",onSubmit:w,children:[f&&s.jsx("div",{className:"form-error auth-form-error",children:f}),v&&s.jsx("div",{className:"form-success onboarding-form-success-txt auth-form-success",children:v}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("forgotPassword.emailLabel","Email")}),s.jsx("input",{type:"email",value:a,onChange:S=>i(S.target.value),required:!0})]}),s.jsx("button",{className:"lp-btn lp-btn-primary auth-submit",type:"submit",disabled:p,children:p?e("forgotPassword.actions.sending","Sending..."):e("forgotPassword.actions.sendCode","Send reset code")}),s.jsxs("p",{className:"auth-switch",children:[e("forgotPassword.backToLogin","Back to")," ",s.jsx(de,{to:"/login",children:e("login.pageTitle","Login")})]})]}):s.jsxs("form",{className:"form auth-form",onSubmit:j,children:[f&&s.jsx("div",{className:"form-error auth-form-error",children:f}),v&&s.jsx("div",{className:"form-success onboarding-form-success-txt auth-form-success",children:v}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("forgotPassword.emailLabel","Email")}),s.jsx("input",{type:"email",value:a,onChange:S=>i(S.target.value),required:!0})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("forgotPassword.codeLabel","Reset code")}),s.jsx("input",{type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:6,value:r,onChange:S=>o(S.target.value),required:!0})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("forgotPassword.newPassword","New password")}),s.jsx("input",{type:"password",value:l,onChange:S=>c(S.target.value),required:!0})]}),s.jsxs("div",{className:"password-requirements",children:[s.jsx("p",{className:"pw-title",children:e("register.pwTitle")}),s.jsxs("ul",{children:[s.jsx("li",{className:b.includes("minLength")?"pw-rule pw-rule-bad":"pw-rule pw-rule-ok",children:e("register.pwRules.minLength")}),s.jsx("li",{className:b.includes("uppercase")?"pw-rule pw-rule-bad":"pw-rule pw-rule-ok",children:e("register.pwRules.uppercase")}),s.jsx("li",{className:b.includes("lowercase")?"pw-rule pw-rule-bad":"pw-rule pw-rule-ok",children:e("register.pwRules.lowercase")}),s.jsx("li",{className:b.includes("digit")?"pw-rule pw-rule-bad":"pw-rule pw-rule-ok",children:e("register.pwRules.digit")}),s.jsx("li",{className:b.includes("special")?"pw-rule pw-rule-bad":"pw-rule pw-rule-ok",children:e("register.pwRules.special")})]})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("forgotPassword.confirmPassword","Confirm password")}),s.jsx("input",{type:"password",value:d,onChange:S=>u(S.target.value),required:!0})]}),!x&&s.jsx("div",{className:"field-error",children:e("register.errorPasswordMismatch")}),s.jsx("button",{className:"lp-btn lp-btn-primary auth-submit",type:"submit",disabled:p,children:p?e("forgotPassword.actions.updating","Updating..."):e("forgotPassword.actions.resetPassword","Reset password")}),s.jsxs("p",{className:"auth-switch",children:[e("forgotPassword.backToLogin","Back to")," ",s.jsx(de,{to:"/login",children:e("login.pageTitle","Login")})]})]})})]})})})},ww="cookieConsent",lR=()=>{const[e,t]=m.useState(!1);m.useEffect(()=>{try{localStorage.getItem(ww)||t(!0)}catch{t(!0)}},[]);const n=a=>{try{localStorage.setItem(ww,a)}catch{}t(!1)};return e?s.jsx("div",{className:"cookie-banner",children:s.jsxs("div",{className:"lp-container cookie-banner-inner",children:[s.jsxs("div",{className:"cookie-banner-text",children:[s.jsx("h2",{className:"cookie-banner-title",children:"Usiamo cookie e tecnologie simili"}),s.jsxs("p",{className:"cookie-banner-body",children:["Utilizziamo cookie tecnici e, previo tuo consenso, cookie analitici e di profilazione per migliorare l'esperienza e misurare l'utilizzo della piattaforma. Puoi modificare la tua scelta in qualsiasi momento. Consulta la nostra"," ",s.jsx(de,{to:"/policy",className:"cookie-banner-link",children:"Privacy & Policy"})," ","per maggiori dettagli."]})]}),s.jsxs("div",{className:"cookie-banner-actions",children:[s.jsx("button",{type:"button",className:"cookie-btn cookie-btn-secondary",onClick:()=>n("rejected"),children:"Rifiuta"}),s.jsx("button",{type:"button",className:"cookie-btn cookie-btn-primary",onClick:()=>n("accepted"),children:"Accetta"})]})]})}):null},jw=()=>{const{user:e}=os(),t=lt(),n=t.pathname,a=n==="/"&&new URLSearchParams(t.search).get("embedded")==="1",i=t.pathname==="/"||t.pathname==="/policy"||t.pathname==="/terms"||t.pathname==="/login"||t.pathname==="/register"||t.pathname==="/verify-email"||t.pathname==="/forgot-password"||n.startsWith("/onboarding");return s.jsxs("div",{className:i?"layout-root layout-root-landing":"layout-root",children:[!a&&s.jsxs("header",{className:i?"layout-header layout-header-landing":"layout-header",children:[s.jsx("div",{className:"layout-header-left",children:s.jsx(de,{to:"/",className:i?"brand brand-landing":"brand",children:"Coslo - Assistente AI"})}),s.jsx("nav",{className:i?"layout-nav layout-nav-landing":"layout-nav",children:e?s.jsx(de,{to:"/app/bots",children:"Dashboard"}):s.jsxs(s.Fragment,{children:[s.jsx(de,{to:"/login",children:"Login"}),s.jsx(de,{to:"/register",children:"Sign up"})]})})]}),s.jsx("main",{className:i?"layout-main layout-main-landing":"layout-main",children:s.jsx(Ok,{})}),s.jsx(lR,{})]})},Sw=()=>{const{user:e,logout:t}=os(),n=lt(),{t:a}=Le(),[i,r]=m.useState(!1),o=h=>n.pathname.startsWith(h),l=(e==null?void 0:e.role)==="TEAM_MEMBER",c=()=>!!(n.pathname==="/app/bots"||n.pathname.startsWith("/app/bots/")&&n.pathname.endsWith("/conversations")||n.pathname.startsWith("/app/conversations/")),d=async()=>{await t(),r(!1)},u=()=>{r(!1)},p=({onNavigate:h})=>s.jsxs("nav",{className:"app-sidebar-nav",children:[s.jsx(de,{to:"/app/bots",className:o("/app/bots")?"active":void 0,onClick:h,children:a("appLayout.nav.bots")}),!l&&s.jsxs(s.Fragment,{children:[s.jsx(de,{to:"/app/dashboard",className:o("/app/dashboard")||n.pathname==="/app"?"active":void 0,onClick:h,children:a("appLayout.nav.dashboard")}),s.jsx(de,{to:"/app/billing",className:o("/app/billing")?"active":void 0,onClick:h,children:a("appLayout.nav.billing")}),s.jsx(de,{to:"/app/account",className:o("/app/account")?"active":void 0,onClick:h,children:a("appLayout.nav.profile")})]}),(e==null?void 0:e.role)==="REFERRER"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"app-nav-separator"}),s.jsx("div",{className:"app-nav-section-title",children:"Referrals"}),s.jsx(de,{to:"/app/referrals",className:o("/app/referrals")?"active":void 0,onClick:h,children:"Referrer panel"})]}),(e==null?void 0:e.role)==="ADMIN"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"app-nav-separator"}),s.jsx("div",{className:"app-nav-section-title",children:"Admin"}),s.jsx(de,{to:"/app/admin/users",className:o("/app/admin/users")?"active":void 0,onClick:h,children:"Users"}),s.jsx(de,{to:"/app/admin/referrals",className:o("/app/admin/referrals")?"active":void 0,onClick:h,children:"Referrals"}),s.jsx(de,{to:"/app/admin/bots",className:o("/app/admin/bots")?"active":void 0,onClick:h,children:"Bots & subscriptions"}),s.jsx(de,{to:"/app/admin/conversations",className:o("/app/admin/conversations")?"active":void 0,onClick:h,children:"Conversations"}),s.jsx(de,{to:"/app/admin/bookings",className:o("/app/admin/bookings")?"active":void 0,onClick:h,children:"Bookings"}),s.jsx(de,{to:"/app/admin/emails",className:o("/app/admin/emails")?"active":void 0,onClick:h,children:"Email usage"}),s.jsx(de,{to:"/app/admin/openai-usage",className:o("/app/admin/openai-usage")?"active":void 0,onClick:h,children:"OpenAI usage"}),s.jsx(de,{to:"/app/admin/payments",className:o("/app/admin/payments")?"active":void 0,onClick:h,children:"Payments"}),s.jsx(de,{to:"/app/admin/integrations",className:o("/app/admin/integrations")?"active":void 0,onClick:h,children:"Channels"}),s.jsx(de,{to:"/app/admin/plans",className:o("/app/admin/plans")?"active":void 0,onClick:h,children:"Plans & pricing"}),s.jsx(de,{to:"/app/referrals",className:o("/app/referrals")?"active":void 0,onClick:h,children:"Referrer panel"})]})]});return l&&!c()?s.jsx(rp,{to:"/app/bots",replace:!0}):s.jsxs("div",{className:"app-layout-root",children:[s.jsxs("aside",{className:"app-sidebar",children:[s.jsx("div",{className:"app-sidebar-header",children:s.jsx("h2",{children:a("appLayout.sidebarTitle")})}),s.jsx(p,{})]}),s.jsxs("div",{className:"app-main",children:[s.jsxs("header",{className:"app-main-header",children:[s.jsxs("div",{className:"app-main-header-left",children:[s.jsx("button",{type:"button",className:"app-burger",onClick:()=>r(!0),"aria-label":a("appLayout.aria.openNav"),children:s.jsx("span",{className:"app-burger-icon"})}),s.jsx("span",{className:"brand-small",children:a("appLayout.brandSmall")})]}),s.jsx("div",{className:"app-main-header-right",children:e&&s.jsx("button",{className:"btn-link",onClick:d,children:a("appLayout.logout")})})]}),i&&s.jsx("div",{className:"app-mobile-nav-overlay",onClick:()=>r(!1),children:s.jsxs("aside",{className:"app-mobile-nav",onClick:h=>h.stopPropagation(),children:[s.jsxs("div",{className:"app-mobile-nav-header",children:[s.jsx("span",{className:"brand-small",children:a("appLayout.sidebarTitle")}),s.jsx("button",{type:"button",className:"app-mobile-nav-close",onClick:()=>r(!1),"aria-label":a("appLayout.aria.closeNav"),children:""})]}),s.jsx(p,{onNavigate:u}),e&&s.jsxs("div",{className:"app-mobile-nav-user",children:[s.jsx("div",{className:"app-mobile-nav-email",children:e.email}),s.jsx("button",{type:"button",className:"btn-link danger",onClick:d,children:a("appLayout.logout")})]})]})}),s.jsx("main",{className:"app-main-content",children:s.jsx(Ok,{})})]})]})},Vm=({children:e})=>{const{user:t,isLoading:n}=os(),a=lt();return n?s.jsx("div",{className:"page-container",children:s.jsx("p",{children:"Checking session..."})}):t?e:s.jsx(rp,{to:"/login",replace:!0,state:{from:a.pathname+a.search}})},Pn=({allowed:e,children:t})=>{const{user:n,isLoading:a}=os(),i=lt();return a?s.jsx("div",{className:"page-container",children:s.jsx("p",{children:"Checking permissions..."})}):n?e.includes(n.role)?t:s.jsxs("div",{className:"page-container",children:[s.jsx("h2",{children:"Not authorized"}),s.jsx("p",{children:"You dont have access to this page."})]}):s.jsx(rp,{to:"/login",replace:!0,state:{from:i.pathname+i.search}})};function Za(e){const t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0");return`${t}-${n}`}async function cR(e,t){const n=new URLSearchParams({code:e});t&&n.set("path",t);const a=await fetch(`${ma}/referrals/track?${n.toString()}`,{method:"GET",credentials:"include"});return cn(a)}async function dR(){return le("/referrals/me")}async function Nw(e){const t=new URLSearchParams;e&&t.set("month",e);const n=t.toString()?`?${t.toString()}`:"";return le(`/referrals/me/stats${n}`)}async function uR(e){return le("/referrals/admin/partners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function pR(e){const t=new URLSearchParams;e&&t.set("month",e);const n=t.toString()?`?${t.toString()}`:"";return le(`/referrals/admin/overview${n}`)}async function mR(e){const t=new URLSearchParams;e.month&&t.set("month",e.month),t.set("take",String(e.take)),t.set("skip",String(e.skip));const n=t.toString()?`?${t.toString()}`:"";return le(`/referrals/admin/partners/${encodeURIComponent(e.partnerId)}/detail${n}`)}async function hR(e){return le(`/referrals/admin/partners/${encodeURIComponent(e.partnerId)}/payouts/${encodeURIComponent(e.monthKey)}/mark-paid`,{method:"POST"})}const wP="referralCode";function jP(){const e=localStorage.getItem(wP),t=e==null?void 0:e.trim();return t||null}function fR(e){const t=e.trim();t&&localStorage.setItem(wP,t)}const gR=()=>{const e=lt();return m.useEffect(()=>{const t=new URLSearchParams(e.search),n=t.get("ref")||t.get("referral")||t.get("referralCode"),a=n==null?void 0:n.trim();if(!a)return;fR(a);const i=`referralTracked:${a}`;sessionStorage.getItem(i)||(sessionStorage.setItem(i,"1"),cR(a,e.pathname).catch(()=>{}))},[e.search,e.pathname]),null},Gm={name:"",language:"en_US",category:"UTILITY",headerEnabled:!1,headerText:"",bodyText:"",footerEnabled:!1,footerText:"",buttons:[]};function vR(e){switch(e){case"APPROVED":return"status-badge status-badge-ok";case"PENDING":return"status-badge status-badge-warn";case"REJECTED":return"status-badge status-badge-error";default:return"status-badge"}}function bR(e){const t=[];if(e.headerEnabled&&e.headerText.trim()&&t.push({type:"HEADER",format:"TEXT",text:e.headerText.trim(),example:e.headerText.includes("{{")?{header_text:["Example header"]}:void 0}),e.bodyText.trim()){const a=e.bodyText.trim(),i=a.match(/\{\{\d+\}\}/g)||[];t.push({type:"BODY",text:a,example:i.length>0?{body_text:i.map((r,o)=>`Example ${o+1}`)}:void 0})}e.footerEnabled&&e.footerText.trim()&&t.push({type:"FOOTER",text:e.footerText.trim()});const n=e.buttons.filter(a=>a.text.trim()).map(a=>({type:a.type,text:a.text.trim(),url:a.type==="URL"?a.url:void 0,phone_number:a.type==="PHONE_NUMBER"?a.phone_number:void 0}));return n.length>0&&t.push({type:"BUTTONS",buttons:n}),t}function yR(e){var r;const t=e.components.find(o=>o.type==="HEADER"),n=e.components.find(o=>o.type==="BODY"),a=e.components.find(o=>o.type==="FOOTER"),i=e.components.find(o=>o.type==="BUTTONS");return{name:e.name,language:e.language,category:e.category,headerEnabled:!!t,headerText:(t==null?void 0:t.text)??"",bodyText:(n==null?void 0:n.text)??"",footerEnabled:!!a,footerText:(a==null?void 0:a.text)??"",buttons:((r=i==null?void 0:i.buttons)==null?void 0:r.map((o,l)=>({id:`${e.id}-btn-${l}`,type:o.type,text:o.text,url:o.url,phone_number:o.phone_number})))??[]}}const xR=()=>{const{t:e}=Le(),{id:t}=St(),[n,a]=m.useState(null),[i,r]=m.useState([]),[o,l]=m.useState([]),[c,d]=m.useState(!0),[u,p]=m.useState(!1),[h,f]=m.useState(null),[g,v]=m.useState(null),[y,b]=m.useState({search:"",status:"ALL",category:"ALL"}),[x,w]=m.useState(null),[j,S]=m.useState("create"),[k,T]=m.useState(null),[L,F]=m.useState(Gm),[O,M]=m.useState(!1),[P,D]=m.useState(!1),[E,N]=m.useState(null),[R,C]=m.useState({phoneFieldName:"phone_number",consentFieldName:"whatsapp_opt_in",requiresWhatsappOptIn:!0,templateName:"",templateLanguage:""}),[A,_]=m.useState(!1),[B,H]=m.useState(!1),[Z,ie]=m.useState([]),[U,G]=m.useState(!1),V=m.useMemo(()=>i.find(I=>I.type==="WHATSAPP")||null,[i]),$=m.useMemo(()=>i.find(I=>I.type==="FACEBOOK")||null,[i]),q=m.useMemo(()=>V?(V.meta||{}).needsReconnect!==!0:!1,[V]),z=m.useMemo(()=>$?($.meta||{}).needsReconnect!==!0:!1,[$]),ee=m.useMemo(()=>n?n.leadWhatsappMessages200||n.leadWhatsappMessages500||n.leadWhatsappMessages1000:!1,[n]);m.useEffect(()=>{if(!t)return;const I=t;async function Y(){try{d(!0),f(null);const[W,ae]=await Promise.all([wt(I),Pi(I)]);a(W),r(ae)}catch(W){console.error(W),f((W==null?void 0:W.message)||"Failed to load bot or channels.")}finally{d(!1)}}Y()},[t]);async function J(){if(!(!t||!q))try{p(!0),f(null);const I=await gP(t,{limit:50});l(I.items)}catch(I){console.error(I),f((I==null?void 0:I.message)||"Failed to load WhatsApp templates.")}finally{p(!1)}}async function X(){if(t)try{_(!0),G(!0),f(null);const[I,Y]=await Promise.all([Uv(t),xw(t,{limit:50})]);I?(N(I),C({phoneFieldName:I.phoneFieldName||"phone_number",consentFieldName:I.consentFieldName||"",requiresWhatsappOptIn:I.requiresWhatsappOptIn,templateName:I.templateName||"",templateLanguage:I.templateLanguage||""})):(N(null),C({phoneFieldName:"phone_number",consentFieldName:"whatsapp_opt_in",requiresWhatsappOptIn:!0,templateName:"",templateLanguage:""})),ie(Y.items)}catch(I){console.error(I),f((I==null?void 0:I.message)||"Failed to load lead automation settings or leads.")}finally{_(!1),G(!1)}}m.useEffect(()=>{!t||!ee||(async()=>(await X(),await J()))()},[t,ee,q]);const ne=m.useMemo(()=>o.filter(I=>I.status==="APPROVED"),[o]),ue=m.useMemo(()=>o.filter(I=>{if(y.status!=="ALL"&&I.status!==y.status||y.category!=="ALL"&&I.category!==y.category)return!1;if(y.search){const Y=y.search.toLowerCase();if(!I.name.toLowerCase().includes(Y)&&!I.language.toLowerCase().includes(Y))return!1}return!0}),[o,y]);function fe(I,Y){F(W=>({...W,[I]:Y}))}function we(I){const Y=I.toLowerCase().replace(/[^a-z0-9_]/g,"_").replace(/_{2,}/g,"_").replace(/^_+|_+$/g,"");fe("name",Y)}function Ae(){F(I=>({...I,buttons:[...I.buttons,{id:`btn-${Date.now()}-${I.buttons.length}`,type:"QUICK_REPLY",text:""}]}))}function Q(I,Y){F(W=>({...W,buttons:W.buttons.map(ae=>ae.id===I?{...ae,...Y}:ae)}))}function be(I){F(Y=>({...Y,buttons:Y.buttons.filter(W=>W.id!==I)}))}function Oe(){S("create"),T(null),F(Gm),w(null),v(null),D(!0)}function Ie(I){S("edit"),T(I.id),F(yR(I)),w(I.id),v(null),D(!0)}function We(){D(!1)}async function ze(I){if(I.preventDefault(),!t)return;M(!0),f(null),v(null);const Y=bR(L),W={name:L.name,category:L.category,language:L.language,components:Y};try{j==="create"?(await vP(t,W),v(e("whatsappTemplates.messages.created","Template created.")),F(Gm)):j==="edit"&&k&&(await bP(t,k,W),v(e("whatsappTemplates.messages.updated","Template updated."))),await J(),D(!1)}catch(ae){console.error(ae),f((ae==null?void 0:ae.message)||e("whatsappTemplates.messages.saveFailed",{defaultValue:"Failed to save template."}))}finally{M(!1)}}async function ke(I){if(I.preventDefault(),!!t){H(!0),f(null),v(null);try{const Y={phoneFieldName:R.phoneFieldName||"phone_number",consentFieldName:R.consentFieldName||"",requiresWhatsappOptIn:R.requiresWhatsappOptIn,templateName:R.templateName||"",templateLanguage:R.templateLanguage||""},W=await yP(t,Y);N(W),v(e("whatsappTemplates.leadAutomation.saveSuccess","Lead automation settings saved."))}catch(Y){console.error(Y),f((Y==null?void 0:Y.message)||e("whatsappTemplates.leadAutomation.saveError","Failed to save lead automation settings."))}finally{H(!1)}}}async function qe(){if(t)try{G(!0),f(null);const I=await xw(t,{limit:50});ie(I.items)}catch(I){console.error(I),f((I==null?void 0:I.message)||e("whatsappTemplates.leads.refreshError","Failed to refresh leads."))}finally{G(!1)}}if(!t)return null;if(c)return s.jsxs("div",{className:"page",children:[s.jsx("div",{className:"page-header",children:s.jsx("h1",{children:e("whatsappTemplates.titleFallback","WhatsApp templates")})}),s.jsx("div",{className:"card",children:s.jsx("p",{className:"muted",children:e("common.loading","Loading")})})]});const Ee=ee;return s.jsxs("div",{className:"page",children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:e("whatsappTemplates.title","WhatsApp message templates")}),n&&s.jsx("p",{className:"muted",children:e("whatsappTemplates.subtitle",{defaultValue:"Lead Ads  WhatsApp automation for {{name}}",name:n.name})})]}),s.jsxs("div",{className:"page-header-actions",children:[s.jsx(de,{to:`/app/bots/${t}`,className:"btn-secondary",children:e("botChannels.backToBot")}),Ee&&q&&s.jsx("button",{type:"button",className:"btn-primary",onClick:Oe,children:e("whatsappTemplates.addTemplate","New template")})]})]}),h&&s.jsx("div",{className:"alert alert-error",children:s.jsx("div",{children:h})}),g&&s.jsx("div",{className:"alert alert-success",children:s.jsx("div",{children:g})}),Ee&&!z&&s.jsxs("div",{className:"alert-warning",style:{marginBottom:"1rem"},children:[s.jsxs("strong",{children:[e("whatsappTemplates.status.facebookStatus","Facebook status"),":"," ",e("whatsappTemplates.status.facebookNotConnected","Not connected")]})," ",e("whatsappTemplates.facebookNotConnectedBody","Lead Ads from Facebook will not be received until you connect a Facebook page on the Channels page.")]}),Ee&&!q&&s.jsxs("div",{className:"alert-warning",style:{marginBottom:"0.5rem"},children:[s.jsxs("strong",{children:[e("whatsappTemplates.status.whatsappStatus","WhatsApp status"),":"," ",e("whatsappTemplates.status.notConnected","Not connected")]})," ",e("whatsappTemplates.notConnectedBody","You can configure Lead Ads and see incoming leads, but to send WhatsApp templates you must connect a WhatsApp business number on the Channels page.")]}),!Ee&&s.jsxs("div",{className:"card",children:[s.jsx("h2",{children:e("whatsappTemplates.leadFeatureNotEnabledTitle","Lead Ads feature not enabled")}),s.jsx("p",{className:"muted",children:e("whatsappTemplates.leadFeatureNotEnabledBody","To configure Lead Ads  WhatsApp automation, first enable the Lead Ads add-on on the Features page for this bot.")}),s.jsx(de,{to:`/app/bots/${encodeURIComponent(t)}/features`,className:"btn-primary",children:e("whatsappTemplates.leadFeatureGoToFeatures","Go to Features")})]}),Ee&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"wa-templates-stack",children:[s.jsx("section",{className:"card wa-lead-automation-card",children:s.jsxs("form",{onSubmit:ke,className:"form",children:[s.jsx("div",{className:"form-header-row",children:s.jsx("h2",{children:e("whatsappTemplates.leadAutomation.title","Lead Ads  WhatsApp automation")})}),A?s.jsx("p",{className:"muted",children:e("whatsappTemplates.leadAutomation.loading","Loading automation settings")}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"form-grid-2",children:[s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("whatsappTemplates.leadAutomation.phoneField","Phone field name")}),s.jsx("input",{type:"text",value:R.phoneFieldName||"",onChange:I=>C(Y=>({...Y,phoneFieldName:I.target.value})),placeholder:"phone_number",required:!0}),s.jsx("div",{className:"muted small",children:e("whatsappTemplates.leadAutomation.phoneFieldHelp","Name of the form field that contains the phone number in the lead payload.")})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("whatsappTemplates.leadAutomation.consentField","Consent field name (optional)")}),s.jsx("input",{type:"text",value:R.consentFieldName||"",onChange:I=>C(Y=>({...Y,consentFieldName:I.target.value})),placeholder:"whatsapp_opt_in"}),s.jsx("div",{className:"muted small",children:e("whatsappTemplates.leadAutomation.consentFieldHelp","Name of the yes/no field used for WhatsApp consent.")})]})]}),s.jsx("div",{className:"form-field form-field-inline",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:R.requiresWhatsappOptIn,onChange:I=>C(Y=>({...Y,requiresWhatsappOptIn:I.target.checked}))})," ",e("whatsappTemplates.leadAutomation.requireOptIn","Require explicit WhatsApp opt-in")]})}),s.jsx("hr",{}),s.jsx("div",{className:"form-grid-2",children:s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("whatsappTemplates.leadAutomation.template","Template to send")}),s.jsxs("select",{value:R.templateName&&R.templateLanguage?`${R.templateName}:${R.templateLanguage}`:"",onChange:I=>{const Y=I.target.value;C(W=>{if(!Y)return{...W,templateName:"",templateLanguage:""};const[ae,pe]=Y.split(":");return{...W,templateName:ae,templateLanguage:pe}})},required:!0,disabled:ne.length===0,children:[s.jsx("option",{value:"",children:e("whatsappTemplates.leadAutomation.templatePlaceholder","Select an approved template")}),ne.map(I=>s.jsxs("option",{value:`${I.name}:${I.language}`,children:[I.name," (",I.language,")"]},I.id))]}),s.jsx("div",{className:"muted small",children:e("whatsappTemplates.leadAutomation.templateHelp","Template used for new leads from Meta. Only approved templates are available.")})]})}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{type:"submit",className:"btn-primary",disabled:B,children:B?e("common.saving","Saving"):e("whatsappTemplates.leadAutomation.save","Save automation")})})]})]})}),s.jsxs("section",{className:"card wa-template-list-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:e("whatsappTemplates.history.title","Template history")}),q&&s.jsx("button",{type:"button",className:"btn-secondary btn-sm",onClick:Oe,children:e("whatsappTemplates.addTemplate","New template")})]}),s.jsxs("div",{className:"wa-template-filters",children:[s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("whatsappTemplates.filters.search","Search")}),s.jsx("input",{type:"text",placeholder:e("whatsappTemplates.filters.searchPlaceholder","Search by name or language"),value:y.search,onChange:I=>b(Y=>({...Y,search:I.target.value}))})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("whatsappTemplates.filters.status","Status")}),s.jsxs("select",{value:y.status,onChange:I=>b(Y=>({...Y,status:I.target.value})),children:[s.jsx("option",{value:"ALL",children:e("whatsappTemplates.filters.statusAll","All")}),s.jsx("option",{value:"APPROVED",children:e("whatsappTemplates.filters.statusApproved","Approved")}),s.jsx("option",{value:"PENDING",children:e("whatsappTemplates.filters.statusPending","Pending")}),s.jsx("option",{value:"REJECTED",children:e("whatsappTemplates.filters.statusRejected","Rejected")})]})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("whatsappTemplates.filters.category","Category")}),s.jsxs("select",{value:y.category,onChange:I=>b(Y=>({...Y,category:I.target.value})),children:[s.jsx("option",{value:"ALL",children:e("whatsappTemplates.filters.categoryAll","All")}),s.jsx("option",{value:"UTILITY",children:e("whatsappTemplates.category.utility","Utility")}),s.jsx("option",{value:"MARKETING",children:e("whatsappTemplates.category.marketing","Marketing")}),s.jsx("option",{value:"AUTHENTICATION",children:e("whatsappTemplates.category.authentication","Authentication")})]})]})]}),u?s.jsx("p",{className:"muted",children:e("whatsappTemplates.loadingTemplates","Loading templates")}):q?ue.length===0?s.jsxs("div",{className:"wa-template-empty",children:[s.jsx("p",{className:"muted",children:e("whatsappTemplates.empty","No WhatsApp templates found for this bot yet.")}),s.jsx("button",{type:"button",className:"btn-primary",onClick:Oe,children:e("whatsappTemplates.emptyCta","Create your first template")})]}):s.jsx("div",{className:"table-wrapper",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:e("whatsappTemplates.columns.name","Template")}),s.jsx("th",{children:e("whatsappTemplates.columns.status","Status")}),s.jsx("th",{children:e("whatsappTemplates.columns.updated","Last update")}),s.jsx("th",{})]})}),s.jsx("tbody",{children:ue.map(I=>s.jsxs("tr",{className:"wa-template-row"+(I.id===x?" wa-template-row--active":""),onClick:()=>w(I.id),children:[s.jsxs("td",{children:[s.jsx("div",{className:"wa-template-name",children:I.name}),s.jsxs("div",{className:"wa-template-meta",children:[s.jsx("span",{children:I.language}),s.jsxs("span",{children:["  ",I.category]})]})]}),s.jsx("td",{children:s.jsx("span",{className:vR(I.status),children:I.status})}),s.jsx("td",{children:I.lastUpdatedAt?s.jsx("span",{className:"muted",children:new Date(I.lastUpdatedAt).toLocaleDateString()}):s.jsx("span",{className:"muted",children:""})}),s.jsx("td",{className:"wa-template-actions",children:s.jsx("button",{type:"button",className:"btn-secondary btn-sm",onClick:Y=>{Y.stopPropagation(),Ie(I)},disabled:!q,children:e("whatsappTemplates.actions.edit","Edit")})})]},I.id))})]})}):s.jsx("p",{className:"muted",children:e("whatsappTemplates.templates.requireWhatsapp","Connect a WhatsApp number on the Channels page to sync and manage templates.")})]}),s.jsxs("section",{className:"card wa-leads-card",children:[s.jsxs("div",{className:"card-header-row",children:[s.jsx("h2",{children:e("whatsappTemplates.leads.title","Recent leads")}),s.jsx("button",{type:"button",className:"btn-secondary btn-xs",onClick:qe,disabled:U,children:U?e("common.loading","Loading"):e("whatsappTemplates.leads.refresh","Refresh")})]}),U?s.jsx("p",{className:"muted",children:e("whatsappTemplates.leads.loading","Loading leads")}):z?Z.length===0?s.jsx("p",{className:"muted",children:e("whatsappTemplates.leads.empty","No leads received yet.")}):s.jsx("div",{className:"table-wrapper",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:e("whatsappTemplates.leads.createdAt","Received at")}),s.jsx("th",{children:e("whatsappTemplates.leads.phone","Phone")}),s.jsx("th",{children:e("whatsappTemplates.leads.messageSent","Message sent")}),s.jsx("th",{children:e("whatsappTemplates.leads.status","Status")})]})}),s.jsx("tbody",{children:Z.map(I=>{const Y=I.whatsappStatus==="SENT";return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("span",{className:"muted",children:new Date(I.createdAt).toLocaleString()})}),s.jsx("td",{children:I.phone||""}),s.jsx("td",{children:Y?"true":"false"}),s.jsx("td",{children:s.jsxs("span",{className:"muted",children:[I.whatsappStatus,I.whatsappError?`  ${I.whatsappError}`:""]})})]},I.id)})})]})}):s.jsx("p",{className:"muted",children:e("whatsappTemplates.leads.requireFacebook","Connect a Facebook page on the Channels page to start receiving leads.")})]})]}),P&&s.jsx("div",{className:"wa-template-modal-backdrop",children:s.jsxs("div",{className:"wa-template-modal",children:[s.jsxs("div",{className:"wa-template-modal-header",children:[s.jsx("h2",{children:j==="create"?e("whatsappTemplates.modal.createTitle","New WhatsApp template"):e("whatsappTemplates.modal.editTitle","Edit WhatsApp template")}),s.jsx("button",{type:"button",className:"btn-ghost btn-xs",onClick:We,children:""})]}),s.jsxs("form",{onSubmit:ze,className:"form",children:[s.jsxs("div",{className:"form-grid-2",children:[s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("whatsappTemplates.form.name","Template name")}),s.jsx("input",{type:"text",value:L.name,onChange:I=>we(I.target.value),disabled:j==="edit",placeholder:e("whatsappTemplates.form.namePlaceholder","e.g. order_update"),required:!0}),s.jsx("div",{className:"muted small",children:e("whatsappTemplates.form.nameHelp","Lowercase, numbers and underscores only. This is not visible to end users.")})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("whatsappTemplates.form.language","Language")}),s.jsx("input",{type:"text",value:L.language,onChange:I=>fe("language",I.target.value),placeholder:"en_US",required:!0}),s.jsx("div",{className:"muted small",children:e("whatsappTemplates.form.languageHelp","Use WhatsApp language codes like en_US, it_IT, es_ES")})]})]}),s.jsx("div",{className:"form-grid-2",children:s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("whatsappTemplates.form.category","Category")}),s.jsxs("select",{value:L.category,onChange:I=>fe("category",I.target.value),children:[s.jsx("option",{value:"UTILITY",children:e("whatsappTemplates.category.utility","Utility")}),s.jsx("option",{value:"MARKETING",children:e("whatsappTemplates.category.marketing","Marketing")}),s.jsx("option",{value:"AUTHENTICATION",children:e("whatsappTemplates.category.authentication","Authentication")})]})]})}),s.jsx("hr",{}),s.jsxs("div",{className:"form-section",children:[s.jsx("div",{className:"form-field form-field-inline",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:L.headerEnabled,onChange:I=>fe("headerEnabled",I.target.checked)})," ",e("whatsappTemplates.form.header","Header (optional)")]})}),L.headerEnabled&&s.jsxs("div",{className:"form-field",children:[s.jsx("textarea",{value:L.headerText,onChange:I=>fe("headerText",I.target.value),maxLength:60,placeholder:e("whatsappTemplates.form.headerPlaceholder","Short title shown above the body")}),s.jsx("div",{className:"muted small",children:e("whatsappTemplates.form.headerHelp","Up to 60 characters. You can use variables like {{1}}.")})]})]}),s.jsx("div",{className:"form-section",children:s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("whatsappTemplates.form.body","Body")}),s.jsx("textarea",{value:L.bodyText,onChange:I=>fe("bodyText",I.target.value),rows:5,placeholder:e("whatsappTemplates.form.bodyPlaceholder","Main message text. Use {{1}}, {{2}},  for variables."),required:!0}),s.jsx("div",{className:"muted small",children:e("whatsappTemplates.form.bodyHelp","Keep it clear and concise. Variables will be filled at send time.")})]})}),s.jsxs("div",{className:"form-section",children:[s.jsx("div",{className:"form-field form-field-inline",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:L.footerEnabled,onChange:I=>fe("footerEnabled",I.target.checked)})," ",e("whatsappTemplates.form.footer","Footer (optional)")]})}),L.footerEnabled&&s.jsx("div",{className:"form-field",children:s.jsx("textarea",{value:L.footerText,onChange:I=>fe("footerText",I.target.value),maxLength:60,placeholder:e("whatsappTemplates.form.footerPlaceholder","Small line below the message (e.g. legal or brand).")})})]}),s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-field",children:[s.jsxs("div",{className:"form-label-row",children:[s.jsx("label",{children:e("whatsappTemplates.form.buttons","Buttons")}),s.jsx("button",{type:"button",className:"btn-secondary btn-xs",onClick:Ae,children:e("whatsappTemplates.form.addButton","Add button")})]}),s.jsx("div",{className:"muted small",children:e("whatsappTemplates.form.buttonsHelp","Optional quick reply, URL or phone buttons.")})]}),L.buttons.map(I=>s.jsxs("div",{className:"wa-template-button-row form-grid-3",children:[s.jsx("div",{className:"form-field",children:s.jsxs("select",{value:I.type,onChange:Y=>Q(I.id,{type:Y.target.value,url:Y.target.value==="URL"?I.url:void 0,phone_number:Y.target.value==="PHONE_NUMBER"?I.phone_number:void 0}),children:[s.jsx("option",{value:"QUICK_REPLY",children:e("whatsappTemplates.buttons.quickReply","Quick reply")}),s.jsx("option",{value:"URL",children:e("whatsappTemplates.buttons.url","URL")}),s.jsx("option",{value:"PHONE_NUMBER",children:e("whatsappTemplates.buttons.phone","Phone number")})]})}),s.jsx("div",{className:"form-field",children:s.jsx("input",{type:"text",value:I.text,onChange:Y=>Q(I.id,{text:Y.target.value}),placeholder:e("whatsappTemplates.buttons.textPlaceholder","Button label"),required:!0})}),s.jsxs("div",{className:"form-field form-field-inline",children:[I.type==="URL"&&s.jsx("input",{type:"url",value:I.url||"",onChange:Y=>Q(I.id,{url:Y.target.value}),placeholder:"https://example.com",required:!0}),I.type==="PHONE_NUMBER"&&s.jsx("input",{type:"tel",value:I.phone_number||"",onChange:Y=>Q(I.id,{phone_number:Y.target.value}),placeholder:"+1 555 123456",required:!0}),s.jsx("button",{type:"button",className:"btn-ghost btn-xs",onClick:()=>be(I.id),children:e("whatsappTemplates.buttons.remove","Remove")})]})]},I.id))]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{type:"submit",className:"btn-primary",disabled:O,children:O?e("common.saving","Saving"):j==="create"?e("whatsappTemplates.actions.create","Create template"):e("whatsappTemplates.actions.update","Update template")})})]})]})})]})]})},wR=()=>{const{t:e}=Le(),{user:t}=os(),n=(t==null?void 0:t.role)==="TEAM_MEMBER",[a,i]=m.useState([]),[r,o]=m.useState(!0),[l,c]=m.useState(null);m.useEffect(()=>{o(!0),c(null),cp().then(u=>i(u)).catch(u=>{console.error(u),c((u==null?void 0:u.message)||e("botsList.errors.loadFailed"))}).finally(()=>o(!1))},[e]);const d=async u=>{const p=window.prompt(e("botsList.confirm.typeSlug",{slug:u.slug}));if(!p)return;if(p!==u.slug){window.alert(e("botsList.confirm.slugMismatch"));return}if(window.confirm(e("botsList.confirm.deleteBot",{name:u.name})))try{await Bz(u.id,u.slug),i(f=>f.filter(g=>g.id!==u.id))}catch(f){console.error(f),c((f==null?void 0:f.message)||e("botsList.errors.deleteFailed"))}};return s.jsxs("div",{children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h1",{children:e("botsList.title")}),!n&&s.jsx(de,{className:"btn-primary",to:"/onboarding/bots/new",children:e("botsList.actions.create")})]}),r&&s.jsx("p",{children:e("botsList.loading")}),l&&s.jsx("div",{className:"form-error",children:l}),!r&&!l&&a.length===0&&s.jsx("p",{children:e("botsList.empty")}),!r&&!l&&a.length>0&&s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table bots-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:e("botsList.table.name")}),s.jsx("th",{children:e("botsList.table.slug")}),s.jsx("th",{children:e("botsList.table.status")}),s.jsx("th",{children:e("botsList.table.domain")}),s.jsx("th",{children:e("botsList.table.channels")}),s.jsx("th",{children:e("botsList.table.actions")})]})}),s.jsx("tbody",{children:a.map(u=>s.jsxs("tr",{children:[s.jsx("td",{"data-label":e("botsList.table.name"),children:u.name}),s.jsx("td",{"data-label":e("botsList.table.slug"),children:u.slug}),s.jsx("td",{"data-label":e("botsList.table.status"),children:u.status}),s.jsx("td",{"data-label":e("botsList.table.domain"),className:"bots-table-extra",children:u.domain||"-"}),s.jsx("td",{"data-label":e("botsList.table.channels"),className:"bots-table-extra",children:[u.channelWeb&&e("botsList.channels.web"),u.channelWhatsapp&&e("botsList.channels.whatsapp"),u.channelMessenger&&e("botsList.channels.messenger"),u.channelInstagram&&e("botsList.channels.instagram")].filter(Boolean).join(", ")||"-"}),s.jsxs("td",{className:"bots-actions-cell","data-label":e("botsList.table.actions"),children:[s.jsxs(de,{to:n?`/app/bots/${u.id}/conversations`:`/app/bots/${u.id}`,className:"icon-button icon-button-ghost",children:[s.jsx("span",{className:"sr-only",children:e("botsList.actions.openBot")}),s.jsx("svg",{"aria-hidden":"true",viewBox:"0 0 20 20",className:"icon-svg",children:s.jsx("path",{d:"M6.25 5.5h7.25a.5.5 0 0 1 .5.5v7.25h-1.5V8.56L7.1 14.46 6.04 13.4l5.4-5.4H6.25V5.5Z",fill:"currentColor"})})]}),!n&&s.jsxs("button",{type:"button",className:"icon-button icon-button-danger",onClick:()=>d(u),children:[s.jsx("span",{className:"sr-only",children:e("botsList.actions.deleteBot")}),s.jsx("svg",{"aria-hidden":"true",viewBox:"0 0 20 20",className:"icon-svg",children:s.jsx("path",{d:"M7.5 4h5a.5.5 0 0 1 .5.5V5H17v1.5h-1.1l-.8 8.3A1.75 1.75 0 0 1 13.37 16H6.63A1.75 1.75 0 0 1 4.9 14.8L4.1 6.5H3V5h4v-.5a.5.5 0 0 1 .5-.5Zm-.9 4.25h1.5l-.2 5H6.4l.2-5Zm3.4 0h1.4l-.2 5h-1.4l.2-5Z",fill:"currentColor"})})]})]})]},u.id))})]})})]})},jR=()=>{const{t:e}=Le(),t=Bt(),[n,a]=m.useState({name:"",slug:"",description:""}),[i,r]=m.useState(null),[o,l]=m.useState(!1),c=u=>p=>{const h=p.target.value;a(f=>({...f,[u]:h}))},d=async u=>{u.preventDefault(),r(null),l(!0);try{const p={name:n.name.trim(),slug:n.slug.trim(),description:n.description.trim()||void 0},h=await aP(p);t(`/app/bots/${h.id}/features`)}catch(p){console.error(p),r((p==null?void 0:p.message)||e("botCreate.errors.createFailed"))}finally{l(!1)}};return s.jsxs("div",{children:[s.jsx("div",{className:"page-header",children:s.jsx("h1",{children:e("botCreate.title")})}),s.jsxs("form",{className:"form",onSubmit:d,children:[i&&s.jsx("div",{className:"form-error",children:i}),s.jsx("p",{className:"muted",children:e("botCreate.subtitle")}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botCreate.fields.name")}),s.jsx("input",{type:"text",value:n.name,onChange:c("name"),required:!0})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botCreate.fields.slug")}),s.jsx("input",{type:"text",value:n.slug,onChange:c("slug"),required:!0}),s.jsx("small",{children:e("botCreate.fields.slugHelp")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botCreate.fields.description")}),s.jsx("textarea",{value:n.description,onChange:c("description"),rows:2})]}),s.jsx("button",{className:"btn-primary",type:"submit",disabled:o,children:e(o?"botCreate.actions.creating":"botCreate.actions.create")})]})]})},SR=()=>{var Wt,se;const{t:e}=Le(),{id:t}=St(),[n,a]=m.useState(null),[i,r]=m.useState(null),[o,l]=m.useState(!0),[c,d]=m.useState(!1),[u,p]=m.useState(!1),[h,f]=m.useState(null),[g,v]=m.useState(null),[y,b]=m.useState(null),[x,w]=m.useState(null),[j,S]=m.useState(null),[k,T]=m.useState(!1),[L,F]=m.useState(""),O=m.useRef(null),M=m.useRef(null),[P,D]=m.useState(null),[E,N]=m.useState(!1),[R,C]=m.useState(!1);m.useEffect(()=>{t&&(l(!0),f(null),S(null),Promise.all([wt(t),Pi(t)]).then(([K,oe])=>(a(K),r(oe||[]),b({description:K.description||"",systemPrompt:K.systemPrompt,autoEvaluateConversations:K.autoEvaluateConversations??!1}),Promise.all([rP(K.id),Uv(K.id)]))).then(([K,oe])=>{w(K),D(oe)}).catch(K=>{console.error(K),f((K==null?void 0:K.message)||e("botDetails.errors.loadBot")),S(e("botDetails.errors.loadPricing"))}).finally(()=>l(!1)))},[t,e]),m.useEffect(()=>{n!=null&&n.name&&F(n.name)},[n==null?void 0:n.name]),m.useEffect(()=>{k&&O.current&&(O.current.focus(),O.current.select())},[k]),m.useEffect(()=>{if(!n||(n.knowledgeSource||"RAG")!=="SHOPIFY"){N(!1);return}C(!0),cl(n.id).then(K=>{const oe=(K.items||[]).some(Ce=>Ce.isActive);N(oe)}).catch(K=>{console.error(K),N(!1)}).finally(()=>C(!1))},[n]);const A=K=>oe=>{if(!y)return;const Ce=oe.target.value;b({...y,[K]:Ce})},_=async K=>{if(K.preventDefault(),!(!t||!y)){d(!0),f(null),v(null);try{const oe=await ln(t,{description:y.description,systemPrompt:y.systemPrompt,autoEvaluateConversations:y.autoEvaluateConversations});a(oe),v(e("botDetails.success.basicsUpdated"))}catch(oe){console.error(oe),f((oe==null?void 0:oe.message)||e("botDetails.errors.updateBot"))}finally{d(!1)}}},B=()=>{n&&(F(n.name),T(!0))},H=()=>{F((n==null?void 0:n.name)??""),T(!1)},Z=async()=>{if(!t||!n)return;const K=L.trim();if(!K){f(e("botDetails.errors.nameRequired","Bot name is required."));return}if(K===n.name){T(!1);return}p(!0),f(null),v(null);try{const oe=await ln(t,{name:K});a(oe),v(e("botDetails.success.nameUpdated","Bot name updated.")),T(!1)}catch(oe){console.error(oe),f((oe==null?void 0:oe.message)||e("botDetails.errors.updateBot"))}finally{p(!1)}},ie=K=>{var Ce;if(u||!k)return;const oe=K.relatedTarget;oe&&((Ce=M.current)!=null&&Ce.contains(oe))||Z()};if(!t)return s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botDetails.missingId")})});if(o)return s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botDetails.loading")})});if(h&&!n)return s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{children:e("botDetails.errorTitle")}),s.jsx("p",{children:h})]});if(!n||!y)return s.jsx("div",{className:"page-container",children:s.jsx("h1",{children:e("botDetails.notFoundTitle")})});const U=n.status==="ACTIVE",G=n.knowledgeSource||"RAG",V=G==="SHOPIFY"?!0:n.useDomainCrawler||n.usePdfCrawler,$=G==="SHOPIFY"?E:V&&!!n.knowledgeClientId,q=i||[],z={web:n.channelWeb,whatsapp:n.channelWhatsapp,messenger:n.channelMessenger,instagram:n.channelInstagram},ee=!n.channelWeb||!!n.domain,J=!n.channelWhatsapp||q.some(K=>{var oe;return K.type==="WHATSAPP"&&!!((oe=K.externalId)!=null&&oe.trim())}),X=!n.channelMessenger||q.some(K=>{var oe;return K.type==="FACEBOOK"&&!!((oe=K.externalId)!=null&&oe.trim())}),ne=!n.channelInstagram||q.some(K=>{var oe;return K.type==="INSTAGRAM"&&!!((oe=K.externalId)!=null&&oe.trim())}),ue=Object.values(z).filter(Boolean).length,fe=ee&&J&&X&&ne,we=[];n.channelWeb&&!ee&&we.push(e("botDetails.channels.missing.webDomain")),n.channelWhatsapp&&!J&&we.push(e("botDetails.channels.missing.whatsappExternalId")),n.channelMessenger&&!X&&we.push(e("botDetails.channels.missing.facebookPageId")),n.channelInstagram&&!ne&&we.push(e("botDetails.channels.missing.instagramBusinessId"));const Ae=n.useCalendar,Q=Ae&&!!n.calendarId&&!!n.timeZone&&!!n.defaultDurationMinutes,be=n.leadWhatsappMessages200||n.leadWhatsappMessages500||n.leadWhatsappMessages1000,Oe=q.find(K=>K.type==="WHATSAPP"),Ie=q.find(K=>K.type==="FACEBOOK"),We=(Oe==null?void 0:Oe.meta)||{},ze=(Ie==null?void 0:Ie.meta)||{},ke=!!Oe&&!!((Wt=Oe.externalId)!=null&&Wt.trim())&&We.needsReconnect!==!0,qe=!!Ie&&!!((se=Ie.externalId)!=null&&se.trim())&&ze.needsReconnect!==!0,Ee=!!P&&!!P.templateName&&!!P.templateLanguage,I=be,Y=I&&ke&&qe&&Ee,W=[];ke||W.push(e("botDetails.health.leadAds.missingWhatsapp","WhatsApp channel not connected")),qe||W.push(e("botDetails.health.leadAds.missingFacebook","Facebook channel not connected")),Ee||W.push(e("botDetails.health.leadAds.missingAutomation","Lead Ads automation not configured"));const ae=K=>K==="ok"?"status-badge status-badge-ok":K==="warn"?"status-badge status-badge-warn":"status-badge status-badge-error",pe=K=>{const oe=K.toUpperCase();return oe==="ACTIVE"?"ok":oe==="DRAFT"?"warn":"error"},he=(K=>{const oe=K.toUpperCase();return oe==="ACTIVE"?"plan-summary-status plan-summary-status-ok":oe==="DRAFT"?"plan-summary-status plan-summary-status-warn":oe==="CANCELLED"||oe==="INACTIVE"?"plan-summary-status plan-summary-status-error":"plan-summary-status"})(n.status),_e=[n.channelWeb?e("botDetails.channels.names.web"):null,n.channelWhatsapp?e("botDetails.channels.names.whatsapp"):null,n.channelMessenger?e("botDetails.channels.names.messenger"):null,n.channelInstagram?e("botDetails.channels.names.instagram"):null].filter(Boolean);return s.jsxs("div",{children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{className:"bot-header",children:[s.jsx("div",{className:"bot-avatar",children:n.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("div",{className:"bot-title-row",children:k?s.jsxs("div",{className:"bot-title-edit",ref:M,children:[s.jsx("input",{className:"bot-title-input",value:L,onChange:K=>F(K.target.value),ref:O,onBlur:ie,onKeyDown:K=>{K.key==="Enter"&&(K.preventDefault(),Z()),K.key==="Escape"&&(K.preventDefault(),H())}}),s.jsx("button",{type:"button",className:"icon-button icon-button--primary",onClick:Z,disabled:u,"aria-label":e("botDetails.actions.saveName","Save bot name"),children:u?s.jsx("span",{className:"icon-button-spinner","aria-hidden":"true"}):s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M5 12l4 4 10-10",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsx("button",{type:"button",className:"icon-button",onClick:H,"aria-label":e("botDetails.actions.cancelEditName","Cancel"),children:s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M6 6l12 12M18 6l-12 12",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:"bot-title",children:n.name}),s.jsx("button",{type:"button",className:"icon-button",onClick:B,"aria-label":e("botDetails.actions.editName","Edit bot name"),children:s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{d:"M4 20h4l10-10-4-4L4 16v4zM14 6l4 4",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}),s.jsxs("p",{className:"muted",children:[e("botDetails.slugLabel")," ",s.jsx("code",{children:n.slug})]})]})]}),s.jsxs("div",{className:"page-header-actions",children:[s.jsx("span",{className:he,children:n.status}),s.jsx(de,{to:`/demo/${n.slug}`,className:"btn-secondary",target:"_blank",children:e("botDetails.actions.openDemo")}),!U&&s.jsx(de,{to:`/app/bots/${n.id}/plan`,className:"btn-primary",children:e("botDetails.actions.activatePay")}),U&&s.jsx(de,{to:`/app/bots/${n.id}/plan`,className:"btn-primary",children:e("botDetails.actions.viewPlanBilling")})]})]}),s.jsxs("div",{className:"detail-layout",children:[s.jsxs("section",{className:"detail-main",children:[s.jsx("h2",{children:e("botDetails.basics.title")}),s.jsx("p",{className:"muted",style:{marginTop:"0.25rem"},children:e("botDetails.basics.subtitle")}),s.jsxs("form",{className:"form",onSubmit:_,children:[h&&s.jsx("div",{className:"form-error",children:h}),g&&s.jsx("div",{className:"form-success",children:g}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botDetails.basics.descriptionLabel")}),s.jsx("textarea",{value:y.description,onChange:A("description"),rows:2,placeholder:e("botDetails.basics.descriptionPlaceholder")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botDetails.basics.systemPromptLabel")}),s.jsx("textarea",{value:y.systemPrompt,onChange:A("systemPrompt"),rows:5,placeholder:e("botDetails.basics.systemPromptPlaceholder")}),s.jsx("span",{style:{fontSize:"0.8rem",marginTop:"0.1rem"},children:e("botDetails.basics.systemPromptHelp")})]}),s.jsx("button",{className:"btn-primary",type:"submit",disabled:c,children:e(c?"botDetails.actions.saving":"botDetails.actions.saveBasics")})]}),s.jsx("h2",{style:{marginTop:"2rem"},children:e("botDetails.health.title")}),s.jsxs("div",{className:"status-overview",children:[s.jsxs("div",{className:"status-row",children:[s.jsxs("div",{className:"status-row-header",children:[s.jsx("span",{className:"status-label",children:e("botDetails.health.botStatusTitle")}),s.jsx("span",{className:ae(pe(n.status)),children:n.status})]}),s.jsx("p",{className:"muted",children:n.status==="ACTIVE"?e("botDetails.health.botStatus.active"):n.status==="DRAFT"?e("botDetails.health.botStatus.draft"):e("botDetails.health.botStatus.inactive")})]}),s.jsxs("div",{className:"status-row",children:[s.jsxs("div",{className:"status-row-header",children:[s.jsx("span",{className:"status-label",children:e("botDetails.health.knowledgeTitle")}),V?$?s.jsx("span",{className:ae("ok"),children:e("botDetails.health.badges.configured")}):s.jsx("span",{className:ae("warn"),children:e("botDetails.health.badges.enabledNotInitialized")}):s.jsx("span",{className:ae("error"),children:e("botDetails.health.badges.disabled")})]}),s.jsx("p",{className:"muted",children:e(V?$?G==="SHOPIFY"?"botDetails.health.knowledge.shopifyConnected":"botDetails.health.knowledge.configured":G==="SHOPIFY"?R?"botDetails.health.knowledge.shopifyChecking":"botDetails.health.knowledge.shopifyNotConnected":"botDetails.health.knowledge.enabledNotInitialized":"botDetails.health.knowledge.disabled")})]}),s.jsxs("div",{className:"status-row",children:[s.jsxs("div",{className:"status-row-header",children:[s.jsx("span",{className:"status-label",children:e("botDetails.health.channelsTitle")}),ue===0?s.jsx("span",{className:ae("warn"),children:e("botDetails.health.badges.noChannelsEnabled")}):fe?s.jsx("span",{className:ae("ok"),children:e("botDetails.health.badges.allChannelsConfigured")}):s.jsx("span",{className:ae("warn"),children:e("botDetails.health.badges.someChannelsNeedSetup")})]}),s.jsxs("p",{className:"muted",children:[ue===0&&s.jsxs(s.Fragment,{children:[e("botDetails.health.channels.none")," ",s.jsx(de,{to:`/app/bots/${n.id}/features`,children:e("botDetails.nav.featuresPlan")})," ",e("botDetails.health.channels.and")," ",s.jsx(de,{to:`/app/bots/${n.id}/channels`,children:e("botDetails.nav.channels")}),"."]}),ue>0&&fe&&s.jsx(s.Fragment,{children:e("botDetails.health.channels.enabledList",{channels:_e.join(", ")})}),ue>0&&!fe&&s.jsxs(s.Fragment,{children:[e("botDetails.health.channels.missingConfig",{missing:we.join(", ")})," ",s.jsx(de,{to:`/app/bots/${n.id}/channels`,children:e("botDetails.nav.channels")}),"."]})]})]}),s.jsxs("div",{className:"status-row",children:[s.jsxs("div",{className:"status-row-header",children:[s.jsx("span",{className:"status-label",children:e("botDetails.health.leadAdsTitle","Lead Ads  WhatsApp")}),I?Y?s.jsx("span",{className:ae("ok"),children:e("botDetails.health.badges.configured")}):s.jsx("span",{className:ae("warn"),children:e("botDetails.health.badges.enabledNotConfigured")}):s.jsx("span",{className:ae("error"),children:e("botDetails.health.badges.disabled")})]}),s.jsx("p",{className:"muted",children:I?Y?e("botDetails.health.leadAds.configured","Lead Ads  WhatsApp is fully configured: Facebook page, WhatsApp number and automation rule are set."):s.jsxs(s.Fragment,{children:[e("botDetails.health.leadAds.enabledNotConfigured","Lead Ads  WhatsApp is enabled but some pieces still need configuration:")," ",W.join(", "),"."," ",s.jsx(de,{to:`/app/bots/${n.id}/whatsapp-templates`,children:e("botDetails.health.leadAds.goToSettings","Go to Ads settings")}),"."]}):e("botDetails.health.leadAds.disabled","Lead Ads  WhatsApp add-on is not enabled. Enable it from the Features & plan page to automatically message new leads.")})]}),s.jsxs("div",{className:"status-row",children:[s.jsxs("div",{className:"status-row-header",children:[s.jsx("span",{className:"status-label",children:e("botDetails.health.calendarTitle")}),Ae?Q?s.jsx("span",{className:ae("ok"),children:e("botDetails.health.badges.configured")}):s.jsx("span",{className:ae("warn"),children:e("botDetails.health.badges.enabledNotConfigured")}):s.jsx("span",{className:ae("error"),children:e("botDetails.health.badges.disabled")})]}),s.jsx("p",{className:"muted",children:Ae?Q?e("botDetails.health.calendar.configured",{calendarId:n.calendarId,timeZone:n.timeZone,duration:n.defaultDurationMinutes||30}):e("botDetails.health.calendar.enabledNotConfigured"):e("botDetails.health.calendar.disabled")})]})]})]}),s.jsxs("section",{className:"detail-side",children:[s.jsx("h2",{children:e("botDetails.workspace.title")}),s.jsx("p",{className:"muted",style:{marginTop:"0.25rem"},children:e("botDetails.workspace.subtitle")}),s.jsxs("ul",{className:"bot-nav-list",style:{marginTop:"1.25rem"},children:[s.jsx("li",{children:s.jsxs(de,{to:`/app/bots/${n.id}/features`,className:"bot-nav-item",children:[s.jsxs("div",{className:"bot-nav-item-main",children:[s.jsx("span",{className:"bot-nav-item-title",children:e("botDetails.nav.featuresPlan")}),s.jsx("span",{className:"bot-nav-item-description",children:e("botDetails.nav.featuresPlanDesc")})]}),s.jsx("span",{className:"bot-nav-item-arrow",children:""})]})}),G==="SHOPIFY"?s.jsx("li",{children:s.jsxs(de,{to:`/app/bots/${n.id}/shopify`,className:"bot-nav-item",children:[s.jsxs("div",{className:"bot-nav-item-main",children:[s.jsx("span",{className:"bot-nav-item-title",children:e("botDetails.nav.shopify","Shopify")}),s.jsx("span",{className:"bot-nav-item-description",children:e("botDetails.nav.shopifyDesc","Connect a Shopify store and enable commerce tools.")})]}),s.jsx("span",{className:"bot-nav-item-arrow",children:""})]})}):s.jsx("li",{children:s.jsxs(de,{to:`/app/bots/${n.id}/knowledge`,className:"bot-nav-item",children:[s.jsxs("div",{className:"bot-nav-item-main",children:[s.jsx("span",{className:"bot-nav-item-title",children:e("botDetails.nav.knowledge")}),s.jsx("span",{className:"bot-nav-item-description",children:e("botDetails.nav.knowledgeDesc")})]}),s.jsx("span",{className:"bot-nav-item-arrow",children:""})]})}),s.jsx("li",{children:s.jsxs(de,{to:`/app/bots/${n.id}/channels`,className:"bot-nav-item",children:[s.jsxs("div",{className:"bot-nav-item-main",children:[s.jsx("span",{className:"bot-nav-item-title",children:e("botDetails.nav.channels")}),s.jsx("span",{className:"bot-nav-item-description",children:e("botDetails.nav.channelsDesc")})]}),s.jsx("span",{className:"bot-nav-item-arrow",children:""})]})}),s.jsx("li",{children:s.jsxs(de,{to:`/app/bots/${n.id}/conversations`,className:"bot-nav-item",children:[s.jsxs("div",{className:"bot-nav-item-main",children:[s.jsx("span",{className:"bot-nav-item-title",children:e("botDetails.nav.conversations")}),s.jsx("span",{className:"bot-nav-item-description",children:e("botDetails.nav.conversationsDesc")})]}),s.jsx("span",{className:"bot-nav-item-arrow",children:""})]})}),s.jsx("li",{children:s.jsxs(de,{to:`/app/bots/${n.id}/settings`,className:"bot-nav-item",children:[s.jsxs("div",{className:"bot-nav-item-main",children:[s.jsx("span",{className:"bot-nav-item-title",children:e("botDetails.nav.settings")}),s.jsx("span",{className:"bot-nav-item-description",children:e("botDetails.nav.settingsDesc")})]}),s.jsx("span",{className:"bot-nav-item-arrow",children:""})]})}),s.jsx("li",{children:s.jsxs(de,{to:`/app/bots/${n.id}/whatsapp-templates`,className:"bot-nav-item",children:[s.jsxs("div",{className:"bot-nav-item-main",children:[s.jsx("span",{className:"bot-nav-item-title",children:e("botDetails.nav.adsSettings")}),s.jsx("span",{className:"bot-nav-item-description",children:e("botDetails.nav.adsSettingsDesc")})]}),s.jsx("span",{className:"bot-nav-item-arrow",children:""})]})})]})]})]})]})};let Ac=null;function SP(e){return typeof window>"u"?Promise.reject(new Error("FB SDK can only be loaded in the browser")):window.FB?Promise.resolve(window.FB):Ac||(Ac=new Promise((t,n)=>{window.fbAsyncInit=function(){var o;(o=window.FB)==null||o.init({appId:e,xfbml:!1,version:"v22.0"}),t(window.FB)};const a="facebook-jssdk";if(document.getElementById(a))return;const i=document.createElement("script");i.id=a,i.src="https://connect.facebook.net/en_US/sdk.js",i.onerror=o=>{console.error("Failed to load Facebook SDK",o),n(o)};const r=document.getElementsByTagName("script")[0];r&&r.parentNode?r.parentNode.insertBefore(i,r):document.head.appendChild(i)}),Ac)}function co(e){return e==="FACEBOOK"||e==="INSTAGRAM"}const Cw=7*24*60*60*1e3,NR=()=>{var Wt;const{t:e}=Le(),{id:t}=St(),n=lt(),a=Bt(),[i,r]=m.useState([]),[o,l]=m.useState(!0),[c,d]=m.useState(null),[u,p]=m.useState(!1),[h,f]=m.useState({type:"WEB",externalId:"",accessToken:"",meta:""}),[g,v]=m.useState(null),[y,b]=m.useState({externalId:"",accessToken:"",meta:""}),[x,w]=m.useState(null),[j,S]=m.useState(!1),[k,T]=m.useState(null),[L,F]=m.useState(""),[O,M]=m.useState(!1),[P,D]=m.useState(null),[E,N]=m.useState(""),[R,C]=m.useState(!1),[A,_]=m.useState(!1),[B,H]=m.useState(""),[Z,ie]=m.useState(null),[U,G]=m.useState(!1),[V,$]=m.useState(!1),[q,z]=m.useState(!1),ee=()=>{const se=new URLSearchParams(n.search);se.has("metaSessionId")&&(se.delete("metaSessionId"),a({pathname:n.pathname,search:se.toString()},{replace:!0}))},J=()=>{z(!1),w(null),F(""),ee()},X=se=>{ie(se),G(!1),$(!1)},ne=()=>{ie(null),G(!1),$(!1)},ue=async()=>{if(!(!t||!Z)){$(!0),d(null);try{const se=`/app/bots/${encodeURIComponent(t)}/channels`,{url:K}=await uP(t,Z,se);window.location.href=K}catch(se){console.error(se);const K=Z==="FACEBOOK"?"botChannels.errors.facebookConnectFailed":"botChannels.errors.instagramConnectFailed";d((se==null?void 0:se.message)||e(K)),$(!1)}}},fe=()=>{t&&(l(!0),d(null),Pi(t).then(se=>r(se)).catch(se=>{console.error(se),d((se==null?void 0:se.message)||e("botChannels.errors.loadFailed"))}).finally(()=>l(!1)))},we=()=>{const K=new URLSearchParams(n.search).get("metaSessionId");if(!K){w(null),T(null),F(""),z(!1);return}S(!0),T(null),pP(K).then(oe=>{w(oe),console.log("Meta session for",oe.channelType,oe),F(""),z(!0)}).catch(oe=>{console.error(oe),T((oe==null?void 0:oe.message)||e("botChannels.errors.metaSessionLoad")),w(null),z(!1)}).finally(()=>S(!1))};if(m.useEffect(()=>{fe()},[t]),m.useEffect(()=>{we()},[n.search]),!t)return s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botChannels.missingId")})});const Ae=se=>K=>{b({...y,[se]:K.target.value})},Q=se=>{if(co(se.type)){d(e("botChannels.errors.metaManagedExternally"));return}v(se.id),b({externalId:se.externalId,accessToken:se.accessToken,meta:se.meta?JSON.stringify(se.meta,null,2):""})},be=async se=>{if(se.preventDefault(),!(!t||!g)){d(null);try{let K;y.meta.trim()&&(K=JSON.parse(y.meta)),await Gz(t,g,{externalId:y.externalId,accessToken:y.accessToken,meta:K}),v(null),fe()}catch(K){console.error(K),d((K==null?void 0:K.message)||e("botChannels.errors.updateFailed"))}}},Oe=async se=>{if(t&&window.confirm(e("botChannels.confirm.deleteChannel"))){d(null);try{await dP(t,se),fe()}catch(K){console.error(K),d((K==null?void 0:K.message)||e("botChannels.errors.deleteFailed"))}}};co(h.type);const Ie=async()=>{if(!(!x||!L)){M(!0),d(null);try{await mP(x.id,L),w(null),F(""),ee(),z(!1),fe()}catch(se){console.error(se),d((se==null?void 0:se.message)||e("botChannels.errors.metaAttachFailed"))}finally{M(!1)}}},We=async()=>{if(!t)return;d(null),C(!0);const se="1465664871200825",K="927419609614257",oe="https://coslo.it/app/bots";try{const Ce=window.localStorage.getItem("wa_last_connect_ts");if(Ce){const Se=parseInt(Ce,10);if(Date.now()-Se<Cw&&!window.confirm(e("botChannels.whatsapp.confirmReconnectWithinWeek"))){C(!1);return}}const $e=await SP(se);console.log("redirectUri",oe,"origin",window.location.origin),$e.login(Se=>{(async()=>{if(!Se||!Se.authResponse||!Se.authResponse.code){d(e("botChannels.errors.whatsappCancelled")),C(!1);return}const Ne=Se.authResponse.code;try{const mt=await hP(t,{code:Ne,redirectUri:oe});D(mt),N(""),H("")}catch(mt){console.error(mt),d((mt==null?void 0:mt.message)||e("botChannels.errors.whatsappSignupFailed"))}finally{C(!1)}})()},{config_id:K,redirect_uri:oe,response_type:"code",override_default_response_type:!0}),window.localStorage.setItem("wa_last_connect_ts",Date.now().toString())}catch(Ce){console.error(Ce),d((Ce==null?void 0:Ce.message)||e("botChannels.errors.whatsappInitFailed")),C(!1)}},ze=async()=>{if(!(!P||!E)){_(!0),d(null);try{await fP(P.sessionId,E,B||void 0),D(null),N(""),H(""),fe()}catch(se){console.error(se),d((se==null?void 0:se.message)||e("botChannels.errors.whatsappAttachFailed"))}finally{_(!1)}}},ke=se=>{var K,oe,Ce,$e;if(co(se.type)){const Se=se.meta||{},Ne=Se.pageName,mt=Se.igUsername,Nt=Se.igName,rc=se.type==="FACEBOOK"?e("botChannels.labels.facebookPage"):e("botChannels.labels.instagramBusiness"),oc=se.type==="FACEBOOK"?Ne:mt||Nt||Ne;return oc?s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:rc}),s.jsx("div",{className:"muted",children:oc})]}):s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:rc}),s.jsx("div",{className:"muted",children:e("botChannels.meta.connectedViaMeta")})]})}if(se.type==="WHATSAPP"){const Se=((K=se.meta)==null?void 0:K.displayPhoneNumber)||((oe=se.meta)==null?void 0:oe.display_phone_number),Ne=((Ce=se.meta)==null?void 0:Ce.verifiedName)||(($e=se.meta)==null?void 0:$e.verified_name);return s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:e("botChannels.labels.whatsapp")}),s.jsxs("div",{className:"muted",children:[Se?e("botChannels.whatsapp.number",{number:Se}):e("botChannels.whatsapp.numberId",{id:se.externalId}),Ne?`  ${Ne}`:""]})]})}return se.type==="WEB"?s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:e("botChannels.labels.webWidget")}),s.jsx("div",{className:"muted",children:e("botChannels.web.externalId",{id:se.externalId||e("botChannels.web.defaultWidget")})})]}):s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:se.type}),s.jsx("div",{className:"muted",children:e("botChannels.generic.externalId",{id:se.externalId})})]})},qe=se=>{if(!se)return{label:e("botChannels.status.notConnected"),className:"status-badge status-badge-warn",isConnected:!1};const K=se.meta||{};if(!co(se.type))return K.needsReconnect===!0?{label:e("botChannels.status.needsReconnect"),className:"status-badge status-badge-error",isConnected:!1}:{label:e("botChannels.status.active"),className:"status-badge status-badge-ok",isConnected:!0};const oe=Date.now(),Ce=K.needsReconnect===!0,$e=K.tokenExpiresAt;let Se=null;if($e){const mt=new Date($e);isNaN(mt.getTime())||(Se=mt)}if(Ce)return{label:e("botChannels.status.needsReconnect"),className:"status-badge status-badge-error",isConnected:!1};if(!Se)return{label:e("botChannels.status.connectedUnknownExpiry"),className:"status-badge status-badge-ok",isConnected:!0};const Ne=Se.getTime()-oe;return Ne<=0?{label:e("botChannels.status.expired"),className:"status-badge status-badge-error",isConnected:!1}:Ne<=Cw?{label:e("botChannels.status.expiringSoon"),className:"status-badge status-badge-warn",isConnected:!1}:{label:e("botChannels.status.connected"),className:"status-badge status-badge-ok",isConnected:!0}},Ee=se=>{const{label:K,className:oe}=qe(se);return s.jsx("span",{className:oe,children:K})},I=i.find(se=>se.type==="FACEBOOK")||null,Y=i.find(se=>se.type==="INSTAGRAM")||null,W=i.find(se=>se.type==="WHATSAPP")||null,ae=qe(I),pe=qe(Y),Te=qe(W),he={type:e("botChannels.table.type"),details:e("botChannels.table.details"),status:e("botChannels.table.status"),actions:e("botChannels.table.actions","Actions")},_e=/^\d{6}$/.test(B);return s.jsxs("div",{children:[s.jsxs("div",{className:"page-header",children:[Z&&s.jsx("div",{className:"meta-permissions-modal-backdrop",children:s.jsxs("div",{className:"meta-permissions-modal",children:[s.jsxs("div",{className:"meta-permissions-modal-header",children:[s.jsx("h2",{children:e(Z==="FACEBOOK"?"botChannels.meta.permissionsDialog.titleFacebook":"botChannels.meta.permissionsDialog.titleInstagram")}),s.jsx("button",{type:"button",className:"btn-ghost small",onClick:ne,children:e("botChannels.actions.cancel")})]}),s.jsxs("div",{className:"meta-permissions-modal-body",children:[s.jsx("p",{className:"muted",children:e(Z==="FACEBOOK"?"botChannels.meta.permissionsDialog.introFacebook":"botChannels.meta.permissionsDialog.introInstagram")}),s.jsx("p",{className:"meta-permissions-list-title",children:e("botChannels.meta.permissionsDialog.listTitle")}),Z==="FACEBOOK"?s.jsxs("ul",{className:"meta-permissions-list",children:[s.jsx("li",{children:e("botChannels.meta.permissionsDialog.facebook.pagesShowList")}),s.jsx("li",{children:e("botChannels.meta.permissionsDialog.facebook.pagesMessaging")}),s.jsx("li",{children:e("botChannels.meta.permissionsDialog.facebook.pagesManageMetadata")}),s.jsx("li",{children:e("botChannels.meta.permissionsDialog.facebook.businessManagement")})]}):s.jsxs("ul",{className:"meta-permissions-list",children:[s.jsx("li",{children:e("botChannels.meta.permissionsDialog.instagram.pagesShowList")}),s.jsx("li",{children:e("botChannels.meta.permissionsDialog.instagram.instagramBasic")}),s.jsx("li",{children:e("botChannels.meta.permissionsDialog.instagram.instagramManageMessages")}),s.jsx("li",{children:e("botChannels.meta.permissionsDialog.instagram.pagesManageMetadata")}),s.jsx("li",{children:e("botChannels.meta.permissionsDialog.instagram.businessManagement")})]}),s.jsxs("label",{className:"checkbox-inline",style:{marginTop:"0.75rem"},children:[s.jsx("input",{type:"checkbox",checked:U,onChange:se=>G(se.target.checked)}),s.jsx("span",{children:e("botChannels.meta.permissionsDialog.checkboxLabel")})]}),s.jsx("p",{className:"muted small",style:{marginTop:"0.5rem"},children:e("botChannels.meta.permissionsDialog.footerNote")})]}),s.jsxs("div",{className:"meta-permissions-modal-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:ne,children:e("botChannels.actions.cancel")}),s.jsx("button",{type:"button",className:"btn-primary",disabled:!U||V,onClick:ue,children:e(Z==="FACEBOOK"?"botChannels.meta.permissionsDialog.continueFacebook":"botChannels.meta.permissionsDialog.continueInstagram")})]})]})}),x&&q&&s.jsx("div",{className:"meta-page-select-modal-backdrop",children:s.jsxs("div",{className:"meta-page-select-modal",children:[s.jsxs("div",{className:"meta-page-select-modal-header",children:[s.jsx("h2",{children:x.channelType==="FACEBOOK"?e("botChannels.meta.selectModal.titleFacebook"):e("botChannels.meta.selectModal.titleInstagram")}),s.jsx("button",{type:"button",className:"btn-ghost small",onClick:J,children:e("botChannels.actions.cancel")})]}),s.jsxs("div",{className:"meta-page-select-modal-body",children:[s.jsx("p",{className:"muted",children:x.channelType==="FACEBOOK"?e("botChannels.meta.selectModal.introFacebook"):e("botChannels.meta.selectModal.introInstagram")}),j&&s.jsx("p",{className:"muted",children:e("botChannels.meta.loadingPages")}),k&&s.jsxs("div",{className:"form-error",children:[e("botChannels.meta.sessionLoadFailed"),":"," ",k]}),!j&&!k&&(()=>{const se=x.pages.filter(Se=>x.channelType==="INSTAGRAM"?!!Se.instagramBusinessId:!0),K=se.filter(Se=>!Se.isBusinessManaged),oe=se.filter(Se=>Se.isBusinessManaged),Ce=x.pages&&x.pages.length>0,$e=x.channelType==="INSTAGRAM"&&Ce&&se.length===0;return se.length===0?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"muted",children:e("botChannels.meta.selectModal.noPages")}),$e&&s.jsx("p",{className:"muted small",style:{marginTop:"0.5rem"},children:e("botChannels.meta.selectModal.editPreviousSettingsHint")})]}):s.jsxs(s.Fragment,{children:[K.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"meta-page-select-group-title",children:e("botChannels.meta.selectModal.personalGroupTitle")}),s.jsx("div",{className:"meta-page-select-list",children:K.map(Se=>s.jsxs("label",{className:"meta-page-select-item"+(L===Se.id?" selected":""),children:[s.jsx("input",{type:"radio",name:"meta-page-select",value:Se.id,checked:L===Se.id,onChange:()=>F(Se.id)}),s.jsx("span",{className:"meta-page-select-name",children:Se.name})]},Se.id))})]}),oe.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"meta-page-select-group-title",children:e("botChannels.meta.selectModal.businessGroupTitle")}),s.jsx("div",{className:"meta-page-select-list",children:oe.map(Se=>s.jsxs("label",{className:"meta-page-select-item"+(L===Se.id?" selected":""),children:[s.jsx("input",{type:"radio",name:"meta-page-select",value:Se.id,checked:L===Se.id,onChange:()=>F(Se.id)}),s.jsxs("span",{className:"meta-page-select-name",children:[Se.name,Se.businessName?` (${Se.businessName})`:""]})]},Se.id))})]})]})})()]}),s.jsxs("div",{className:"meta-page-select-modal-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:J,children:e("botChannels.actions.cancel")}),s.jsx("button",{type:"button",className:"btn-primary",disabled:!L||O,onClick:Ie,children:e(O?"botChannels.actions.connecting":"botChannels.actions.connectSelected")})]})]})}),P&&s.jsx("div",{className:"meta-page-select-modal-backdrop",children:s.jsxs("div",{className:"meta-page-select-modal",children:[s.jsxs("div",{className:"meta-page-select-modal-header",children:[s.jsx("h2",{children:e("botChannels.whatsapp.pinModal.title","Connect WhatsApp Business")}),s.jsx("button",{type:"button",className:"btn-ghost small",onClick:()=>{D(null),N(""),H("")},children:e("botChannels.actions.cancel")})]}),s.jsxs("div",{className:"meta-page-select-modal-body",children:[s.jsx("p",{className:"muted",children:e("botChannels.whatsapp.pinModal.intro","Select the WhatsApp Business phone number you want to connect and enter the two-step verification PIN for that number.")}),s.jsx("p",{className:"muted small",style:{marginTop:"0.5rem"},children:e("botChannels.whatsapp.pinModal.whatIsPin","This PIN is the 6-digit two-step verification PIN configured for this phone number in WhatsApp Manager, not your Google Authenticator code or login 2FA.")}),s.jsxs("ol",{className:"muted small",style:{marginTop:"0.75rem"},children:[s.jsx("li",{children:e("botChannels.whatsapp.pinModal.step1","Open WhatsApp Manager and go to Account tools  Phone numbers.")}),s.jsx("li",{children:e("botChannels.whatsapp.pinModal.step2","Click the gear icon next to your phone number and open Two-step verification.")}),s.jsx("li",{children:e("botChannels.whatsapp.pinModal.step3","If you don't remember the PIN, turn off two-step verification from there (you'll get an email), then set a new 6-digit PIN.")}),s.jsx("li",{children:e("botChannels.whatsapp.pinModal.step4","Come back here and enter that exact 6-digit PIN.")})]}),s.jsxs("label",{className:"form-field",style:{marginTop:"1rem"},children:[s.jsx("span",{children:e("botChannels.whatsapp.numberLabel")}),s.jsxs("select",{value:E,onChange:se=>N(se.target.value),children:[s.jsx("option",{value:"",children:e("botChannels.whatsapp.selectPlaceholder")}),P.numbers.map(se=>s.jsxs("option",{value:se.id,children:[se.displayPhoneNumber||se.id,se.verifiedName?`  ${se.verifiedName}`:""]},se.id))]})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botChannels.whatsapp.pinLabel","WhatsApp two-step verification PIN")}),s.jsx("input",{type:"text",maxLength:6,value:B,onChange:se=>H(se.target.value.replace(/\D/g,"")),placeholder:e("botChannels.whatsapp.pinPlaceholder","6-digit PIN set in WhatsApp Manager")}),s.jsx("p",{className:"muted small",style:{marginTop:"0.25rem"},children:e("botChannels.whatsapp.pinModal.pinHint","Enter exactly the same 6-digit PIN you see under Two-step verification for this phone number in WhatsApp Manager.")})]})]}),s.jsxs("div",{className:"meta-page-select-modal-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{D(null),N(""),H("")},children:e("botChannels.actions.cancel")}),s.jsx("button",{type:"button",className:"btn-primary",disabled:!E||!_e||A,onClick:ze,children:e(A?"botChannels.actions.connecting":"botChannels.actions.connectSelected")})]})]})}),s.jsxs("div",{children:[s.jsx("h1",{children:e("botChannels.title")}),s.jsx("p",{className:"muted",children:e("botChannels.subtitle")})]}),s.jsx(de,{to:`/app/bots/${t}`,className:"btn-secondary",children:e("botChannels.backToBot")})]}),c&&s.jsx("div",{className:"form-error",children:c}),o&&s.jsx("p",{children:e("botChannels.loading")}),!o&&s.jsxs("section",{className:"detail-main",style:{marginBottom:"1.5rem"},children:[s.jsx("h2",{children:e("botChannels.connectSocial.title")}),s.jsx("p",{className:"muted",children:e("botChannels.connectSocial.subtitle")}),s.jsxs("div",{className:"channel-cards",children:[s.jsxs("article",{className:"channel-card",children:[s.jsxs("div",{className:"channel-card-header",children:[s.jsxs("div",{className:"channel-card-main",children:[s.jsx("div",{className:"channel-card-icon channel-card-icon-facebook",children:"f"}),s.jsxs("div",{children:[s.jsx("h3",{className:"channel-card-title",children:e("botChannels.labels.facebookPage")}),s.jsx("p",{className:"channel-card-description",children:e("botChannels.connectSocial.facebookDesc")})]})]}),Ee(I)]}),I&&s.jsxs("p",{className:"channel-card-meta",children:[e("botChannels.connectSocial.connectedPage"),":"," ",s.jsx("strong",{children:((Wt=I.meta)==null?void 0:Wt.pageName)||e("botChannels.meta.connectedViaMeta")})]}),!ae.isConnected&&s.jsx("button",{type:"button",className:"btn-primary channel-card-button",onClick:()=>X("FACEBOOK"),children:e(I?"botChannels.actions.reconnectFacebook":"botChannels.actions.connectFacebook")}),I&&s.jsx("button",{type:"button",className:"btn-secondary channel-card-button",onClick:()=>Oe(I.id),children:e("botChannels.actions.disconnect")})]}),s.jsxs("article",{className:"channel-card",children:[s.jsxs("div",{className:"channel-card-header",children:[s.jsxs("div",{className:"channel-card-main",children:[s.jsx("div",{className:"channel-card-icon channel-card-icon-instagram",children:"ig"}),s.jsxs("div",{children:[s.jsx("h3",{className:"channel-card-title",children:e("botChannels.labels.instagramBusiness")}),s.jsx("p",{className:"channel-card-description",children:e("botChannels.connectSocial.instagramDesc")})]})]}),Ee(Y)]}),Y&&s.jsxs("p",{className:"channel-card-meta",children:[e("botChannels.connectSocial.connectedAccount"),":"," ",s.jsx("strong",{children:(()=>{const se=Y.meta||{};return se.igUsername||se.igName||se.pageName||e("botChannels.meta.connectedViaMeta")})()})]}),!pe.isConnected&&s.jsx("button",{type:"button",className:"btn-primary channel-card-button",onClick:()=>X("INSTAGRAM"),children:e(Y?"botChannels.actions.reconnectInstagram":"botChannels.actions.connectInstagram")}),Y&&s.jsx("button",{type:"button",className:"btn-secondary channel-card-button",onClick:()=>Oe(Y.id),children:e("botChannels.actions.disconnect")})]}),s.jsxs("article",{className:"channel-card",children:[s.jsxs("div",{className:"channel-card-header",children:[s.jsxs("div",{className:"channel-card-main",children:[s.jsx("div",{className:"channel-card-icon channel-card-icon-whatsapp",children:"wa"}),s.jsxs("div",{children:[s.jsx("h3",{className:"channel-card-title",children:e("botChannels.labels.whatsappBusiness")}),s.jsx("p",{className:"channel-card-description",children:e("botChannels.connectSocial.whatsappDesc")})]})]}),Ee(W)]}),W&&s.jsxs("p",{className:"channel-card-meta",children:[e("botChannels.connectSocial.connectedNumber"),":"," ",s.jsx("strong",{children:(()=>{const se=W.meta||{};return se.displayPhoneNumber||se.display_phone_number||W.externalId})()})]}),!Te.isConnected&&s.jsx("button",{type:"button",className:"btn-primary channel-card-button",onClick:We,disabled:R,children:e(R?"botChannels.actions.connectingWhatsapp":W?"botChannels.actions.reconnectWhatsapp":"botChannels.actions.connectWhatsapp")}),W&&s.jsx("button",{type:"button",className:"btn-secondary channel-card-button",onClick:()=>Oe(W.id),children:e("botChannels.actions.disconnect")})]})]})]}),!o&&s.jsxs("section",{className:"detail-main",children:[s.jsx("h2",{children:e("botChannels.connected.title")}),s.jsx("p",{className:"muted",children:e("botChannels.connected.subtitle")}),i.length===0?s.jsx("p",{className:"muted",children:e("botChannels.connected.empty")}):s.jsx("div",{className:"card",style:{marginTop:"0.75rem"},children:s.jsx("div",{className:"table-responsive connected-channels-table-wrapper",children:s.jsxs("table",{className:"table connected-channels-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:he.type}),s.jsx("th",{children:he.details}),s.jsx("th",{children:he.status}),s.jsx("th",{className:"connected-channels-actions-header",children:he.actions})]})}),s.jsx("tbody",{children:i.map(se=>s.jsxs("tr",{children:[s.jsx("td",{"data-label":he.type,children:se.type}),s.jsx("td",{"data-label":he.details,children:ke(se)}),s.jsx("td",{"data-label":he.status,children:Ee(se)}),s.jsxs("td",{className:"connected-channels-actions-cell","data-label":he.actions,children:[g===se.id?s.jsx(s.Fragment,{children:s.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>v(null),style:{marginRight:"0.5rem"},children:e("botChannels.actions.cancel")})}):!co(se.type)&&s.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>Q(se),style:{marginRight:"0.5rem"},children:e("botChannels.actions.edit")}),s.jsx("button",{className:"btn-danger",type:"button",onClick:()=>Oe(se.id),children:e("botChannels.actions.disconnect")})]})]},se.id))})]})})}),g&&s.jsxs("div",{className:"card",style:{marginTop:"1rem"},children:[s.jsx("h3",{style:{marginTop:0},children:e("botChannels.edit.title")}),s.jsxs("form",{className:"form",onSubmit:be,children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botChannels.fields.externalId")}),s.jsx("input",{type:"text",value:y.externalId,onChange:Ae("externalId")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botChannels.fields.accessToken")}),s.jsx("input",{type:"text",value:y.accessToken,onChange:Ae("accessToken")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botChannels.fields.metaJson")}),s.jsx("textarea",{value:y.meta,onChange:Ae("meta"),rows:6,placeholder:e("botChannels.placeholders.metaJson")})]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{className:"btn-primary",type:"submit",children:e("botChannels.actions.save")}),s.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>v(null),children:e("botChannels.actions.cancel")})]})]})]})]})]})},CR=()=>{const{t:e}=Le(),{user:t}=os(),{id:n}=St(),[a,i]=m.useState([]),[r,o]=m.useState(!0),[l,c]=m.useState(null),[d,u]=m.useState(null),[p,h]=m.useState(1),[f,g]=m.useState(0),[v,y]=m.useState(0),[b,x]=m.useState(new Set),[w,j]=m.useState(!1);m.useEffect(()=>{n&&(o(!0),c(null),Yz(n,p).then(C=>{i(C.items),g(C.totalPages),y(C.totalItems),x(new Set)}).catch(C=>{console.error(C),c((C==null?void 0:C.message)||e("botConversations.errors.loadFailed"))}).finally(()=>o(!1)))},[n,p,e]);const S=async C=>{try{u(C),c(null);const A=await Jz(C);i(_=>_.map(B=>B.id===C?{...B,latestEval:{score:A.score,label:A.label??null,isAuto:A.isAuto,createdAt:A.createdAt}}:B))}catch(A){console.error(A),c((A==null?void 0:A.message)||e("botConversations.errors.evalFailed"))}finally{u(null)}},k=C=>{x(A=>{const _=new Set(A);return _.has(C)?_.delete(C):_.add(C),_})},T=C=>{if(!C.target.checked){x(new Set);return}x(new Set(a.map(_=>_.id)))},L=b.size,F=a.length>0&&L===a.length,O=async()=>{if(b.size===0)return;j(!0),c(null);const C=Array.from(b);try{const A=await eR(C);i(B=>B.map(H=>{const Z=A.find(U=>U.conversationId===H.id&&U.ok&&U.result);if(!Z||!Z.result)return H;const ie=Z.result;return{...H,latestEval:{score:ie.score,label:ie.label??null,isAuto:ie.isAuto,createdAt:ie.createdAt}}})),A.filter(B=>!B.ok).length>0&&c(e("botConversations.errors.someFailed"))}catch(A){console.error(A),c((A==null?void 0:A.message)||e("botConversations.errors.bulkEvalFailed"))}finally{j(!1)}},M=()=>{h(C=>Math.max(1,C-1))},P=()=>{f!==0&&h(C=>Math.min(f,C+1))};if(!n)return s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botConversations.missingId")})});const D=v>0,E=(t==null?void 0:t.role)==="TEAM_MEMBER",N=w?e("botConversations.actions.evaluatingSelected"):L>0?e("botConversations.actions.evaluateSelectedCount",{count:L}):e("botConversations.actions.evaluateSelected"),R={select:e("botConversations.table.selectAll"),channel:e("botConversations.table.channel"),externalUser:e("botConversations.table.externalUser"),lastMessage:e("botConversations.table.lastMessage"),score:e("botConversations.table.score"),actions:e("botConversations.table.actions","Actions")};return s.jsxs("div",{children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:e("botConversations.title")}),s.jsx("p",{className:"muted",children:e("botConversations.subtitle")})]}),s.jsxs("div",{className:"page-header-actions",children:[!E&&s.jsx("button",{className:"btn-secondary",onClick:O,disabled:L===0||w,style:{marginRight:"0.75rem"},children:N}),s.jsx(de,{to:E?"/app/bots":`/app/bots/${n}`,className:"btn-secondary",children:e("botConversations.backToBot")})]})]}),r&&s.jsx("p",{children:e("botConversations.loading")}),l&&s.jsx("div",{className:"form-error",children:l}),!r&&!l&&!D&&s.jsx("p",{children:e("botConversations.empty")}),!r&&!l&&D&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"conversations-pagination",children:[s.jsxs("span",{className:"muted",children:[e("botConversations.pagination.total",{total:v}),f>1&&`  ${e("botConversations.pagination.pageOf",{page:p,totalPages:f})}`]}),s.jsxs("div",{className:"conversations-pagination-actions",children:[s.jsx("button",{className:"btn-secondary",onClick:M,disabled:p<=1||r,style:{marginRight:"0.5rem"},children:e("botConversations.pagination.prev")}),s.jsx("button",{className:"btn-secondary",onClick:P,disabled:p>=f||r,children:e("botConversations.pagination.next")})]})]}),!E&&s.jsxs("label",{className:"conversations-select-all",children:[s.jsx("input",{type:"checkbox",checked:F,onChange:T,"aria-label":R.select}),s.jsx("span",{children:R.select})]}),s.jsx("div",{className:"table-responsive conversations-table-wrapper",children:s.jsxs("table",{className:"table conversations-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[!E&&s.jsx("th",{children:s.jsx("input",{type:"checkbox",checked:F,onChange:T,"aria-label":R.select})}),s.jsx("th",{children:R.channel}),s.jsx("th",{children:R.externalUser}),s.jsx("th",{children:R.lastMessage}),s.jsx("th",{children:R.score}),s.jsx("th",{className:"conversations-actions-header",children:R.actions})]})}),s.jsx("tbody",{children:a.map(C=>{const A=b.has(C.id),_=d===C.id||w,B=_?e("botConversations.actions.evaluating"):C.latestEval?e("botConversations.actions.reevaluate"):e("botConversations.actions.evaluate");return s.jsxs("tr",{children:[!E&&s.jsx("td",{className:"conversations-select-cell","data-label":R.select,children:s.jsx("input",{type:"checkbox",checked:A,onChange:()=>k(C.id),"aria-label":e("botConversations.table.selectRow")})}),s.jsx("td",{"data-label":R.channel,children:C.channel}),s.jsx("td",{className:"conversations-external-user","data-label":R.externalUser,children:kR(C.externalUserId)}),s.jsx("td",{"data-label":R.lastMessage,children:new Date(C.lastMessageAt).toLocaleString()}),s.jsx("td",{"data-label":R.score,children:C.latestEval?s.jsx(PR,{score:C.latestEval.score,label:C.latestEval.label??void 0}):s.jsx("span",{className:"muted",children:e("botConversations.notEvaluated")})}),s.jsxs("td",{className:"conversations-actions-cell","data-label":R.actions,children:[!E&&s.jsx("button",{className:"btn-secondary",disabled:_,onClick:()=>S(C.id),style:{marginRight:"0.5rem"},children:B}),s.jsx(de,{to:`/app/conversations/${C.id}`,className:"btn-link",children:e("botConversations.actions.view")})]})]},C.id)})})]})})]})]})};function kR(e){return e.length<=4?"****":`${"*".repeat(Math.max(0,e.length-4))}${e.slice(-4)}`}const PR=({score:e,label:t})=>{const[n,a]=m.useState(!1),r=Math.max(0,Math.min(10,e))/2,o=Math.floor(r),l=r-o>=.5,c=5-o-(l?1:0),d=()=>a(!0),u=()=>a(!1),p=h=>{h.stopPropagation(),a(f=>!f)};return s.jsxs("div",{className:"score-stars-wrapper",style:{position:"relative",display:"inline-block"},onMouseEnter:d,onMouseLeave:u,onClick:p,children:[s.jsxs("span",{className:"score-stars","aria-label":`${e}/10`,style:{cursor:t?"pointer":"default"},children:[Array.from({length:o}).map((h,f)=>s.jsx("span",{style:{color:"#f5a623"},children:""},`full-${f}`)),l&&s.jsx("span",{style:{color:"#f5a623"},children:""},"half"),Array.from({length:c}).map((h,f)=>s.jsx("span",{style:{color:"#ddd"},children:""},`empty-${f}`))]}),t&&n&&s.jsx("div",{className:"score-tooltip",style:{position:"absolute",top:"120%",left:"50%",transform:"translateX(-50%)",background:"#111",color:"#fff",padding:"0.35rem 0.55rem",borderRadius:4,fontSize:"0.8rem",maxWidth:260,whiteSpace:"normal",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:10},children:t})]})},AR=()=>{const{t:e}=Le(),{id:t}=St(),[n,a]=m.useState([]),[i,r]=m.useState(!0),[o,l]=m.useState(null),[c,d]=m.useState(null),[u,p]=m.useState(""),[h,f]=m.useState(!1),[g,v]=m.useState(null),[y,b]=m.useState(null),[x,w]=m.useState(!1),[j,S]=m.useState(null),k=c!=null&&c.botId?`/app/bots/${c.botId}/conversations`:"/app/bots",T=!!(c&&(c.channel==="WHATSAPP"||c.channel==="FACEBOOK"||c.channel==="INSTAGRAM"));let L=!1;if(c&&T){const P=c.lastUserMessageAt?new Date(c.lastUserMessageAt):null;P?L=(Date.now()-P.getTime())/(1e3*60*60)>24:L=!0}m.useEffect(()=>{t&&(r(!0),l(null),Promise.all([yw(t),Zz(t)]).then(([P,D])=>{a(P),d(D)}).catch(P=>{console.error(P),l((P==null?void 0:P.message)||e("conversationDetail.errors.loadFailed"))}).finally(()=>r(!1)))},[t,e]);const F=P=>{switch(P){case"USER":return e("conversationDetail.roles.user")||"User";case"ASSISTANT":return e("conversationDetail.roles.assistant")||"Assistant";case"HUMAN":return e("conversationDetail.roles.human")||"Human";case"SYSTEM":return e("conversationDetail.roles.system")||"System";default:return P}},O=async P=>{if(!(!t||!c||x)){w(!0),S(null);try{const D=await Qz(t,P);d(E=>E&&{...E,mode:D.mode})}catch(D){console.error(D),S((D==null?void 0:D.message)||e("conversationDetail.mode.error")||"Failed to change mode.")}finally{w(!1)}}},M=async()=>{if(!t||h)return;const P=u.trim();if(!P){v(e("conversationDetail.manualSend.empty")||"Write a message first."),b(null);return}f(!0),v(null),b(null);try{await Xz(t,P),p(""),b(e("conversationDetail.manualSend.success")||"Message sent.");const D=await yw(t);a(D)}catch(D){console.error(D),v((D==null?void 0:D.message)||e("conversationDetail.manualSend.failed")||"Failed to send message.")}finally{f(!1)}};return t?s.jsxs("div",{className:"conversation-page",children:[s.jsxs("div",{className:"conversation-topbar",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"conversation-title",children:e("conversationDetail.title")}),s.jsx("p",{className:"muted conversation-subtitle",children:(c==null?void 0:c.user.displayName)||(c==null?void 0:c.user.identifier)||""})]}),s.jsx(de,{to:k,className:"btn-secondary",children:e("conversationDetail.backToConversations")||e("conversationDetail.backToBots")})]}),s.jsx("div",{className:"conversation-layout",children:s.jsxs("section",{className:"conversation-chat",children:[c&&s.jsxs("div",{className:"conversation-card",children:[s.jsx("h2",{className:"conversation-card-title",children:e("conversationDetail.parties.title")}),s.jsxs("div",{className:"conversation-party",children:[s.jsx("div",{className:"conversation-party-label",children:e("conversationDetail.parties.business")}),s.jsx("div",{className:"conversation-party-value",children:c.business.title}),c.business.subtitle&&s.jsx("div",{className:"conversation-party-muted",children:c.business.subtitle})]}),s.jsxs("div",{className:"conversation-party",children:[s.jsx("div",{className:"conversation-party-label",children:e("conversationDetail.parties.user")}),s.jsx("div",{className:"conversation-party-value",children:c.user.displayName||c.user.identifier}),c.user.displayName&&s.jsx("div",{className:"conversation-party-muted",children:c.user.identifier})]})]}),i&&s.jsx("p",{className:"muted",children:e("conversationDetail.loading")}),o&&s.jsx("div",{className:"form-error",children:o}),!i&&!o&&n.length===0&&s.jsx("div",{className:"conversation-empty",children:e("conversationDetail.empty")}),!i&&!o&&n.length>0&&s.jsx("div",{className:"conversation-messages",children:n.map(P=>s.jsxs("div",{className:`conversation-bubble conversation-bubble-${P.role.toLowerCase()}`,children:[s.jsx("div",{className:"conversation-bubble-meta",children:s.jsx("span",{children:F(P.role)})}),s.jsx("div",{className:"conversation-bubble-text",children:P.content}),s.jsx("div",{className:"conversation-bubble-footer",children:s.jsx("span",{className:"conversation-bubble-time",children:new Date(P.createdAt).toLocaleString()})})]},P.id))}),c&&c.mode==="AI"&&s.jsxs("div",{className:"conversation-composer",children:[s.jsx("div",{className:"conversation-composer-header",children:s.jsxs("div",{children:[s.jsx("h3",{children:e("conversationDetail.mode.aiLabel")||"AI"}),s.jsx("p",{className:"muted",children:T&&L?e("conversationDetail.manualSend.windowExpired")||"You can no longer send manual messages: the last user message is more than 24 hours old on this channel. Meta requires templates beyond the 24h window.":e("conversationDetail.aiModeNotice")||"Switch to human mode to chat with this contact."})]})}),s.jsx("div",{className:"conversation-composer-row",children:T&&L?s.jsx("span",{className:"conversation-mode-pill",children:e("conversationDetail.windowExpiredPill")||"24h window expired"}):s.jsx("button",{type:"button",className:"btn-primary",disabled:x,onClick:()=>O("HUMAN"),children:x?e("conversationDetail.mode.switchingToHuman")||"Switching...":e("conversationDetail.switchToHuman")||"Switch to human mode"})}),j&&s.jsx("div",{className:"form-error",children:j})]}),c&&c.mode==="HUMAN"&&s.jsxs("div",{className:"conversation-composer",children:[s.jsxs("div",{className:"conversation-composer-header",children:[s.jsxs("div",{children:[s.jsx("h3",{children:e("conversationDetail.manualSend.title")||"Manual reply (HUMAN)"}),s.jsx("p",{className:"muted",children:e("conversationDetail.manualSend.description")||"Send a manual reply as a human agent over this channel."})]}),s.jsx("span",{className:"conversation-mode-pill",children:e("conversationDetail.mode.humanLabel")||"HUMAN"})]}),T&&L&&s.jsx("div",{className:"form-error",style:{marginBottom:"0.5rem"},children:e("conversationDetail.manualSend.windowExpired")||"You can no longer send manual messages: the last user message is more than 24 hours old on this channel. Meta requires templates beyond the 24h window."}),s.jsxs("div",{className:"conversation-composer-row",children:[s.jsx("textarea",{value:u,onChange:P=>p(P.target.value),placeholder:e("conversationDetail.manualSend.placeholder")||"Type a manual reply...",disabled:h||T&&L,rows:2}),s.jsx("button",{type:"button",className:"btn-primary",onClick:M,disabled:h||T&&L,children:h?e("conversationDetail.manualSend.sending")||"Sending...":e("conversationDetail.manualSend.button")||"Send"}),s.jsx("button",{type:"button",className:"btn-secondary",disabled:x,onClick:()=>O("AI"),children:x?e("conversationDetail.mode.switchingToAi")||"Switching...":e("conversationDetail.switchToAi")||"Switch to AI"})]}),j&&s.jsx("div",{className:"form-error",children:j}),g&&s.jsx("div",{className:"form-error",children:g}),y&&s.jsx("div",{className:"form-success",children:y})]})]})})]}):s.jsx("div",{className:"conversation-page",children:s.jsxs("div",{className:"conversation-topbar",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"conversation-title",children:e("conversationDetail.title")}),s.jsx("p",{className:"muted conversation-subtitle",children:e("conversationDetail.missingId")||"Conversation not found."})]}),s.jsx(de,{to:k,className:"btn-secondary",children:e("conversationDetail.backToConversations")||e("conversationDetail.backToBots")})]})})},dl="";function kw(e){if(!e)return dl;const t=new Date(e);return Number.isNaN(t.getTime())?dl:t.toLocaleString()}function Pw(e){var n;const t=(e||"").trim();if(!t)return"uploaded-docs";try{return new URL(t).hostname||"uploaded-docs"}catch{return((n=t.replace(/^https?:\/\//i,"").split("/")[0])==null?void 0:n.trim())||"uploaded-docs"}}function ER(e,t){if(e.origin)return e.origin;if(e.jobType==="domain")return e.domain||dl;const a=(e.startUrl||"").split("?")[0].split("#")[0].split("/").filter(Boolean).pop()||"";try{return decodeURIComponent(a)||t}catch{return a||t}}const Ym=10,Aw=6e3,TR=()=>{var I,Y;const{t:e}=Le(),{id:t}=St(),n=Bt(),[a,i]=m.useState(null),[r,o]=m.useState(!0),[l,c]=m.useState(!1),[d,u]=m.useState(!1),[p,h]=m.useState(!1),[f,g]=m.useState(null),[v,y]=m.useState(null),[b,x]=m.useState(""),[w,j]=m.useState(null),[S,k]=m.useState(null),[T,L]=m.useState(!1),[F,O]=m.useState(null),[M,P]=m.useState(!1),[D,E]=m.useState(1),[N,R]=m.useState(1),[C,A]=m.useState(0),[_,B]=m.useState([]),[H,Z]=m.useState({}),[ie,U]=m.useState({}),G=m.useRef(null),V=m.useRef(!1),$=(a==null?void 0:a.status)==="ACTIVE",z=((a==null?void 0:a.knowledgeSource)||"RAG")==="SHOPIFY",ee=!z&&((a==null?void 0:a.useDomainCrawler)||(a==null?void 0:a.usePdfCrawler))&&!(a!=null&&a.knowledgeClientId),J=async(W,ae)=>{P(!0);try{const pe=await Uz(W,ae);E(pe.page),R(pe.totalPages),A(pe.totalItems),B(pe.jobs||[])}finally{P(!1)}};m.useEffect(()=>{t&&(o(!0),g(null),wt(t).then(async W=>{i(W),x(W.domain||""),W.knowledgeClientId?await J(t,1):(E(1),R(1),A(0),B([]))}).catch(W=>{console.error(W),g((W==null?void 0:W.message)||e("botKnowledge.errors.loadBot"))}).finally(()=>o(!1)))},[t,e]);const X=m.useMemo(()=>_.filter(W=>!W._optimistic&&(W.status==="running"||W.status==="queued")).map(W=>W.id),[_]),ne=async W=>{if(t){Z(ae=>({...ae,[W]:!0}));try{const ae=await Vd(t,W),pe=ae==null?void 0:ae.job;pe&&B(Te=>Te.map(he=>he.id===pe.id?pe:he))}catch(ae){console.error(ae)}finally{Z(ae=>({...ae,[W]:!1}))}}},ue=async()=>{var W;if(t&&X.length!==0&&!V.current){V.current=!0;try{const ae=await Promise.allSettled(X.map(Te=>Vd(t,Te))),pe={};for(const Te of ae)if(Te.status==="fulfilled"){const he=(W=Te.value)==null?void 0:W.job;he!=null&&he.id&&(pe[he.id]=he)}Object.keys(pe).length>0&&B(Te=>Te.map(he=>pe[he.id]??he))}finally{V.current=!1}}};m.useEffect(()=>{if(X.length===0){G.current&&(clearInterval(G.current),G.current=null);return}if(!G.current)return ue().catch(()=>{}),G.current=window.setInterval(()=>{ue().catch(()=>{})},Aw),()=>{G.current&&(clearInterval(G.current),G.current=null)}},[X.join("|")]);const fe=async W=>{if(W.preventDefault(),!(!t||!a)){c(!0),g(null),y(null);try{const ae=await ln(t,{domain:b||null});i(ae),y(e("botKnowledge.success.settingsUpdated"))}catch(ae){console.error(ae),g((ae==null?void 0:ae.message)||e("botKnowledge.errors.updateSettings"))}finally{c(!1)}}},we=W=>{const ae=W.estimate??null;if(j(ae),k(W.estimateId??null),W.canProceed===!1){const he=W.requiredTokens??(ae==null?void 0:ae.tokensEstimated)??0,_e=W.remainingTokens??0;g(e("botKnowledge.errors.crawlLimitExceeded",{required:he.toLocaleString(),remaining:_e.toLocaleString()}));return}const pe=W.requiredTokens??(ae==null?void 0:ae.tokensEstimated)??0,Te=W.remainingTokens??null;O({kind:"crawl",requiredTokens:pe,remainingTokens:Te,onConfirm:async()=>{u(!0);const he=await fr(t,b.trim(),{confirm:!0,estimateId:W.estimateId??null});if(!he||!("jobId"in he))throw new Error(e("botKnowledge.errors.crawlFailed"));j(he.estimate??ae??null),y(e("botKnowledge.success.domainCrawlStartedJob",{domain:he.domain,jobId:he.jobId}));const _e=await wt(t);i(_e),await J(t,1)}})},Ae=async W=>{if(!t)return;const ae=90,pe=2e3;for(let Te=0;Te<ae;Te+=1){await new Promise(_e=>setTimeout(_e,pe));const he=await cP(t,W);if(he.status!=="running"){if(he.status==="failed"){g(he.error||e("botKnowledge.errors.estimateFailed"));return}if(he.status==="estimate"){we(he);return}}}g(e("botKnowledge.errors.estimateFailed"))},Q=async()=>{if(!(!t||!a)){if(a.status!=="ACTIVE"){g(e("botKnowledge.errors.mustBeActiveToCrawl"));return}if(!b.trim()){g(e("botKnowledge.errors.domainRequired"));return}if(!a.useDomainCrawler){g(e("botKnowledge.errors.domainCrawlerDisabled"));return}g(null),y(null),L(!0),j(null),k(null);try{const W=await fr(t,b.trim());if(W&&"status"in W){if(W.status==="estimate"){we(W);return}if(W.status==="estimate_pending"&&W.estimateId){await Ae(W.estimateId);return}}const ae=await fr(t,b.trim(),{confirm:!0});if(!ae||!("jobId"in ae))throw new Error(e("botKnowledge.errors.crawlFailed"));j(ae.estimate??(W==null?void 0:W.estimate)??null),y(e("botKnowledge.success.domainCrawlStartedJob",{domain:ae.domain,jobId:ae.jobId}));const pe=await wt(t);i(pe),await J(t,1)}catch(W){console.error(W),g((W==null?void 0:W.message)||e("botKnowledge.errors.crawlFailed"))}finally{L(!1),u(!1)}}};function be(W,ae){const pe=new Date().toISOString();return Array.from(W).map((Te,he)=>{const _e=String((Te==null?void 0:Te.name)||`document-${he+1}`);return{id:`optimistic-doc-${Date.now()}-${he}-${Math.random().toString(16).slice(2)}`,clientId:(a==null?void 0:a.knowledgeClientId)||"pending",status:"running",jobType:"docs",origin:_e,domain:ae,startUrl:`file://local/${encodeURIComponent(_e)}`,pagesVisited:0,pagesStored:0,chunksStored:0,totalPagesEstimated:1,percent:null,errorMessage:null,tokensUsed:null,createdAt:pe,startedAt:pe,finishedAt:null,updatedAt:pe,_optimistic:!0}})}const Oe=async W=>{if(!t||!a)return;if(a.status!=="ACTIVE"){g(e("botKnowledge.errors.mustBeActiveToUpload")),W.target.value="";return}const ae=W.target.files;if(!ae||ae.length===0)return;const pe=W.target,Te=Array.from(ae);if(!a.usePdfCrawler){g(e("botKnowledge.errors.pdfUploadDisabled")),W.target.value="";return}g(null),y(null),h(!0);try{const he=await Vz(t,Te),_e=he==null?void 0:he.estimate;if((_e==null?void 0:_e.totalTokensEstimated)!=null){const oe=_e.totalTokensEstimated??0;O({kind:"docs",requiredTokens:oe,remainingTokens:null,onConfirm:async()=>{h(!0);const Ce=Pw(a.domain)||"uploaded-docs";E(1),B(Ne=>[...be(Te,Ce),...Ne].slice(0,Ym));const $e=await bw(t,Te);y(e("botKnowledge.success.uploadedDocs",{count:$e.files.length,files:$e.files.join(", ")}));const Se=await wt(t);i(Se),await J(t,1),pe.value=""}});return}const Wt=Pw(a.domain)||"uploaded-docs";E(1),B(oe=>[...be(Te,Wt),...oe].slice(0,Ym));const se=await bw(t,Te);y(e("botKnowledge.success.uploadedDocs",{count:se.files.length,files:se.files.join(", ")}));const K=await wt(t);i(K),await J(t,1),pe.value=""}catch(he){console.error(he),g((he==null?void 0:he.message)||e("botKnowledge.errors.uploadFailed")),B(_e=>_e.filter(Wt=>!Wt._optimistic))}finally{h(!1)}},Ie=async()=>{if(!t)return;const W=Math.max(1,D-1);W!==D&&(g(null),await J(t,W))},We=async()=>{if(!t)return;const W=Math.min(N,D+1);W!==D&&(g(null),await J(t,W))};if(!t)return s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botKnowledge.missingId")})});if(r)return s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botKnowledge.loadingBot")})});if(f&&!a)return s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{children:e("common.error")}),s.jsx("p",{children:f})]});if(!a)return s.jsx("div",{className:"page-container",children:s.jsx("h1",{children:e("botKnowledge.notFound")})});if(z)return s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{children:e("botKnowledge.title")}),s.jsxs("div",{className:"alert-warning",style:{marginBottom:"1rem"},children:[s.jsx("strong",{children:e("botKnowledge.shopifyOnly.title")})," ",e("botKnowledge.shopifyOnly.body")," ",s.jsx(de,{to:`/app/bots/${a.id}/shopify`,children:e("botKnowledge.shopifyOnly.shopifyLink")}),"  ",s.jsx(de,{to:`/app/bots/${a.id}/features`,children:e("botKnowledge.shopifyOnly.featuresLink")}),"."]})]});const ze=e("botKnowledge.history.uploadedDocument"),ke={status:e("botKnowledge.history.table.status"),type:e("botKnowledge.history.table.type"),origin:e("botKnowledge.history.table.origin"),started:e("botKnowledge.history.table.started"),finished:e("botKnowledge.history.table.finished"),pages:e("botKnowledge.history.table.pages"),chunks:e("botKnowledge.history.table.chunks"),tokens:e("botKnowledge.history.table.tokens"),actions:e("botKnowledge.history.table.actions")},qe=async W=>{if(!(!t||!(W!=null&&W.id)||!window.confirm(e("botKnowledge.confirm.deactivateJob")))){g(null),y(null),U(pe=>({...pe,[W.id]:!0}));try{const pe=await Wz(t,W.id);y(e("botKnowledge.success.deactivateJob",{count:pe.deactivated,jobId:pe.jobId})),B(Te=>Te.map(he=>he.id===W.id?{...he,isActive:!1}:he))}catch(pe){console.error(pe),g((pe==null?void 0:pe.message)||e("botKnowledge.errors.deactivateFailed"))}finally{U(pe=>({...pe,[W.id]:!1}))}}},Ee=W=>{!t||!(W!=null&&W.id)||W.status==="running"||W.status==="queued"||W._optimistic||W.isActive===!1||n(`/app/bots/${t}/knowledge/jobs/${W.id}`)};return s.jsxs("div",{children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:e("botKnowledge.title")}),s.jsx("p",{className:"muted",children:e("botKnowledge.subtitle",{botName:a.name})})]}),s.jsx(de,{to:`/app/bots/${a.id}`,className:"btn-secondary",children:e("botKnowledge.backToBot")})]}),f&&s.jsx("div",{className:"form-error",children:f}),v&&s.jsx("div",{className:"form-success",children:v}),$?ee?s.jsxs("div",{className:"alert-warning",style:{marginBottom:"1rem"},children:[s.jsxs("strong",{children:[e("botKnowledge.status.knowledgeStatus"),": ",e("botKnowledge.status.missing")]})," ",e("botKnowledge.missingBody")]}):null:s.jsxs("div",{className:"alert-warning",style:{marginBottom:"1rem"},children:[s.jsxs("strong",{children:[e("botKnowledge.status.knowledgeStatus"),": ",e("botKnowledge.status.locked")]})," ",e("botKnowledge.lockedBody",{status:a.status})," ",s.jsx(de,{to:`/app/bots/${a.id}/features`,children:e("botKnowledge.featuresAndPlan")}),"."]}),$&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"knowledge-grid",children:[s.jsxs("section",{className:"knowledge-card",children:[s.jsxs("div",{className:"knowledge-card-header",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"knowledge-card-title",children:e("botKnowledge.domainCard.title")}),s.jsx("p",{className:"knowledge-card-description",children:e("botKnowledge.domainCard.description")})]}),s.jsx("span",{className:a.useDomainCrawler?"status-badge status-badge-ok":"status-badge status-badge-warn",children:a.useDomainCrawler?e("botKnowledge.feature.enabled"):e("botKnowledge.feature.disabled")})]}),s.jsxs("form",{className:"form",onSubmit:fe,children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botKnowledge.fields.domain")}),s.jsx("input",{type:"text",value:b,onChange:W=>x(W.target.value),placeholder:e("botKnowledge.placeholders.domain")}),s.jsx("span",{className:"knowledge-card-muted-note",children:e("botKnowledge.domainCard.domainNote")})]}),s.jsxs("div",{className:"knowledge-card-actions",children:[s.jsx("button",{className:"btn-primary",type:"submit",disabled:l,children:e(l?"common.saving":"botKnowledge.actions.saveKnowledgeSettings")}),s.jsx("button",{className:"btn-secondary",type:"button",onClick:Q,disabled:d||T||!a.useDomainCrawler,children:e(T?"botKnowledge.actions.estimating":d?"botKnowledge.actions.crawling":"botKnowledge.actions.crawlNow")})]}),w&&s.jsxs("div",{style:{marginTop:"0.75rem"},className:"knowledge-card-muted-note",children:[e("botKnowledge.estimate.crawlCostLabel")," ",s.jsxs("strong",{children:[(I=w.tokensLow)==null?void 0:I.toLocaleString(),"  ",(Y=w.tokensHigh)==null?void 0:Y.toLocaleString()," ",e("botKnowledge.estimate.tokensUnit")]}),w.samplePages?` ${e("botKnowledge.estimate.sampledPages",{count:w.samplePages})}`:null]}),!a.useDomainCrawler&&s.jsxs("p",{className:"knowledge-card-muted-note",children:[e("botKnowledge.domainCard.disabledNote")," ",s.jsx(de,{to:`/app/bots/${a.id}/features`,children:e("botKnowledge.featuresAndPlan")}),"."]})]})]}),s.jsxs("section",{className:"knowledge-card",children:[s.jsxs("div",{className:"knowledge-card-header",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"knowledge-card-title",children:e("botKnowledge.docsCard.title")}),s.jsx("p",{className:"knowledge-card-description",children:e("botKnowledge.docsCard.description")})]}),s.jsx("span",{className:a.usePdfCrawler?"status-badge status-badge-ok":"status-badge status-badge-warn",children:a.usePdfCrawler?e("botKnowledge.feature.enabled"):e("botKnowledge.feature.disabled")})]}),!a.usePdfCrawler&&s.jsxs("p",{className:"knowledge-card-muted-note",children:[e("botKnowledge.docsCard.disabledNote")," ",s.jsx(de,{to:`/app/bots/${a.id}/features`,children:e("botKnowledge.featuresAndPlan")}),"."]}),a.usePdfCrawler&&s.jsx("div",{className:"form",children:s.jsxs("div",{className:"form-field",children:[s.jsx("span",{children:e("botKnowledge.docsCard.uploadLabel")}),s.jsx("input",{type:"file",accept:".pdf,doc,docx,txt",multiple:!0,onChange:Oe,disabled:p}),p&&s.jsx("span",{className:"knowledge-card-muted-note",children:e("botKnowledge.actions.uploading")}),s.jsx("span",{className:"knowledge-card-muted-note",children:e("botKnowledge.docsCard.supportedFormats")})]})})]})]}),s.jsxs("div",{style:{marginTop:"1.25rem"},children:[s.jsxs("div",{className:"page-header",style:{alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0},children:e("botKnowledge.history.title")}),s.jsx("p",{className:"muted",style:{margin:0},children:e("botKnowledge.history.autoRefreshNote",{seconds:Math.round(Aw/1e3)})})]}),s.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>t&&J(t,D),disabled:M||!a.knowledgeClientId,children:e(M?"botKnowledge.history.refreshingPage":"botKnowledge.history.refreshPage")})]}),s.jsx("div",{className:"table-responsive crawl-history-table-wrapper",children:s.jsxs("table",{className:"table crawl-history-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:ke.status}),s.jsx("th",{children:ke.type}),s.jsx("th",{children:ke.origin}),s.jsx("th",{children:ke.started}),s.jsx("th",{children:ke.finished}),s.jsx("th",{children:ke.pages}),s.jsx("th",{children:ke.chunks}),s.jsx("th",{children:ke.tokens}),s.jsx("th",{className:"crawl-history-actions-header",children:ke.actions})]})}),s.jsx("tbody",{children:a.knowledgeClientId?_.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"muted",children:e(M?"botKnowledge.history.loadingRows":"botKnowledge.history.empty.noRuns")})}):_.map(W=>{const ae=W.status==="running"||W.status==="queued",pe=!!H[W.id],Te=!!ie[W.id],he=!!W._optimistic,_e=ER(W,ze),Wt=W.domain||"uploaded-docs",se=W.isActive===!1,K=e(se?"botKnowledge.history.status.deactivated":`botKnowledge.history.status.${W.status}`),oe=W.jobType==="docs"?e("botKnowledge.history.jobType.docs"):e("botKnowledge.history.jobType.domain");return s.jsxs("tr",{className:!ae&&!he&&!se?"crawl-history-row--clickable":void 0,onClick:()=>Ee(W),children:[s.jsxs("td",{className:"crawl-history-status-cell","data-label":ke.status,children:[s.jsx("span",{className:se?"status-badge status-badge-warn":W.status==="completed"?"status-badge status-badge-ok":W.status==="failed"?"status-badge status-badge-warn":"status-badge",children:K}),W.errorMessage?s.jsx("div",{className:"muted",style:{marginTop:4},children:W.errorMessage}):null,he?s.jsx("div",{className:"muted",style:{marginTop:4},children:e("botKnowledge.history.uploadInProgress")}):null]}),s.jsx("td",{"data-label":ke.type,children:s.jsx("span",{className:"status-badge",children:oe})}),s.jsxs("td",{className:"crawl-history-origin","data-label":ke.origin,children:[s.jsx("div",{className:"crawl-history-origin-text",children:_e||dl}),W.jobType==="docs"?s.jsx("div",{className:"muted",style:{marginTop:4},children:e("botKnowledge.history.storedUnder",{namespace:Wt})}):null]}),s.jsx("td",{"data-label":ke.started,children:kw(W.startedAt||W.createdAt)}),s.jsx("td",{"data-label":ke.finished,children:kw(W.finishedAt)}),s.jsxs("td",{"data-label":ke.pages,children:[W.pagesVisited,W.totalPagesEstimated?` / ~${W.totalPagesEstimated}`:"",W.percent!=null?` (${W.percent}%)`:""]}),s.jsxs("td",{"data-label":ke.chunks,children:[W.chunksStored," ",s.jsxs("span",{className:"muted",children:["(",e("botKnowledge.history.pagesStored",{count:W.pagesStored}),")"]})]}),s.jsx("td",{"data-label":ke.tokens,children:W.tokensUsed!=null?(W.tokensUsed/10).toLocaleString():dl}),s.jsxs("td",{className:"crawl-history-actions-cell","data-label":ke.actions,children:[s.jsx("button",{className:"btn-secondary",type:"button",disabled:he||!ae||pe,onClick:Ce=>{Ce.stopPropagation(),ne(W.id)},children:e(pe?"botKnowledge.history.refreshingRow":"botKnowledge.history.refreshRow")}),s.jsx("button",{className:"btn-secondary",type:"button",disabled:he||ae||pe||Te||se,onClick:Ce=>{Ce.stopPropagation(),qe(W)},children:e(Te?"botKnowledge.history.deactivating":"botKnowledge.history.deactivate")})]})]},W.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"muted",children:e("botKnowledge.history.empty.noClient")})})})]})}),s.jsxs("div",{className:"crawl-history-footer",children:[s.jsx("div",{className:"muted",children:e("botKnowledge.history.footer",{shown:_.length,total:C,page:D,totalPages:N,pageSize:Ym})}),s.jsxs("div",{className:"crawl-history-footer-actions",children:[s.jsx("button",{className:"btn-secondary",type:"button",onClick:Ie,disabled:M||D<=1||!a.knowledgeClientId,children:e("botKnowledge.history.prev")}),s.jsx("button",{className:"btn-secondary",type:"button",onClick:We,disabled:M||D>=N||!a.knowledgeClientId,children:e("botKnowledge.history.next")})]})]}),s.jsx("p",{className:"muted",style:{marginTop:8},children:e("botKnowledge.history.tokenUsageNote")})]})]}),F&&s.jsx("div",{className:"meta-page-select-modal-backdrop",onClick:W=>{W.target===W.currentTarget&&O(null)},children:s.jsxs("div",{className:"meta-page-select-modal",role:"dialog","aria-modal":"true",children:[s.jsxs("div",{className:"meta-page-select-modal-header",children:[s.jsx("h2",{style:{margin:0},children:F.kind==="crawl"?e("botKnowledge.modal.crawlTitle"):e("botKnowledge.modal.docsTitle")}),s.jsx("button",{type:"button",onClick:()=>O(null),children:""})]}),s.jsxs("div",{className:"meta-page-select-modal-body",children:[s.jsx("p",{className:"muted",children:F.kind==="crawl"?e("botKnowledge.modal.crawlBody"):e("botKnowledge.modal.docsBody")}),s.jsx("div",{className:"form-fieldset",style:{marginTop:"0.8rem"},children:s.jsxs("div",{className:"form-row",children:[s.jsxs("label",{children:[s.jsx("span",{children:e("botKnowledge.modal.estimatedTokens")}),s.jsxs("strong",{style:{display:"block",marginTop:"0.2rem"},children:[F.requiredTokens.toLocaleString()," ",e("botKnowledge.estimate.tokensUnit")]})]}),F.remainingTokens!=null&&s.jsxs("label",{children:[s.jsx("span",{children:e("botKnowledge.modal.remainingTokens")}),s.jsxs("strong",{style:{display:"block",marginTop:"0.2rem"},children:[F.remainingTokens.toLocaleString()," ",e("botKnowledge.estimate.tokensUnit")]})]})]})})]}),s.jsxs("div",{className:"meta-page-select-modal-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>O(null),children:e("botKnowledge.modal.cancel")}),s.jsx("button",{type:"button",className:"btn-primary",onClick:async()=>{const W=F.onConfirm;O(null);try{await W()}catch(ae){console.error(ae),g((ae==null?void 0:ae.message)||e("botKnowledge.errors.crawlFailed"))}finally{L(!1),u(!1),h(!1)}},children:e("botKnowledge.modal.confirm")})]})]})})]})},Ef="-";function Ew(e){if(!e)return Ef;const t=new Date(e);return Number.isNaN(t.getTime())?Ef:t.toLocaleString()}const IR=()=>{const{t:e}=Le(),{id:t,jobId:n}=St(),[a,i]=m.useState(null),[r,o]=m.useState(null),[l,c]=m.useState([]),[d,u]=m.useState(!0),[p,h]=m.useState(null),[f,g]=m.useState(null),[v,y]=m.useState({}),[b,x]=m.useState({});m.useEffect(()=>{!t||!n||(u(!0),h(null),g(null),Promise.all([wt(t),Vd(t,n),qz(t,n)]).then(([S,k,T])=>{i(S),o(k.job);const L=(T.chunks||[]).map(F=>({...F,draftText:F.text}));c(L)}).catch(S=>{console.error(S),h((S==null?void 0:S.message)||e("botKnowledge.chunks.errors.loadFailed"))}).finally(()=>u(!1)))},[t,n,e]);const w=async S=>{if(!t)return;const k=S.draftText.trim();if(!(!k||k===S.text)){y(T=>({...T,[S.id]:!0})),h(null),g(null);try{const L=(await Hz(t,S.id,k)).chunk;c(F=>F.map(O=>O.id===S.id?{...O,text:L.text,draftText:L.text}:O)),g(e("botKnowledge.chunks.success.saved",{chunkId:L.id}))}catch(T){console.error(T),h((T==null?void 0:T.message)||e("botKnowledge.chunks.errors.saveFailed"))}finally{y(T=>({...T,[S.id]:!1}))}}},j=async S=>{if(!(!t||!window.confirm(e("botKnowledge.chunks.confirm.delete")))){x(T=>({...T,[S.id]:!0})),h(null),g(null);try{await Kz(t,S.id),c(T=>T.filter(L=>L.id!==S.id)),g(e("botKnowledge.chunks.success.deleted",{chunkId:S.id}))}catch(T){console.error(T),h((T==null?void 0:T.message)||e("botKnowledge.chunks.errors.deleteFailed"))}finally{x(T=>({...T,[S.id]:!1}))}}};return!t||!n?s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botKnowledge.chunks.missingId")})}):d?s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botKnowledge.chunks.loading")})}):s.jsxs("div",{children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:e("botKnowledge.chunks.title")}),s.jsx("p",{className:"muted",children:e("botKnowledge.chunks.subtitle",{botName:(a==null?void 0:a.name)||""})})]}),s.jsx(de,{to:`/app/bots/${t}/knowledge`,className:"btn-secondary btn-color",children:e("botKnowledge.chunks.backToHistory")})]}),p&&s.jsx("div",{className:"form-error",children:p}),f&&s.jsx("div",{className:"form-success",children:f}),r&&s.jsxs("div",{className:"knowledge-card",style:{marginBottom:"1rem"},children:[s.jsxs("div",{className:"knowledge-card-header",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"knowledge-card-title",children:e("botKnowledge.chunks.jobTitle")}),s.jsx("p",{className:"knowledge-card-description",children:e("botKnowledge.chunks.jobSubtitle",{origin:r.origin||Ef})})]}),s.jsx("span",{className:"status-badge",children:r.jobType==="docs"?e("botKnowledge.history.jobType.docs"):e("botKnowledge.history.jobType.domain")})]}),s.jsxs("div",{className:"chunk-meta",children:[s.jsxs("div",{children:[s.jsxs("strong",{children:[e("botKnowledge.chunks.jobIdLabel"),":"]})," ",r.id]}),s.jsxs("div",{children:[s.jsxs("strong",{children:[e("botKnowledge.chunks.startedLabel"),":"]})," ",Ew(r.startedAt||r.createdAt)]}),s.jsxs("div",{children:[s.jsxs("strong",{children:[e("botKnowledge.chunks.finishedLabel"),":"]})," ",Ew(r.finishedAt)]})]})]}),l.length===0?s.jsx("div",{className:"muted",children:e("botKnowledge.chunks.empty")}):s.jsx("div",{className:"chunk-list",children:l.map(S=>{const k=!!v[S.id],T=!!b[S.id];return s.jsxs("div",{className:"chunk-card",children:[s.jsxs("div",{className:"chunk-card-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"chunk-title",children:e("botKnowledge.chunks.chunkLabel",{index:S.chunkIndex})}),s.jsxs("div",{className:"chunk-subtitle",children:[e("botKnowledge.chunks.sourceLabel"),": ",S.url]})]}),s.jsxs("div",{className:"chunk-actions",children:[s.jsx("button",{className:"btn-secondary btn-color",type:"button",disabled:k||T||S.draftText.trim()===S.text,onClick:()=>w(S),children:e(k?"botKnowledge.chunks.saving":"botKnowledge.chunks.save")}),s.jsx("button",{className:"btn-secondary btn-color",type:"button",disabled:k||T,onClick:()=>j(S),children:e(T?"botKnowledge.chunks.deleting":"botKnowledge.chunks.delete")})]})]}),s.jsx("textarea",{className:"chunk-textarea",value:S.draftText,onChange:L=>{const F=L.target.value;c(O=>O.map(M=>M.id===S.id?{...M,draftText:F}:M))}})]},S.id)})})]})},OR=()=>{const{t:e}=Le(),{id:t}=St(),n=Bt(),[a,i]=m.useState(null),[r,o]=m.useState(!0),[l,c]=m.useState(!1),[d,u]=m.useState(!1),[p,h]=m.useState(null),[f,g]=m.useState(null),[v,y]=m.useState(null),[b,x]=m.useState(!1);m.useEffect(()=>{t&&(o(!0),h(null),wt(t).then(O=>{i(O);const M=O.knowledgeSource||"RAG",P={knowledgeSource:M,useDomainCrawler:M!=="SHOPIFY",usePdfCrawler:M!=="SHOPIFY",channelWeb:O.channelWeb,channelWhatsapp:O.channelWhatsapp,channelInstagram:O.channelInstagram,channelMessenger:O.channelMessenger,useCalendar:O.useCalendar,leadWhatsappMessages200:O.leadWhatsappMessages200,leadWhatsappMessages500:O.leadWhatsappMessages500,leadWhatsappMessages1000:O.leadWhatsappMessages1000};y(P)}).catch(O=>{console.error(O),h((O==null?void 0:O.message)||e("botFeatures.errors.loadBot"))}).finally(()=>o(!1)))},[t]);const w=O=>M=>{if(!v||!a)return;const P=M.target.checked,D={...v,[O]:P};y(D)},j=O=>{if(!v)return;let M=v.useDomainCrawler,P=v.usePdfCrawler;O==="SHOPIFY"?(M=!1,P=!1):(M=!0,P=!0),y({...v,knowledgeSource:O,useDomainCrawler:M,usePdfCrawler:P})},S=async()=>{if(t){x(!0),h(null),g(null);try{const O=await $z(t);i(O),g(e("botFeatures.success.subscriptionCanceled"))}catch(O){console.error("Failed to cancel subscription",O),h((O==null?void 0:O.message)||e("botFeatures.errors.cancelSubscription","Failed to cancel subscription."))}finally{x(!1)}}},k=async O=>{if(O.preventDefault(),!(!a||!v)){c(!0),h(null),g(null);try{const M={knowledgeSource:v.knowledgeSource,useDomainCrawler:v.useDomainCrawler,usePdfCrawler:v.usePdfCrawler,channelWeb:v.channelWeb,channelWhatsapp:v.channelWhatsapp,channelMessenger:v.channelMessenger,channelInstagram:v.channelInstagram,useCalendar:v.useCalendar,leadWhatsappMessages200:v.leadWhatsappMessages200,leadWhatsappMessages500:v.leadWhatsappMessages500,leadWhatsappMessages1000:v.leadWhatsappMessages1000},P=await ln(a.id,M);i(P),g(e("botFeatures.success.saved"))}catch(M){console.error(M),h((M==null?void 0:M.message)||e("botFeatures.errors.saveFeatures"))}finally{c(!1)}}},T=async()=>{if(!(!a||!v||!t)){u(!0),h(null);try{const O={knowledgeSource:v.knowledgeSource,useDomainCrawler:v.useDomainCrawler,usePdfCrawler:v.usePdfCrawler,channelWeb:v.channelWeb,channelWhatsapp:v.channelWhatsapp,channelMessenger:v.channelMessenger,channelInstagram:v.channelInstagram,useCalendar:v.useCalendar,leadWhatsappMessages200:v.leadWhatsappMessages200,leadWhatsappMessages500:v.leadWhatsappMessages500,leadWhatsappMessages1000:v.leadWhatsappMessages1000},M=await ln(a.id,O);i(M),n(`/app/bots/${encodeURIComponent(t)}/plan`)}catch(O){console.error(O),h((O==null?void 0:O.message)||e("botFeatures.errors.saveFeatures"))}finally{u(!1)}}},L=a&&a.status==="ACTIVE",F=O=>{const M=O.toUpperCase();return M==="ACTIVE"?"plan-summary-status plan-summary-status-ok":M==="DRAFT"?"plan-summary-status plan-summary-status-warn":M==="CANCELLED"||M==="INACTIVE"?"plan-summary-status plan-summary-status-error":"plan-summary-status"};return r||!a||!v?s.jsxs("div",{className:"page",children:[s.jsx("div",{className:"page-header",children:s.jsx("h1",{children:e("botFeatures.title")})}),s.jsx("div",{className:"card",children:s.jsx("p",{className:"muted",children:e("common.loading")})})]}):s.jsxs("div",{className:"page",children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:e("botFeatures.title")}),s.jsx("p",{className:"muted",children:e("botFeatures.subtitle",{name:a.name||""})})]}),s.jsx("div",{className:"page-header-actions",children:s.jsx(de,{className:"btn-secondary",to:`/app/bots/${encodeURIComponent(a.id)}`,children:e("botFeatures.actions.backToBot")})})]}),p&&s.jsx("div",{className:"form-error",children:p}),f&&s.jsx("div",{className:"form-success",children:f}),s.jsxs("div",{className:"detail-layout",children:[s.jsx("section",{className:"detail-main",children:s.jsxs("form",{className:"form features-form",onSubmit:k,children:[s.jsxs("fieldset",{className:"form-fieldset feature-group",children:[s.jsx("legend",{children:e("botFeatures.groups.knowledge")}),s.jsxs("div",{className:"feature-options",children:[s.jsxs("label",{className:"feature-option"+(v.knowledgeSource==="RAG"?" feature-option-checked":""),children:[s.jsx("input",{type:"radio",name:"knowledgeSource",checked:v.knowledgeSource==="RAG",onChange:()=>j("RAG")}),s.jsx("div",{className:"feature-option-content",children:s.jsx("div",{className:"feature-option-header",children:s.jsxs("div",{children:[s.jsx("div",{className:"feature-option-title",children:e("botFeatures.knowledge.source.rag.title")}),s.jsx("p",{className:"feature-option-description",children:e("botFeatures.knowledge.source.rag.description")})]})})})]}),s.jsxs("label",{className:"feature-option"+(v.knowledgeSource==="SHOPIFY"?" feature-option-checked":""),children:[s.jsx("input",{type:"radio",name:"knowledgeSource",checked:v.knowledgeSource==="SHOPIFY",onChange:()=>j("SHOPIFY")}),s.jsx("div",{className:"feature-option-content",children:s.jsx("div",{className:"feature-option-header",children:s.jsxs("div",{children:[s.jsx("div",{className:"feature-option-title",children:e("botFeatures.knowledge.source.shopify.title")}),s.jsx("p",{className:"feature-option-description",children:e("botFeatures.knowledge.source.shopify.description")})]})})})]})]})]}),s.jsxs("fieldset",{className:"form-fieldset feature-group",children:[s.jsx("legend",{children:e("botFeatures.groups.channels")}),s.jsxs("div",{className:"feature-options",children:[s.jsxs("label",{className:"feature-option"+(v.channelWeb?" feature-option-checked":""),children:[s.jsx("input",{type:"checkbox",checked:v.channelWeb,onChange:w("channelWeb")}),s.jsx("div",{className:"feature-option-content",children:s.jsx("div",{className:"feature-option-header",children:s.jsxs("div",{children:[s.jsx("div",{className:"feature-option-title",children:e("botFeatures.channels.web.title")}),s.jsx("p",{className:"feature-option-description",children:e("botFeatures.channels.web.description")})]})})})]}),s.jsxs("label",{className:"feature-option"+(v.channelWhatsapp?" feature-option-checked":""),children:[s.jsx("input",{type:"checkbox",checked:v.channelWhatsapp,onChange:w("channelWhatsapp")}),s.jsx("div",{className:"feature-option-content",children:s.jsx("div",{className:"feature-option-header",children:s.jsxs("div",{children:[s.jsx("div",{className:"feature-option-title",children:e("botFeatures.channels.whatsapp.title")}),s.jsx("p",{className:"feature-option-description",children:e("botFeatures.channels.whatsapp.description")})]})})})]}),s.jsxs("label",{className:"feature-option"+(v.channelMessenger?" feature-option-checked":""),children:[s.jsx("input",{type:"checkbox",checked:v.channelMessenger,onChange:w("channelMessenger")}),s.jsx("div",{className:"feature-option-content",children:s.jsx("div",{className:"feature-option-header",children:s.jsxs("div",{children:[s.jsx("div",{className:"feature-option-title",children:e("botFeatures.channels.messenger.title")}),s.jsx("p",{className:"feature-option-description",children:e("botFeatures.channels.messenger.description")})]})})})]}),s.jsxs("label",{className:"feature-option"+(v.channelInstagram?" feature-option-checked":""),children:[s.jsx("input",{type:"checkbox",checked:v.channelInstagram,onChange:w("channelInstagram")}),s.jsx("div",{className:"feature-option-content",children:s.jsx("div",{className:"feature-option-header",children:s.jsxs("div",{children:[s.jsx("div",{className:"feature-option-title",children:e("botFeatures.channels.instagram.title")}),s.jsx("p",{className:"feature-option-description",children:e("botFeatures.channels.instagram.description")})]})})})]})]})]}),s.jsxs("fieldset",{className:"form-fieldset feature-group",children:[s.jsx("legend",{children:e("botFeatures.groups.calendar")}),s.jsx("div",{className:"feature-options",children:s.jsxs("label",{className:"feature-option"+(v.useCalendar?" feature-option-checked":""),children:[s.jsx("input",{type:"checkbox",checked:v.useCalendar,onChange:w("useCalendar")}),s.jsx("div",{className:"feature-option-content",children:s.jsx("div",{className:"feature-option-header",children:s.jsxs("div",{children:[s.jsx("div",{className:"feature-option-title",children:e("botFeatures.calendar.title")}),s.jsx("p",{className:"feature-option-description",children:e("botFeatures.calendar.description")})]})})})]})})]}),s.jsxs("fieldset",{className:"form-fieldset feature-group",children:[s.jsx("legend",{children:e("botFeatures.groups.leadAds")}),s.jsx("div",{className:"feature-options",children:s.jsxs("label",{className:"feature-option"+((v.leadWhatsappMessages200||v.leadWhatsappMessages500||v.leadWhatsappMessages1000)&&v.channelWhatsapp?" feature-option-checked":""),children:[s.jsx("input",{type:"checkbox",checked:v.channelWhatsapp&&(v.leadWhatsappMessages200||v.leadWhatsappMessages500||v.leadWhatsappMessages1000),disabled:!v.channelWhatsapp,onChange:O=>{const M=O.target.checked;y(P=>{if(!P||!a)return P;let D;return M?!P.leadWhatsappMessages200&&!P.leadWhatsappMessages500&&!P.leadWhatsappMessages1000?D={...P,leadWhatsappMessages200:!0,leadWhatsappMessages500:!1,leadWhatsappMessages1000:!1}:D=P:D={...P,leadWhatsappMessages200:!1,leadWhatsappMessages500:!1,leadWhatsappMessages1000:!1},D})}}),s.jsxs("div",{className:"feature-option-content",children:[s.jsx("div",{className:"feature-option-header",children:s.jsxs("div",{children:[s.jsx("div",{className:"feature-option-title",children:e("botFeatures.leadAds.whatsapp.title")}),s.jsx("p",{className:"feature-option-description",children:e("botFeatures.leadAds.whatsapp.description")})]})}),s.jsx("div",{style:{marginTop:"0.5rem"},children:s.jsxs("select",{disabled:!v.channelWhatsapp||!(v.leadWhatsappMessages200||v.leadWhatsappMessages500||v.leadWhatsappMessages1000),value:v.leadWhatsappMessages1000?"1000":v.leadWhatsappMessages500?"500":v.leadWhatsappMessages200?"200":"",onChange:O=>{const M=O.target.value;y(P=>!P||!a?P:{...P,leadWhatsappMessages200:M==="200",leadWhatsappMessages500:M==="500",leadWhatsappMessages1000:M==="1000"})},children:[s.jsx("option",{value:"",disabled:!0,children:e("botFeatures.leadAds.whatsapp.selectTier")}),s.jsx("option",{value:"200",children:"200 WhatsApp messages / month"}),s.jsx("option",{value:"500",children:"500 WhatsApp messages / month"}),s.jsx("option",{value:"1000",children:"1000 WhatsApp messages / month"})]})}),!v.channelWhatsapp&&s.jsx("p",{className:"muted",style:{marginTop:"0.4rem"},children:e("botFeatures.leadAds.whatsapp.requiresWhatsapp")})]})]})})]}),s.jsx("button",{className:"btn-primary",type:"submit",disabled:l,children:e(l?"botFeatures.actions.saving":"botFeatures.actions.save")})]})}),s.jsxs("section",{className:"detail-side",children:[s.jsxs("div",{className:"plan-summary-header",children:[s.jsx("h2",{style:{margin:0},children:e("botFeatures.side.title")}),s.jsxs("span",{className:F(a.status),children:[e("botFeatures.side.statusLabel")," ",s.jsx("strong",{children:a.status})]})]}),s.jsx("p",{className:"muted",style:{marginTop:"0.35rem"},children:e("botFeatures.side.subtitle")}),!L&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn-primary",onClick:T,disabled:d||l,style:{marginTop:"1rem"},children:e(d?"botFeatures.actions.saving":"botFeatures.actions.next")}),s.jsx("p",{className:"detail-side-note",children:e("botFeatures.side.nextNote")})]}),L&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn-primary",onClick:()=>n(`/app/bots/${a.id}/plan`),style:{marginTop:"0.75rem"},children:e("botFeatures.actions.viewChangePlan")}),s.jsx("button",{className:"btn-secondary",onClick:S,disabled:b,style:{marginTop:"0.6rem"},children:e(b?"botFeatures.actions.cancelling":"botFeatures.actions.cancelSubscription")})]})]})]})]})},Tw="2026-01-26",Iw="Andrei Cosmin Marica",Ow="Via Petrazzo 18, Messina (ME), 98142, Italia",Ec="assistenza@coslo.it",LR="IT03858840832",MR=()=>{const{t:e}=Le(),t=["provider","definitions","scope","shopifyApp","account","plansPayments","permittedUseCompliance","privacyMultiTenant","aiLimitations","thirdParties","availabilitySupport","ip","termination","warranty","liability","indemnity","changes","lawForum","contacts"],n=i=>{const r=e(i,{returnObjects:!0});return Array.isArray(r)?s.jsx("ul",{className:"policy-list",children:r.map((o,l)=>s.jsx("li",{children:String(o)},l))}):null},a=i=>{const r=`terms.sections.${i}`,o=e(`${r}.paragraphs`,{returnObjects:!0});if(!Array.isArray(o))return null;const l=e(`${r}.useTrans`,{defaultValue:"false"})==="true";return o.map((c,d)=>{const u=`${r}.paragraphs.${d}`;return l?s.jsx("p",{className:"lp-text",children:s.jsx(Kk,{i18nKey:u,values:{lastUpdated:Tw,providerName:Iw,providerAddress:Ow,email:Ec},components:{a:s.jsx("a",{href:`mailto:${Ec}`}),strong:s.jsx("strong",{})}})},d):s.jsx("p",{className:"lp-text",children:e(u)},d)})};return s.jsxs("div",{className:"policy-page",children:[s.jsxs("div",{className:"lp-container policy-container",children:[s.jsxs("header",{className:"policy-header",children:[s.jsx("p",{className:"policy-kicker",children:e("terms.hero.kicker")}),s.jsx("h1",{className:"lp-section-title",children:e("terms.hero.title")}),s.jsx("p",{className:"lp-text policy-intro",children:e("terms.hero.intro")}),s.jsxs("p",{className:"lp-text",children:[s.jsxs("strong",{children:[e("terms.hero.lastUpdatedLabel"),":"]})," ",Tw]})]}),s.jsx("div",{className:"policy-grid",children:t.map(i=>s.jsxs("section",{className:"policy-section",children:[s.jsx("h2",{className:"policy-subtitle",children:e(`terms.sections.${i}.title`)}),i==="provider"?s.jsxs("p",{className:"lp-text",children:[s.jsxs("strong",{children:[e("terms.sections.provider.labels.provider"),":"]})," ",Iw+("(P.IVA: "+LR+")"),s.jsx("br",{}),s.jsxs("strong",{children:[e("terms.sections.provider.labels.address"),":"]})," ",Ow,s.jsx("br",{}),s.jsxs("strong",{children:[e("terms.sections.provider.labels.contact"),":"]})," ",s.jsx("a",{href:`mailto:${Ec}`,children:Ec})]}):a(i),n(`terms.sections.${i}.list`)]},i))})]}),s.jsx(Mv,{})]})};async function Lw(){return le("/billing/overview")}async function DR(e){return le(`/billing/payments/${encodeURIComponent(e)}/invoice-url`)}async function FR(e){return le(`/bots/${encodeURIComponent(e)}/topup-options`)}async function zR(e,t){return le(`/bots/${encodeURIComponent(e)}/topup-checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({optionCode:t})})}async function RR(e){return le(`/bots/${encodeURIComponent(e)}/cancel-subscription`,{method:"POST"})}function _R(e){switch((e||"en").split("-")[0]){case"it":return"it-IT";case"es":return"es-ES";default:return"en-GB"}}function Qm(e,t,n){return new Intl.NumberFormat(n,{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2}).format(e/100)}function fs(e){return Math.round(e/10)}function BR(e){const t="status-badge ";switch(e){case"ACTIVE":case"TRIALING":return t+"status-badge-ok";case"PAST_DUE":case"UNPAID":case"INCOMPLETE":case"INCOMPLETE_EXPIRED":return t+"status-badge-warn";case"CANCELED":default:return t+"status-badge-error"}}function uo(e){if(e==null)return null;const t="status-badge ";return e>=100?t+"status-badge-error":e>=90||e>=75?t+"status-badge-warn":t+"status-badge-ok"}const $R=()=>{const{t:e,i18n:t}=Le(),n=m.useMemo(()=>_R(t.resolvedLanguage||t.language),[t.language,t.resolvedLanguage]),[a,i]=m.useState(null),[r,o]=m.useState(!0),[l,c]=m.useState(null),[d,u]=m.useState(null),[p,h]=m.useState(null),[f,g]=m.useState(null),[v,y]=m.useState({botId:null,loading:!1,options:null,selectedCode:null,checkoutLoading:!1,error:null}),b=N=>{switch(N){case"ACTIVE":return e("billing.subscriptionStatus.active");case"PAST_DUE":return e("billing.subscriptionStatus.pastDue");case"CANCELED":return e("billing.subscriptionStatus.canceled");case"TRIALING":return e("billing.subscriptionStatus.trial");case"UNPAID":return e("billing.subscriptionStatus.unpaid");case"INCOMPLETE":return e("billing.subscriptionStatus.incomplete");case"INCOMPLETE_EXPIRED":return e("billing.subscriptionStatus.incompleteExpired");default:return N}},x=N=>N==null?null:N>=100?e("billing.usageStatus.overLimit"):N>=90?e("billing.usageStatus.atLimit"):N>=75?e("billing.usageStatus.highUsage"):e("billing.usageStatus.healthyUsage");m.useEffect(()=>{o(!0),c(null),Lw().then(N=>i(N)).catch(N=>c((N==null?void 0:N.message)||e("billing.errors.loadFailed"))).finally(()=>o(!1))},[]);const w=async N=>{if(N.hasInvoice){h(N.id),c(null);try{const{url:R}=await DR(N.id);R?window.open(R,"_blank","noopener,noreferrer"):c(e("billing.errors.invoiceUnavailable"))}catch(R){console.error(R),c((R==null?void 0:R.message)||e("billing.errors.invoiceDownloadFailed"))}finally{h(null)}}},j=async N=>{if(window.confirm(e("billing.cancel.confirm",{defaultValue:"Cancel this subscription at the end of the current billing period?"}))){g(N),c(null),u(null);try{const C=await RR(N),A=C.periodEnd?new Date(C.periodEnd).toLocaleDateString(n,{year:"numeric",month:"short",day:"numeric"}):null;u(A?e("billing.cancel.successWithDate",{defaultValue:"Cancellation scheduled. Your plan stays active until {{date}}.",date:A}):e("billing.cancel.success",{defaultValue:"Cancellation scheduled. Your plan stays active until the end of the current billing period."}));const _=await Lw();i(_)}catch(C){console.error(C),c((C==null?void 0:C.message)||e("billing.cancel.error",{defaultValue:"Failed to cancel subscription."}))}finally{g(null)}}},S=async N=>{y({botId:N,loading:!0,options:null,selectedCode:null,checkoutLoading:!1,error:null});try{const R=await FR(N);y(C=>{var A;return{...C,loading:!1,options:R,selectedCode:((A=R.options[0])==null?void 0:A.code)??null}})}catch(R){console.error(R),y(C=>({...C,loading:!1,error:(R==null?void 0:R.message)||e("billing.topUp.errors.loadFailed",{defaultValue:"Unable to load top-up options."})}))}},k=()=>{y({botId:null,loading:!1,options:null,selectedCode:null,checkoutLoading:!1,error:null})},T=async N=>{if(N.preventDefault(),!(!v.botId||!v.selectedCode)){y(R=>({...R,checkoutLoading:!0,error:null}));try{const{checkoutUrl:R}=await zR(v.botId,v.selectedCode);R?window.location.href=R:y(C=>({...C,checkoutLoading:!1,error:e("billing.topUp.errors.checkoutMissingUrl",{defaultValue:"Unable to start checkout for this top-up."})}))}catch(R){console.error(R),y(C=>({...C,checkoutLoading:!1,error:(R==null?void 0:R.message)||e("billing.topUp.errors.checkoutFailed",{defaultValue:"Top-up checkout failed. Please try again."})}))}}},L=(a==null?void 0:a.subscriptions.reduce((N,R)=>N+R.usedTokensThisPeriod,0))??0,F=(a==null?void 0:a.subscriptions.reduce((N,R)=>N+(R.monthlyTokens||0),0))??0,O=F>0,M=O?Math.min(100,Math.round(L/F*100)):null,P=uo(M),D=x(M),E={date:e("billing.paymentHistory.table.date"),bot:e("billing.paymentHistory.table.bot"),amount:e("billing.paymentHistory.table.amount"),status:e("billing.paymentHistory.table.status"),period:e("billing.paymentHistory.table.period"),actions:e("billing.paymentHistory.table.actions","Actions")};return s.jsxs("div",{className:"billing-page",children:[s.jsx("div",{className:"page-hero billing-hero",children:s.jsxs("div",{children:[s.jsx("p",{className:"page-hero-eyebrow",children:e("billing.title")}),s.jsx("h1",{className:"page-hero-title",children:e("billing.title")}),s.jsx("p",{className:"page-hero-subtitle",children:e("billing.subtitle")})]})}),l&&s.jsx("div",{className:"form-error",children:l}),d&&s.jsx("div",{className:"form-success",children:d}),r&&s.jsx("div",{className:"detail-main",style:{marginTop:"1rem"},children:s.jsx("p",{children:e("billing.loading")})}),!r&&a&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"app-card billing-summary-card",children:[s.jsxs("div",{className:"billing-summary-header",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"card-title",children:e("billing.activeSubscriptions")}),s.jsxs("p",{className:"muted",children:[e("billing.totalMonthlyAcrossAllBots")," ",s.jsx("strong",{children:a.totalMonthlyAmountFormatted})]})]}),s.jsxs("div",{className:"billing-summary-usage",children:[s.jsx("div",{className:"billing-summary-usage-top",children:P&&D&&s.jsx("span",{className:P,children:D})}),s.jsxs("div",{className:"billing-summary-usage-label",children:[e("billing.thisMonth")," ",s.jsxs("strong",{children:[fs(L).toLocaleString(n)," ",e("billing.tokens")]}),O&&s.jsxs(s.Fragment,{children:[" ",s.jsx("span",{className:"muted",children:e("billing.of")})," ",s.jsx("strong",{children:fs(F).toLocaleString(n)})]})]}),O&&M!=null&&s.jsx("div",{className:"billing-summary-usage-bar",children:s.jsx("div",{className:"usage-bar",children:s.jsx("div",{className:"usage-bar-fill",style:{width:`${M}%`}})})}),s.jsx("p",{className:"muted",style:{marginTop:"0.4rem",fontSize:"0.82rem"},children:e("billing.tokensHint",{defaultValue:"Tokens include OpenAI, knowledge, emails and WhatsApp templates."})})]})]}),a.subscriptions.length===0&&s.jsx("p",{className:"muted",style:{marginTop:"0.5rem"},children:e("billing.noActiveSubscriptions")}),a.subscriptions.length>0&&s.jsx("div",{className:"billing-subscriptions",children:a.subscriptions.map(N=>{const R=N.currency||"eur",C=N.usagePercent!=null?N.usagePercent:null,A=N.monthlyTokens!=null&&N.monthlyTokens>0,_=N.planAmountCents>0,B=!!N.cancelAtPeriodEnd,H=N.cancelAtPeriodEndDate??null,Z=N.emailUsagePercent!=null?N.emailUsagePercent:null,ie=N.monthlyEmails!=null&&N.monthlyEmails>0,U=N.whatsappUsagePercent!=null?N.whatsappUsagePercent:null,G=N.monthlyWhatsappLeads!=null&&N.monthlyWhatsappLeads>0;return s.jsxs("article",{className:"billing-subscription-card billing-subscription-card--compact",children:[s.jsxs("div",{className:"billing-subscription-header",children:[s.jsxs("div",{className:"billing-subscription-title-block",children:[s.jsx("h3",{className:"billing-subscription-title",children:N.botName}),s.jsxs("p",{className:"billing-subscription-subtitle",children:[e("billing.slugLabel"),":"," ",s.jsx("code",{children:N.botSlug})]})]}),s.jsxs("div",{className:"billing-subscription-right",children:[s.jsx("div",{className:BR(N.subscriptionStatus),children:b(N.subscriptionStatus)}),s.jsxs("div",{className:"billing-subscription-price",children:[N.totalMonthlyAmountFormatted,N.usagePlanName&&s.jsxs("span",{className:"billing-subscription-plan-label",children:["/",e("billing.perMonth")," "," ",N.usagePlanName]})]}),B&&s.jsxs("span",{className:"billing-subscription-plan-label",children:[e("billing.cancel.scheduled",{defaultValue:"Cancellation scheduled"}),H?" "+e("billing.cancel.until",{defaultValue:"until"})+" "+new Date(H).toLocaleDateString(n,{year:"numeric",month:"short",day:"numeric"}):""]}),_&&!B&&N.subscriptionStatus!=="CANCELED"&&s.jsx("button",{type:"button",className:"btn-danger btn-small",onClick:()=>j(N.botId),disabled:f===N.botId,children:f===N.botId?e("billing.cancel.processing",{defaultValue:"Canceling"}):e("billing.cancel.cta",{defaultValue:"Cancel subscription"})})]})]}),s.jsx("div",{className:"billing-subscription-meters",children:s.jsxs("div",{className:"billing-meter",children:[s.jsxs("div",{className:"billing-meter-top",children:[s.jsx("span",{className:"billing-meter-title",children:e("billing.tokens")}),A&&C!=null?s.jsx("span",{className:"billing-meter-meta",children:s.jsxs("span",{className:uo(C)??"status-badge",children:[C,"%"]})}):s.jsx("span",{className:"billing-meter-meta muted",children:e("billing.noConfiguredLimit")})]}),s.jsxs("div",{className:"billing-meter-value",children:[s.jsx("strong",{children:fs(N.usedTokensThisPeriod).toLocaleString(n)}),A?s.jsxs("span",{className:"muted",children:[" ","/"," ",fs(N.monthlyTokens??0).toLocaleString(n)]}):null]}),A&&C!=null&&s.jsx("div",{className:"usage-bar usage-bar--sm",children:s.jsx("div",{className:"usage-bar-fill",style:{width:`${C}%`}})})]})}),A&&_&&C!=null&&C>=90&&s.jsx("div",{className:"billing-topup-cta",children:s.jsx("button",{type:"button",onClick:()=>S(N.botId),children:e("billing.topUp.buttonLabel",{defaultValue:"Add extra tokens for this period"})})}),s.jsxs("details",{className:"billing-subscription-details",children:[s.jsx("summary",{className:"billing-subscription-details-summary",children:e("billing.details",{defaultValue:"Details"})}),s.jsxs("div",{className:"billing-subscription-details-body",children:[s.jsxs("div",{className:"billing-subscription-breakdown",children:[s.jsxs("span",{children:[e("billing.breakdown.features"),": ",s.jsx("strong",{children:Qm(N.featuresAmountCents,R,n)})]}),N.planAmountCents>0&&s.jsxs("span",{children:[e("billing.breakdown.plan"),": ",s.jsx("strong",{children:Qm(N.planAmountCents,R,n)})]})]}),s.jsxs("div",{className:"billing-subscription-usage-details",style:{marginTop:"0.75rem"},children:[s.jsx("h4",{className:"muted",style:{fontSize:"0.85rem",marginBottom:"0.35rem"},children:e("billing.usageThisPeriod",{defaultValue:"Usage this period"})}),s.jsxs("ul",{className:"billing-usage-list",children:[s.jsxs("li",{className:"billing-usage-row",children:[s.jsxs("div",{className:"billing-usage-row-header",children:[s.jsx("span",{className:"billing-usage-row-label",children:e("billing.tokens")}),C!=null&&s.jsx("span",{className:uo(C)??"status-badge",children:x(C)??`${C}%`})]}),s.jsxs("div",{className:"billing-usage-row-main",children:[s.jsx("span",{className:"billing-usage-row-value",children:fs(N.usedTokensThisPeriod).toLocaleString(n)}),A?s.jsxs("span",{className:"muted",children:[" ","/"," ",fs(N.monthlyTokens??0).toLocaleString(n)]}):s.jsxs("span",{className:"muted",children:[" ",e("billing.noConfiguredLimit")]})]}),A&&C!=null&&s.jsx("div",{className:"usage-bar usage-bar--xs",children:s.jsx("div",{className:"usage-bar-fill",style:{width:`${C}%`}})})]}),s.jsxs("li",{className:"billing-usage-row",children:[s.jsxs("div",{className:"billing-usage-row-header",children:[s.jsx("span",{className:"billing-usage-row-label",children:e("billing.emails",{defaultValue:"Emails"})}),Z!=null&&s.jsx("span",{className:uo(Z)??"status-badge",children:x(Z)??`${Z}%`})]}),s.jsxs("div",{className:"billing-usage-row-main",children:[s.jsx("span",{className:"billing-usage-row-value",children:N.usedEmailsThisPeriod.toLocaleString(n)}),ie?s.jsxs("span",{className:"muted",children:[" ","/"," ",(N.monthlyEmails??0).toLocaleString(n)]}):s.jsxs("span",{className:"muted",children:[" ",e("billing.noConfiguredLimit")]})]}),ie&&Z!=null&&s.jsx("div",{className:"usage-bar usage-bar--xs",children:s.jsx("div",{className:"usage-bar-fill",style:{width:`${Z}%`}})})]}),s.jsxs("li",{className:"billing-usage-row",children:[s.jsxs("div",{className:"billing-usage-row-header",children:[s.jsx("span",{className:"billing-usage-row-label",children:e("billing.whatsappLeads",{defaultValue:"WhatsApp leads"})}),U!=null&&s.jsx("span",{className:uo(U)??"status-badge",children:x(U)??`${U}%`})]}),s.jsxs("div",{className:"billing-usage-row-main",children:[s.jsx("span",{className:"billing-usage-row-value",children:N.usedWhatsappLeadsThisPeriod.toLocaleString(n)}),G?s.jsxs("span",{className:"muted",children:[" ","/"," ",(N.monthlyWhatsappLeads??0).toLocaleString(n)]}):s.jsxs("span",{className:"muted",children:[" ",e("billing.noConfiguredLimit")]})]}),G&&U!=null&&s.jsx("div",{className:"usage-bar usage-bar--xs",children:s.jsx("div",{className:"usage-bar-fill",style:{width:`${U}%`}})})]})]})]})]})]})]},N.botId)})})]}),s.jsxs("section",{className:"app-card billing-history-card",style:{marginTop:"1.5rem"},children:[s.jsx("h2",{className:"card-title",children:e("billing.paymentHistory.title")}),a.payments.length===0&&s.jsx("p",{className:"muted",style:{marginTop:"0.5rem"},children:e("billing.paymentHistory.empty")}),a.payments.length>0&&s.jsx("div",{className:"table-responsive payments-table-wrapper",children:s.jsxs("table",{className:"table payments-table",style:{marginTop:"0.75rem"},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:E.date}),s.jsx("th",{children:E.bot}),s.jsx("th",{children:E.amount}),s.jsx("th",{children:E.status}),s.jsx("th",{children:E.period}),s.jsx("th",{className:"payments-actions-header",children:E.actions})]})}),s.jsx("tbody",{children:a.payments.map(N=>s.jsxs("tr",{children:[s.jsx("td",{"data-label":E.date,children:new Date(N.createdAt).toLocaleDateString(n,{year:"numeric",month:"short",day:"numeric"})}),s.jsxs("td",{"data-label":E.bot,children:[N.botName,N.kind==="TOP_UP"&&s.jsxs("span",{className:"muted",children:[" ","(",e("billing.payments.topUpTag",{defaultValue:"top-up"}),")"]})]}),s.jsx("td",{"data-label":E.amount,children:Qm(N.amountCents,N.currency,n)}),s.jsx("td",{"data-label":E.status,children:N.status}),s.jsx("td",{"data-label":E.period,children:N.periodStart&&N.periodEnd?s.jsxs(s.Fragment,{children:[new Date(N.periodStart).toLocaleDateString(n)," ",""," ",new Date(N.periodEnd).toLocaleDateString(n)]}):s.jsx("span",{className:"muted",children:""})}),s.jsx("td",{className:"payments-actions-cell","data-label":E.actions,children:N.hasInvoice?s.jsxs("button",{type:"button",className:"icon-button",onClick:()=>w(N),disabled:p===N.id,"aria-label":p===N.id?e("billing.invoice.ariaOpening"):e("billing.invoice.ariaDownload"),title:p===N.id?e("billing.invoice.titleOpening"):e("billing.invoice.titleDownload"),children:[s.jsx("span",{className:"payments-actions-icon",children:p===N.id?"":""}),s.jsx("span",{className:"payments-actions-text",children:p===N.id?e("billing.invoice.labelOpening","Opening invoice"):e("billing.invoice.labelDownload","Download invoice")}),s.jsx("span",{className:"sr-only",children:p===N.id?e("billing.invoice.srOpening"):e("billing.invoice.srDownload")})]}):s.jsx("span",{className:"muted",children:""})})]},N.id))})]})})]})]}),v.botId&&s.jsx("div",{className:"modal-backdrop",children:s.jsxs("div",{className:"modal",role:"dialog","aria-modal":"true","aria-label":e("billing.topUp.title",{defaultValue:"Token top-up"}),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:e("billing.topUp.title",{defaultValue:"Token top-up"})}),s.jsx("button",{type:"button",onClick:k,children:""})]}),s.jsxs("div",{className:"modal-body",children:[v.loading&&s.jsx("p",{className:"muted",children:e("billing.topUp.loading",{defaultValue:"Loading available top-up options"})}),!v.loading&&v.options&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"muted",children:e("billing.topUp.description",{defaultValue:"Top-ups let you temporarily increase your token limit for the current billing period. Youll pay immediately and receive extra tokens right away."})}),s.jsxs("p",{children:[s.jsx("strong",{children:v.options.botName})," ",v.options.usagePlanName&&s.jsxs(s.Fragment,{children:[" ",v.options.usagePlanName]})]}),s.jsx("p",{className:"muted",children:e("billing.topUp.basePlanInfo",{defaultValue:"Current plan: {{price}} / month, {{tokens}} tokens",price:v.options.baseMonthlyAmountFormatted,tokens:v.options.baseMonthlyTokens?fs(v.options.baseMonthlyTokens):e("billing.unlimited")})}),s.jsxs("form",{onSubmit:T,children:[s.jsx("div",{className:"topup-options-list",children:v.options.options.map(N=>s.jsxs("label",{className:"topup-option-row",children:[s.jsx("input",{type:"radio",name:"topup-option",value:N.code,checked:v.selectedCode===N.code,onChange:()=>y(R=>({...R,selectedCode:N.code}))}),s.jsxs("div",{className:"topup-option-content",children:[s.jsx("div",{children:e("billing.topUp.optionLabel",{defaultValue:"+{{percent}}% tokens for {{price}}% of monthly price",percent:N.percentTokens,price:N.percentPrice})}),s.jsx("div",{className:"muted",children:e("billing.topUp.optionDetails",{defaultValue:"+{{tokens}} tokens for {{amount}}",tokens:fs(N.extraTokens),amount:N.priceFormatted})})]})]},N.code))}),v.error&&s.jsx("p",{className:"error-text",children:v.error}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{type:"button",onClick:k,children:e("common.cancel",{defaultValue:"Cancel"})}),s.jsx("button",{type:"submit",disabled:!v.selectedCode||v.checkoutLoading,children:v.checkoutLoading?e("billing.topUp.processing",{defaultValue:"Processing"}):e("billing.topUp.checkoutCta",{defaultValue:"Proceed to secure checkout"})})]})]})]}),!v.loading&&!v.options&&!v.error&&s.jsx("p",{className:"muted",children:e("billing.topUp.noOptions",{defaultValue:"No top-up options are available."})}),v.error&&!v.options&&s.jsx("p",{className:"error-text",children:v.error})]})]})})]})};async function UR(){return le("/account/me")}async function WR(e){return le("/account/profile",{method:"PUT",body:JSON.stringify(e)})}async function qR(e,t){return le("/account/change-password",{method:"POST",body:JSON.stringify({currentPassword:e,newPassword:t})})}async function HR(e){return le("/account",{method:"DELETE",body:JSON.stringify({password:e})})}async function KR(e){return le("/account",{method:"DELETE",body:JSON.stringify({googleIdToken:e})})}async function VR(){return le("/account/mfa/totp/start",{method:"POST"})}async function GR(e,t){return le("/account/mfa/totp/confirm",{method:"POST",body:JSON.stringify({setupToken:e,code:t})})}async function YR(e){return le("/account/mfa/totp/disable",{method:"POST",body:JSON.stringify(e)})}var QR=Object.defineProperty,Gd=Object.getOwnPropertySymbols,NP=Object.prototype.hasOwnProperty,CP=Object.prototype.propertyIsEnumerable,Mw=(e,t,n)=>t in e?QR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tf=(e,t)=>{for(var n in t||(t={}))NP.call(t,n)&&Mw(e,n,t[n]);if(Gd)for(var n of Gd(t))CP.call(t,n)&&Mw(e,n,t[n]);return e},If=(e,t)=>{var n={};for(var a in e)NP.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&Gd)for(var a of Gd(e))t.indexOf(a)<0&&CP.call(e,a)&&(n[a]=e[a]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ai;(e=>{const t=class Me{constructor(c,d,u,p){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<Me.MIN_VERSION||c>Me.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let h=[];for(let g=0;g<this.size;g++)h.push(!1);for(let g=0;g<this.size;g++)this.modules.push(h.slice()),this.isFunction.push(h.slice());this.drawFunctionPatterns();const f=this.addEccAndInterleave(u);if(this.drawCodewords(f),p==-1){let g=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const y=this.getPenaltyScore();y<g&&(p=v,g=y),this.applyMask(v)}}i(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(c,d){const u=e.QrSegment.makeSegments(c);return Me.encodeSegments(u,d)}static encodeBinary(c,d){const u=e.QrSegment.makeBytes(c);return Me.encodeSegments([u],d)}static encodeSegments(c,d,u=1,p=40,h=-1,f=!0){if(!(Me.MIN_VERSION<=u&&u<=p&&p<=Me.MAX_VERSION)||h<-1||h>7)throw new RangeError("Invalid value");let g,v;for(g=u;;g++){const w=Me.getNumDataCodewords(g,d)*8,j=o.getTotalBits(c,g);if(j<=w){v=j;break}if(g>=p)throw new RangeError("Data too long")}for(const w of[Me.Ecc.MEDIUM,Me.Ecc.QUARTILE,Me.Ecc.HIGH])f&&v<=Me.getNumDataCodewords(g,w)*8&&(d=w);let y=[];for(const w of c){n(w.mode.modeBits,4,y),n(w.numChars,w.mode.numCharCountBits(g),y);for(const j of w.getData())y.push(j)}i(y.length==v);const b=Me.getNumDataCodewords(g,d)*8;i(y.length<=b),n(0,Math.min(4,b-y.length),y),n(0,(8-y.length%8)%8,y),i(y.length%8==0);for(let w=236;y.length<b;w^=253)n(w,8,y);let x=[];for(;x.length*8<y.length;)x.push(0);return y.forEach((w,j)=>x[j>>>3]|=w<<7-(j&7)),new Me(g,d,x,h)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let u=0;u<d;u++)for(let p=0;p<d;p++)u==0&&p==0||u==0&&p==d-1||u==d-1&&p==0||this.drawAlignmentPattern(c[u],c[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let u=d;for(let h=0;h<10;h++)u=u<<1^(u>>>9)*1335;const p=(d<<10|u)^21522;i(p>>>15==0);for(let h=0;h<=5;h++)this.setFunctionModule(8,h,a(p,h));this.setFunctionModule(8,7,a(p,6)),this.setFunctionModule(8,8,a(p,7)),this.setFunctionModule(7,8,a(p,8));for(let h=9;h<15;h++)this.setFunctionModule(14-h,8,a(p,h));for(let h=0;h<8;h++)this.setFunctionModule(this.size-1-h,8,a(p,h));for(let h=8;h<15;h++)this.setFunctionModule(8,this.size-15+h,a(p,h));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let u=0;u<12;u++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;i(d>>>18==0);for(let u=0;u<18;u++){const p=a(d,u),h=this.size-11+u%3,f=Math.floor(u/3);this.setFunctionModule(h,f,p),this.setFunctionModule(f,h,p)}}drawFinderPattern(c,d){for(let u=-4;u<=4;u++)for(let p=-4;p<=4;p++){const h=Math.max(Math.abs(p),Math.abs(u)),f=c+p,g=d+u;0<=f&&f<this.size&&0<=g&&g<this.size&&this.setFunctionModule(f,g,h!=2&&h!=4)}}drawAlignmentPattern(c,d){for(let u=-2;u<=2;u++)for(let p=-2;p<=2;p++)this.setFunctionModule(c+p,d+u,Math.max(Math.abs(p),Math.abs(u))!=1)}setFunctionModule(c,d,u){this.modules[d][c]=u,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,u=this.errorCorrectionLevel;if(c.length!=Me.getNumDataCodewords(d,u))throw new RangeError("Invalid argument");const p=Me.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d],h=Me.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d],f=Math.floor(Me.getNumRawDataModules(d)/8),g=p-f%p,v=Math.floor(f/p);let y=[];const b=Me.reedSolomonComputeDivisor(h);for(let w=0,j=0;w<p;w++){let S=c.slice(j,j+v-h+(w<g?0:1));j+=S.length;const k=Me.reedSolomonComputeRemainder(S,b);w<g&&S.push(0),y.push(S.concat(k))}let x=[];for(let w=0;w<y[0].length;w++)y.forEach((j,S)=>{(w!=v-h||S>=g)&&x.push(j[w])});return i(x.length==f),x}drawCodewords(c){if(c.length!=Math.floor(Me.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let p=0;p<this.size;p++)for(let h=0;h<2;h++){const f=u-h,v=(u+1&2)==0?this.size-1-p:p;!this.isFunction[v][f]&&d<c.length*8&&(this.modules[v][f]=a(c[d>>>3],7-(d&7)),d++)}}i(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let u=0;u<this.size;u++){let p;switch(c){case 0:p=(u+d)%2==0;break;case 1:p=d%2==0;break;case 2:p=u%3==0;break;case 3:p=(u+d)%3==0;break;case 4:p=(Math.floor(u/3)+Math.floor(d/2))%2==0;break;case 5:p=u*d%2+u*d%3==0;break;case 6:p=(u*d%2+u*d%3)%2==0;break;case 7:p=((u+d)%2+u*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][u]&&p&&(this.modules[d][u]=!this.modules[d][u])}}getPenaltyScore(){let c=0;for(let h=0;h<this.size;h++){let f=!1,g=0,v=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[h][y]==f?(g++,g==5?c+=Me.PENALTY_N1:g>5&&c++):(this.finderPenaltyAddHistory(g,v),f||(c+=this.finderPenaltyCountPatterns(v)*Me.PENALTY_N3),f=this.modules[h][y],g=1);c+=this.finderPenaltyTerminateAndCount(f,g,v)*Me.PENALTY_N3}for(let h=0;h<this.size;h++){let f=!1,g=0,v=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[y][h]==f?(g++,g==5?c+=Me.PENALTY_N1:g>5&&c++):(this.finderPenaltyAddHistory(g,v),f||(c+=this.finderPenaltyCountPatterns(v)*Me.PENALTY_N3),f=this.modules[y][h],g=1);c+=this.finderPenaltyTerminateAndCount(f,g,v)*Me.PENALTY_N3}for(let h=0;h<this.size-1;h++)for(let f=0;f<this.size-1;f++){const g=this.modules[h][f];g==this.modules[h][f+1]&&g==this.modules[h+1][f]&&g==this.modules[h+1][f+1]&&(c+=Me.PENALTY_N2)}let d=0;for(const h of this.modules)d=h.reduce((f,g)=>f+(g?1:0),d);const u=this.size*this.size,p=Math.ceil(Math.abs(d*20-u*10)/u)-1;return i(0<=p&&p<=9),c+=p*Me.PENALTY_N4,i(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let u=[6];for(let p=this.size-7;u.length<c;p-=d)u.splice(1,0,p);return u}}static getNumRawDataModules(c){if(c<Me.MIN_VERSION||c>Me.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const u=Math.floor(c/7)+2;d-=(25*u-10)*u-55,c>=7&&(d-=36)}return i(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(Me.getNumRawDataModules(c)/8)-Me.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*Me.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let p=0;p<c-1;p++)d.push(0);d.push(1);let u=1;for(let p=0;p<c;p++){for(let h=0;h<d.length;h++)d[h]=Me.reedSolomonMultiply(d[h],u),h+1<d.length&&(d[h]^=d[h+1]);u=Me.reedSolomonMultiply(u,2)}return d}static reedSolomonComputeRemainder(c,d){let u=d.map(p=>0);for(const p of c){const h=p^u.shift();u.push(0),d.forEach((f,g)=>u[g]^=Me.reedSolomonMultiply(f,h))}return u}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let u=0;for(let p=7;p>=0;p--)u=u<<1^(u>>>7)*285,u^=(d>>>p&1)*c;return i(u>>>8==0),u}finderPenaltyCountPatterns(c){const d=c[1];i(d<=this.size*3);const u=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(u&&c[0]>=d*4&&c[6]>=d?1:0)+(u&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,u){return c&&(this.finderPenaltyAddHistory(d,u),d=0),d+=this.size,this.finderPenaltyAddHistory(d,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let u=c-1;u>=0;u--)d.push(l>>>u&1)}function a(l,c){return(l>>>c&1)!=0}function i(l){if(!l)throw new Error("Assertion error")}const r=class dt{constructor(c,d,u){if(this.mode=c,this.numChars=d,this.bitData=u,d<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(c){let d=[];for(const u of c)n(u,8,d);return new dt(dt.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!dt.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let u=0;u<c.length;){const p=Math.min(c.length-u,3);n(parseInt(c.substring(u,u+p),10),p*3+1,d),u+=p}return new dt(dt.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!dt.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],u;for(u=0;u+2<=c.length;u+=2){let p=dt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u))*45;p+=dt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u+1)),n(p,11,d)}return u<c.length&&n(dt.ALPHANUMERIC_CHARSET.indexOf(c.charAt(u)),6,d),new dt(dt.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:dt.isNumeric(c)?[dt.makeNumeric(c)]:dt.isAlphanumeric(c)?[dt.makeAlphanumeric(c)]:[dt.makeBytes(dt.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,d);else if(c<16384)n(2,2,d),n(c,14,d);else if(c<1e6)n(6,3,d),n(c,21,d);else throw new RangeError("ECI assignment value out of range");return new dt(dt.Mode.ECI,0,d)}static isNumeric(c){return dt.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return dt.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let u=0;for(const p of c){const h=p.mode.numCharCountBits(d);if(p.numChars>=1<<h)return 1/0;u+=4+h+p.bitData.length}return u}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let u=0;u<c.length;u++)c.charAt(u)!="%"?d.push(c.charCodeAt(u)):(d.push(parseInt(c.substring(u+1,u+3),16)),u+=2);return d}};r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=r;e.QrSegment=r})(Ai||(Ai={}));(e=>{(t=>{const n=class{constructor(i,r){this.ordinal=i,this.formatBits=r}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(Ai||(Ai={}));(e=>{(t=>{const n=class{constructor(i,r){this.modeBits=i,this.numBitsCharCount=r}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(Ai||(Ai={}));var rr=Ai;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var ZR={L:rr.QrCode.Ecc.LOW,M:rr.QrCode.Ecc.MEDIUM,Q:rr.QrCode.Ecc.QUARTILE,H:rr.QrCode.Ecc.HIGH},kP=128,PP="L",AP="#FFFFFF",EP="#000000",TP=!1,IP=1,XR=4,JR=0,e_=.1;function OP(e,t=0){const n=[];return e.forEach(function(a,i){let r=null;a.forEach(function(o,l){if(!o&&r!==null){n.push(`M${r+t} ${i+t}h${l-r}v1H${r+t}z`),r=null;return}if(l===a.length-1){if(!o)return;r===null?n.push(`M${l+t},${i+t} h1v1H${l+t}z`):n.push(`M${r+t},${i+t} h${l+1-r}v1H${r+t}z`);return}o&&r===null&&(r=l)})}),n.join("")}function LP(e,t){return e.slice().map((n,a)=>a<t.y||a>=t.y+t.h?n:n.map((i,r)=>r<t.x||r>=t.x+t.w?i:!1))}function t_(e,t,n,a){if(a==null)return null;const i=e.length+n*2,r=Math.floor(t*e_),o=i/t,l=(a.width||r)*o,c=(a.height||r)*o,d=a.x==null?e.length/2-l/2:a.x*o,u=a.y==null?e.length/2-c/2:a.y*o,p=a.opacity==null?1:a.opacity;let h=null;if(a.excavate){let g=Math.floor(d),v=Math.floor(u),y=Math.ceil(l+d-g),b=Math.ceil(c+u-v);h={x:g,y:v,w:y,h:b}}const f=a.crossOrigin;return{x:d,y:u,h:c,w:l,excavation:h,opacity:p,crossOrigin:f}}function n_(e,t){return t!=null?Math.max(Math.floor(t),0):e?XR:JR}function MP({value:e,level:t,minVersion:n,includeMargin:a,marginSize:i,imageSettings:r,size:o,boostLevel:l}){let c=ft.useMemo(()=>{const g=(Array.isArray(e)?e:[e]).reduce((v,y)=>(v.push(...rr.QrSegment.makeSegments(y)),v),[]);return rr.QrCode.encodeSegments(g,ZR[t],n,void 0,void 0,l)},[e,t,n,l]);const{cells:d,margin:u,numCells:p,calculatedImageSettings:h}=ft.useMemo(()=>{let f=c.getModules();const g=n_(a,i),v=f.length+g*2,y=t_(f,o,g,r);return{cells:f,margin:g,numCells:v,calculatedImageSettings:y}},[c,o,r,a,i]);return{qrcode:c,margin:u,cells:d,numCells:p,calculatedImageSettings:h}}var a_=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),s_=ft.forwardRef(function(t,n){const a=t,{value:i,size:r=kP,level:o=PP,bgColor:l=AP,fgColor:c=EP,includeMargin:d=TP,minVersion:u=IP,boostLevel:p,marginSize:h,imageSettings:f}=a,v=If(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:y}=v,b=If(v,["style"]),x=f==null?void 0:f.src,w=ft.useRef(null),j=ft.useRef(null),S=ft.useCallback(E=>{w.current=E,typeof n=="function"?n(E):n&&(n.current=E)},[n]),[k,T]=ft.useState(!1),{margin:L,cells:F,numCells:O,calculatedImageSettings:M}=MP({value:i,level:o,minVersion:u,boostLevel:p,includeMargin:d,marginSize:h,imageSettings:f,size:r});ft.useEffect(()=>{if(w.current!=null){const E=w.current,N=E.getContext("2d");if(!N)return;let R=F;const C=j.current,A=M!=null&&C!==null&&C.complete&&C.naturalHeight!==0&&C.naturalWidth!==0;A&&M.excavation!=null&&(R=LP(F,M.excavation));const _=window.devicePixelRatio||1;E.height=E.width=r*_;const B=r/O*_;N.scale(B,B),N.fillStyle=l,N.fillRect(0,0,O,O),N.fillStyle=c,a_?N.fill(new Path2D(OP(R,L))):F.forEach(function(H,Z){H.forEach(function(ie,U){ie&&N.fillRect(U+L,Z+L,1,1)})}),M&&(N.globalAlpha=M.opacity),A&&N.drawImage(C,M.x+L,M.y+L,M.w,M.h)}}),ft.useEffect(()=>{T(!1)},[x]);const P=Tf({height:r,width:r},y);let D=null;return x!=null&&(D=ft.createElement("img",{src:x,key:x,style:{display:"none"},onLoad:()=>{T(!0)},ref:j,crossOrigin:M==null?void 0:M.crossOrigin})),ft.createElement(ft.Fragment,null,ft.createElement("canvas",Tf({style:P,height:r,width:r,ref:S,role:"img"},b)),D)});s_.displayName="QRCodeCanvas";var DP=ft.forwardRef(function(t,n){const a=t,{value:i,size:r=kP,level:o=PP,bgColor:l=AP,fgColor:c=EP,includeMargin:d=TP,minVersion:u=IP,boostLevel:p,title:h,marginSize:f,imageSettings:g}=a,v=If(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:y,cells:b,numCells:x,calculatedImageSettings:w}=MP({value:i,level:o,minVersion:u,boostLevel:p,includeMargin:d,marginSize:f,imageSettings:g,size:r});let j=b,S=null;g!=null&&w!=null&&(w.excavation!=null&&(j=LP(b,w.excavation)),S=ft.createElement("image",{href:g.src,height:w.h,width:w.w,x:w.x+y,y:w.y+y,preserveAspectRatio:"none",opacity:w.opacity,crossOrigin:w.crossOrigin}));const k=OP(j,y);return ft.createElement("svg",Tf({height:r,width:r,viewBox:`0 0 ${x} ${x}`,ref:n,role:"img"},v),!!h&&ft.createElement("title",null,h),ft.createElement("path",{fill:l,d:`M0,0 h${x}v${x}H0z`,shapeRendering:"crispEdges"}),ft.createElement("path",{fill:c,d:k,shapeRendering:"crispEdges"}),S)});DP.displayName="QRCodeSVG";async function i_(e,t){return le("/team/invites",{method:"POST",body:JSON.stringify({email:e,botIds:t})})}async function r_(){return le("/team/members")}async function o_(e){return le(`/team/invites/${encodeURIComponent(e)}`,{method:"DELETE"})}async function l_(e){return le(`/team/members/${encodeURIComponent(e)}`,{method:"DELETE"})}async function c_(e,t){return le(`/team/members/${encodeURIComponent(e)}`,{method:"PUT",body:JSON.stringify({botIds:t})})}const d_=()=>{const{t:e}=Le(),{user:t}=os(),[n,a]=m.useState(null),[i,r]=m.useState(!0),[o,l]=m.useState(!1),[c,d]=m.useState(!1),[u,p]=m.useState(null),[h,f]=m.useState(null),[g,v]=m.useState(null),[y,b]=m.useState(""),[x,w]=m.useState(""),[j,S]=m.useState(""),[k,T]=m.useState(""),[L,F]=m.useState(""),[O,M]=m.useState(!1),[P,D]=m.useState(null),[E,N]=m.useState(null),[R,C]=m.useState(null),[A,_]=m.useState(null),[B,H]=m.useState(null),[Z,ie]=m.useState(""),[U,G]=m.useState([]),[V,$]=m.useState(!1),[q,z]=m.useState(""),[ee,J]=m.useState(""),[X,ne]=m.useState([]),[ue,fe]=m.useState([]),[we,Ae]=m.useState([]),[Q,be]=m.useState(!1),[Oe,Ie]=m.useState(null),[We,ze]=m.useState(null),[ke,qe]=m.useState(""),[Ee,I]=m.useState(new Set),[Y,W]=m.useState(!1),[ae,pe]=m.useState(null),[Te,he]=m.useState(new Set),[_e,Wt]=m.useState(null),se=Bt(),[K,oe]=m.useState(""),[Ce,$e]=m.useState(!1),Se=m.useRef(null),Ne=()=>{p(null),f(null),v(null),D(null),N(null)},mt=()=>window.confirm(e("profile.confirmDelete"));m.useEffect(()=>{let re=!1;return r(!0),p(null),UR().then(me=>{re||(a(me),b(me.name||""),w(me.avatarUrl||""))}).catch(me=>{console.error(me),re||p((me==null?void 0:me.message)||e("profile.errors.loadFailed"))}).finally(()=>{re||r(!1)}),()=>{re=!0}},[e]),m.useEffect(()=>{var me;if(!n||n.authProvider!=="google")return;const re="568984409972-ql252sre4kumaja8kc4d8j4m7fmrdb6a.apps.googleusercontent.com";if(!window.google||!((me=window.google.accounts)!=null&&me.id)){console.warn("Google Identity Services script not available.");return}Se.current&&(window.google.accounts.id.initialize({client_id:re,callback:async Ue=>{const My=Ue.credential;if(!(!My||!mt())){$e(!0),Ne();try{const Jr=await KR(My);kr(),se("/login",{replace:!0})}catch(Jr){console.error(Jr),p((Jr==null?void 0:Jr.message)||e("profile.errors.deleteFailed"))}finally{$e(!1)}}}}),window.google.accounts.id.renderButton(Se.current,{theme:"outline",size:"large",text:"continue_with"}))},[n,se,e]);const Nt=async()=>{if(!(!t||t.role==="TEAM_MEMBER")){be(!0),Ie(null);try{const[re,me]=await Promise.all([cp(),r_()]);ne(re||[]),fe(me.members||[]),Ae(me.invites||[])}catch(re){console.error(re),Ie((re==null?void 0:re.message)||e("profile.team.errors.loadFailed"))}finally{be(!1)}}};m.useEffect(()=>{!t||t.role==="TEAM_MEMBER"||Nt()},[t==null?void 0:t.role]);const rc=async re=>{if(re.preventDefault(),!(!n||!K||!mt())){$e(!0),Ne();try{const Ue=await HR(K);kr(),se("/login",{replace:!0})}catch(Ue){console.error(Ue),p((Ue==null?void 0:Ue.message)||e("profile.errors.deleteFailed"))}finally{$e(!1)}}},oc=async re=>{if(re.preventDefault(),!!n){l(!0),Ne();try{const me=await WR({name:y.trim()||void 0,avatarUrl:x.trim()||void 0});a(me),f(e("profile.profile.success"))}catch(me){console.error(me),p((me==null?void 0:me.message)||e("profile.errors.updateProfileFailed"))}finally{l(!1)}}},wO=async re=>{if(re.preventDefault(),!(!n||!n.hasPassword)){if(k!==L){p(e("profile.password.errors.mismatch"));return}d(!0),Ne();try{const me=await qR(j,k);v(me.message||e("profile.password.success")),S(""),T(""),F("")}catch(me){console.error(me),p((me==null?void 0:me.message)||e("profile.errors.changePasswordFailed"))}finally{d(!1)}}},jO=async()=>{if(n){D(null),N(null),p(null),f(null),v(null),M(!0);try{const re=await VR();C(re.setupToken),_(re.otpauthUrl),H(re.secret),ie(""),G([])}catch(re){console.error(re),D((re==null?void 0:re.message)||e("profile.mfa.errors.startFailed"))}finally{M(!1)}}},SO=async re=>{if(re.preventDefault(),!!R){D(null),N(null),p(null),f(null),v(null),M(!0);try{const me=await GR(R,Z.trim());G(me.backupCodes||[]),C(null),_(null),H(null),ie(""),$(!1),a(Ue=>Ue&&{...Ue,mfaEnabled:me.mfaEnabled}),N(e("profile.mfa.success.enabledSaveBackupCodes"))}catch(me){console.error(me),D((me==null?void 0:me.message)||e("profile.mfa.errors.confirmFailed"))}finally{M(!1)}}},NO=async re=>{if(re.preventDefault(),!!n){if(!q&&!ee){D(e("profile.mfa.errors.disableRequiresCode"));return}M(!0),D(null),N(null),p(null),f(null),v(null);try{const me=await YR({code:q.trim()||void 0,backupCode:ee.trim()||void 0});a(Ue=>Ue&&{...Ue,mfaEnabled:me.mfaEnabled}),$(!1),z(""),J(""),G([]),C(null),_(null),H(null),N(me.message||e("profile.mfa.success.disabled"))}catch(me){console.error(me),D((me==null?void 0:me.message)||e("profile.mfa.errors.disableFailed"))}finally{M(!1)}}},CO=async()=>{if(U.length)try{await navigator.clipboard.writeText(U.join(`
`)),N(e("profile.mfa.success.backupCodesCopied"))}catch{D(e("profile.mfa.errors.backupCodesCopyFailed"))}},kO=re=>{I(me=>{const Ue=new Set(me);return Ue.has(re)?Ue.delete(re):Ue.add(re),Ue})},PO=async re=>{if(re.preventDefault(),!ke.trim()){Ie(e("profile.team.errors.emailRequired"));return}if(Ee.size===0){Ie(e("profile.team.errors.botsRequired"));return}W(!0),Ie(null),ze(null);try{await i_(ke.trim(),Array.from(Ee)),qe(""),I(new Set),ze(e("profile.team.success.inviteSent")),await Nt()}catch(me){console.error(me),Ie((me==null?void 0:me.message)||e("profile.team.errors.inviteFailed"))}finally{W(!1)}},AO=async re=>{Ie(null),ze(null);try{await o_(re),ze(e("profile.team.success.inviteRevoked")),await Nt()}catch(me){console.error(me),Ie((me==null?void 0:me.message)||e("profile.team.errors.revokeFailed"))}},EO=async re=>{if(window.confirm(e("profile.team.members.confirmRemove"))){Ie(null),ze(null);try{await l_(re),ze(e("profile.team.success.memberRevoked")),await Nt()}catch(Ue){console.error(Ue),Ie((Ue==null?void 0:Ue.message)||e("profile.team.errors.revokeFailed"))}}},TO=re=>{pe(re.userId),he(new Set(re.bots.map(me=>me.id))),Ie(null),ze(null)},IO=()=>{pe(null),he(new Set)},OO=re=>{he(me=>{const Ue=new Set(me);return Ue.has(re)?Ue.delete(re):Ue.add(re),Ue})},LO=async re=>{if(Te.size===0){Ie(e("profile.team.errors.botsRequired"));return}Wt(re),Ie(null),ze(null);try{await c_(re,Array.from(Te)),ze(e("profile.team.success.memberUpdated")),pe(null),he(new Set),await Nt()}catch(me){console.error(me),Ie((me==null?void 0:me.message)||e("profile.team.errors.updateFailed"))}finally{Wt(null)}},MO=y.trim()?y.trim().split(/\s+/).slice(0,2).map(re=>re[0]).join("").toUpperCase():n!=null&&n.email?n.email[0].toUpperCase():"?",DO=n?n.authProvider==="google"?e("profile.security.loginMethod.google"):n.hasPassword?e("profile.security.loginMethod.emailPassword"):e("profile.security.loginMethod.unknown"):e("profile.security.loginMethod.unknown");return s.jsxs("div",{className:"profile-page",children:[s.jsx("div",{className:"page-hero profile-hero",children:s.jsxs("div",{children:[s.jsx("p",{className:"page-hero-eyebrow",children:e("profile.pageTitle")}),s.jsx("h1",{className:"page-hero-title",children:e("profile.pageTitle")}),s.jsx("p",{className:"page-hero-subtitle",children:e("profile.pageSubtitle")})]})}),u&&s.jsx("div",{className:"form-error",children:u}),h&&s.jsx("div",{className:"form-success",children:h}),g&&s.jsx("div",{className:"form-success",children:g}),E&&s.jsx("div",{className:"form-success",children:E}),i&&s.jsx("div",{className:"detail-main",style:{marginTop:"1rem"},children:s.jsx("p",{children:e("profile.loading")})}),!i&&n&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"app-card profile-card",style:{marginTop:"1rem"},children:[s.jsxs("div",{className:"profile-header-row",children:[s.jsx("div",{className:"profile-avatar",children:x?s.jsx("img",{src:x,alt:e("profile.profile.avatarAlt")}):s.jsx("span",{className:"profile-avatar-initials",children:MO})}),s.jsxs("div",{children:[s.jsx("h2",{className:"profile-card-title",children:e("profile.profile.title")}),s.jsx("p",{className:"muted",style:{marginTop:"0.25rem"},children:e("profile.profile.subtitle")})]})]}),s.jsxs("form",{className:"form",onSubmit:oc,children:[s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("profile.profile.displayName.label")}),s.jsx("input",{type:"text",value:y,onChange:re=>b(re.target.value),placeholder:e("profile.profile.displayName.placeholder")})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("profile.profile.avatarUrl.label")}),s.jsx("input",{type:"url",value:x,onChange:re=>w(re.target.value),placeholder:e("profile.profile.avatarUrl.placeholder")}),s.jsx("span",{children:e("profile.profile.avatarUrl.help")})]}),s.jsx("div",{children:s.jsx("button",{className:"btn-primary",type:"submit",disabled:o,children:e(o?"profile.profile.actions.saving":"profile.profile.actions.save")})})]})]}),s.jsxs("section",{className:"app-card security-card",style:{marginTop:"1.5rem"},children:[s.jsx("h2",{className:"card-title",children:e("profile.security.title")}),s.jsxs("div",{style:{marginTop:"0.7rem"},children:[s.jsxs("p",{className:"muted",children:[s.jsxs("strong",{children:[e("profile.security.emailLabel"),":"]})," ",n.email]}),s.jsxs("p",{className:"muted",children:[s.jsxs("strong",{children:[e("profile.security.loginMethodLabel"),":"]})," ",DO]})]}),n.hasPassword?s.jsxs("form",{className:"form",style:{marginTop:"1rem"},onSubmit:wO,children:[s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("profile.password.current.label")}),s.jsx("input",{type:"password",value:j,onChange:re=>S(re.target.value)})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("profile.password.new.label")}),s.jsx("input",{type:"password",value:k,onChange:re=>T(re.target.value)}),s.jsx("span",{children:e("profile.password.new.help")})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("profile.password.confirm.label")}),s.jsx("input",{type:"password",value:L,onChange:re=>F(re.target.value)})]}),s.jsx("div",{children:s.jsx("button",{className:"btn-secondary",type:"submit",disabled:c,children:e(c?"profile.password.actions.updating":"profile.password.actions.change")})})]}):s.jsxs("p",{className:"muted",style:{marginTop:"1rem"},children:[e("profile.security.googleOnlyNoteStrongPrefix")," ",s.jsx("strong",{children:e("profile.security.googleSignInStrong")}),"."," ",e("profile.security.googleOnlyNoteSuffix")]})]}),s.jsxs("section",{className:"app-card mfa-card",style:{marginTop:"1.5rem"},children:[s.jsx("h2",{className:"card-title",children:e("profile.mfa.title")}),s.jsx("p",{className:"muted",style:{marginTop:"0.5rem"},children:e("profile.mfa.subtitle")}),P&&s.jsx("div",{className:"form-error",style:{marginTop:"0.75rem"},children:P}),s.jsx("div",{style:{marginTop:"1rem"},children:s.jsxs("p",{className:"muted",children:[s.jsxs("strong",{children:[e("profile.mfa.statusLabel"),":"]})," ",n.mfaEnabled?s.jsx("span",{className:"badge badge-success",children:e("profile.mfa.status.enabled")}):s.jsx("span",{className:"badge badge-muted",children:e("profile.mfa.status.disabled")})]})}),!n.mfaEnabled&&!R&&s.jsxs("div",{style:{marginTop:"1rem"},children:[s.jsx("p",{className:"muted",children:e("profile.mfa.recommendation")}),s.jsx("button",{className:"btn-secondary",type:"button",disabled:O,onClick:jO,children:e(O?"profile.mfa.actions.preparing":"profile.mfa.actions.enable")})]}),!n.mfaEnabled&&R&&s.jsxs("div",{className:"mfa-setup-grid",style:{marginTop:"1.25rem",display:"grid",gap:"1.25rem"},children:[s.jsxs("div",{children:[s.jsx("h3",{style:{marginTop:0},children:e("profile.mfa.setup.step1Title")}),s.jsx("p",{className:"muted",children:e("profile.mfa.setup.step1Body")}),s.jsx("div",{style:{marginTop:"0.75rem",padding:"0.75rem",borderRadius:"0.75rem",border:"1px solid var(--border-subtle)",display:"inline-block",background:"var(--bg-subtle)"},children:A&&s.jsx(DP,{value:A,width:160,height:160})}),B&&s.jsxs("div",{style:{marginTop:"0.75rem"},children:[s.jsx("p",{className:"muted",style:{marginBottom:"0.25rem"},children:e("profile.mfa.setup.manualSecretLabel")}),s.jsx("code",{style:{display:"inline-block",padding:"0.25rem 0.5rem",borderRadius:"0.5rem",background:"var(--bg-subtle)"},children:B})]})]}),s.jsxs("div",{children:[s.jsx("h3",{style:{marginTop:0},children:e("profile.mfa.setup.step2Title")}),s.jsx("p",{className:"muted",children:e("profile.mfa.setup.step2Body")}),s.jsxs("form",{className:"form",style:{marginTop:"0.75rem"},onSubmit:SO,children:[s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("profile.mfa.setup.codeLabel")}),s.jsx("input",{type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:6,value:Z,onChange:re=>ie(re.target.value),required:!0})]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{className:"btn-primary",type:"submit",disabled:O,children:e(O?"profile.mfa.actions.verifying":"profile.mfa.actions.confirmEnable")}),s.jsx("button",{type:"button",className:"btn-ghost",disabled:O,onClick:()=>{C(null),_(null),H(null),ie(""),G([])},children:e("profile.common.cancel")})]})]})]})]}),n.mfaEnabled&&s.jsxs("div",{style:{marginTop:"1.25rem"},children:[s.jsx("p",{className:"muted",children:e("profile.mfa.enabledNote")}),U.length>0&&s.jsxs("div",{className:"mfa-backup-codes",style:{marginTop:"1rem",padding:"1rem",borderRadius:"0.75rem",border:"1px dashed var(--border-subtle)",background:"var(--bg-subtle)"},children:[s.jsx("h3",{style:{marginTop:0},children:e("profile.mfa.backupCodes.title")}),s.jsx("p",{className:"muted",children:e("profile.mfa.backupCodes.body")}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.4rem",marginTop:"0.75rem"},children:U.map(re=>s.jsx("code",{style:{display:"inline-block",padding:"0.35rem 0.5rem",borderRadius:"0.5rem",textAlign:"center",background:"var(--bg-elevated)"},children:re},re))}),s.jsx("button",{type:"button",className:"btn-secondary",style:{marginTop:"0.75rem"},onClick:CO,children:e("profile.mfa.backupCodes.copyAll")})]}),s.jsx("div",{className:"mfa-disable",style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid var(--border-subtle)"},children:V?s.jsxs("form",{className:"form",style:{marginTop:"0.75rem"},onSubmit:NO,children:[s.jsx("p",{className:"muted",children:e("profile.mfa.disable.confirmBody")}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("profile.mfa.disable.codeLabel")}),s.jsx("input",{type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:6,value:q,onChange:re=>z(re.target.value)})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("profile.mfa.disable.backupCodeLabel")}),s.jsx("input",{type:"text",value:ee,onChange:re=>J(re.target.value)})]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{className:"btn-danger",type:"submit",disabled:O,children:e(O?"profile.mfa.actions.disabling":"profile.mfa.disable.confirm")}),s.jsx("button",{type:"button",className:"btn-ghost",disabled:O,onClick:()=>{$(!1),z(""),J("")},children:e("profile.common.cancel")})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"muted",children:e("profile.mfa.disable.intro")}),s.jsx("button",{type:"button",className:"btn-danger",onClick:()=>{$(!0),z(""),J(""),D(null),N(null)},children:e("profile.mfa.disable.open")})]})})]})]}),(t==null?void 0:t.role)!=="TEAM_MEMBER"&&s.jsxs("section",{className:"app-card team-card",style:{marginTop:"1.5rem"},children:[s.jsx("h2",{className:"card-title",children:e("profile.team.title")}),s.jsx("p",{className:"muted",style:{marginTop:"0.5rem"},children:e("profile.team.subtitle")}),Oe&&s.jsx("div",{className:"form-error",style:{marginTop:"0.75rem"},children:Oe}),We&&s.jsx("div",{className:"form-success",style:{marginTop:"0.75rem"},children:We}),s.jsxs("form",{className:"form",style:{marginTop:"1rem"},onSubmit:PO,children:[s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("profile.team.invite.emailLabel")}),s.jsx("input",{type:"email",value:ke,onChange:re=>qe(re.target.value),placeholder:e("profile.team.invite.emailPlaceholder")})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("profile.team.invite.botLabel")}),s.jsxs("div",{className:"team-bot-picker",children:[X.length===0&&s.jsx("p",{className:"muted",children:e("profile.team.invite.noBots")}),X.map(re=>s.jsxs("label",{className:"team-bot-option",children:[s.jsx("input",{type:"checkbox",checked:Ee.has(re.id),onChange:()=>kO(re.id)}),s.jsx("span",{children:re.name})]},re.id))]})]}),s.jsx("div",{children:s.jsx("button",{className:"btn-primary",type:"submit",disabled:Y,children:e(Y?"profile.team.invite.sending":"profile.team.invite.send")})})]}),s.jsx("div",{className:"team-section-divider"}),s.jsxs("div",{className:"team-table-block",children:[s.jsx("h3",{children:e("profile.team.members.title")}),Q?s.jsx("p",{className:"muted",children:e("profile.team.loading")}):ue.length===0?s.jsx("p",{className:"muted",children:e("profile.team.members.empty")}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table team-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:e("profile.team.members.columns.member")}),s.jsx("th",{children:e("profile.team.members.columns.bots")}),s.jsx("th",{children:e("profile.team.members.columns.lastLogin")}),s.jsx("th",{children:e("profile.team.members.columns.actions")})]})}),s.jsx("tbody",{children:ue.map(re=>s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("div",{className:"team-member-name",children:re.name||re.email}),s.jsx("div",{className:"muted",children:re.email})]}),s.jsx("td",{children:ae===re.userId?s.jsx("div",{className:"team-bot-picker",children:X.map(me=>s.jsxs("label",{className:"team-bot-option",children:[s.jsx("input",{type:"checkbox",checked:Te.has(me.id),onChange:()=>OO(me.id)}),s.jsx("span",{children:me.name})]},me.id))}):s.jsx("div",{className:"team-bot-tags",children:re.bots.map(me=>s.jsx("span",{className:"team-bot-tag",children:me.name},me.id))})}),s.jsx("td",{children:re.lastLoginAt?new Date(re.lastLoginAt).toLocaleString():e("profile.team.members.never")}),s.jsx("td",{children:ae===re.userId?s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{type:"button",className:"btn-primary btn-small",onClick:()=>LO(re.userId),disabled:_e===re.userId,children:_e===re.userId?e("profile.team.members.saving"):e("profile.team.members.save")}),s.jsx("button",{type:"button",className:"btn-ghost btn-small",onClick:IO,disabled:_e===re.userId,children:e("profile.team.members.cancel")})]}):s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{type:"button",className:"btn-secondary btn-small",onClick:()=>TO(re),children:e("profile.team.members.editMember")}),s.jsx("button",{type:"button",className:"btn-danger btn-small",onClick:()=>EO(re.userId),children:e("profile.team.members.remove")})]})})]},re.userId))})]})})]}),s.jsxs("div",{className:"team-table-block",children:[s.jsx("h3",{children:e("profile.team.invites.title")}),Q?s.jsx("p",{className:"muted",children:e("profile.team.loading")}):we.length===0?s.jsx("p",{className:"muted",children:e("profile.team.invites.empty")}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table team-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:e("profile.team.invites.columns.email")}),s.jsx("th",{children:e("profile.team.invites.columns.bots")}),s.jsx("th",{children:e("profile.team.invites.columns.sent")}),s.jsx("th",{children:e("profile.team.invites.columns.actions")})]})}),s.jsx("tbody",{children:we.map(re=>s.jsxs("tr",{children:[s.jsx("td",{children:re.email}),s.jsx("td",{children:s.jsx("div",{className:"team-bot-tags",children:re.bots.map(me=>s.jsx("span",{className:"team-bot-tag",children:me.name},me.id))})}),s.jsx("td",{children:new Date(re.createdAt).toLocaleDateString()}),s.jsx("td",{children:s.jsx("button",{type:"button",className:"btn-ghost btn-small",onClick:()=>AO(re.id),children:e("profile.team.invites.revoke")})})]},re.id))})]})})]})]}),s.jsxs("section",{className:"app-card danger-card",style:{marginTop:"1.5rem"},children:[s.jsx("h2",{className:"card-title",children:e("profile.danger.title")}),s.jsx("p",{className:"muted",style:{marginTop:"0.5rem"},children:e("profile.danger.subtitle")}),n.hasPassword?s.jsxs("form",{className:"form",style:{marginTop:"1rem"},onSubmit:rc,children:[s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:e("profile.danger.passwordConfirm.label")}),s.jsx("input",{type:"password",value:K,onChange:re=>oe(re.target.value)}),s.jsx("span",{children:e("profile.danger.passwordConfirm.help")})]}),s.jsx("div",{children:s.jsx("button",{className:"btn-danger",type:"submit",disabled:Ce||!K,children:e(Ce?"profile.danger.actions.deleting":"profile.danger.actions.delete")})})]}):n.authProvider==="google"?s.jsxs("div",{style:{marginTop:"1rem"},children:[s.jsx("p",{className:"muted",children:e("profile.danger.googleNote")}),s.jsx("div",{style:{marginTop:"0.8rem"},children:s.jsx("div",{ref:Se})}),Ce&&s.jsx("p",{className:"muted",style:{marginTop:"0.5rem"},children:e("profile.danger.actions.deletingInline")})]}):s.jsx("div",{className:"alert-warning",style:{marginTop:"1rem"},children:e("profile.danger.unsupported")})]})]})]})};function FP(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=FP(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Ve(){for(var e,t,n=0,a="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=FP(e))&&(a&&(a+=" "),a+=t);return a}var u_=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function qv(e){if(typeof e!="string")return!1;var t=u_;return t.includes(e)}var p_=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],m_=new Set(p_);function zP(e){return typeof e!="string"?!1:m_.has(e)}function RP(e){return typeof e=="string"&&e.startsWith("data-")}function ha(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(zP(n)||RP(n))&&(t[n]=e[n]);return t}function Dl(e){if(e==null)return null;if(m.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return ha(t)}return typeof e=="object"&&!Array.isArray(e)?ha(e):null}function dn(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(zP(n)||RP(n)||qv(n))&&(t[n]=e[n]);return t}function h_(e){return e==null?null:m.isValidElement(e)?dn(e.props):typeof e=="object"&&!Array.isArray(e)?dn(e):null}var f_=["children","width","height","viewBox","className","style","title","desc"];function Of(){return Of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Of.apply(null,arguments)}function g_(e,t){if(e==null)return{};var n,a,i=v_(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function v_(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Hv=m.forwardRef((e,t)=>{var{children:n,width:a,height:i,viewBox:r,className:o,style:l,title:c,desc:d}=e,u=g_(e,f_),p=r||{width:a,height:i,x:0,y:0},h=Ve("recharts-surface",o);return m.createElement("svg",Of({},dn(u),{className:h,width:a,height:i,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),m.createElement("title",null,c),m.createElement("desc",null,d),n)}),b_=["children","className"];function Lf(){return Lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lf.apply(null,arguments)}function y_(e,t){if(e==null)return{};var n,a,i=x_(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function x_(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Qn=m.forwardRef((e,t)=>{var{children:n,className:a}=e,i=y_(e,b_),r=Ve("recharts-layer",a);return m.createElement("g",Lf({className:r},dn(i),{ref:t}),n)}),_P=m.createContext(null),w_=()=>m.useContext(_P);function Qe(e){return function(){return e}}const BP=Math.cos,Yd=Math.sin,ba=Math.sqrt,Qd=Math.PI,dp=2*Qd,Mf=Math.PI,Df=2*Mf,ai=1e-6,j_=Df-ai;function $P(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function S_(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return $P;const n=10**t;return function(a){this._+=a[0];for(let i=1,r=a.length;i<r;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}class N_{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?$P:S_(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,i){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+i}`}bezierCurveTo(t,n,a,i,r,o){this._append`C${+t},${+n},${+a},${+i},${this._x1=+r},${this._y1=+o}`}arcTo(t,n,a,i,r){if(t=+t,n=+n,a=+a,i=+i,r=+r,r<0)throw new Error(`negative radius: ${r}`);let o=this._x1,l=this._y1,c=a-t,d=i-n,u=o-t,p=l-n,h=u*u+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>ai)if(!(Math.abs(p*c-d*u)>ai)||!r)this._append`L${this._x1=t},${this._y1=n}`;else{let f=a-o,g=i-l,v=c*c+d*d,y=f*f+g*g,b=Math.sqrt(v),x=Math.sqrt(h),w=r*Math.tan((Mf-Math.acos((v+h-y)/(2*b*x)))/2),j=w/x,S=w/b;Math.abs(j-1)>ai&&this._append`L${t+j*u},${n+j*p}`,this._append`A${r},${r},0,0,${+(p*f>u*g)},${this._x1=t+S*c},${this._y1=n+S*d}`}}arc(t,n,a,i,r,o){if(t=+t,n=+n,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(i),c=a*Math.sin(i),d=t+l,u=n+c,p=1^o,h=o?i-r:r-i;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>ai||Math.abs(this._y1-u)>ai)&&this._append`L${d},${u}`,a&&(h<0&&(h=h%Df+Df),h>j_?this._append`A${a},${a},0,1,${p},${t-l},${n-c}A${a},${a},0,1,${p},${this._x1=d},${this._y1=u}`:h>ai&&this._append`A${a},${a},0,${+(h>=Mf)},${p},${this._x1=t+a*Math.cos(r)},${this._y1=n+a*Math.sin(r)}`)}rect(t,n,a,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+i}h${-a}Z`}toString(){return this._}}function Kv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new N_(t)}function Vv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UP(e){this._context=e}UP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function up(e){return new UP(e)}function WP(e){return e[0]}function qP(e){return e[1]}function HP(e,t){var n=Qe(!0),a=null,i=up,r=null,o=Kv(l);e=typeof e=="function"?e:e===void 0?WP:Qe(e),t=typeof t=="function"?t:t===void 0?qP:Qe(t);function l(c){var d,u=(c=Vv(c)).length,p,h=!1,f;for(a==null&&(r=i(f=o())),d=0;d<=u;++d)!(d<u&&n(p=c[d],d,c))===h&&((h=!h)?r.lineStart():r.lineEnd()),h&&r.point(+e(p,d,c),+t(p,d,c));if(f)return r=null,f+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Qe(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Qe(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Qe(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,a!=null&&(r=i(a)),l):i},l.context=function(c){return arguments.length?(c==null?a=r=null:r=i(a=c),l):a},l}function Tc(e,t,n){var a=null,i=Qe(!0),r=null,o=up,l=null,c=Kv(d);e=typeof e=="function"?e:e===void 0?WP:Qe(+e),t=typeof t=="function"?t:Qe(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?qP:Qe(+n);function d(p){var h,f,g,v=(p=Vv(p)).length,y,b=!1,x,w=new Array(v),j=new Array(v);for(r==null&&(l=o(x=c())),h=0;h<=v;++h){if(!(h<v&&i(y=p[h],h,p))===b)if(b=!b)f=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=f;--g)l.point(w[g],j[g]);l.lineEnd(),l.areaEnd()}b&&(w[h]=+e(y,h,p),j[h]=+t(y,h,p),l.point(a?+a(y,h,p):w[h],n?+n(y,h,p):j[h]))}if(x)return l=null,x+""||null}function u(){return HP().defined(i).curve(o).context(r)}return d.x=function(p){return arguments.length?(e=typeof p=="function"?p:Qe(+p),a=null,d):e},d.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Qe(+p),d):e},d.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:Qe(+p),d):a},d.y=function(p){return arguments.length?(t=typeof p=="function"?p:Qe(+p),n=null,d):t},d.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Qe(+p),d):t},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Qe(+p),d):n},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(n)},d.lineX1=function(){return u().x(a).y(t)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Qe(!!p),d):i},d.curve=function(p){return arguments.length?(o=p,r!=null&&(l=o(r)),d):o},d.context=function(p){return arguments.length?(p==null?r=l=null:l=o(r=p),d):r},d}class KP{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function C_(e){return new KP(e,!0)}function k_(e){return new KP(e,!1)}const Gv={draw(e,t){const n=ba(t/Qd);e.moveTo(n,0),e.arc(0,0,n,0,dp)}},P_={draw(e,t){const n=ba(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},VP=ba(1/3),A_=VP*2,E_={draw(e,t){const n=ba(t/A_),a=n*VP;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},T_={draw(e,t){const n=ba(t),a=-n/2;e.rect(a,a,n,n)}},I_=.8908130915292852,GP=Yd(Qd/10)/Yd(7*Qd/10),O_=Yd(dp/10)*GP,L_=-BP(dp/10)*GP,M_={draw(e,t){const n=ba(t*I_),a=O_*n,i=L_*n;e.moveTo(0,-n),e.lineTo(a,i);for(let r=1;r<5;++r){const o=dp*r/5,l=BP(o),c=Yd(o);e.lineTo(c*n,-l*n),e.lineTo(l*a-c*i,c*a+l*i)}e.closePath()}},Zm=ba(3),D_={draw(e,t){const n=-ba(t/(Zm*3));e.moveTo(0,n*2),e.lineTo(-Zm*n,-n),e.lineTo(Zm*n,-n),e.closePath()}},_n=-.5,Bn=ba(3)/2,Ff=1/ba(12),F_=(Ff/2+1)*3,z_={draw(e,t){const n=ba(t/F_),a=n/2,i=n*Ff,r=a,o=n*Ff+n,l=-r,c=o;e.moveTo(a,i),e.lineTo(r,o),e.lineTo(l,c),e.lineTo(_n*a-Bn*i,Bn*a+_n*i),e.lineTo(_n*r-Bn*o,Bn*r+_n*o),e.lineTo(_n*l-Bn*c,Bn*l+_n*c),e.lineTo(_n*a+Bn*i,_n*i-Bn*a),e.lineTo(_n*r+Bn*o,_n*o-Bn*r),e.lineTo(_n*l+Bn*c,_n*c-Bn*l),e.closePath()}};function R_(e,t){let n=null,a=Kv(i);e=typeof e=="function"?e:Qe(e||Gv),t=typeof t=="function"?t:Qe(t===void 0?64:+t);function i(){let r;if(n||(n=r=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return i.type=function(r){return arguments.length?(e=typeof r=="function"?r:Qe(r),i):e},i.size=function(r){return arguments.length?(t=typeof r=="function"?r:Qe(+r),i):t},i.context=function(r){return arguments.length?(n=r??null,i):n},i}function Zd(){}function Xd(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function YP(e){this._context=e}YP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function __(e){return new YP(e)}function QP(e){this._context=e}QP.prototype={areaStart:Zd,areaEnd:Zd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Xd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function B_(e){return new QP(e)}function ZP(e){this._context=e}ZP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Xd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $_(e){return new ZP(e)}function XP(e){this._context=e}XP.prototype={areaStart:Zd,areaEnd:Zd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function U_(e){return new XP(e)}function Dw(e){return e<0?-1:1}function Fw(e,t,n){var a=e._x1-e._x0,i=t-e._x1,r=(e._y1-e._y0)/(a||i<0&&-0),o=(n-e._y1)/(i||a<0&&-0),l=(r*i+o*a)/(a+i);return(Dw(r)+Dw(o))*Math.min(Math.abs(r),Math.abs(o),.5*Math.abs(l))||0}function zw(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Xm(e,t,n){var a=e._x0,i=e._y0,r=e._x1,o=e._y1,l=(r-a)/3;e._context.bezierCurveTo(a+l,i+l*t,r-l,o-l*n,r,o)}function Jd(e){this._context=e}Jd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Xm(this,this._t0,zw(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Xm(this,zw(this,n=Fw(this,e,t)),n);break;default:Xm(this,this._t0,n=Fw(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function JP(e){this._context=new eA(e)}(JP.prototype=Object.create(Jd.prototype)).point=function(e,t){Jd.prototype.point.call(this,t,e)};function eA(e){this._context=e}eA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,i,r){this._context.bezierCurveTo(t,e,a,n,r,i)}};function W_(e){return new Jd(e)}function q_(e){return new JP(e)}function tA(e){this._context=e}tA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=Rw(e),i=Rw(t),r=0,o=1;o<n;++r,++o)this._context.bezierCurveTo(a[0][r],i[0][r],a[1][r],i[1][r],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Rw(e){var t,n=e.length-1,a,i=new Array(n),r=new Array(n),o=new Array(n);for(i[0]=0,r[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,r[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,r[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=i[t]/r[t-1],r[t]-=a,o[t]-=a*o[t-1];for(i[n-1]=o[n-1]/r[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/r[t];for(r[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)r[t]=2*e[t+1]-i[t+1];return[i,r]}function H_(e){return new tA(e)}function pp(e,t){this._context=e,this._t=t}pp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function K_(e){return new pp(e,.5)}function V_(e){return new pp(e,0)}function G_(e){return new pp(e,1)}function Pr(e,t){if((o=e.length)>1)for(var n=1,a,i,r=e[t[0]],o,l=r.length;n<o;++n)for(i=r,r=e[t[n]],a=0;a<l;++a)r[a][1]+=r[a][0]=isNaN(i[a][1])?i[a][0]:i[a][1]}function zf(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Y_(e,t){return e[t]}function Q_(e){const t=[];return t.key=e,t}function Z_(){var e=Qe([]),t=zf,n=Pr,a=Y_;function i(r){var o=Array.from(e.apply(this,arguments),Q_),l,c=o.length,d=-1,u;for(const p of r)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(p,o[l].key,d,r)]).data=p;for(l=0,u=Vv(t(o));l<c;++l)o[u[l]].index=l;return n(o,u),o}return i.keys=function(r){return arguments.length?(e=typeof r=="function"?r:Qe(Array.from(r)),i):e},i.value=function(r){return arguments.length?(a=typeof r=="function"?r:Qe(+r),i):a},i.order=function(r){return arguments.length?(t=r==null?zf:typeof r=="function"?r:Qe(Array.from(r)),i):t},i.offset=function(r){return arguments.length?(n=r??Pr,i):n},i}function X_(e,t){if((a=e.length)>0){for(var n,a,i=0,r=e[0].length,o;i<r;++i){for(o=n=0;n<a;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<a;++n)e[n][i][1]/=o}Pr(e,t)}}function J_(e,t){if((i=e.length)>0){for(var n=0,a=e[t[0]],i,r=a.length;n<r;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;a[n][1]+=a[n][0]=-l/2}Pr(e,t)}}function e2(e,t){if(!(!((o=e.length)>0)||!((r=(i=e[t[0]]).length)>0))){for(var n=0,a=1,i,r,o;a<r;++a){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],p=u[a][1]||0,h=u[a-1][1]||0,f=(p-h)/2,g=0;g<l;++g){var v=e[t[g]],y=v[a][1]||0,b=v[a-1][1]||0;f+=y-b}c+=p,d+=f*p}i[a-1][1]+=i[a-1][0]=n,c&&(n-=d/c)}i[a-1][1]+=i[a-1][0]=n,Pr(e,t)}}var mp={},nA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(nA);var Yv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Yv);var hp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var a;return typeof n=="string"||typeof n=="symbol"?n:Object.is((a=n==null?void 0:n.valueOf)==null?void 0:a.call(n),-0)?"-0":String(n)}e.toKey=t})(hp);var fp={},aA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const a=String(n);return a==="0"&&Object.is(Number(n),-0)?"-0":a}e.toString=t})(aA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aA,n=hp;function a(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const r=[],o=i.length;if(o===0)return r;let l=0,c="",d="",u=!1;for(i.charCodeAt(0)===46&&(r.push(""),l++);l<o;){const p=i[l];d?p==="\\"&&l+1<o?(l++,c+=i[l]):p===d?d="":c+=p:u?p==='"'||p==="'"?d=p:p==="]"?(u=!1,r.push(c),c=""):c+=p:p==="["?(u=!0,c&&(r.push(c),c="")):p==="."?c&&(r.push(c),c=""):c+=p,l++}return c&&r.push(c),r}e.toPath=a})(fp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nA,n=Yv,a=hp,i=fp;function r(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?n.isDeepKey(c)?r(l,i.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=a.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let p=0;p<c.length;p++){if(u==null||t.isUnsafeProperty(c[p]))return d;u=u[c[p]]}return u===void 0?d:u}e.get=r})(mp);var t2=mp.get;const Ar=Ia(t2);var xn=e=>e===0?0:e>0?1:-1,fa=e=>typeof e=="number"&&e!=+e,Xa=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ye=e=>(typeof e=="number"||e instanceof Number)&&!fa(e),Aa=e=>ye(e)||typeof e=="string",n2=0,ul=e=>{var t=++n2;return"".concat(e||"").concat(t)},ga=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ye(t)&&typeof t!="string")return a;var r;if(Xa(t)){if(n==null)return a;var o=t.indexOf("%");r=n*parseFloat(t.slice(0,o))/100}else r=+t;return fa(r)&&(r=a),i&&n!=null&&r>n&&(r=n),r},sA=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1};function pt(e,t,n){return ye(e)&&ye(t)?e+n*(t-e):t}function iA(e,t,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):Ar(a,t))===n)}var st=e=>e===null||typeof e>"u",Fl=e=>st(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function a2(e){return e!=null}function zl(){}var s2=["type","size","sizeType"];function Rf(){return Rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rf.apply(null,arguments)}function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Bw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_w(Object(n),!0).forEach(function(a){i2(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function i2(e,t,n){return(t=r2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r2(e){var t=o2(e,"string");return typeof t=="symbol"?t:t+""}function o2(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l2(e,t){if(e==null)return{};var n,a,i=c2(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c2(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var rA={symbolCircle:Gv,symbolCross:P_,symbolDiamond:E_,symbolSquare:T_,symbolStar:M_,symbolTriangle:D_,symbolWye:z_},d2=Math.PI/180,u2=e=>{var t="symbol".concat(Fl(e));return rA[t]||Gv},p2=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*d2;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},m2=(e,t)=>{rA["symbol".concat(Fl(e))]=t},Qv=e=>{var{type:t="circle",size:n=64,sizeType:a="area"}=e,i=l2(e,s2),r=Bw(Bw({},i),{},{type:t,size:n,sizeType:a}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var h=u2(o),f=R_().type(h).size(p2(n,a,o)),g=f();if(g!==null)return g},{className:c,cx:d,cy:u}=r,p=dn(r);return ye(d)&&ye(u)&&ye(n)?m.createElement("path",Rf({},p,{className:Ve("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:l()})):null};Qv.registerSymbol=m2;var oA=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Zv=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(m.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(i=>{qv(i)&&(a[i]=r=>n[i](n,r))}),a},h2=(e,t,n)=>a=>(e(t,n,a),null),gp=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(i=>{var r=e[i];qv(i)&&typeof r=="function"&&(a||(a={}),a[i]=h2(r,t,n))}),a};function $w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function f2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$w(Object(n),!0).forEach(function(a){g2(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$w(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function g2(e,t,n){return(t=v2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v2(e){var t=b2(e,"string");return typeof t=="symbol"?t:t+""}function b2(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yt(e,t){var n=f2({},e),a=t,i=Object.keys(t),r=i.reduce((o,l)=>(o[l]===void 0&&a[l]!==void 0&&(o[l]=a[l]),o),n);return r}function eu(){return eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},eu.apply(null,arguments)}function Uw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function y2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uw(Object(n),!0).forEach(function(a){x2(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function x2(e,t,n){return(t=w2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w2(e){var t=j2(e,"string");return typeof t=="symbol"?t:t+""}function j2(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Un=32,S2={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function N2(e){var{data:t,iconType:n,inactiveColor:a}=e,i=Un/2,r=Un/6,o=Un/3,l=t.inactive?a:t.color,c=n??t.type;if(c==="none")return null;if(c==="plainline"){var d;return m.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:i,x2:Un,y2:i,className:"recharts-legend-icon"})}if(c==="line")return m.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(r,",").concat(r,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Un,"M").concat(2*o,",").concat(i,`
            A`).concat(r,",").concat(r,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return m.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Un/8,"h").concat(Un,"v").concat(Un*3/4,"h").concat(-Un,"z"),className:"recharts-legend-icon"});if(m.isValidElement(t.legendIcon)){var u=y2({},t);return delete u.legendIcon,m.cloneElement(t.legendIcon,u)}return m.createElement(Qv,{fill:l,cx:i,cy:i,size:Un,sizeType:"diameter",type:c})}function C2(e){var{payload:t,iconSize:n,layout:a,formatter:i,inactiveColor:r,iconType:o}=e,l={x:0,y:0,width:Un,height:Un},c={display:a==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,p)=>{var h=u.formatter||i,f=Ve({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:u.inactive});if(u.type==="none")return null;var g=u.inactive?r:u.color,v=h?h(u.value,u,p):u.value;return m.createElement("li",eu({className:f,style:c,key:"legend-item-".concat(p)},gp(e,u,p)),m.createElement(Hv,{width:n,height:n,viewBox:l,style:d,"aria-label":"".concat(v," legend icon")},m.createElement(N2,{data:u,iconType:o,inactiveColor:r})),m.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},v))})}var k2=e=>{var t=Yt(e,S2),{payload:n,layout:a,align:i}=t;if(!n||!n.length)return null;var r={padding:0,margin:0,textAlign:a==="horizontal"?i:"left"};return m.createElement("ul",{className:"recharts-default-legend",style:r},m.createElement(C2,eu({},t,{payload:n})))},lA={},cA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){const i=new Map;for(let r=0;r<n.length;r++){const o=n[r],l=a(o);i.has(l)||i.set(l,o)}return Array.from(i.values())}e.uniqBy=t})(cA);var Xv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Xv);var dA={},vp={},uA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(uA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uA;function n(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=n})(vp);var pA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(pA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vp,n=pA;function a(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=a})(dA);var mA={},hA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mp;function n(a){return function(i){return t.get(i,a)}}e.property=n})(hA);var fA={},Jv={},gA={},eb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(eb);var tb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(tb);var nb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.eq=t})(nb);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eb,n=tb,a=nb;function i(u,p,h){return typeof h!="function"?i(u,p,()=>{}):r(u,p,function f(g,v,y,b,x,w){const j=h(g,v,y,b,x,w);return j!==void 0?!!j:r(g,v,f,w)},new Map)}function r(u,p,h,f){if(p===u)return!0;switch(typeof p){case"object":return o(u,p,h,f);case"function":return Object.keys(p).length>0?r(u,{...p},h,f):a.eq(u,p);default:return t.isObject(u)?typeof p=="string"?p==="":!0:a.eq(u,p)}}function o(u,p,h,f){if(p==null)return!0;if(Array.isArray(p))return c(u,p,h,f);if(p instanceof Map)return l(u,p,h,f);if(p instanceof Set)return d(u,p,h,f);const g=Object.keys(p);if(u==null)return g.length===0;if(g.length===0)return!0;if(f!=null&&f.has(p))return f.get(p)===u;f==null||f.set(p,u);try{for(let v=0;v<g.length;v++){const y=g[v];if(!n.isPrimitive(u)&&!(y in u)||p[y]===void 0&&u[y]!==void 0||p[y]===null&&u[y]!==null||!h(u[y],p[y],y,u,p,f))return!1}return!0}finally{f==null||f.delete(p)}}function l(u,p,h,f){if(p.size===0)return!0;if(!(u instanceof Map))return!1;for(const[g,v]of p.entries()){const y=u.get(g);if(h(y,v,g,u,p,f)===!1)return!1}return!0}function c(u,p,h,f){if(p.length===0)return!0;if(!Array.isArray(u))return!1;const g=new Set;for(let v=0;v<p.length;v++){const y=p[v];let b=!1;for(let x=0;x<u.length;x++){if(g.has(x))continue;const w=u[x];let j=!1;if(h(w,y,v,u,p,f)&&(j=!0),j){g.add(x),b=!0;break}}if(!b)return!1}return!0}function d(u,p,h,f){return p.size===0?!0:u instanceof Set?c([...u],[...p],h,f):!1}e.isMatchWith=i,e.isSetMatch=d})(gA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gA;function n(a,i){return t.isMatchWith(a,i,()=>{})}e.isMatch=n})(Jv);var vA={},ab={},bA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=t})(bA);var sb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(sb);var ib={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",a="[object Number]",i="[object Boolean]",r="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",p="[object Function]",h="[object ArrayBuffer]",f="[object Object]",g="[object Error]",v="[object DataView]",y="[object Uint8Array]",b="[object Uint8ClampedArray]",x="[object Uint16Array]",w="[object Uint32Array]",j="[object BigUint64Array]",S="[object Int8Array]",k="[object Int16Array]",T="[object Int32Array]",L="[object BigInt64Array]",F="[object Float32Array]",O="[object Float64Array]";e.argumentsTag=r,e.arrayBufferTag=h,e.arrayTag=u,e.bigInt64ArrayTag=L,e.bigUint64ArrayTag=j,e.booleanTag=i,e.dataViewTag=v,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=F,e.float64ArrayTag=O,e.functionTag=p,e.int16ArrayTag=k,e.int32ArrayTag=T,e.int8ArrayTag=S,e.mapTag=c,e.numberTag=a,e.objectTag=f,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=x,e.uint32ArrayTag=w,e.uint8ArrayTag=y,e.uint8ClampedArrayTag=b})(ib);var yA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(yA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bA,n=sb,a=ib,i=tb,r=yA;function o(u,p){return l(u,void 0,u,new Map,p)}function l(u,p,h,f=new Map,g=void 0){const v=g==null?void 0:g(u,p,h,f);if(v!==void 0)return v;if(i.isPrimitive(u))return u;if(f.has(u))return f.get(u);if(Array.isArray(u)){const y=new Array(u.length);f.set(u,y);for(let b=0;b<u.length;b++)y[b]=l(u[b],b,h,f,g);return Object.hasOwn(u,"index")&&(y.index=u.index),Object.hasOwn(u,"input")&&(y.input=u.input),y}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const y=new RegExp(u.source,u.flags);return y.lastIndex=u.lastIndex,y}if(u instanceof Map){const y=new Map;f.set(u,y);for(const[b,x]of u)y.set(b,l(x,b,h,f,g));return y}if(u instanceof Set){const y=new Set;f.set(u,y);for(const b of u)y.add(l(b,void 0,h,f,g));return y}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(r.isTypedArray(u)){const y=new(Object.getPrototypeOf(u)).constructor(u.length);f.set(u,y);for(let b=0;b<u.length;b++)y[b]=l(u[b],b,h,f,g);return y}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const y=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return f.set(u,y),c(y,u,h,f,g),y}if(typeof File<"u"&&u instanceof File){const y=new File([u],u.name,{type:u.type});return f.set(u,y),c(y,u,h,f,g),y}if(typeof Blob<"u"&&u instanceof Blob){const y=new Blob([u],{type:u.type});return f.set(u,y),c(y,u,h,f,g),y}if(u instanceof Error){const y=new u.constructor;return f.set(u,y),y.message=u.message,y.name=u.name,y.stack=u.stack,y.cause=u.cause,c(y,u,h,f,g),y}if(u instanceof Boolean){const y=new Boolean(u.valueOf());return f.set(u,y),c(y,u,h,f,g),y}if(u instanceof Number){const y=new Number(u.valueOf());return f.set(u,y),c(y,u,h,f,g),y}if(u instanceof String){const y=new String(u.valueOf());return f.set(u,y),c(y,u,h,f,g),y}if(typeof u=="object"&&d(u)){const y=Object.create(Object.getPrototypeOf(u));return f.set(u,y),c(y,u,h,f,g),y}return u}function c(u,p,h=u,f,g){const v=[...Object.keys(p),...t.getSymbols(p)];for(let y=0;y<v.length;y++){const b=v[y],x=Object.getOwnPropertyDescriptor(u,b);(x==null||x.writable)&&(u[b]=l(p[b],b,h,f,g))}}function d(u){switch(n.getTag(u)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(ab);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ab;function n(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n})(vA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jv,n=vA;function a(i){return i=n.cloneDeep(i),r=>t.isMatch(r,i)}e.matches=a})(fA);var xA={},wA={},jA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ab,n=ib;function a(i,r){return t.cloneDeepWith(i,(o,l,c,d)=>{const u=r==null?void 0:r(o,l,c,d);if(u!==void 0)return u;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(p,i),p}case n.argumentsTag:{const p={};return t.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}e.cloneDeepWith=a})(jA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jA;function n(a){return t.cloneDeepWith(a)}e.cloneDeep=n})(wA);var SA={},rb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(a,i=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<i;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=n})(rb);var NA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sb;function n(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=n})(NA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yv,n=rb,a=NA,i=fp;function r(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=i.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const p=c[u];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||a.isArguments(d))&&n.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}e.has=r})(SA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jv,n=hp,a=wA,i=mp,r=SA;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=a.cloneDeep(c),function(d){const u=i.get(d,l);return u===void 0?r.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o})(xA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xv,n=hA,a=fA,i=xA;function r(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):a.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=r})(mA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cA,n=Xv,a=dA,i=mA;function r(o,l=n.identity){return a.isArrayLikeObject(o)?t.uniqBy(Array.from(o),i.iteratee(l)):[]}e.uniqBy=r})(lA);var P2=lA.uniqBy;const Ww=Ia(P2);function CA(e,t,n){return t===!0?Ww(e,n):typeof t=="function"?Ww(e,t):e}var kA={exports:{}},PA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp=m,A2=Yk;function E2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var T2=typeof Object.is=="function"?Object.is:E2,I2=A2.useSyncExternalStore,O2=bp.useRef,L2=bp.useEffect,M2=bp.useMemo,D2=bp.useDebugValue;PA.useSyncExternalStoreWithSelector=function(e,t,n,a,i){var r=O2(null);if(r.current===null){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=M2(function(){function c(f){if(!d){if(d=!0,u=f,f=a(f),i!==void 0&&o.hasValue){var g=o.value;if(i(g,f))return p=g}return p=f}if(g=p,T2(u,f))return g;var v=a(f);return i!==void 0&&i(g,v)?(u=f,g):(u=f,p=v)}var d=!1,u,p,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,a,i]);var l=I2(e,r[0],r[1]);return L2(function(){o.hasValue=!0,o.value=l},[l]),D2(l),l};kA.exports=PA;var F2=kA.exports,ob=m.createContext(null),z2=e=>e,ct=()=>{var e=m.useContext(ob);return e?e.store.dispatch:z2},pd=()=>{},R2=()=>pd,_2=(e,t)=>e===t;function xe(e){var t=m.useContext(ob);return F2.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:R2,t?t.store.getState:pd,t?t.store.getState:pd,t?e:pd,_2)}function B2(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function $2(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function U2(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${n}]`)}}var qw=e=>Array.isArray(e)?e:[e];function W2(e){const t=Array.isArray(e[0])?e[0]:e;return U2(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function q2(e,t){const n=[],{length:a}=e;for(let i=0;i<a;i++)n.push(e[i].apply(null,t));return n}var H2=class{constructor(e){this.value=e}deref(){return this.value}},K2=typeof WeakRef<"u"?WeakRef:H2,V2=0,Hw=1;function Ic(){return{s:V2,v:void 0,o:null,p:null}}function AA(e,t={}){let n=Ic();const{resultEqualityCheck:a}=t;let i,r=0;function o(){var p;let l=n;const{length:c}=arguments;for(let h=0,f=c;h<f;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const y=v.get(g);y===void 0?(l=Ic(),v.set(g,l)):l=y}else{let v=l.p;v===null&&(l.p=v=new Map);const y=v.get(g);y===void 0?(l=Ic(),v.set(g,l)):l=y}}const d=l;let u;if(l.s===Hw)u=l.v;else if(u=e.apply(null,arguments),r++,a){const h=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;h!=null&&a(h,u)&&(u=h,r!==0&&r--),i=typeof u=="object"&&u!==null||typeof u=="function"?new K2(u):u}return d.s=Hw,d.v=u,u}return o.clearCache=()=>{n=Ic(),o.resetResultsCount()},o.resultsCount=()=>r,o.resetResultsCount=()=>{r=0},o}function G2(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...i)=>{let r=0,o=0,l,c={},d=i.pop();typeof d=="object"&&(c=d,d=i.pop()),B2(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...n,...c},{memoize:p,memoizeOptions:h=[],argsMemoize:f=AA,argsMemoizeOptions:g=[]}=u,v=qw(h),y=qw(g),b=W2(i),x=p(function(){return r++,d.apply(null,arguments)},...v),w=f(function(){o++;const S=q2(b,arguments);return l=x.apply(null,S),l},...y);return Object.assign(w,{resultFunc:d,memoizedResultFunc:x,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:p,argsMemoize:f})};return Object.assign(a,{withTypes:()=>a}),a}var te=G2(AA),Y2=Object.assign((e,t=te)=>{$2(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),a=n.map(r=>e[r]);return t(a,(...r)=>r.reduce((o,l,c)=>(o[n[c]]=l,o),{}))},{withTypes:()=>Y2}),EA={},TA={},IA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,i,r)=>{if(a!==i){const o=t(a),l=t(i);if(o===l&&o===0){if(a<i)return r==="desc"?1:-1;if(a>i)return r==="desc"?-1:1}return r==="desc"?l-o:o-l}return 0};e.compareValues=n})(IA);var OA={},lb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(lb);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lb,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function i(r,o){return Array.isArray(r)?!1:typeof r=="number"||typeof r=="boolean"||r==null||t.isSymbol(r)?!0:typeof r=="string"&&(a.test(r)||!n.test(r))||o!=null&&Object.hasOwn(o,r)}e.isKey=i})(OA);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IA,n=OA,a=fp;function i(r,o,l,c){if(r==null)return[];l=c?void 0:l,Array.isArray(r)||(r=Object.values(r)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(f=>String(f));const d=(f,g)=>{let v=f;for(let y=0;y<g.length&&v!=null;++y)v=v[g[y]];return v},u=(f,g)=>g==null||f==null?g:typeof f=="object"&&"key"in f?Object.hasOwn(g,f.key)?g[f.key]:d(g,f.path):typeof f=="function"?f(g):Array.isArray(f)?d(g,f):typeof g=="object"?g[f]:g,p=o.map(f=>(Array.isArray(f)&&f.length===1&&(f=f[0]),f==null||typeof f=="function"||Array.isArray(f)||n.isKey(f)?f:{key:f,path:a.toPath(f)}));return r.map(f=>({original:f,criteria:p.map(g=>u(g,f))})).slice().sort((f,g)=>{for(let v=0;v<p.length;v++){const y=t.compareValues(f.criteria[v],g.criteria[v],l[v]);if(y!==0)return y}return 0}).map(f=>f.original)}e.orderBy=i})(TA);var LA={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a=1){const i=[],r=Math.floor(a),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<r?o(u,c+1):i.push(u)}};return o(n,0),i}e.flatten=t})(LA);var cb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rb,n=vp,a=eb,i=nb;function r(o,l,c){return a.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?i.eq(c[l],o):!1}e.isIterateeCall=r})(cb);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TA,n=LA,a=cb;function i(r,...o){const l=o.length;return l>1&&a.isIterateeCall(r,o[0],o[1])?o=[]:l>2&&a.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(r,n.flatten(o),["asc"])}e.sortBy=i})(EA);var Q2=EA.sortBy;const yp=Ia(Q2);var MA=e=>e.legend.settings,Z2=e=>e.legend.size,X2=e=>e.legend.payload,J2=te([X2,MA],(e,t)=>{var{itemSorter:n}=t,a=e.flat(1);return n?yp(a,n):a});function eB(){return xe(J2)}var Oc=1;function DA(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=m.useState({height:0,left:0,top:0,width:0}),a=m.useCallback(i=>{if(i!=null){var r=i.getBoundingClientRect(),o={height:r.height,left:r.left,top:r.top,width:r.width};(Math.abs(o.height-t.height)>Oc||Math.abs(o.left-t.left)>Oc||Math.abs(o.top-t.top)>Oc||Math.abs(o.width-t.width)>Oc)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function qt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var tB=typeof Symbol=="function"&&Symbol.observable||"@@observable",Kw=tB,Jm=()=>Math.random().toString(36).substring(7).split("").join("."),nB={INIT:`@@redux/INIT${Jm()}`,REPLACE:`@@redux/REPLACE${Jm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Jm()}`},tu=nB;function db(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function FA(e,t,n){if(typeof e!="function")throw new Error(qt(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(qt(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(qt(1));return n(FA)(e,t)}let a=e,i=t,r=new Map,o=r,l=0,c=!1;function d(){o===r&&(o=new Map,r.forEach((y,b)=>{o.set(b,y)}))}function u(){if(c)throw new Error(qt(3));return i}function p(y){if(typeof y!="function")throw new Error(qt(4));if(c)throw new Error(qt(5));let b=!0;d();const x=l++;return o.set(x,y),function(){if(b){if(c)throw new Error(qt(6));b=!1,d(),o.delete(x),r=null}}}function h(y){if(!db(y))throw new Error(qt(7));if(typeof y.type>"u")throw new Error(qt(8));if(typeof y.type!="string")throw new Error(qt(17));if(c)throw new Error(qt(9));try{c=!0,i=a(i,y)}finally{c=!1}return(r=o).forEach(x=>{x()}),y}function f(y){if(typeof y!="function")throw new Error(qt(10));a=y,h({type:tu.REPLACE})}function g(){const y=p;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(qt(11));function x(){const j=b;j.next&&j.next(u())}return x(),{unsubscribe:y(x)}},[Kw](){return this}}}return h({type:tu.INIT}),{dispatch:h,subscribe:p,getState:u,replaceReducer:f,[Kw]:g}}function aB(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:tu.INIT})>"u")throw new Error(qt(12));if(typeof n(void 0,{type:tu.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(qt(13))})}function zA(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const o=t[r];typeof e[o]=="function"&&(n[o]=e[o])}const a=Object.keys(n);let i;try{aB(n)}catch(r){i=r}return function(o={},l){if(i)throw i;let c=!1;const d={};for(let u=0;u<a.length;u++){const p=a[u],h=n[p],f=o[p],g=h(f,l);if(typeof g>"u")throw l&&l.type,new Error(qt(14));d[p]=g,c=c||g!==f}return c=c||a.length!==Object.keys(o).length,c?d:o}}function nu(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function sB(...e){return t=>(n,a)=>{const i=t(n,a);let r=()=>{throw new Error(qt(15))};const o={getState:i.getState,dispatch:(c,...d)=>r(c,...d)},l=e.map(c=>c(o));return r=nu(...l)(i.dispatch),{...i,dispatch:r}}}function RA(e){return db(e)&&"type"in e&&typeof e.type=="string"}var _A=Symbol.for("immer-nothing"),Vw=Symbol.for("immer-draftable"),un=Symbol.for("immer-state");function ra(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var On=Object,Er=On.getPrototypeOf,au="constructor",xp="prototype",_f="configurable",su="enumerable",md="writable",pl="value",Ja=e=>!!e&&!!e[un];function va(e){var t;return e?BA(e)||wp(e)||!!e[Vw]||!!((t=e[au])!=null&&t[Vw])||jp(e)||Sp(e):!1}var iB=On[xp][au].toString(),Gw=new WeakMap;function BA(e){if(!e||!ub(e))return!1;const t=Er(e);if(t===null||t===On[xp])return!0;const n=On.hasOwnProperty.call(t,au)&&t[au];if(n===Object)return!0;if(!Vi(n))return!1;let a=Gw.get(n);return a===void 0&&(a=Function.toString.call(n),Gw.set(n,a)),a===iB}function Rl(e,t,n=!0){_l(e)===0?(n?Reflect.ownKeys(e):On.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((a,i)=>t(i,a,e))}function _l(e){const t=e[un];return t?t.type_:wp(e)?1:jp(e)?2:Sp(e)?3:0}var Yw=(e,t,n=_l(e))=>n===2?e.has(t):On[xp].hasOwnProperty.call(e,t),Bf=(e,t,n=_l(e))=>n===2?e.get(t):e[t],iu=(e,t,n,a=_l(e))=>{a===2?e.set(t,n):a===3?e.add(n):e[t]=n};function rB(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var wp=Array.isArray,jp=e=>e instanceof Map,Sp=e=>e instanceof Set,ub=e=>typeof e=="object",Vi=e=>typeof e=="function",eh=e=>typeof e=="boolean",Fa=e=>e.copy_||e.base_,pb=e=>e.modified_?e.copy_:e.base_;function $f(e,t){if(jp(e))return new Map(e);if(Sp(e))return new Set(e);if(wp(e))return Array[xp].slice.call(e);const n=BA(e);if(t===!0||t==="class_only"&&!n){const a=On.getOwnPropertyDescriptors(e);delete a[un];let i=Reflect.ownKeys(a);for(let r=0;r<i.length;r++){const o=i[r],l=a[o];l[md]===!1&&(l[md]=!0,l[_f]=!0),(l.get||l.set)&&(a[o]={[_f]:!0,[md]:!0,[su]:l[su],[pl]:e[o]})}return On.create(Er(e),a)}else{const a=Er(e);if(a!==null&&n)return{...e};const i=On.create(a);return On.assign(i,e)}}function mb(e,t=!1){return Np(e)||Ja(e)||!va(e)||(_l(e)>1&&On.defineProperties(e,{set:Lc,add:Lc,clear:Lc,delete:Lc}),On.freeze(e),t&&Rl(e,(n,a)=>{mb(a,!0)},!1)),e}function oB(){ra(2)}var Lc={[pl]:oB};function Np(e){return e===null||!ub(e)?!0:On.isFrozen(e)}var ru="MapSet",Uf="Patches",$A={};function Tr(e){const t=$A[e];return t||ra(0,e),t}var lB=e=>!!$A[e],ml,UA=()=>ml,cB=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:lB(ru)?Tr(ru):void 0});function Qw(e,t){t&&(e.patchPlugin_=Tr(Uf),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Wf(e){qf(e),e.drafts_.forEach(dB),e.drafts_=null}function qf(e){e===ml&&(ml=e.parent_)}var Zw=e=>ml=cB(ml,e);function dB(e){const t=e[un];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Xw(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[un].modified_&&(Wf(t),ra(4)),va(e)&&(e=Jw(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[un].base_,e,t)}else e=Jw(t,n);return uB(t,e,!0),Wf(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_A?e:void 0}function Jw(e,t){if(Np(t))return t;const n=t[un];if(!n)return hb(t,e.handledSet_,e);if(!Cp(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:a}=n;if(a)for(;a.length>0;)a.pop()(e);HA(n,e)}return n.copy_}function uB(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&mb(t,n)}function WA(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Cp=(e,t)=>e.scope_===t,pB=[];function qA(e,t,n,a){const i=Fa(e),r=e.type_;if(a!==void 0&&Bf(i,a,r)===t){iu(i,a,n,r);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Rl(i,(c,d)=>{if(Ja(d)){const u=l.get(d)||[];u.push(c),l.set(d,u)}})}const o=e.draftLocations_.get(t)??pB;for(const l of o)iu(i,l,n,r)}function mB(e,t,n){e.callbacks_.push(function(i){var l;const r=t;if(!r||!Cp(r,i))return;(l=i.mapSetPlugin_)==null||l.fixSetContents(r);const o=pb(r);qA(e,r.draft_??r,o,n),HA(r,i)})}function HA(e,t){var a;if(e.modified_&&!e.finalized_&&(e.type_===3||(((a=e.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const r=i.getPath(e);r&&i.generatePatches_(e,r,t)}WA(e)}}function hB(e,t,n){const{scope_:a}=e;if(Ja(n)){const i=n[un];Cp(i,a)&&i.callbacks_.push(function(){hd(e);const o=pb(i);qA(e,n,o,t)})}else va(n)&&e.callbacks_.push(function(){const r=Fa(e);Bf(r,t,e.type_)===n&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&hb(Bf(e.copy_,t,e.type_),a.handledSet_,a)})}function hb(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ja(e)||t.has(e)||!va(e)||Np(e)||(t.add(e),Rl(e,(a,i)=>{if(Ja(i)){const r=i[un];if(Cp(r,n)){const o=pb(r);iu(e,a,o,e.type_),WA(r)}}else va(i)&&hb(i,t,n)})),e}function fB(e,t){const n=wp(e),a={type_:n?1:0,scope_:t?t.scope_:UA(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=a,r=fb;n&&(i=[a],r=hl);const{revoke:o,proxy:l}=Proxy.revocable(i,r);return a.draft_=l,a.revoke_=o,[l,a]}var fb={get(e,t){if(t===un)return e;const n=Fa(e);if(!Yw(n,t,e.type_))return gB(e,n,t);const a=n[t];if(e.finalized_||!va(a))return a;if(a===th(e.base_,t)){hd(e);const i=e.type_===1?+t:t,r=Kf(e.scope_,a,e,i);return e.copy_[i]=r}return a},has(e,t){return t in Fa(e)},ownKeys(e){return Reflect.ownKeys(Fa(e))},set(e,t,n){const a=KA(Fa(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const i=th(Fa(e),t),r=i==null?void 0:i[un];if(r&&r.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(rB(n,i)&&(n!==void 0||Yw(e.base_,t,e.type_)))return!0;hd(e),Hf(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),hB(e,t,n)),!0},deleteProperty(e,t){return hd(e),th(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Hf(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Fa(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{[md]:!0,[_f]:e.type_!==1||t!=="length",[su]:a[su],[pl]:n[t]}},defineProperty(){ra(11)},getPrototypeOf(e){return Er(e.base_)},setPrototypeOf(){ra(12)}},hl={};Rl(fb,(e,t)=>{hl[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});hl.deleteProperty=function(e,t){return hl.set.call(this,e,t,void 0)};hl.set=function(e,t,n){return fb.set.call(this,e[0],t,n,e[0])};function th(e,t){const n=e[un];return(n?Fa(n):e)[t]}function gB(e,t,n){var i;const a=KA(t,n);return a?pl in a?a[pl]:(i=a.get)==null?void 0:i.call(e.draft_):void 0}function KA(e,t){if(!(t in e))return;let n=Er(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Er(n)}}function Hf(e){e.modified_||(e.modified_=!0,e.parent_&&Hf(e.parent_))}function hd(e){e.copy_||(e.assigned_=new Map,e.copy_=$f(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var vB=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,a,i)=>{if(Vi(n)&&!Vi(a)){const o=a;a=n;const l=this;return function(d=o,...u){return l.produce(d,p=>a.call(this,p,...u))}}Vi(a)||ra(6),i!==void 0&&!Vi(i)&&ra(7);let r;if(va(n)){const o=Zw(this),l=Kf(o,n,void 0);let c=!0;try{r=a(l),c=!1}finally{c?Wf(o):qf(o)}return Qw(o,i),Xw(r,o)}else if(!n||!ub(n)){if(r=a(n),r===void 0&&(r=n),r===_A&&(r=void 0),this.autoFreeze_&&mb(r,!0),i){const o=[],l=[];Tr(Uf).generateReplacementPatches_(n,r,{patches_:o,inversePatches_:l}),i(o,l)}return r}else ra(1,n)},this.produceWithPatches=(n,a)=>{if(Vi(n))return(l,...c)=>this.produceWithPatches(l,d=>n(d,...c));let i,r;return[this.produce(n,a,(l,c)=>{i=l,r=c}),i,r]},eh(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),eh(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),eh(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){va(t)||ra(8),Ja(t)&&(t=ua(t));const n=Zw(this),a=Kf(n,t,void 0);return a[un].isManual_=!0,qf(n),a}finishDraft(t,n){const a=t&&t[un];(!a||!a.isManual_)&&ra(9);const{scope_:i}=a;return Qw(i,n),Xw(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let a;for(a=n.length-1;a>=0;a--){const r=n[a];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}a>-1&&(n=n.slice(a+1));const i=Tr(Uf).applyPatches_;return Ja(t)?i(t,n):this.produce(t,r=>i(r,n))}};function Kf(e,t,n,a){const[i,r]=jp(t)?Tr(ru).proxyMap_(t,n):Sp(t)?Tr(ru).proxySet_(t,n):fB(t,n);return((n==null?void 0:n.scope_)??UA()).drafts_.push(i),r.callbacks_=(n==null?void 0:n.callbacks_)??[],r.key_=a,n&&a!==void 0?mB(n,r,a):r.callbacks_.push(function(c){var u;(u=c.mapSetPlugin_)==null||u.fixSetContents(r);const{patchPlugin_:d}=c;r.modified_&&d&&d.generatePatches_(r,[],c)}),i}function ua(e){return Ja(e)||ra(10,e),VA(e)}function VA(e){if(!va(e)||Np(e))return e;const t=e[un];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=$f(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=$f(e,!0);return Rl(n,(i,r)=>{iu(n,i,VA(r))},a),t&&(t.finalized_=!1),n}var bB=new vB,GA=bB.produce;function YA(e){return({dispatch:n,getState:a})=>i=>r=>typeof r=="function"?r(n,a,e):i(r)}var yB=YA(),xB=YA,wB=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?nu:nu.apply(null,arguments)};function Zn(e,t){function n(...a){if(t){let i=t(...a);if(!i)throw new Error(Mn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>RA(a)&&a.type===e,n}var QA=class Ao extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ao.prototype)}static get[Symbol.species](){return Ao}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ao(...t[0].concat(this)):new Ao(...t.concat(this))}};function ej(e){return va(e)?GA(e,()=>{}):e}function Mc(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function jB(e){return typeof e=="boolean"}var SB=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:i=!0,actionCreatorCheck:r=!0}=t??{};let o=new QA;return n&&(jB(n)?o.push(yB):o.push(xB(n.extraArgument))),o},ZA="RTK_autoBatch",tt=()=>e=>({payload:e,meta:{[ZA]:!0}}),tj=e=>t=>{setTimeout(t,e)},XA=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let i=!0,r=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:tj(10):e.type==="callback"?e.queueNotification:tj(e.timeout),d=()=>{o=!1,r&&(r=!1,l.forEach(u=>u()))};return Object.assign({},a,{subscribe(u){const p=()=>i&&u(),h=a.subscribe(p);return l.add(u),()=>{h(),l.delete(u)}},dispatch(u){var p;try{return i=!((p=u==null?void 0:u.meta)!=null&&p[ZA]),r=!i,r&&(o||(o=!0,c(d))),a.dispatch(u)}finally{i=!0}}})},NB=e=>function(n){const{autoBatch:a=!0}=n??{};let i=new QA(e);return a&&i.push(XA(typeof a=="object"?a:void 0)),i};function CB(e){const t=SB(),{reducer:n=void 0,middleware:a,devTools:i=!0,preloadedState:r=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(db(n))l=zA(n);else throw new Error(Mn(1));let c;typeof a=="function"?c=a(t):c=t();let d=nu;i&&(d=wB({trace:!1,...typeof i=="object"&&i}));const u=sB(...c),p=NB(u);let h=typeof o=="function"?o(p):p();const f=d(...h);return FA(l,r,f)}function JA(e){const t={},n=[];let a;const i={addCase(r,o){const l=typeof r=="string"?r:r.type;if(!l)throw new Error(Mn(28));if(l in t)throw new Error(Mn(29));return t[l]=o,i},addAsyncThunk(r,o){return o.pending&&(t[r.pending.type]=o.pending),o.rejected&&(t[r.rejected.type]=o.rejected),o.fulfilled&&(t[r.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:r.settled,reducer:o.settled}),i},addMatcher(r,o){return n.push({matcher:r,reducer:o}),i},addDefaultCase(r){return a=r,i}};return e(i),[t,n,a]}function kB(e){return typeof e=="function"}function PB(e,t){let[n,a,i]=JA(t),r;if(kB(e))r=()=>ej(e());else{const l=ej(e);r=()=>l}function o(l=r(),c){let d=[n[c.type],...a.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[i]),d.reduce((u,p)=>{if(p)if(Ja(u)){const f=p(u,c);return f===void 0?u:f}else{if(va(u))return GA(u,h=>p(h,c));{const h=p(u,c);if(h===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return u},l)}return o.getInitialState=r,o}var AB="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",EB=(e=21)=>{let t="",n=e;for(;n--;)t+=AB[Math.random()*64|0];return t},TB=Symbol.for("rtk-slice-createasyncthunk");function IB(e,t){return`${e}/${t}`}function OB({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[TB];return function(i){const{name:r,reducerPath:o=r}=i;if(!r)throw new Error(Mn(11));const l=(typeof i.reducers=="function"?i.reducers(MB()):i.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(j,S){const k=typeof j=="string"?j:j.type;if(!k)throw new Error(Mn(12));if(k in d.sliceCaseReducersByType)throw new Error(Mn(13));return d.sliceCaseReducersByType[k]=S,u},addMatcher(j,S){return d.sliceMatchers.push({matcher:j,reducer:S}),u},exposeAction(j,S){return d.actionCreators[j]=S,u},exposeCaseReducer(j,S){return d.sliceCaseReducersByName[j]=S,u}};c.forEach(j=>{const S=l[j],k={reducerName:j,type:IB(r,j),createNotation:typeof i.reducers=="function"};FB(S)?RB(k,S,u,t):DB(k,S,u)});function p(){const[j={},S=[],k=void 0]=typeof i.extraReducers=="function"?JA(i.extraReducers):[i.extraReducers],T={...j,...d.sliceCaseReducersByType};return PB(i.initialState,L=>{for(let F in T)L.addCase(F,T[F]);for(let F of d.sliceMatchers)L.addMatcher(F.matcher,F.reducer);for(let F of S)L.addMatcher(F.matcher,F.reducer);k&&L.addDefaultCase(k)})}const h=j=>j,f=new Map,g=new WeakMap;let v;function y(j,S){return v||(v=p()),v(j,S)}function b(){return v||(v=p()),v.getInitialState()}function x(j,S=!1){function k(L){let F=L[j];return typeof F>"u"&&S&&(F=Mc(g,k,b)),F}function T(L=h){const F=Mc(f,S,()=>new WeakMap);return Mc(F,L,()=>{const O={};for(const[M,P]of Object.entries(i.selectors??{}))O[M]=LB(P,L,()=>Mc(g,L,b),S);return O})}return{reducerPath:j,getSelectors:T,get selectors(){return T(k)},selectSlice:k}}const w={name:r,reducer:y,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:b,...x(o),injectInto(j,{reducerPath:S,...k}={}){const T=S??o;return j.inject({reducerPath:T,reducer:y},k),{...w,...x(T,!0)}}};return w}}function LB(e,t,n,a){function i(r,...o){let l=t(r);return typeof l>"u"&&a&&(l=n()),e(l,...o)}return i.unwrapped=e,i}var kn=OB();function MB(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function DB({type:e,reducerName:t,createNotation:n},a,i){let r,o;if("reducer"in a){if(n&&!zB(a))throw new Error(Mn(17));r=a.reducer,o=a.prepare}else r=a;i.addCase(e,r).exposeCaseReducer(t,r).exposeAction(t,o?Zn(e,o):Zn(e))}function FB(e){return e._reducerDefinitionType==="asyncThunk"}function zB(e){return e._reducerDefinitionType==="reducerWithPrepare"}function RB({type:e,reducerName:t},n,a,i){if(!i)throw new Error(Mn(18));const{payloadCreator:r,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=n,p=i(e,r,u);a.exposeAction(t,p),o&&a.addCase(p.fulfilled,o),l&&a.addCase(p.pending,l),c&&a.addCase(p.rejected,c),d&&a.addMatcher(p.settled,d),a.exposeCaseReducer(t,{fulfilled:o||Dc,pending:l||Dc,rejected:c||Dc,settled:d||Dc})}function Dc(){}var _B="task",e1="listener",t1="completed",gb="cancelled",BB=`task-${gb}`,$B=`task-${t1}`,Vf=`${e1}-${gb}`,UB=`${e1}-${t1}`,kp=class{constructor(e){fm(this,"name","TaskAbortError");fm(this,"message");this.code=e,this.message=`${_B} ${gb} (reason: ${e})`}},vb=(e,t)=>{if(typeof e!="function")throw new TypeError(Mn(32))},ou=()=>{},n1=(e,t=ou)=>(e.catch(t),e),a1=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),bi=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},yi=e=>{if(e.aborted){const{reason:t}=e;throw new kp(t)}};function s1(e,t){let n=ou;return new Promise((a,i)=>{const r=()=>i(new kp(e.reason));if(e.aborted){r();return}n=a1(e,r),t.finally(()=>n()).then(a,i)}).finally(()=>{n=ou})}var WB=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof kp?"cancelled":"rejected",error:n}}finally{t==null||t()}},lu=e=>t=>n1(s1(e,t).then(n=>(yi(e),n))),i1=e=>{const t=lu(e);return n=>t(new Promise(a=>setTimeout(a,n)))},{assign:gr}=Object,nj={},Pp="listenerMiddleware",qB=(e,t)=>{const n=a=>a1(e,()=>bi(a,e.reason));return(a,i)=>{vb(a);const r=new AbortController;n(r);const o=WB(async()=>{yi(e),yi(r.signal);const l=await a({pause:lu(r.signal),delay:i1(r.signal),signal:r.signal});return yi(r.signal),l},()=>bi(r,$B));return i!=null&&i.autoJoin&&t.push(o.catch(ou)),{result:lu(e)(o),cancel(){bi(r,BB)}}}},HB=(e,t)=>{const n=async(a,i)=>{yi(t);let r=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:a,effect:(p,h)=>{h.unsubscribe(),c([p,h.getState(),h.getOriginalState()])}});r=()=>{u(),d()}})];i!=null&&l.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await s1(t,Promise.race(l));return yi(t),c}finally{r()}};return(a,i)=>n1(n(a,i))},r1=e=>{let{type:t,actionCreator:n,matcher:a,predicate:i,effect:r}=e;if(t)i=Zn(t).match;else if(n)t=n.type,i=n.match;else if(a)i=a;else if(!i)throw new Error(Mn(21));return vb(r),{predicate:i,type:t,effect:r}},o1=gr(e=>{const{type:t,predicate:n,effect:a}=r1(e);return{id:EB(),effect:a,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Mn(22))}}},{withTypes:()=>o1}),aj=(e,t)=>{const{type:n,effect:a,predicate:i}=r1(t);return Array.from(e.values()).find(r=>(typeof n=="string"?r.type===n:r.predicate===i)&&r.effect===a)},Gf=e=>{e.pending.forEach(t=>{bi(t,Vf)})},KB=(e,t)=>()=>{for(const n of t.keys())Gf(n);e.clear()},sj=(e,t,n)=>{try{e(t,n)}catch(a){setTimeout(()=>{throw a},0)}},l1=gr(Zn(`${Pp}/add`),{withTypes:()=>l1}),VB=Zn(`${Pp}/removeAll`),c1=gr(Zn(`${Pp}/remove`),{withTypes:()=>c1}),GB=(...e)=>{console.error(`${Pp}/error`,...e)},Bl=(e={})=>{const t=new Map,n=new Map,a=f=>{const g=n.get(f)??0;n.set(f,g+1)},i=f=>{const g=n.get(f)??1;g===1?n.delete(f):n.set(f,g-1)},{extra:r,onError:o=GB}=e;vb(o);const l=f=>(f.unsubscribe=()=>t.delete(f.id),t.set(f.id,f),g=>{f.unsubscribe(),g!=null&&g.cancelActive&&Gf(f)}),c=f=>{const g=aj(t,f)??o1(f);return l(g)};gr(c,{withTypes:()=>c});const d=f=>{const g=aj(t,f);return g&&(g.unsubscribe(),f.cancelActive&&Gf(g)),!!g};gr(d,{withTypes:()=>d});const u=async(f,g,v,y)=>{const b=new AbortController,x=HB(c,b.signal),w=[];try{f.pending.add(b),a(f),await Promise.resolve(f.effect(g,gr({},v,{getOriginalState:y,condition:(j,S)=>x(j,S).then(Boolean),take:x,delay:i1(b.signal),pause:lu(b.signal),extra:r,signal:b.signal,fork:qB(b.signal,w),unsubscribe:f.unsubscribe,subscribe:()=>{t.set(f.id,f)},cancelActiveListeners:()=>{f.pending.forEach((j,S,k)=>{j!==b&&(bi(j,Vf),k.delete(j))})},cancel:()=>{bi(b,Vf),f.pending.delete(b)},throwIfCancelled:()=>{yi(b.signal)}})))}catch(j){j instanceof kp||sj(o,j,{raisedBy:"effect"})}finally{await Promise.all(w),bi(b,UB),i(f),f.pending.delete(b)}},p=KB(t,n);return{middleware:f=>g=>v=>{if(!RA(v))return g(v);if(l1.match(v))return c(v.payload);if(VB.match(v)){p();return}if(c1.match(v))return d(v.payload);let y=f.getState();const b=()=>{if(y===nj)throw new Error(Mn(23));return y};let x;try{if(x=g(v),t.size>0){const w=f.getState(),j=Array.from(t.values());for(const S of j){let k=!1;try{k=S.predicate(v,w,y)}catch(T){k=!1,sj(o,T,{raisedBy:"predicate"})}k&&u(S,v,f,b)}}}finally{y=nj}return x},startListening:c,stopListening:d,clearListeners:p}};function Mn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var YB={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},d1=kn({name:"chartLayout",initialState:YB,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,a,i,r;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(r=t.payload.left)!==null&&r!==void 0?r:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:QB,setLayout:ZB,setChartSize:XB,setScale:JB}=d1.actions,e$=d1.reducer;function u1(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function ij(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ij(Object(n),!0).forEach(function(a){t$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ij(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function t$(e,t,n){return(t=n$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n$(e){var t=a$(e,"string");return typeof t=="symbol"?t:t+""}function a$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function At(e,t,n){return st(e)||st(t)?n:Aa(t)?Ar(e,t,n):typeof t=="function"?t(e):n}var s$=(e,t,n)=>{if(t&&n){var{width:a,height:i}=n,{align:r,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&r!=="center"&&ye(e[r]))return or(or({},e),{},{[r]:e[r]+(a||0)});if((l==="horizontal"||l==="vertical"&&r==="center")&&o!=="middle"&&ye(e[o]))return or(or({},e),{},{[o]:e[o]+(i||0)})}return e},Gs=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",p1=(e,t,n,a)=>{if(a)return e.map(l=>l.coordinate);var i,r,o=e.map(l=>(l.coordinate===t&&(i=!0),l.coordinate===n&&(r=!0),l.coordinate));return i||o.push(t),r||o.push(n),o},m1=(e,t,n)=>{if(!e)return null;var{duplicateDomain:a,type:i,range:r,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:p,niceTicks:h,axisType:f}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,v=i==="category"&&o.bandwidth?o.bandwidth()/g:0;if(v=f==="angleAxis"&&r&&r.length>=2?xn(r[0]-r[1])*2*v:v,p||h){var y=(p||h||[]).map((b,x)=>{var w=a?a.indexOf(b):b;return{coordinate:o(w)+v,value:b,offset:v,index:x}});return y.filter(b=>!fa(b.coordinate))}return c&&d?d.map((b,x)=>({coordinate:o(b)+v,value:b,index:x,offset:v})):o.ticks&&u!=null?o.ticks(u).map((b,x)=>({coordinate:o(b)+v,value:b,offset:v,index:x})):o.domain().map((b,x)=>({coordinate:o(b)+v,value:a?a[b]:b,index:x,offset:v}))},rj=1e-4,i$=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,a=e.range(),i=Math.min(a[0],a[1])-rj,r=Math.max(a[0],a[1])+rj,o=e(t[0]),l=e(t[n-1]);(o<i||o>r||l<i||l>r)&&e.domain([t[0],t[n-1]])}},r$=(e,t)=>{if(!t||t.length!==2||!ye(t[0])||!ye(t[1]))return e;var n=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ye(e[0])||e[0]<n)&&(i[0]=n),(!ye(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},o$=e=>{var t=e.length;if(!(t<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,r=0,o=0;o<t;++o){var l=fa(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=r,e[o][n][1]=r+l,r=e[o][n][1])}},l$=e=>{var t=e.length;if(!(t<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,r=0;r<t;++r){var o=fa(e[r][n][1])?e[r][n][0]:e[r][n][1];o>=0?(e[r][n][0]=i,e[r][n][1]=i+o,i=e[r][n][1]):(e[r][n][0]=0,e[r][n][1]=0)}},c$={sign:o$,expand:X_,none:Pr,silhouette:J_,wiggle:e2,positive:l$},d$=(e,t,n)=>{var a=c$[n],i=Z_().keys(t).value((r,o)=>Number(At(r,o,0))).order(zf).offset(a);return i(e)};function u$(e){return e==null?void 0:String(e)}function oj(e){var{axis:t,ticks:n,bandSize:a,entry:i,index:r,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!st(i[t.dataKey])){var l=iA(n,"value",i[t.dataKey]);if(l)return l.coordinate+a/2}return n[r]?n[r].coordinate+a/2:null}var c=At(i,st(o)?t.dataKey:o);return st(c)?null:t.scale(c)}var lj=e=>{var{axis:t,ticks:n,offset:a,bandSize:i,entry:r,index:o}=e;if(t.type==="category")return n[o]?n[o].coordinate+a:null;var l=At(r,t.dataKey,t.scale.domain()[o]);return st(l)?null:t.scale(l)-i/2+a},p$=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},m$=e=>{var t=e.flat(2).filter(ye);return[Math.min(...t),Math.max(...t)]},h$=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],f$=(e,t,n)=>{if(e!=null)return h$(Object.keys(e).reduce((a,i)=>{var r=e[i],{stackedData:o}=r,l=o.reduce((c,d)=>{var u=u1(d,t,n),p=m$(u);return[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]))},cj=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dj=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ir=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var i=yp(t,u=>u.coordinate),r=1/0,o=1,l=i.length;o<l;o++){var c=i[o],d=i[o-1];r=Math.min((c.coordinate||0)-(d.coordinate||0),r)}return r===1/0?0:r}return n?void 0:0};function uj(e){var{tooltipEntrySettings:t,dataKey:n,payload:a,value:i,name:r}=e;return or(or({},t),{},{dataKey:n,payload:a,value:i,name:r})}function Ap(e,t){if(e)return String(e);if(typeof t=="string")return t}var g$=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},v$=(e,t)=>t==="centric"?e.angle:e.radius,ls=e=>e.layout.width,cs=e=>e.layout.height,b$=e=>e.layout.scale,h1=e=>e.layout.margin,Ep=te(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Tp=te(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),y$="data-recharts-item-index",x$="data-recharts-item-data-key",$l=60;function pj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Fc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pj(Object(n),!0).forEach(function(a){w$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function w$(e,t,n){return(t=j$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j$(e){var t=S$(e,"string");return typeof t=="symbol"?t:t+""}function S$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N$=e=>e.brush.height;function C$(e){var t=Tp(e);return t.reduce((n,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var i=typeof a.width=="number"?a.width:$l;return n+i}return n},0)}function k$(e){var t=Tp(e);return t.reduce((n,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var i=typeof a.width=="number"?a.width:$l;return n+i}return n},0)}function P$(e){var t=Ep(e);return t.reduce((n,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?n+a.height:n,0)}function A$(e){var t=Ep(e);return t.reduce((n,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?n+a.height:n,0)}var $t=te([ls,cs,h1,N$,C$,k$,P$,A$,MA,Z2],(e,t,n,a,i,r,o,l,c,d)=>{var u={left:(n.left||0)+i,right:(n.right||0)+r},p={top:(n.top||0)+o,bottom:(n.bottom||0)+l},h=Fc(Fc({},p),u),f=h.bottom;h.bottom+=a,h=s$(h,c,d);var g=e-h.left-h.right,v=t-h.top-h.bottom;return Fc(Fc({brushBottom:f},h),{},{width:Math.max(g,0),height:Math.max(v,0)})}),E$=te($t,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),bb=te(ls,cs,(e,t)=>({x:0,y:0,width:e,height:t})),T$=m.createContext(null),nn=()=>m.useContext(T$)!=null,Ip=e=>e.brush,Op=te([Ip,$t,h1],(e,t,n)=>({height:e.height,x:ye(e.x)?e.x:t.left,y:ye(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:ye(e.width)?e.width:t.width})),f1={},g1={},v1={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a,{signal:i,edges:r}={}){let o,l=null;const c=r!=null&&r.includes("leading"),d=r==null||r.includes("trailing"),u=()=>{l!==null&&(n.apply(o,l),o=void 0,l=null)},p=()=>{d&&u(),v()};let h=null;const f=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,p()},a)},g=()=>{h!==null&&(clearTimeout(h),h=null)},v=()=>{g(),o=void 0,l=null},y=()=>{u()},b=function(...x){if(i!=null&&i.aborted)return;o=this,l=x;const w=h==null;f(),c&&w&&u()};return b.schedule=f,b.cancel=v,b.flush=y,i==null||i.addEventListener("abort",v,{once:!0}),b}e.debounce=t})(v1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v1;function n(a,i=0,r={}){typeof r!="object"&&(r={});const{leading:o=!1,trailing:l=!0,maxWait:c}=r,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let u,p=null;const h=t.debounce(function(...v){u=a.apply(this,v),p=null},i,{edges:d}),f=function(...v){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(u=a.apply(this,v),p=Date.now(),h.cancel(),h.schedule(),u):(h.apply(this,v),u)},g=()=>(h.flush(),u);return f.cancel=h.cancel,f.flush=g,f}e.debounce=n})(g1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g1;function n(a,i=0,r={}){const{leading:o=!0,trailing:l=!0}=r;return t.debounce(a,i,{leading:o,maxWait:i,trailing:l})}e.throttle=n})(f1);var I$=f1.throttle;const O$=Ia(I$);var cu=function(t,n){for(var a=arguments.length,i=new Array(a>2?a-2:0),r=2;r<a;r++)i[r-2]=arguments[r];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},b1=(e,t,n)=>{var{width:a="100%",height:i="100%",aspect:r,maxHeight:o}=n,l=Xa(a)?e:Number(a),c=Xa(i)?t:Number(i);return r&&r>0&&(l?c=l/r:c&&(l=c*r),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},L$={width:0,height:0,overflow:"visible"},M$={width:0,overflowX:"visible"},D$={height:0,overflowY:"visible"},F$={},z$=e=>{var{width:t,height:n}=e,a=Xa(t),i=Xa(n);return a&&i?L$:a?M$:i?D$:F$};function R$(e){var{width:t,height:n,aspect:a}=e,i=t,r=n;return i===void 0&&r===void 0?(i="100%",r="100%"):i===void 0?i=a&&a>0?void 0:"100%":r===void 0&&(r=a&&a>0?void 0:"100%"),{width:i,height:r}}function bt(e){return Number.isFinite(e)}function Ea(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Yf(){return Yf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yf.apply(null,arguments)}function mj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function hj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mj(Object(n),!0).forEach(function(a){_$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _$(e,t,n){return(t=B$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B$(e){var t=$$(e,"string");return typeof t=="symbol"?t:t+""}function $$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y1=m.createContext({width:-1,height:-1});function U$(e){return Ea(e.width)&&Ea(e.height)}function x1(e){var{children:t,width:n,height:a}=e,i=m.useMemo(()=>({width:n,height:a}),[n,a]);return U$(i)?m.createElement(y1.Provider,{value:i},t):null}var yb=()=>m.useContext(y1),W$=m.forwardRef((e,t)=>{var{aspect:n,initialDimension:a={width:-1,height:-1},width:i,height:r,minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:p,className:h,onResize:f,style:g={}}=e,v=m.useRef(null),y=m.useRef();y.current=f,m.useImperativeHandle(t,()=>v.current);var[b,x]=m.useState({containerWidth:a.width,containerHeight:a.height}),w=m.useCallback((L,F)=>{x(O=>{var M=Math.round(L),P=Math.round(F);return O.containerWidth===M&&O.containerHeight===P?O:{containerWidth:M,containerHeight:P}})},[]);m.useEffect(()=>{if(v.current==null||typeof ResizeObserver>"u")return zl;var L=P=>{var D,{width:E,height:N}=P[0].contentRect;w(E,N),(D=y.current)===null||D===void 0||D.call(y,E,N)};u>0&&(L=O$(L,u,{trailing:!0,leading:!1}));var F=new ResizeObserver(L),{width:O,height:M}=v.current.getBoundingClientRect();return w(O,M),F.observe(v.current),()=>{F.disconnect()}},[w,u]);var{containerWidth:j,containerHeight:S}=b;cu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:k,calculatedHeight:T}=b1(j,S,{width:i,height:r,aspect:n,maxHeight:c});return cu(k!=null&&k>0||T!=null&&T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,T,i,r,o,l,n),m.createElement("div",{id:p?"".concat(p):void 0,className:Ve("recharts-responsive-container",h),style:hj(hj({},g),{},{width:i,height:r,minWidth:o,minHeight:l,maxHeight:c}),ref:v},m.createElement("div",{style:z$({width:i,height:r})},m.createElement(x1,{width:k,height:T},d)))}),Xs=m.forwardRef((e,t)=>{var n=yb();if(Ea(n.width)&&Ea(n.height))return e.children;var{width:a,height:i}=R$({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:r,calculatedHeight:o}=b1(void 0,void 0,{width:a,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return ye(r)&&ye(o)?m.createElement(x1,{width:r,height:o},e.children):m.createElement(W$,Yf({},e,{width:a,height:i,ref:t}))});function w1(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Lp=()=>{var e,t=nn(),n=xe(E$),a=xe(Op),i=(e=xe(Ip))===null||e===void 0?void 0:e.padding;return!t||!a||!i?n:{width:a.width-i.left-i.right,height:a.height-i.top-i.bottom,x:i.left,y:i.top}},q$={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},j1=()=>{var e;return(e=xe($t))!==null&&e!==void 0?e:q$},xb=()=>xe(ls),wb=()=>xe(cs),H$=()=>xe(e=>e.layout.margin),Be=e=>e.layout.layoutType,Ul=()=>xe(Be),K$=()=>{var e=Ul();return e!==void 0},Mp=e=>{var t=ct(),n=nn(),{width:a,height:i}=e,r=yb(),o=a,l=i;return r&&(o=r.width>0?r.width:a,l=r.height>0?r.height:i),m.useEffect(()=>{!n&&Ea(o)&&Ea(l)&&t(XB({width:o,height:l}))},[t,n,o,l]),null},S1=Symbol.for("immer-nothing"),fj=Symbol.for("immer-draftable"),Fn=Symbol.for("immer-state");function oa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fl=Object.getPrototypeOf;function Or(e){return!!e&&!!e[Fn]}function Ei(e){var t;return e?N1(e)||Array.isArray(e)||!!e[fj]||!!((t=e.constructor)!=null&&t[fj])||Wl(e)||Fp(e):!1}var V$=Object.prototype.constructor.toString(),gj=new WeakMap;function N1(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let a=gj.get(n);return a===void 0&&(a=Function.toString.call(n),gj.set(n,a)),a===V$}function du(e,t,n=!0){Dp(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((a,i)=>t(i,a,e))}function Dp(e){const t=e[Fn];return t?t.type_:Array.isArray(e)?1:Wl(e)?2:Fp(e)?3:0}function Qf(e,t){return Dp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function C1(e,t,n){const a=Dp(e);a===2?e.set(t,n):a===3?e.add(n):e[t]=n}function G$(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Wl(e){return e instanceof Map}function Fp(e){return e instanceof Set}function si(e){return e.copy_||e.base_}function Zf(e,t){if(Wl(e))return new Map(e);if(Fp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=N1(e);if(t===!0||t==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[Fn];let i=Reflect.ownKeys(a);for(let r=0;r<i.length;r++){const o=i[r],l=a[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(fl(e),a)}else{const a=fl(e);if(a!==null&&n)return{...e};const i=Object.create(a);return Object.assign(i,e)}}function jb(e,t=!1){return zp(e)||Or(e)||!Ei(e)||(Dp(e)>1&&Object.defineProperties(e,{set:zc,add:zc,clear:zc,delete:zc}),Object.freeze(e),t&&Object.values(e).forEach(n=>jb(n,!0))),e}function Y$(){oa(2)}var zc={value:Y$};function zp(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Q$={};function Ti(e){const t=Q$[e];return t||oa(0,e),t}var gl;function k1(){return gl}function Z$(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function vj(e,t){t&&(Ti("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Xf(e){Jf(e),e.drafts_.forEach(X$),e.drafts_=null}function Jf(e){e===gl&&(gl=e.parent_)}function bj(e){return gl=Z$(gl,e)}function X$(e){const t=e[Fn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function yj(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Fn].modified_&&(Xf(t),oa(4)),Ei(e)&&(e=uu(t,e),t.parent_||pu(t,e)),t.patches_&&Ti("Patches").generateReplacementPatches_(n[Fn].base_,e,t.patches_,t.inversePatches_)):e=uu(t,n,[]),Xf(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==S1?e:void 0}function uu(e,t,n){if(zp(t))return t;const a=e.immer_.shouldUseStrictIteration(),i=t[Fn];if(!i)return du(t,(r,o)=>xj(e,i,t,r,o,n),a),t;if(i.scope_!==e)return t;if(!i.modified_)return pu(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const r=i.copy_;let o=r,l=!1;i.type_===3&&(o=new Set(r),r.clear(),l=!0),du(o,(c,d)=>xj(e,i,r,c,d,n,l),a),pu(e,r,!1),n&&e.patches_&&Ti("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function xj(e,t,n,a,i,r,o){if(i==null||typeof i!="object"&&!o)return;const l=zp(i);if(!(l&&!o)){if(Or(i)){const c=r&&t&&t.type_!==3&&!Qf(t.assigned_,a)?r.concat(a):void 0,d=uu(e,i,c);if(C1(n,a,d),Or(d))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Ei(i)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===i&&l)return;uu(e,i),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(Wl(n)?n.has(a):Object.prototype.propertyIsEnumerable.call(n,a))&&pu(e,i)}}}function pu(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jb(t,n)}function J$(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:k1(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=a,r=Sb;n&&(i=[a],r=vl);const{revoke:o,proxy:l}=Proxy.revocable(i,r);return a.draft_=l,a.revoke_=o,l}var Sb={get(e,t){if(t===Fn)return e;const n=si(e);if(!Qf(n,t))return eU(e,n,t);const a=n[t];return e.finalized_||!Ei(a)?a:a===nh(e.base_,t)?(ah(e),e.copy_[t]=tg(a,e)):a},has(e,t){return t in si(e)},ownKeys(e){return Reflect.ownKeys(si(e))},set(e,t,n){const a=P1(si(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const i=nh(si(e),t),r=i==null?void 0:i[Fn];if(r&&r.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(G$(n,i)&&(n!==void 0||Qf(e.base_,t)))return!0;ah(e),eg(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return nh(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ah(e),eg(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=si(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:n[t]}},defineProperty(){oa(11)},getPrototypeOf(e){return fl(e.base_)},setPrototypeOf(){oa(12)}},vl={};du(Sb,(e,t)=>{vl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});vl.deleteProperty=function(e,t){return vl.set.call(this,e,t,void 0)};vl.set=function(e,t,n){return Sb.set.call(this,e[0],t,n,e[0])};function nh(e,t){const n=e[Fn];return(n?si(n):e)[t]}function eU(e,t,n){var i;const a=P1(t,n);return a?"value"in a?a.value:(i=a.get)==null?void 0:i.call(e.draft_):void 0}function P1(e,t){if(!(t in e))return;let n=fl(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=fl(n)}}function eg(e){e.modified_||(e.modified_=!0,e.parent_&&eg(e.parent_))}function ah(e){e.copy_||(e.copy_=Zf(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var tU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,a)=>{if(typeof t=="function"&&typeof n!="function"){const r=n;n=t;const o=this;return function(c=r,...d){return o.produce(c,u=>n.call(this,u,...d))}}typeof n!="function"&&oa(6),a!==void 0&&typeof a!="function"&&oa(7);let i;if(Ei(t)){const r=bj(this),o=tg(t,void 0);let l=!0;try{i=n(o),l=!1}finally{l?Xf(r):Jf(r)}return vj(r,a),yj(i,r)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===S1&&(i=void 0),this.autoFreeze_&&jb(i,!0),a){const r=[],o=[];Ti("Patches").generateReplacementPatches_(t,i,r,o),a(r,o)}return i}else oa(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let a,i;return[this.produce(t,n,(o,l)=>{a=o,i=l}),a,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ei(e)||oa(8),Or(e)&&(e=nU(e));const t=bj(this),n=tg(e,void 0);return n[Fn].isManual_=!0,Jf(t),n}finishDraft(e,t){const n=e&&e[Fn];(!n||!n.isManual_)&&oa(9);const{scope_:a}=n;return vj(a,t),yj(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const a=Ti("Patches").applyPatches_;return Or(e)?a(e,t):this.produce(e,i=>a(i,t))}};function tg(e,t){const n=Wl(e)?Ti("MapSet").proxyMap_(e,t):Fp(e)?Ti("MapSet").proxySet_(e,t):J$(e,t);return(t?t.scope_:k1()).drafts_.push(n),n}function nU(e){return Or(e)||oa(10,e),A1(e)}function A1(e){if(!Ei(e)||zp(e))return e;const t=e[Fn];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Zf(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=Zf(e,!0);return du(n,(i,r)=>{C1(n,i,A1(r))},a),t&&(t.finalized_=!1),n}var aU=new tU;aU.produce;var sU={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},E1=kn({name:"legend",initialState:sU,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:tt()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:a}=t.payload,i=ua(e).payload.indexOf(n);i>-1&&(e.payload[i]=a)},prepare:tt()},removeLegendPayload:{reducer(e,t){var n=ua(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:tt()}}}),{setLegendSize:wj,setLegendSettings:iU,addLegendPayload:rU,replaceLegendPayload:oU,removeLegendPayload:lU}=E1.actions,cU=E1.reducer,dU=["contextPayload"];function ng(){return ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ng.apply(null,arguments)}function jj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jj(Object(n),!0).forEach(function(a){uU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uU(e,t,n){return(t=pU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pU(e){var t=mU(e,"string");return typeof t=="symbol"?t:t+""}function mU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hU(e,t){if(e==null)return{};var n,a,i=fU(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fU(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function gU(e){return e.value}function vU(e){var{contextPayload:t}=e,n=hU(e,dU),a=CA(t,e.payloadUniqBy,gU),i=Lr(Lr({},n),{},{payload:a});return m.isValidElement(e.content)?m.cloneElement(e.content,i):typeof e.content=="function"?m.createElement(e.content,i):m.createElement(k2,i)}function bU(e,t,n,a,i,r){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((a||0)-r.width)/2}:d=l==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((i||0)-r.height)/2}:u=c==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Lr(Lr({},d),u)}function yU(e){var t=ct();return m.useEffect(()=>{t(iU(e))},[t,e]),null}function xU(e){var t=ct();return m.useEffect(()=>(t(wj(e)),()=>{t(wj({width:0,height:0}))}),[t,e]),null}function wU(e,t,n,a){return e==="vertical"&&ye(t)?{height:t}:e==="horizontal"?{width:n||a}:null}var jU={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function ii(e){var t=Yt(e,jU),n=eB(),a=w_(),i=H$(),{width:r,height:o,wrapperStyle:l,portal:c}=t,[d,u]=DA([n]),p=xb(),h=wb();if(p==null||h==null)return null;var f=p-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),g=wU(t.layout,o,r,f),v=c?l:Lr(Lr({position:"absolute",width:(g==null?void 0:g.width)||r||"auto",height:(g==null?void 0:g.height)||o||"auto"},bU(l,t,i,p,h,d)),l),y=c??a;if(y==null||n==null)return null;var b=m.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:u},m.createElement(yU,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&m.createElement(xU,{width:d.width,height:d.height}),m.createElement(vU,ng({},t,g,{margin:i,chartWidth:p,chartHeight:h,contextPayload:n})));return sp.createPortal(b,y)}ii.displayName="Legend";function ag(){return ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ag.apply(null,arguments)}function Sj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function sh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sj(Object(n),!0).forEach(function(a){SU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SU(e,t,n){return(t=NU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NU(e){var t=CU(e,"string");return typeof t=="symbol"?t:t+""}function CU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kU(e){return Array.isArray(e)&&Aa(e[0])&&Aa(e[1])?e.join(" ~ "):e}var PU=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:a={},labelStyle:i={},payload:r,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:p,accessibilityLayer:h=!1}=e,f=()=>{if(r&&r.length){var S={padding:0,margin:0},k=(l?yp(r,l):r).map((T,L)=>{if(T.type==="none")return null;var F=T.formatter||o||kU,{value:O,name:M}=T,P=O,D=M;if(F){var E=F(O,M,T,L,r);if(Array.isArray(E))[P,D]=E;else if(E!=null)P=E;else return null}var N=sh({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},a);return m.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:N},Aa(D)?m.createElement("span",{className:"recharts-tooltip-item-name"},D):null,Aa(D)?m.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,m.createElement("span",{className:"recharts-tooltip-item-value"},P),m.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return m.createElement("ul",{className:"recharts-tooltip-item-list",style:S},k)}return null},g=sh({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),v=sh({margin:0},i),y=!st(u),b=y?u:"",x=Ve("recharts-default-tooltip",c),w=Ve("recharts-tooltip-label",d);y&&p&&r!==void 0&&r!==null&&(b=p(u,r));var j=h?{role:"status","aria-live":"assertive"}:{};return m.createElement("div",ag({className:x,style:g},j),m.createElement("p",{className:w,style:v},m.isValidElement(b)?b:"".concat(b)),f())},po="recharts-tooltip-wrapper",AU={visibility:"hidden"};function EU(e){var{coordinate:t,translateX:n,translateY:a}=e;return Ve(po,{["".concat(po,"-right")]:ye(n)&&t&&ye(t.x)&&n>=t.x,["".concat(po,"-left")]:ye(n)&&t&&ye(t.x)&&n<t.x,["".concat(po,"-bottom")]:ye(a)&&t&&ye(t.y)&&a>=t.y,["".concat(po,"-top")]:ye(a)&&t&&ye(t.y)&&a<t.y})}function Nj(e){var{allowEscapeViewBox:t,coordinate:n,key:a,offsetTopLeft:i,position:r,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(r&&ye(r[a]))return r[a];var u=n[a]-l-(i>0?i:0),p=n[a]+i;if(t[a])return o[a]?u:p;var h=c[a];if(h==null)return 0;if(o[a]){var f=u,g=h;return f<g?Math.max(p,h):Math.max(u,h)}if(d==null)return 0;var v=p+l,y=h+d;return v>y?Math.max(u,h):Math.max(p,h)}function TU(e){var{translateX:t,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function IU(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:a,position:i,reverseDirection:r,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,p;return o.height>0&&o.width>0&&n?(u=Nj({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:a,position:i,reverseDirection:r,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=Nj({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:a,position:i,reverseDirection:r,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=TU({translateX:u,translateY:p,useTranslate3d:l})):d=AU,{cssProperties:d,cssClasses:EU({translateX:u,translateY:p,coordinate:n})}}function Cj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Rc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cj(Object(n),!0).forEach(function(a){sg(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sg(e,t,n){return(t=OU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OU(e){var t=LU(e,"string");return typeof t=="symbol"?t:t+""}function LU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class MU extends m.PureComponent{constructor(){super(...arguments),sg(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),sg(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,a,i,r;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(i=(r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:a,animationEasing:i,children:r,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:p,useTranslate3d:h,viewBox:f,wrapperStyle:g,lastBoundingBox:v,innerRef:y,hasPortalFromProps:b}=this.props,{cssClasses:x,cssProperties:w}=IU({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:p,tooltipBox:{height:v.height,width:v.width},useTranslate3d:h,viewBox:f}),j=b?{}:Rc(Rc({transition:c&&t?"transform ".concat(a,"ms ").concat(i):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),S=Rc(Rc({},j),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return m.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:x,style:S,ref:y},r)}}var T1=()=>{var e;return(e=xe(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function ig(){return ig=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ig.apply(null,arguments)}function kj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Pj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kj(Object(n),!0).forEach(function(a){DU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function DU(e,t,n){return(t=FU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FU(e){var t=zU(e,"string");return typeof t=="symbol"?t:t+""}function zU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Aj={curveBasisClosed:B_,curveBasisOpen:$_,curveBasis:__,curveBumpX:C_,curveBumpY:k_,curveLinearClosed:U_,curveLinear:up,curveMonotoneX:W_,curveMonotoneY:q_,curveNatural:H_,curveStep:K_,curveStepAfter:G_,curveStepBefore:V_},mu=e=>bt(e.x)&&bt(e.y),Ej=e=>e.base!=null&&mu(e.base)&&mu(e),mo=e=>e.x,ho=e=>e.y,RU=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Fl(e));return(n==="curveMonotone"||n==="curveBump")&&t?Aj["".concat(n).concat(t==="vertical"?"Y":"X")]:Aj[n]||up},_U=e=>{var{type:t="linear",points:n=[],baseLine:a,layout:i,connectNulls:r=!1}=e,o=RU(t,i),l=r?n.filter(mu):n,c;if(Array.isArray(a)){var d=n.map((f,g)=>Pj(Pj({},f),{},{base:a[g]}));i==="vertical"?c=Tc().y(ho).x1(mo).x0(f=>f.base.x):c=Tc().x(mo).y1(ho).y0(f=>f.base.y);var u=c.defined(Ej).curve(o),p=r?d.filter(Ej):d;return u(p)}i==="vertical"&&ye(a)?c=Tc().y(ho).x1(mo).x0(a):ye(a)?c=Tc().x(mo).y1(ho).y0(a):c=HP().x(mo).y(ho);var h=c.defined(mu).curve(o);return h(l)},I1=e=>{var{className:t,points:n,path:a,pathRef:i}=e;if((!n||!n.length)&&!a)return null;var r=n&&n.length?_U(e):a;return m.createElement("path",ig({},ha(e),Zv(e),{className:Ve("recharts-curve",t),d:r===null?void 0:r,ref:i}))},BU=["x","y","top","left","width","height","className"];function rg(){return rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rg.apply(null,arguments)}function Tj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function $U(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tj(Object(n),!0).forEach(function(a){UU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function UU(e,t,n){return(t=WU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WU(e){var t=qU(e,"string");return typeof t=="symbol"?t:t+""}function qU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HU(e,t){if(e==null)return{};var n,a,i=KU(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function KU(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var VU=(e,t,n,a,i,r)=>"M".concat(e,",").concat(i,"v").concat(a,"M").concat(r,",").concat(t,"h").concat(n),GU=e=>{var{x:t=0,y:n=0,top:a=0,left:i=0,width:r=0,height:o=0,className:l}=e,c=HU(e,BU),d=$U({x:t,y:n,top:a,left:i,width:r,height:o},c);return!ye(t)||!ye(n)||!ye(r)||!ye(o)||!ye(a)||!ye(i)?null:m.createElement("path",rg({},dn(d),{className:Ve("recharts-cross",l),d:VU(t,n,r,o,a,i)}))};function YU(e,t,n,a){var i=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function Ij(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Oj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ij(Object(n),!0).forEach(function(a){QU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ij(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function QU(e,t,n){return(t=ZU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZU(e){var t=XU(e,"string");return typeof t=="symbol"?t:t+""}function XU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JU=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),O1=(e,t,n)=>e.map(a=>"".concat(JU(a)," ").concat(t,"ms ").concat(n)).join(","),eW=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,a)=>n.filter(i=>a.includes(i))),bl=(e,t)=>Object.keys(t).reduce((n,a)=>Oj(Oj({},n),{},{[a]:e(a,t[a])}),{});function Lj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lj(Object(n),!0).forEach(function(a){tW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tW(e,t,n){return(t=nW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nW(e){var t=aW(e,"string");return typeof t=="symbol"?t:t+""}function aW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hu=(e,t,n)=>e+(t-e)*n,og=e=>{var{from:t,to:n}=e;return t!==n},L1=(e,t,n)=>{var a=bl((i,r)=>{if(og(r)){var[o,l]=e(r.from,r.to,r.velocity);return kt(kt({},r),{},{from:o,velocity:l})}return r},t);return n<1?bl((i,r)=>og(r)?kt(kt({},r),{},{velocity:hu(r.velocity,a[i].velocity,n),from:hu(r.from,a[i].from,n)}):r,t):L1(e,a,n-1)};function sW(e,t,n,a,i,r){var o,l=a.reduce((h,f)=>kt(kt({},h),{},{[f]:{from:e[f],velocity:0,to:t[f]}}),{}),c=()=>bl((h,f)=>f.from,l),d=()=>!Object.values(l).filter(og).length,u=null,p=h=>{o||(o=h);var f=h-o,g=f/n.dt;l=L1(n,l,g),i(kt(kt(kt({},e),t),c())),o=h,d()||(u=r.setTimeout(p))};return()=>(u=r.setTimeout(p),()=>{var h;(h=u)===null||h===void 0||h()})}function iW(e,t,n,a,i,r,o){var l=null,c=i.reduce((p,h)=>kt(kt({},p),{},{[h]:[e[h],t[h]]}),{}),d,u=p=>{d||(d=p);var h=(p-d)/a,f=bl((v,y)=>hu(...y,n(h)),c);if(r(kt(kt(kt({},e),t),f)),h<1)l=o.setTimeout(u);else{var g=bl((v,y)=>hu(...y,n(1)),c);r(kt(kt(kt({},e),t),g))}};return()=>(l=o.setTimeout(u),()=>{var p;(p=l)===null||p===void 0||p()})}const rW=(e,t,n,a,i,r)=>{var o=eW(e,t);return n==null?()=>(i(kt(kt({},e),t)),()=>{}):n.isStepper===!0?sW(e,t,n,o,i,r):iW(e,t,n,a,o,i,r)};var fu=1e-4,M1=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],D1=(e,t)=>e.map((n,a)=>n*t**a).reduce((n,a)=>n+a),Mj=(e,t)=>n=>{var a=M1(e,t);return D1(a,n)},oW=(e,t)=>n=>{var a=M1(e,t),i=[...a.map((r,o)=>r*o).slice(1),0];return D1(i,n)},lW=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,r=n[0].split("(");if(r[0]==="cubic-bezier"&&((i=r[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var o=r[1].split(")")[0].split(",").map(l=>parseFloat(l));return[o[0],o[1],o[2],o[3]]}}}return n.length===4?n:[0,0,1,1]},cW=(e,t,n,a)=>{var i=Mj(e,n),r=Mj(t,a),o=oW(e,n),l=d=>d>1?1:d<0?0:d,c=d=>{for(var u=d>1?1:d,p=u,h=0;h<8;++h){var f=i(p)-u,g=o(p);if(Math.abs(f-u)<fu||g<fu)return r(p);p=l(p-f/g)}return r(p)};return c.isStepper=!1,c},Dj=function(){return cW(...lW(...arguments))},dW=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:i=17}=t,r=(o,l,c)=>{var d=-(o-l)*n,u=c*a,p=c+(d-u)*i/1e3,h=c*i/1e3+o;return Math.abs(h-l)<fu&&Math.abs(p)<fu?[l,0]:[h,p]};return r.isStepper=!0,r.dt=i,r},uW=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Dj(e);case"spring":return dW();default:if(e.split("(")[0]==="cubic-bezier")return Dj(e)}return typeof e=="function"?e:null};function pW(e){var t,n=()=>null,a=!1,i=null,r=o=>{if(!a){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){i=e.setTimeout(r.bind(null,d),c);return}r(c),i=e.setTimeout(r.bind(null,d));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{a=!0},start:o=>{a=!1,i&&(i(),i=null),r(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class mW{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),i=null,r=o=>{o-a>=n?t(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(r))};return i=requestAnimationFrame(r),()=>{i!=null&&cancelAnimationFrame(i)}}}function hW(){return pW(new mW)}var fW=m.createContext(hW);function gW(e,t){var n=m.useContext(fW);return m.useMemo(()=>t??n(e),[e,t,n])}var vW=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ql={devToolsEnabled:!1,isSsr:vW()},bW={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Fj={t:0},ih={t:1};function Rp(e){var t=Yt(e,bW),{isActive:n,canBegin:a,duration:i,easing:r,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u=n==="auto"?!ql.isSsr:n,p=gW(t.animationId,t.animationManager),[h,f]=m.useState(u?Fj:ih),g=m.useRef(null);return m.useEffect(()=>{u||f(ih)},[u]),m.useEffect(()=>{if(!u||!a)return zl;var v=rW(Fj,ih,uW(r),i,f,p.getTimeoutController()),y=()=>{g.current=v()};return p.start([c,o,y,i,l]),()=>{p.stop(),g.current&&g.current(),l()}},[u,a,i,r,o,c,l,p]),d(h.t)}function _p(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=m.useRef(ul(t)),a=m.useRef(e);return a.current!==e&&(n.current=ul(t),a.current=e),n.current}var yW=["radius"],xW=["radius"];function zj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Rj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zj(Object(n),!0).forEach(function(a){wW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function wW(e,t,n){return(t=jW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jW(e){var t=SW(e,"string");return typeof t=="symbol"?t:t+""}function SW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gu(){return gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gu.apply(null,arguments)}function _j(e,t){if(e==null)return{};var n,a,i=NW(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function NW(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Bj=(e,t,n,a,i)=>{var r=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,l=n>=0?1:-1,c=a>=0&&n>=0||a<0&&n<0?1:0,d;if(r>0&&i instanceof Array){for(var u=[0,0,0,0],p=0,h=4;p<h;p++)u[p]=i[p]>r?r:i[p];d="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),d+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(t+o*u[1])),d+="L ".concat(e+n,",").concat(t+a-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+n-l*u[2],",").concat(t+a)),d+="L ".concat(e+l*u[3],",").concat(t+a),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+a-o*u[3])),d+="Z"}else if(r>0&&i===+i&&i>0){var f=Math.min(r,i);d="M ".concat(e,",").concat(t+o*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+l*f,",").concat(t,`
            L `).concat(e+n-l*f,",").concat(t,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n,",").concat(t+o*f,`
            L `).concat(e+n,",").concat(t+a-o*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n-l*f,",").concat(t+a,`
            L `).concat(e+l*f,",").concat(t+a,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e,",").concat(t+a-o*f," Z")}else d="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},$j={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},F1=e=>{var t=Yt(e,$j),n=m.useRef(null),[a,i]=m.useState(-1);m.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&i(C)}catch{}},[]);var{x:r,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:p,animationDuration:h,animationBegin:f,isAnimationActive:g,isUpdateAnimationActive:v}=t,y=m.useRef(l),b=m.useRef(c),x=m.useRef(r),w=m.useRef(o),j=m.useMemo(()=>({x:r,y:o,width:l,height:c,radius:d}),[r,o,l,c,d]),S=_p(j,"rectangle-");if(r!==+r||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var k=Ve("recharts-rectangle",u);if(!v){var T=dn(t),{radius:L}=T,F=_j(T,yW);return m.createElement("path",gu({},F,{radius:typeof d=="number"?d:void 0,className:k,d:Bj(r,o,l,c,d)}))}var O=y.current,M=b.current,P=x.current,D=w.current,E="0px ".concat(a===-1?1:a,"px"),N="".concat(a,"px 0px"),R=O1(["strokeDasharray"],h,typeof p=="string"?p:$j.animationEasing);return m.createElement(Rp,{animationId:S,key:S,canBegin:a>0,duration:h,easing:p,isActive:v,begin:f},C=>{var A=pt(O,l,C),_=pt(M,c,C),B=pt(P,r,C),H=pt(D,o,C);n.current&&(y.current=A,b.current=_,x.current=B,w.current=H);var Z;g?C>0?Z={transition:R,strokeDasharray:N}:Z={strokeDasharray:E}:Z={strokeDasharray:N};var ie=dn(t),{radius:U}=ie,G=_j(ie,xW);return m.createElement("path",gu({},G,{radius:typeof d=="number"?d:void 0,className:k,d:Bj(B,H,A,_,d),ref:n,style:Rj(Rj({},Z),t.style)}))})};function Uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Wj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uj(Object(n),!0).forEach(function(a){CW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function CW(e,t,n){return(t=kW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kW(e){var t=PW(e,"string");return typeof t=="symbol"?t:t+""}function PW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vu=Math.PI/180,AW=e=>e*180/Math.PI,Kt=(e,t,n,a)=>({x:e+Math.cos(-vu*a)*n,y:t+Math.sin(-vu*a)*n}),EW=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},TW=(e,t)=>{var{x:n,y:a}=e,{x:i,y:r}=t;return Math.sqrt((n-i)**2+(a-r)**2)},IW=(e,t)=>{var{x:n,y:a}=e,{cx:i,cy:r}=t,o=TW({x:n,y:a},{x:i,y:r});if(o<=0)return{radius:o,angle:0};var l=(n-i)/o,c=Math.acos(l);return a>r&&(c=2*Math.PI-c),{radius:o,angle:AW(c),angleInRadian:c}},OW=e=>{var{startAngle:t,endAngle:n}=e,a=Math.floor(t/360),i=Math.floor(n/360),r=Math.min(a,i);return{startAngle:t-r*360,endAngle:n-r*360}},LW=(e,t)=>{var{startAngle:n,endAngle:a}=t,i=Math.floor(n/360),r=Math.floor(a/360),o=Math.min(i,r);return e+o*360},MW=(e,t)=>{var{chartX:n,chartY:a}=e,{radius:i,angle:r}=IW({x:n,y:a},t),{innerRadius:o,outerRadius:l}=t;if(i<o||i>l||i===0)return null;var{startAngle:c,endAngle:d}=OW(t),u=r,p;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;p=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;p=u>=d&&u<=c}return p?Wj(Wj({},t),{},{radius:i,angle:LW(u,t)}):null};function z1(e){var{cx:t,cy:n,radius:a,startAngle:i,endAngle:r}=e,o=Kt(t,n,a,i),l=Kt(t,n,a,r);return{points:[o,l],cx:t,cy:n,radius:a,startAngle:i,endAngle:r}}function lg(){return lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},lg.apply(null,arguments)}var DW=(e,t)=>{var n=xn(t-e),a=Math.min(Math.abs(t-e),359.999);return n*a},_c=e=>{var{cx:t,cy:n,radius:a,angle:i,sign:r,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+a,u=Math.asin(l/d)/vu,p=c?i:i+r*u,h=Kt(t,n,d,p),f=Kt(t,n,a,p),g=c?i-r*u:i,v=Kt(t,n,d*Math.cos(u*vu),g);return{center:h,circleTangency:f,lineTangency:v,theta:u}},R1=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:i,startAngle:r,endAngle:o}=e,l=DW(r,o),c=r+l,d=Kt(t,n,i,r),u=Kt(t,n,i,c),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(r>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(a>0){var h=Kt(t,n,a,r),f=Kt(t,n,a,c);p+="L ".concat(f.x,",").concat(f.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(r<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(t,",").concat(n," Z");return p},FW=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:i,cornerRadius:r,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=xn(d-c),{circleTangency:p,lineTangency:h,theta:f}=_c({cx:t,cy:n,radius:i,angle:c,sign:u,cornerRadius:r,cornerIsExternal:l}),{circleTangency:g,lineTangency:v,theta:y}=_c({cx:t,cy:n,radius:i,angle:d,sign:-u,cornerRadius:r,cornerIsExternal:l}),b=l?Math.abs(c-d):Math.abs(c-d)-f-y;if(b<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(r,",").concat(r,",0,0,1,").concat(r*2,`,0
        a`).concat(r,",").concat(r,",0,0,1,").concat(-r*2,`,0
      `):R1({cx:t,cy:n,innerRadius:a,outerRadius:i,startAngle:c,endAngle:d});var x="M ".concat(h.x,",").concat(h.y,`
    A`).concat(r,",").concat(r,",0,0,").concat(+(u<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(r,",").concat(r,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
  `);if(a>0){var{circleTangency:w,lineTangency:j,theta:S}=_c({cx:t,cy:n,radius:a,angle:c,sign:u,isExternal:!0,cornerRadius:r,cornerIsExternal:l}),{circleTangency:k,lineTangency:T,theta:L}=_c({cx:t,cy:n,radius:a,angle:d,sign:-u,isExternal:!0,cornerRadius:r,cornerIsExternal:l}),F=l?Math.abs(c-d):Math.abs(c-d)-S-L;if(F<0&&r===0)return"".concat(x,"L").concat(t,",").concat(n,"Z");x+="L".concat(T.x,",").concat(T.y,`
      A`).concat(r,",").concat(r,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(F>180),",").concat(+(u>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(r,",").concat(r,",0,0,").concat(+(u<0),",").concat(j.x,",").concat(j.y,"Z")}else x+="L".concat(t,",").concat(n,"Z");return x},zW={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_1=e=>{var t=Yt(e,zW),{cx:n,cy:a,innerRadius:i,outerRadius:r,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:p}=t;if(r<i||d===u)return null;var h=Ve("recharts-sector",p),f=r-i,g=ga(o,f,0,!0),v;return g>0&&Math.abs(d-u)<360?v=FW({cx:n,cy:a,innerRadius:i,outerRadius:r,cornerRadius:Math.min(g,f/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):v=R1({cx:n,cy:a,innerRadius:i,outerRadius:r,startAngle:d,endAngle:u}),m.createElement("path",lg({},dn(t),{className:h,d:v}))};function RW(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(oA(t)){if(e==="centric"){var{cx:a,cy:i,innerRadius:r,outerRadius:o,angle:l}=t,c=Kt(a,i,r,l),d=Kt(a,i,o,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return z1(t)}}var B1={},$1={},U1={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lb;function n(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=n})(U1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U1;function n(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n})($1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cb,n=$1;function a(i,r,o){o&&typeof o!="number"&&t.isIterateeCall(i,r,o)&&(r=o=void 0),i=n.toFinite(i),r===void 0?(r=i,i=0):r=n.toFinite(r),o=o===void 0?i<r?1:-1:n.toFinite(o);const l=Math.max(Math.ceil((r-i)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=i,i+=o;return c}e.range=a})(B1);var _W=B1.range;const W1=Ia(_W);function Rs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function BW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nb(e){let t,n,a;e.length!==2?(t=Rs,n=(l,c)=>Rs(e(l),c),a=(l,c)=>e(l)-c):(t=e===Rs||e===BW?e:$W,n=e,a=e);function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const p=d+u>>>1;n(l[p],c)<0?d=p+1:u=p}while(d<u)}return d}function r(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const p=d+u>>>1;n(l[p],c)<=0?d=p+1:u=p}while(d<u)}return d}function o(l,c,d=0,u=l.length){const p=i(l,c,d,u-1);return p>d&&a(l[p-1],c)>-a(l[p],c)?p-1:p}return{left:i,center:o,right:r}}function $W(){return 0}function q1(e){return e===null?NaN:+e}function*UW(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const WW=Nb(Rs),Hl=WW.right;Nb(q1).center;class qj extends Map{constructor(t,n=KW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,i]of t)this.set(a,i)}get(t){return super.get(Hj(this,t))}has(t){return super.has(Hj(this,t))}set(t,n){return super.set(qW(this,t),n)}delete(t){return super.delete(HW(this,t))}}function Hj({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function qW({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function HW({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function KW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function VW(e=Rs){if(e===Rs)return H1;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function H1(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const GW=Math.sqrt(50),YW=Math.sqrt(10),QW=Math.sqrt(2);function bu(e,t,n){const a=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(a)),r=a/Math.pow(10,i),o=r>=GW?10:r>=YW?5:r>=QW?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?bu(e,t,n*2):[l,c,d]}function cg(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[i,r,o]=a?bu(t,e,n):bu(e,t,n);if(!(r>=i))return[];const l=r-i+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(r-d)/-o;else for(let d=0;d<l;++d)c[d]=(r-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function dg(e,t,n){return t=+t,e=+e,n=+n,bu(e,t,n)[2]}function ug(e,t,n){t=+t,e=+e,n=+n;const a=t<e,i=a?dg(t,e,n):dg(e,t,n);return(a?-1:1)*(i<0?1/-i:i)}function Kj(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function Vj(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function K1(e,t,n=0,a=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(i=i===void 0?H1:VW(i);a>n;){if(a-n>600){const c=a-n+1,d=t-n+1,u=Math.log(c),p=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*p*(c-p)/c)*(d-c/2<0?-1:1),f=Math.max(n,Math.floor(t-d*p/c+h)),g=Math.min(a,Math.floor(t+(c-d)*p/c+h));K1(e,t,f,g,i)}const r=e[t];let o=n,l=a;for(fo(e,n,t),i(e[a],r)>0&&fo(e,n,a);o<l;){for(fo(e,o,l),++o,--l;i(e[o],r)<0;)++o;for(;i(e[l],r)>0;)--l}i(e[n],r)===0?fo(e,n,l):(++l,fo(e,l,a)),l<=t&&(n=l+1),t<=l&&(a=l-1)}return e}function fo(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function ZW(e,t,n){if(e=Float64Array.from(UW(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return Vj(e);if(t>=1)return Kj(e);var a,i=(a-1)*t,r=Math.floor(i),o=Kj(K1(e,r).subarray(0,r+1)),l=Vj(e.subarray(r+1));return o+(l-o)*(i-r)}}function XW(e,t,n=q1){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,i=(a-1)*t,r=Math.floor(i),o=+n(e[r],r,e),l=+n(e[r+1],r+1,e);return o+(l-o)*(i-r)}}function JW(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var a=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,r=new Array(i);++a<i;)r[a]=e+a*n;return r}function Jn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ds(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const pg=Symbol("implicit");function Cb(){var e=new qj,t=[],n=[],a=pg;function i(r){let o=e.get(r);if(o===void 0){if(a!==pg)return a;e.set(r,o=t.push(r)-1)}return n[o%n.length]}return i.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new qj;for(const o of r)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(r){return arguments.length?(n=Array.from(r),i):n.slice()},i.unknown=function(r){return arguments.length?(a=r,i):a},i.copy=function(){return Cb(t,n).unknown(a)},Jn.apply(i,arguments),i}function kb(){var e=Cb().unknown(void 0),t=e.domain,n=e.range,a=0,i=1,r,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function p(){var h=t().length,f=i<a,g=f?i:a,v=f?a:i;r=(v-g)/Math.max(1,h-c+d*2),l&&(r=Math.floor(r)),g+=(v-g-r*(h-c))*u,o=r*(1-c),l&&(g=Math.round(g),o=Math.round(o));var y=JW(h).map(function(b){return g+r*b});return n(f?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),p()):t()},e.range=function(h){return arguments.length?([a,i]=h,a=+a,i=+i,p()):[a,i]},e.rangeRound=function(h){return[a,i]=h,a=+a,i=+i,l=!0,p()},e.bandwidth=function(){return o},e.step=function(){return r},e.round=function(h){return arguments.length?(l=!!h,p()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),p()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),p()):c},e.paddingOuter=function(h){return arguments.length?(d=+h,p()):d},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),p()):u},e.copy=function(){return kb(t(),[a,i]).round(l).paddingInner(c).paddingOuter(d).align(u)},Jn.apply(p(),arguments)}function V1(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return V1(t())},e}function e3(){return V1(kb.apply(null,arguments).paddingInner(1))}function Pb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function G1(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Kl(){}var yl=.7,yu=1/yl,vr="\\s*([+-]?\\d+)\\s*",xl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t3=/^#([0-9a-f]{3,8})$/,n3=new RegExp(`^rgb\\(${vr},${vr},${vr}\\)$`),a3=new RegExp(`^rgb\\(${Pa},${Pa},${Pa}\\)$`),s3=new RegExp(`^rgba\\(${vr},${vr},${vr},${xl}\\)$`),i3=new RegExp(`^rgba\\(${Pa},${Pa},${Pa},${xl}\\)$`),r3=new RegExp(`^hsl\\(${xl},${Pa},${Pa}\\)$`),o3=new RegExp(`^hsla\\(${xl},${Pa},${Pa},${xl}\\)$`),Gj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pb(Kl,wl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yj,formatHex:Yj,formatHex8:l3,formatHsl:c3,formatRgb:Qj,toString:Qj});function Yj(){return this.rgb().formatHex()}function l3(){return this.rgb().formatHex8()}function c3(){return Y1(this).formatHsl()}function Qj(){return this.rgb().formatRgb()}function wl(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=t3.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Zj(t):n===3?new wn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=n3.exec(e))?new wn(t[1],t[2],t[3],1):(t=a3.exec(e))?new wn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=s3.exec(e))?Bc(t[1],t[2],t[3],t[4]):(t=i3.exec(e))?Bc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=r3.exec(e))?e0(t[1],t[2]/100,t[3]/100,1):(t=o3.exec(e))?e0(t[1],t[2]/100,t[3]/100,t[4]):Gj.hasOwnProperty(e)?Zj(Gj[e]):e==="transparent"?new wn(NaN,NaN,NaN,0):null}function Zj(e){return new wn(e>>16&255,e>>8&255,e&255,1)}function Bc(e,t,n,a){return a<=0&&(e=t=n=NaN),new wn(e,t,n,a)}function d3(e){return e instanceof Kl||(e=wl(e)),e?(e=e.rgb(),new wn(e.r,e.g,e.b,e.opacity)):new wn}function mg(e,t,n,a){return arguments.length===1?d3(e):new wn(e,t,n,a??1)}function wn(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}Pb(wn,mg,G1(Kl,{brighter(e){return e=e==null?yu:Math.pow(yu,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yl:Math.pow(yl,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wn(xi(this.r),xi(this.g),xi(this.b),xu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xj,formatHex:Xj,formatHex8:u3,formatRgb:Jj,toString:Jj}));function Xj(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}`}function u3(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}${ui((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jj(){const e=xu(this.opacity);return`${e===1?"rgb(":"rgba("}${xi(this.r)}, ${xi(this.g)}, ${xi(this.b)}${e===1?")":`, ${e})`}`}function xu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ui(e){return e=xi(e),(e<16?"0":"")+e.toString(16)}function e0(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new la(e,t,n,a)}function Y1(e){if(e instanceof la)return new la(e.h,e.s,e.l,e.opacity);if(e instanceof Kl||(e=wl(e)),!e)return new la;if(e instanceof la)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,i=Math.min(t,n,a),r=Math.max(t,n,a),o=NaN,l=r-i,c=(r+i)/2;return l?(t===r?o=(n-a)/l+(n<a)*6:n===r?o=(a-t)/l+2:o=(t-n)/l+4,l/=c<.5?r+i:2-r-i,o*=60):l=c>0&&c<1?0:o,new la(o,l,c,e.opacity)}function p3(e,t,n,a){return arguments.length===1?Y1(e):new la(e,t,n,a??1)}function la(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}Pb(la,p3,G1(Kl,{brighter(e){return e=e==null?yu:Math.pow(yu,e),new la(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yl:Math.pow(yl,e),new la(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,i=2*n-a;return new wn(rh(e>=240?e-240:e+120,i,a),rh(e,i,a),rh(e<120?e+240:e-120,i,a),this.opacity)},clamp(){return new la(t0(this.h),$c(this.s),$c(this.l),xu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xu(this.opacity);return`${e===1?"hsl(":"hsla("}${t0(this.h)}, ${$c(this.s)*100}%, ${$c(this.l)*100}%${e===1?")":`, ${e})`}`}}));function t0(e){return e=(e||0)%360,e<0?e+360:e}function $c(e){return Math.max(0,Math.min(1,e||0))}function rh(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ab=e=>()=>e;function m3(e,t){return function(n){return e+n*t}}function h3(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function f3(e){return(e=+e)==1?Q1:function(t,n){return n-t?h3(t,n,e):Ab(isNaN(t)?n:t)}}function Q1(e,t){var n=t-e;return n?m3(e,n):Ab(isNaN(e)?t:e)}const n0=function e(t){var n=f3(t);function a(i,r){var o=n((i=mg(i)).r,(r=mg(r)).r),l=n(i.g,r.g),c=n(i.b,r.b),d=Q1(i.opacity,r.opacity);return function(u){return i.r=o(u),i.g=l(u),i.b=c(u),i.opacity=d(u),i+""}}return a.gamma=e,a}(1);function g3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),i;return function(r){for(i=0;i<n;++i)a[i]=e[i]*(1-r)+t[i]*r;return a}}function v3(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function b3(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,i=new Array(a),r=new Array(n),o;for(o=0;o<a;++o)i[o]=Hr(e[o],t[o]);for(;o<n;++o)r[o]=t[o];return function(l){for(o=0;o<a;++o)r[o]=i[o](l);return r}}function y3(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function wu(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function x3(e,t){var n={},a={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Hr(e[i],t[i]):a[i]=t[i];return function(r){for(i in n)a[i]=n[i](r);return a}}var hg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oh=new RegExp(hg.source,"g");function w3(e){return function(){return e}}function j3(e){return function(t){return e(t)+""}}function S3(e,t){var n=hg.lastIndex=oh.lastIndex=0,a,i,r,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=hg.exec(e))&&(i=oh.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),l[o]?l[o]+=r:l[++o]=r),(a=a[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:wu(a,i)})),n=oh.lastIndex;return n<t.length&&(r=t.slice(n),l[o]?l[o]+=r:l[++o]=r),l.length<2?c[0]?j3(c[0].x):w3(t):(t=c.length,function(d){for(var u=0,p;u<t;++u)l[(p=c[u]).i]=p.x(d);return l.join("")})}function Hr(e,t){var n=typeof t,a;return t==null||n==="boolean"?Ab(t):(n==="number"?wu:n==="string"?(a=wl(t))?(t=a,n0):S3:t instanceof wl?n0:t instanceof Date?y3:v3(t)?g3:Array.isArray(t)?b3:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?x3:wu)(e,t)}function Eb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function N3(e,t){t===void 0&&(t=e,e=Hr);for(var n=0,a=t.length-1,i=t[0],r=new Array(a<0?0:a);n<a;)r[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return r[l](o-l)}}function C3(e){return function(){return e}}function ju(e){return+e}var a0=[0,1];function rn(e){return e}function fg(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:C3(isNaN(t)?NaN:.5)}function k3(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function P3(e,t,n){var a=e[0],i=e[1],r=t[0],o=t[1];return i<a?(a=fg(i,a),r=n(o,r)):(a=fg(a,i),r=n(r,o)),function(l){return r(a(l))}}function A3(e,t,n){var a=Math.min(e.length,t.length)-1,i=new Array(a),r=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)i[o]=fg(e[o],e[o+1]),r[o]=n(t[o],t[o+1]);return function(l){var c=Hl(e,l,1,a)-1;return r[c](i[c](l))}}function Vl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Bp(){var e=a0,t=a0,n=Hr,a,i,r,o=rn,l,c,d;function u(){var h=Math.min(e.length,t.length);return o!==rn&&(o=k3(e[0],e[h-1])),l=h>2?A3:P3,c=d=null,p}function p(h){return h==null||isNaN(h=+h)?r:(c||(c=l(e.map(a),t,n)))(a(o(h)))}return p.invert=function(h){return o(i((d||(d=l(t,e.map(a),wu)))(h)))},p.domain=function(h){return arguments.length?(e=Array.from(h,ju),u()):e.slice()},p.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},p.rangeRound=function(h){return t=Array.from(h),n=Eb,u()},p.clamp=function(h){return arguments.length?(o=h?!0:rn,u()):o!==rn},p.interpolate=function(h){return arguments.length?(n=h,u()):n},p.unknown=function(h){return arguments.length?(r=h,p):r},function(h,f){return a=h,i=f,u()}}function Tb(){return Bp()(rn,rn)}function E3(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Su(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Mr(e){return e=Su(Math.abs(e)),e?e[1]:NaN}function T3(e,t){return function(n,a){for(var i=n.length,r=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),r.push(n.substring(i-=l,i+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return r.reverse().join(t)}}function I3(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var O3=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jl(e){if(!(t=O3.exec(e)))throw new Error("invalid format: "+e);var t;return new Ib({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}jl.prototype=Ib.prototype;function Ib(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ib.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function L3(e){e:for(var t=e.length,n=1,a=-1,i;n<t;++n)switch(e[n]){case".":a=i=n;break;case"0":a===0&&(a=n),i=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(i+1):e}var Z1;function M3(e,t){var n=Su(e,t);if(!n)return e+"";var a=n[0],i=n[1],r=i-(Z1=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=a.length;return r===o?a:r>o?a+new Array(r-o+1).join("0"):r>0?a.slice(0,r)+"."+a.slice(r):"0."+new Array(1-r).join("0")+Su(e,Math.max(0,t+r-1))[0]}function s0(e,t){var n=Su(e,t);if(!n)return e+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const i0={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:E3,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>s0(e*100,t),r:s0,s:M3,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function r0(e){return e}var o0=Array.prototype.map,l0=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function D3(e){var t=e.grouping===void 0||e.thousands===void 0?r0:T3(o0.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?r0:I3(o0.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(p){p=jl(p);var h=p.fill,f=p.align,g=p.sign,v=p.symbol,y=p.zero,b=p.width,x=p.comma,w=p.precision,j=p.trim,S=p.type;S==="n"?(x=!0,S="g"):i0[S]||(w===void 0&&(w=12),j=!0,S="g"),(y||h==="0"&&f==="=")&&(y=!0,h="0",f="=");var k=v==="$"?n:v==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",T=v==="$"?a:/[%p]/.test(S)?o:"",L=i0[S],F=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function O(M){var P=k,D=T,E,N,R;if(S==="c")D=L(M)+D,M="";else{M=+M;var C=M<0||1/M<0;if(M=isNaN(M)?c:L(Math.abs(M),w),j&&(M=L3(M)),C&&+M==0&&g!=="+"&&(C=!1),P=(C?g==="("?g:l:g==="-"||g==="("?"":g)+P,D=(S==="s"?l0[8+Z1/3]:"")+D+(C&&g==="("?")":""),F){for(E=-1,N=M.length;++E<N;)if(R=M.charCodeAt(E),48>R||R>57){D=(R===46?i+M.slice(E+1):M.slice(E))+D,M=M.slice(0,E);break}}}x&&!y&&(M=t(M,1/0));var A=P.length+M.length+D.length,_=A<b?new Array(b-A+1).join(h):"";switch(x&&y&&(M=t(_+M,_.length?b-D.length:1/0),_=""),f){case"<":M=P+M+D+_;break;case"=":M=P+_+M+D;break;case"^":M=_.slice(0,A=_.length>>1)+P+M+D+_.slice(A);break;default:M=_+P+M+D;break}return r(M)}return O.toString=function(){return p+""},O}function u(p,h){var f=d((p=jl(p),p.type="f",p)),g=Math.max(-8,Math.min(8,Math.floor(Mr(h)/3)))*3,v=Math.pow(10,-g),y=l0[8+g/3];return function(b){return f(v*b)+y}}return{format:d,formatPrefix:u}}var Uc,Ob,X1;F3({thousands:",",grouping:[3],currency:["$",""]});function F3(e){return Uc=D3(e),Ob=Uc.format,X1=Uc.formatPrefix,Uc}function z3(e){return Math.max(0,-Mr(Math.abs(e)))}function R3(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mr(t)/3)))*3-Mr(Math.abs(e)))}function _3(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Mr(t)-Mr(e))+1}function J1(e,t,n,a){var i=ug(e,t,n),r;switch(a=jl(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(r=R3(i,o))&&(a.precision=r),X1(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(r=_3(i,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=r-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(r=z3(i))&&(a.precision=r-(a.type==="%")*2);break}}return Ob(a)}function Ys(e){var t=e.domain;return e.ticks=function(n){var a=t();return cg(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var i=t();return J1(i[0],i[i.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),i=0,r=a.length-1,o=a[i],l=a[r],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=i,i=r,r=d);u-- >0;){if(d=dg(o,l,n),d===c)return a[i]=o,a[r]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function eE(){var e=Tb();return e.copy=function(){return Vl(e,eE())},Jn.apply(e,arguments),Ys(e)}function tE(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,ju),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return tE(e).unknown(t)},e=arguments.length?Array.from(e,ju):[0,1],Ys(n)}function nE(e,t){e=e.slice();var n=0,a=e.length-1,i=e[n],r=e[a],o;return r<i&&(o=n,n=a,a=o,o=i,i=r,r=o),e[n]=t.floor(i),e[a]=t.ceil(r),e}function c0(e){return Math.log(e)}function d0(e){return Math.exp(e)}function B3(e){return-Math.log(-e)}function $3(e){return-Math.exp(-e)}function U3(e){return isFinite(e)?+("1e"+e):e<0?0:e}function W3(e){return e===10?U3:e===Math.E?Math.exp:t=>Math.pow(e,t)}function q3(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function u0(e){return(t,n)=>-e(-t,n)}function Lb(e){const t=e(c0,d0),n=t.domain;let a=10,i,r;function o(){return i=q3(a),r=W3(a),n()[0]<0?(i=u0(i),r=u0(r),e(B3,$3)):e(c0,d0),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let d=c[0],u=c[c.length-1];const p=u<d;p&&([d,u]=[u,d]);let h=i(d),f=i(u),g,v;const y=l==null?10:+l;let b=[];if(!(a%1)&&f-h<y){if(h=Math.floor(h),f=Math.ceil(f),d>0){for(;h<=f;++h)for(g=1;g<a;++g)if(v=h<0?g/r(-h):g*r(h),!(v<d)){if(v>u)break;b.push(v)}}else for(;h<=f;++h)for(g=a-1;g>=1;--g)if(v=h>0?g/r(-h):g*r(h),!(v<d)){if(v>u)break;b.push(v)}b.length*2<y&&(b=cg(d,u,y))}else b=cg(h,f,Math.min(f-h,y)).map(r);return p?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=jl(c)).precision==null&&(c.trim=!0),c=Ob(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return u=>{let p=u/r(Math.round(i(u)));return p*a<a-.5&&(p*=a),p<=d?c(u):""}},t.nice=()=>n(nE(n(),{floor:l=>r(Math.floor(i(l))),ceil:l=>r(Math.ceil(i(l)))})),t}function aE(){const e=Lb(Bp()).domain([1,10]);return e.copy=()=>Vl(e,aE()).base(e.base()),Jn.apply(e,arguments),e}function p0(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function m0(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Mb(e){var t=1,n=e(p0(t),m0(t));return n.constant=function(a){return arguments.length?e(p0(t=+a),m0(t)):t},Ys(n)}function sE(){var e=Mb(Bp());return e.copy=function(){return Vl(e,sE()).constant(e.constant())},Jn.apply(e,arguments)}function h0(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function H3(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function K3(e){return e<0?-e*e:e*e}function Db(e){var t=e(rn,rn),n=1;function a(){return n===1?e(rn,rn):n===.5?e(H3,K3):e(h0(n),h0(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,a()):n},Ys(t)}function Fb(){var e=Db(Bp());return e.copy=function(){return Vl(e,Fb()).exponent(e.exponent())},Jn.apply(e,arguments),e}function V3(){return Fb.apply(null,arguments).exponent(.5)}function f0(e){return Math.sign(e)*e*e}function G3(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function iE(){var e=Tb(),t=[0,1],n=!1,a;function i(r){var o=G3(e(r));return isNaN(o)?a:n?Math.round(o):o}return i.invert=function(r){return e.invert(f0(r))},i.domain=function(r){return arguments.length?(e.domain(r),i):e.domain()},i.range=function(r){return arguments.length?(e.range((t=Array.from(r,ju)).map(f0)),i):t.slice()},i.rangeRound=function(r){return i.range(r).round(!0)},i.round=function(r){return arguments.length?(n=!!r,i):n},i.clamp=function(r){return arguments.length?(e.clamp(r),i):e.clamp()},i.unknown=function(r){return arguments.length?(a=r,i):a},i.copy=function(){return iE(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},Jn.apply(i,arguments),Ys(i)}function rE(){var e=[],t=[],n=[],a;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=XW(e,o/l);return r}function r(o){return o==null||isNaN(o=+o)?a:t[Hl(n,o)]}return r.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},r.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Rs),i()},r.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},r.unknown=function(o){return arguments.length?(a=o,r):a},r.quantiles=function(){return n.slice()},r.copy=function(){return rE().domain(e).range(t).unknown(a)},Jn.apply(r,arguments)}function oE(){var e=0,t=1,n=1,a=[.5],i=[0,1],r;function o(c){return c!=null&&c<=c?i[Hl(a,c,0,n)]:r}function l(){var c=-1;for(a=new Array(n);++c<n;)a[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=n?[a[n-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(r=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return oE().domain([e,t]).range(i).unknown(r)},Jn.apply(Ys(o),arguments)}function lE(){var e=[.5],t=[0,1],n,a=1;function i(r){return r!=null&&r<=r?t[Hl(e,r,0,a)]:n}return i.domain=function(r){return arguments.length?(e=Array.from(r),a=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(r){return arguments.length?(t=Array.from(r),a=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(r){var o=t.indexOf(r);return[e[o-1],e[o]]},i.unknown=function(r){return arguments.length?(n=r,i):n},i.copy=function(){return lE().domain(e).range(t).unknown(n)},Jn.apply(i,arguments)}const lh=new Date,ch=new Date;function Et(e,t,n,a){function i(r){return e(r=arguments.length===0?new Date:new Date(+r)),r}return i.floor=r=>(e(r=new Date(+r)),r),i.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),i.round=r=>{const o=i(r),l=i.ceil(r);return r-o<l-r?o:l},i.offset=(r,o)=>(t(r=new Date(+r),o==null?1:Math.floor(o)),r),i.range=(r,o,l)=>{const c=[];if(r=i.ceil(r),l=l==null?1:Math.floor(l),!(r<o)||!(l>0))return c;let d;do c.push(d=new Date(+r)),t(r,l),e(r);while(d<r&&r<o);return c},i.filter=r=>Et(o=>{if(o>=o)for(;e(o),!r(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!r(o););else for(;--l>=0;)for(;t(o,1),!r(o););}),n&&(i.count=(r,o)=>(lh.setTime(+r),ch.setTime(+o),e(lh),e(ch),Math.floor(n(lh,ch))),i.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?i.filter(a?o=>a(o)%r===0:o=>i.count(0,o)%r===0):i)),i}const Nu=Et(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Nu.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Et(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Nu);Nu.range;const Ua=1e3,Kn=Ua*60,Wa=Kn*60,es=Wa*24,zb=es*7,g0=es*30,dh=es*365,pi=Et(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ua)},(e,t)=>(t-e)/Ua,e=>e.getUTCSeconds());pi.range;const Rb=Et(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua)},(e,t)=>{e.setTime(+e+t*Kn)},(e,t)=>(t-e)/Kn,e=>e.getMinutes());Rb.range;const _b=Et(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Kn)},(e,t)=>(t-e)/Kn,e=>e.getUTCMinutes());_b.range;const Bb=Et(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua-e.getMinutes()*Kn)},(e,t)=>{e.setTime(+e+t*Wa)},(e,t)=>(t-e)/Wa,e=>e.getHours());Bb.range;const $b=Et(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Wa)},(e,t)=>(t-e)/Wa,e=>e.getUTCHours());$b.range;const Gl=Et(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kn)/es,e=>e.getDate()-1);Gl.range;const $p=Et(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/es,e=>e.getUTCDate()-1);$p.range;const cE=Et(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/es,e=>Math.floor(e/es));cE.range;function zi(e){return Et(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Kn)/zb)}const Up=zi(0),Cu=zi(1),Y3=zi(2),Q3=zi(3),Dr=zi(4),Z3=zi(5),X3=zi(6);Up.range;Cu.range;Y3.range;Q3.range;Dr.range;Z3.range;X3.range;function Ri(e){return Et(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/zb)}const Wp=Ri(0),ku=Ri(1),J3=Ri(2),eq=Ri(3),Fr=Ri(4),tq=Ri(5),nq=Ri(6);Wp.range;ku.range;J3.range;eq.range;Fr.range;tq.range;nq.range;const Ub=Et(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ub.range;const Wb=Et(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Wb.range;const ts=Et(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ts.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Et(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ts.range;const ns=Et(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ns.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Et(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ns.range;function dE(e,t,n,a,i,r){const o=[[pi,1,Ua],[pi,5,5*Ua],[pi,15,15*Ua],[pi,30,30*Ua],[r,1,Kn],[r,5,5*Kn],[r,15,15*Kn],[r,30,30*Kn],[i,1,Wa],[i,3,3*Wa],[i,6,6*Wa],[i,12,12*Wa],[a,1,es],[a,2,2*es],[n,1,zb],[t,1,g0],[t,3,3*g0],[e,1,dh]];function l(d,u,p){const h=u<d;h&&([d,u]=[u,d]);const f=p&&typeof p.range=="function"?p:c(d,u,p),g=f?f.range(d,+u+1):[];return h?g.reverse():g}function c(d,u,p){const h=Math.abs(u-d)/p,f=Nb(([,,y])=>y).right(o,h);if(f===o.length)return e.every(ug(d/dh,u/dh,p));if(f===0)return Nu.every(Math.max(ug(d,u,p),1));const[g,v]=o[h/o[f-1][2]<o[f][2]/h?f-1:f];return g.every(v)}return[l,c]}const[aq,sq]=dE(ns,Wb,Wp,cE,$b,_b),[iq,rq]=dE(ts,Ub,Up,Gl,Bb,Rb);function uh(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ph(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function go(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function oq(e){var t=e.dateTime,n=e.date,a=e.time,i=e.periods,r=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=vo(i),u=bo(i),p=vo(r),h=bo(r),f=vo(o),g=bo(o),v=vo(l),y=bo(l),b=vo(c),x=bo(c),w={a:C,A,b:_,B,c:null,d:j0,e:j0,f:Tq,g:Bq,G:Uq,H:Pq,I:Aq,j:Eq,L:uE,m:Iq,M:Oq,p:H,q:Z,Q:C0,s:k0,S:Lq,u:Mq,U:Dq,V:Fq,w:zq,W:Rq,x:null,X:null,y:_q,Y:$q,Z:Wq,"%":N0},j={a:ie,A:U,b:G,B:V,c:null,d:S0,e:S0,f:Vq,g:aH,G:iH,H:qq,I:Hq,j:Kq,L:mE,m:Gq,M:Yq,p:$,q,Q:C0,s:k0,S:Qq,u:Zq,U:Xq,V:Jq,w:eH,W:tH,x:null,X:null,y:nH,Y:sH,Z:rH,"%":N0},S={a:O,A:M,b:P,B:D,c:E,d:x0,e:x0,f:Sq,g:y0,G:b0,H:w0,I:w0,j:yq,L:jq,m:bq,M:xq,p:F,q:vq,Q:Cq,s:kq,S:wq,u:pq,U:mq,V:hq,w:uq,W:fq,x:N,X:R,y:y0,Y:b0,Z:gq,"%":Nq};w.x=k(n,w),w.X=k(a,w),w.c=k(t,w),j.x=k(n,j),j.X=k(a,j),j.c=k(t,j);function k(z,ee){return function(J){var X=[],ne=-1,ue=0,fe=z.length,we,Ae,Q;for(J instanceof Date||(J=new Date(+J));++ne<fe;)z.charCodeAt(ne)===37&&(X.push(z.slice(ue,ne)),(Ae=v0[we=z.charAt(++ne)])!=null?we=z.charAt(++ne):Ae=we==="e"?" ":"0",(Q=ee[we])&&(we=Q(J,Ae)),X.push(we),ue=ne+1);return X.push(z.slice(ue,ne)),X.join("")}}function T(z,ee){return function(J){var X=go(1900,void 0,1),ne=L(X,z,J+="",0),ue,fe;if(ne!=J.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(ee&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(ue=ph(go(X.y,0,1)),fe=ue.getUTCDay(),ue=fe>4||fe===0?ku.ceil(ue):ku(ue),ue=$p.offset(ue,(X.V-1)*7),X.y=ue.getUTCFullYear(),X.m=ue.getUTCMonth(),X.d=ue.getUTCDate()+(X.w+6)%7):(ue=uh(go(X.y,0,1)),fe=ue.getDay(),ue=fe>4||fe===0?Cu.ceil(ue):Cu(ue),ue=Gl.offset(ue,(X.V-1)*7),X.y=ue.getFullYear(),X.m=ue.getMonth(),X.d=ue.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),fe="Z"in X?ph(go(X.y,0,1)).getUTCDay():uh(go(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(fe+5)%7:X.w+X.U*7-(fe+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,ph(X)):uh(X)}}function L(z,ee,J,X){for(var ne=0,ue=ee.length,fe=J.length,we,Ae;ne<ue;){if(X>=fe)return-1;if(we=ee.charCodeAt(ne++),we===37){if(we=ee.charAt(ne++),Ae=S[we in v0?ee.charAt(ne++):we],!Ae||(X=Ae(z,J,X))<0)return-1}else if(we!=J.charCodeAt(X++))return-1}return X}function F(z,ee,J){var X=d.exec(ee.slice(J));return X?(z.p=u.get(X[0].toLowerCase()),J+X[0].length):-1}function O(z,ee,J){var X=f.exec(ee.slice(J));return X?(z.w=g.get(X[0].toLowerCase()),J+X[0].length):-1}function M(z,ee,J){var X=p.exec(ee.slice(J));return X?(z.w=h.get(X[0].toLowerCase()),J+X[0].length):-1}function P(z,ee,J){var X=b.exec(ee.slice(J));return X?(z.m=x.get(X[0].toLowerCase()),J+X[0].length):-1}function D(z,ee,J){var X=v.exec(ee.slice(J));return X?(z.m=y.get(X[0].toLowerCase()),J+X[0].length):-1}function E(z,ee,J){return L(z,t,ee,J)}function N(z,ee,J){return L(z,n,ee,J)}function R(z,ee,J){return L(z,a,ee,J)}function C(z){return o[z.getDay()]}function A(z){return r[z.getDay()]}function _(z){return c[z.getMonth()]}function B(z){return l[z.getMonth()]}function H(z){return i[+(z.getHours()>=12)]}function Z(z){return 1+~~(z.getMonth()/3)}function ie(z){return o[z.getUTCDay()]}function U(z){return r[z.getUTCDay()]}function G(z){return c[z.getUTCMonth()]}function V(z){return l[z.getUTCMonth()]}function $(z){return i[+(z.getUTCHours()>=12)]}function q(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var ee=k(z+="",w);return ee.toString=function(){return z},ee},parse:function(z){var ee=T(z+="",!1);return ee.toString=function(){return z},ee},utcFormat:function(z){var ee=k(z+="",j);return ee.toString=function(){return z},ee},utcParse:function(z){var ee=T(z+="",!0);return ee.toString=function(){return z},ee}}}var v0={"-":"",_:" ",0:"0"},Ut=/^\s*\d+/,lq=/^%/,cq=/[\\^$*+?|[\]().{}]/g;function Re(e,t,n){var a=e<0?"-":"",i=(a?-e:e)+"",r=i.length;return a+(r<n?new Array(n-r+1).join(t)+i:i)}function dq(e){return e.replace(cq,"\\$&")}function vo(e){return new RegExp("^(?:"+e.map(dq).join("|")+")","i")}function bo(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function uq(e,t,n){var a=Ut.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function pq(e,t,n){var a=Ut.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function mq(e,t,n){var a=Ut.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function hq(e,t,n){var a=Ut.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function fq(e,t,n){var a=Ut.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function b0(e,t,n){var a=Ut.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function y0(e,t,n){var a=Ut.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function gq(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function vq(e,t,n){var a=Ut.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function bq(e,t,n){var a=Ut.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function x0(e,t,n){var a=Ut.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function yq(e,t,n){var a=Ut.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function w0(e,t,n){var a=Ut.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function xq(e,t,n){var a=Ut.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function wq(e,t,n){var a=Ut.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function jq(e,t,n){var a=Ut.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function Sq(e,t,n){var a=Ut.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function Nq(e,t,n){var a=lq.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function Cq(e,t,n){var a=Ut.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function kq(e,t,n){var a=Ut.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function j0(e,t){return Re(e.getDate(),t,2)}function Pq(e,t){return Re(e.getHours(),t,2)}function Aq(e,t){return Re(e.getHours()%12||12,t,2)}function Eq(e,t){return Re(1+Gl.count(ts(e),e),t,3)}function uE(e,t){return Re(e.getMilliseconds(),t,3)}function Tq(e,t){return uE(e,t)+"000"}function Iq(e,t){return Re(e.getMonth()+1,t,2)}function Oq(e,t){return Re(e.getMinutes(),t,2)}function Lq(e,t){return Re(e.getSeconds(),t,2)}function Mq(e){var t=e.getDay();return t===0?7:t}function Dq(e,t){return Re(Up.count(ts(e)-1,e),t,2)}function pE(e){var t=e.getDay();return t>=4||t===0?Dr(e):Dr.ceil(e)}function Fq(e,t){return e=pE(e),Re(Dr.count(ts(e),e)+(ts(e).getDay()===4),t,2)}function zq(e){return e.getDay()}function Rq(e,t){return Re(Cu.count(ts(e)-1,e),t,2)}function _q(e,t){return Re(e.getFullYear()%100,t,2)}function Bq(e,t){return e=pE(e),Re(e.getFullYear()%100,t,2)}function $q(e,t){return Re(e.getFullYear()%1e4,t,4)}function Uq(e,t){var n=e.getDay();return e=n>=4||n===0?Dr(e):Dr.ceil(e),Re(e.getFullYear()%1e4,t,4)}function Wq(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Re(t/60|0,"0",2)+Re(t%60,"0",2)}function S0(e,t){return Re(e.getUTCDate(),t,2)}function qq(e,t){return Re(e.getUTCHours(),t,2)}function Hq(e,t){return Re(e.getUTCHours()%12||12,t,2)}function Kq(e,t){return Re(1+$p.count(ns(e),e),t,3)}function mE(e,t){return Re(e.getUTCMilliseconds(),t,3)}function Vq(e,t){return mE(e,t)+"000"}function Gq(e,t){return Re(e.getUTCMonth()+1,t,2)}function Yq(e,t){return Re(e.getUTCMinutes(),t,2)}function Qq(e,t){return Re(e.getUTCSeconds(),t,2)}function Zq(e){var t=e.getUTCDay();return t===0?7:t}function Xq(e,t){return Re(Wp.count(ns(e)-1,e),t,2)}function hE(e){var t=e.getUTCDay();return t>=4||t===0?Fr(e):Fr.ceil(e)}function Jq(e,t){return e=hE(e),Re(Fr.count(ns(e),e)+(ns(e).getUTCDay()===4),t,2)}function eH(e){return e.getUTCDay()}function tH(e,t){return Re(ku.count(ns(e)-1,e),t,2)}function nH(e,t){return Re(e.getUTCFullYear()%100,t,2)}function aH(e,t){return e=hE(e),Re(e.getUTCFullYear()%100,t,2)}function sH(e,t){return Re(e.getUTCFullYear()%1e4,t,4)}function iH(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Fr(e):Fr.ceil(e),Re(e.getUTCFullYear()%1e4,t,4)}function rH(){return"+0000"}function N0(){return"%"}function C0(e){return+e}function k0(e){return Math.floor(+e/1e3)}var $i,fE,gE;oH({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oH(e){return $i=oq(e),fE=$i.format,$i.parse,gE=$i.utcFormat,$i.utcParse,$i}function lH(e){return new Date(e)}function cH(e){return e instanceof Date?+e:+new Date(+e)}function qb(e,t,n,a,i,r,o,l,c,d){var u=Tb(),p=u.invert,h=u.domain,f=d(".%L"),g=d(":%S"),v=d("%I:%M"),y=d("%I %p"),b=d("%a %d"),x=d("%b %d"),w=d("%B"),j=d("%Y");function S(k){return(c(k)<k?f:l(k)<k?g:o(k)<k?v:r(k)<k?y:a(k)<k?i(k)<k?b:x:n(k)<k?w:j)(k)}return u.invert=function(k){return new Date(p(k))},u.domain=function(k){return arguments.length?h(Array.from(k,cH)):h().map(lH)},u.ticks=function(k){var T=h();return e(T[0],T[T.length-1],k??10)},u.tickFormat=function(k,T){return T==null?S:d(T)},u.nice=function(k){var T=h();return(!k||typeof k.range!="function")&&(k=t(T[0],T[T.length-1],k??10)),k?h(nE(T,k)):u},u.copy=function(){return Vl(u,qb(e,t,n,a,i,r,o,l,c,d))},u}function dH(){return Jn.apply(qb(iq,rq,ts,Ub,Up,Gl,Bb,Rb,pi,fE).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function uH(){return Jn.apply(qb(aq,sq,ns,Wb,Wp,$p,$b,_b,pi,gE).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function qp(){var e=0,t=1,n,a,i,r,o=rn,l=!1,c;function d(p){return p==null||isNaN(p=+p)?c:o(i===0?.5:(p=(r(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t]=p,n=r(e=+e),a=r(t=+t),i=n===a?0:1/(a-n),d):[e,t]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function u(p){return function(h){var f,g;return arguments.length?([f,g]=h,o=p(f,g),d):[o(0),o(1)]}}return d.range=u(Hr),d.rangeRound=u(Eb),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return r=p,n=p(e),a=p(t),i=n===a?0:1/(a-n),d}}function Qs(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function vE(){var e=Ys(qp()(rn));return e.copy=function(){return Qs(e,vE())},ds.apply(e,arguments)}function bE(){var e=Lb(qp()).domain([1,10]);return e.copy=function(){return Qs(e,bE()).base(e.base())},ds.apply(e,arguments)}function yE(){var e=Mb(qp());return e.copy=function(){return Qs(e,yE()).constant(e.constant())},ds.apply(e,arguments)}function Hb(){var e=Db(qp());return e.copy=function(){return Qs(e,Hb()).exponent(e.exponent())},ds.apply(e,arguments)}function pH(){return Hb.apply(null,arguments).exponent(.5)}function xE(){var e=[],t=rn;function n(a){if(a!=null&&!isNaN(a=+a))return t((Hl(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let i of a)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Rs),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,i)=>t(i/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(i,r)=>ZW(e,r/a))},n.copy=function(){return xE(t).domain(e)},ds.apply(n,arguments)}function Hp(){var e=0,t=.5,n=1,a=1,i,r,o,l,c,d=rn,u,p=!1,h;function f(v){return isNaN(v=+v)?h:(v=.5+((v=+u(v))-r)*(a*v<a*r?l:c),d(p?Math.max(0,Math.min(1,v)):v))}f.domain=function(v){return arguments.length?([e,t,n]=v,i=u(e=+e),r=u(t=+t),o=u(n=+n),l=i===r?0:.5/(r-i),c=r===o?0:.5/(o-r),a=r<i?-1:1,f):[e,t,n]},f.clamp=function(v){return arguments.length?(p=!!v,f):p},f.interpolator=function(v){return arguments.length?(d=v,f):d};function g(v){return function(y){var b,x,w;return arguments.length?([b,x,w]=y,d=N3(v,[b,x,w]),f):[d(0),d(.5),d(1)]}}return f.range=g(Hr),f.rangeRound=g(Eb),f.unknown=function(v){return arguments.length?(h=v,f):h},function(v){return u=v,i=v(e),r=v(t),o=v(n),l=i===r?0:.5/(r-i),c=r===o?0:.5/(o-r),a=r<i?-1:1,f}}function wE(){var e=Ys(Hp()(rn));return e.copy=function(){return Qs(e,wE())},ds.apply(e,arguments)}function jE(){var e=Lb(Hp()).domain([.1,1,10]);return e.copy=function(){return Qs(e,jE()).base(e.base())},ds.apply(e,arguments)}function SE(){var e=Mb(Hp());return e.copy=function(){return Qs(e,SE()).constant(e.constant())},ds.apply(e,arguments)}function Kb(){var e=Db(Hp());return e.copy=function(){return Qs(e,Kb()).exponent(e.exponent())},ds.apply(e,arguments)}function mH(){return Kb.apply(null,arguments).exponent(.5)}const Eo=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kb,scaleDiverging:wE,scaleDivergingLog:jE,scaleDivergingPow:Kb,scaleDivergingSqrt:mH,scaleDivergingSymlog:SE,scaleIdentity:tE,scaleImplicit:pg,scaleLinear:eE,scaleLog:aE,scaleOrdinal:Cb,scalePoint:e3,scalePow:Fb,scaleQuantile:rE,scaleQuantize:oE,scaleRadial:iE,scaleSequential:vE,scaleSequentialLog:bE,scaleSequentialPow:Hb,scaleSequentialQuantile:xE,scaleSequentialSqrt:pH,scaleSequentialSymlog:yE,scaleSqrt:V3,scaleSymlog:sE,scaleThreshold:lE,scaleTime:dH,scaleUtc:uH,tickFormat:J1},Symbol.toStringTag,{value:"Module"}));var Zs=e=>e.chartData,hH=te([Zs],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Kp=(e,t,n,a)=>a?hH(e):Zs(e);function $s(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(bt(t)&&bt(n))return!0}return!1}function P0(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function NE(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,i,r;if(bt(n))i=n;else if(typeof n=="function")return;if(bt(a))r=a;else if(typeof a=="function")return;var o=[i,r];if($s(o))return o}}function fH(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,n);if($s(a))return P0(a,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,r]=e,o,l;if(i==="auto")t!=null&&(o=Math.min(...t));else if(ye(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&cj.test(i)){var c=cj.exec(i);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t==null?void 0:t[0];if(r==="auto")t!=null&&(l=Math.max(...t));else if(ye(r))l=r;else if(typeof r=="function")try{t!=null&&(l=r(t==null?void 0:t[1]))}catch{}else if(typeof r=="string"&&dj.test(r)){var u=dj.exec(r);if(u==null||t==null)l=void 0;else{var p=+u[1];l=t[1]+p}}else l=t==null?void 0:t[1];var h=[o,l];if($s(h))return t==null?h:P0(h,t,n)}}}var Kr=1e9,gH={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Gb,at=!0,Xn="[DecimalError] ",wi=Xn+"Invalid argument: ",Vb=Xn+"Exponent out of range: ",Vr=Math.floor,ri=Math.pow,vH=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Tn,Ft=1e7,Je=7,CE=9007199254740991,Pu=Vr(CE/Je),ve={};ve.absoluteValue=ve.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ve.comparedTo=ve.cmp=function(e){var t,n,a,i,r=this;if(e=new r.constructor(e),r.s!==e.s)return r.s||-e.s;if(r.e!==e.e)return r.e>e.e^r.s<0?1:-1;for(a=r.d.length,i=e.d.length,t=0,n=a<i?a:i;t<n;++t)if(r.d[t]!==e.d[t])return r.d[t]>e.d[t]^r.s<0?1:-1;return a===i?0:a>i^r.s<0?1:-1};ve.decimalPlaces=ve.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Je;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};ve.dividedBy=ve.div=function(e){return Ha(this,new this.constructor(e))};ve.dividedToIntegerBy=ve.idiv=function(e){var t=this,n=t.constructor;return Ge(Ha(t,new n(e),0,1),n.precision)};ve.equals=ve.eq=function(e){return!this.cmp(e)};ve.exponent=function(){return jt(this)};ve.greaterThan=ve.gt=function(e){return this.cmp(e)>0};ve.greaterThanOrEqualTo=ve.gte=function(e){return this.cmp(e)>=0};ve.isInteger=ve.isint=function(){return this.e>this.d.length-2};ve.isNegative=ve.isneg=function(){return this.s<0};ve.isPositive=ve.ispos=function(){return this.s>0};ve.isZero=function(){return this.s===0};ve.lessThan=ve.lt=function(e){return this.cmp(e)<0};ve.lessThanOrEqualTo=ve.lte=function(e){return this.cmp(e)<1};ve.logarithm=ve.log=function(e){var t,n=this,a=n.constructor,i=a.precision,r=i+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Tn))throw Error(Xn+"NaN");if(n.s<1)throw Error(Xn+(n.s?"NaN":"-Infinity"));return n.eq(Tn)?new a(0):(at=!1,t=Ha(Sl(n,r),Sl(e,r),r),at=!0,Ge(t,i))};ve.minus=ve.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?AE(t,e):kE(t,(e.s=-e.s,e))};ve.modulo=ve.mod=function(e){var t,n=this,a=n.constructor,i=a.precision;if(e=new a(e),!e.s)throw Error(Xn+"NaN");return n.s?(at=!1,t=Ha(n,e,0,1).times(e),at=!0,n.minus(t)):Ge(new a(n),i)};ve.naturalExponential=ve.exp=function(){return PE(this)};ve.naturalLogarithm=ve.ln=function(){return Sl(this)};ve.negated=ve.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ve.plus=ve.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?kE(t,e):AE(t,(e.s=-e.s,e))};ve.precision=ve.sd=function(e){var t,n,a,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(wi+e);if(t=jt(i)+1,a=i.d.length-1,n=a*Je+1,a=i.d[a],a){for(;a%10==0;a/=10)n--;for(a=i.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};ve.squareRoot=ve.sqrt=function(){var e,t,n,a,i,r,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Xn+"NaN")}for(e=jt(l),at=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=Na(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Vr((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(i.toString()),n=c.precision,i=o=n+3;;)if(r=a,a=r.plus(Ha(l,r,o+2)).times(.5),Na(r.d).slice(0,o)===(t=Na(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(Ge(r,n+1,0),r.times(r).eq(l)){a=r;break}}else if(t!="9999")break;o+=4}return at=!0,Ge(a,n)};ve.times=ve.mul=function(e){var t,n,a,i,r,o,l,c,d,u=this,p=u.constructor,h=u.d,f=(e=new p(e)).d;if(!u.s||!e.s)return new p(0);for(e.s*=u.s,n=u.e+e.e,c=h.length,d=f.length,c<d&&(r=h,h=f,f=r,o=c,c=d,d=o),r=[],o=c+d,a=o;a--;)r.push(0);for(a=d;--a>=0;){for(t=0,i=c+a;i>a;)l=r[i]+f[a]*h[i-a-1]+t,r[i--]=l%Ft|0,t=l/Ft|0;r[i]=(r[i]+t)%Ft|0}for(;!r[--o];)r.pop();return t?++n:r.shift(),e.d=r,e.e=n,at?Ge(e,p.precision):e};ve.toDecimalPlaces=ve.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Ta(e,0,Kr),t===void 0?t=a.rounding:Ta(t,0,8),Ge(n,e+jt(n)+1,t))};ve.toExponential=function(e,t){var n,a=this,i=a.constructor;return e===void 0?n=Ii(a,!0):(Ta(e,0,Kr),t===void 0?t=i.rounding:Ta(t,0,8),a=Ge(new i(a),e+1,t),n=Ii(a,!0,e+1)),n};ve.toFixed=function(e,t){var n,a,i=this,r=i.constructor;return e===void 0?Ii(i):(Ta(e,0,Kr),t===void 0?t=r.rounding:Ta(t,0,8),a=Ge(new r(i),e+jt(i)+1,t),n=Ii(a.abs(),!1,e+jt(a)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ve.toInteger=ve.toint=function(){var e=this,t=e.constructor;return Ge(new t(e),jt(e)+1,t.rounding)};ve.toNumber=function(){return+this};ve.toPower=ve.pow=function(e){var t,n,a,i,r,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Tn);if(l=new c(l),!l.s){if(e.s<1)throw Error(Xn+"Infinity");return l}if(l.eq(Tn))return l;if(a=c.precision,e.eq(Tn))return Ge(l,a);if(t=e.e,n=e.d.length-1,o=t>=n,r=l.s,o){if((n=u<0?-u:u)<=CE){for(i=new c(Tn),t=Math.ceil(a/Je+4),at=!1;n%2&&(i=i.times(l),E0(i.d,t)),n=Vr(n/2),n!==0;)l=l.times(l),E0(l.d,t);return at=!0,e.s<0?new c(Tn).div(i):Ge(i,a)}}else if(r<0)throw Error(Xn+"NaN");return r=r<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,at=!1,i=e.times(Sl(l,a+d)),at=!0,i=PE(i),i.s=r,i};ve.toPrecision=function(e,t){var n,a,i=this,r=i.constructor;return e===void 0?(n=jt(i),a=Ii(i,n<=r.toExpNeg||n>=r.toExpPos)):(Ta(e,1,Kr),t===void 0?t=r.rounding:Ta(t,0,8),i=Ge(new r(i),e,t),n=jt(i),a=Ii(i,e<=n||n<=r.toExpNeg,e)),a};ve.toSignificantDigits=ve.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Ta(e,1,Kr),t===void 0?t=a.rounding:Ta(t,0,8)),Ge(new a(n),e,t)};ve.toString=ve.valueOf=ve.val=ve.toJSON=ve[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=jt(e),n=e.constructor;return Ii(e,t<=n.toExpNeg||t>=n.toExpPos)};function kE(e,t){var n,a,i,r,o,l,c,d,u=e.constructor,p=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),at?Ge(t,p):t;if(c=e.d,d=t.d,o=e.e,i=t.e,c=c.slice(),r=o-i,r){for(r<0?(a=c,r=-r,l=d.length):(a=d,i=o,l=c.length),o=Math.ceil(p/Je),l=o>l?o+1:l+1,r>l&&(r=l,a.length=1),a.reverse();r--;)a.push(0);a.reverse()}for(l=c.length,r=d.length,l-r<0&&(r=l,a=d,d=c,c=a),n=0;r;)n=(c[--r]=c[r]+d[r]+n)/Ft|0,c[r]%=Ft;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,at?Ge(t,p):t}function Ta(e,t,n){if(e!==~~e||e<t||e>n)throw Error(wi+e)}function Na(e){var t,n,a,i=e.length-1,r="",o=e[0];if(i>0){for(r+=o,t=1;t<i;t++)a=e[t]+"",n=Je-a.length,n&&(r+=ws(n)),r+=a;o=e[t],a=o+"",n=Je-a.length,n&&(r+=ws(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return r+o}var Ha=function(){function e(a,i){var r,o=0,l=a.length;for(a=a.slice();l--;)r=a[l]*i+o,a[l]=r%Ft|0,o=r/Ft|0;return o&&a.unshift(o),a}function t(a,i,r,o){var l,c;if(r!=o)c=r>o?1:-1;else for(l=c=0;l<r;l++)if(a[l]!=i[l]){c=a[l]>i[l]?1:-1;break}return c}function n(a,i,r){for(var o=0;r--;)a[r]-=o,o=a[r]<i[r]?1:0,a[r]=o*Ft+a[r]-i[r];for(;!a[0]&&a.length>1;)a.shift()}return function(a,i,r,o){var l,c,d,u,p,h,f,g,v,y,b,x,w,j,S,k,T,L,F=a.constructor,O=a.s==i.s?1:-1,M=a.d,P=i.d;if(!a.s)return new F(a);if(!i.s)throw Error(Xn+"Division by zero");for(c=a.e-i.e,T=P.length,S=M.length,f=new F(O),g=f.d=[],d=0;P[d]==(M[d]||0);)++d;if(P[d]>(M[d]||0)&&--c,r==null?x=r=F.precision:o?x=r+(jt(a)-jt(i))+1:x=r,x<0)return new F(0);if(x=x/Je+2|0,d=0,T==1)for(u=0,P=P[0],x++;(d<S||u)&&x--;d++)w=u*Ft+(M[d]||0),g[d]=w/P|0,u=w%P|0;else{for(u=Ft/(P[0]+1)|0,u>1&&(P=e(P,u),M=e(M,u),T=P.length,S=M.length),j=T,v=M.slice(0,T),y=v.length;y<T;)v[y++]=0;L=P.slice(),L.unshift(0),k=P[0],P[1]>=Ft/2&&++k;do u=0,l=t(P,v,T,y),l<0?(b=v[0],T!=y&&(b=b*Ft+(v[1]||0)),u=b/k|0,u>1?(u>=Ft&&(u=Ft-1),p=e(P,u),h=p.length,y=v.length,l=t(p,v,h,y),l==1&&(u--,n(p,T<h?L:P,h))):(u==0&&(l=u=1),p=P.slice()),h=p.length,h<y&&p.unshift(0),n(v,p,y),l==-1&&(y=v.length,l=t(P,v,T,y),l<1&&(u++,n(v,T<y?L:P,y))),y=v.length):l===0&&(u++,v=[0]),g[d++]=u,l&&v[0]?v[y++]=M[j]||0:(v=[M[j]],y=1);while((j++<S||v[0]!==void 0)&&x--)}return g[0]||g.shift(),f.e=c,Ge(f,o?r+jt(f)+1:r)}}();function PE(e,t){var n,a,i,r,o,l,c=0,d=0,u=e.constructor,p=u.precision;if(jt(e)>16)throw Error(Vb+jt(e));if(!e.s)return new u(Tn);for(at=!1,l=p,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log(ri(2,d))/Math.LN10*2+5|0,l+=a,n=i=r=new u(Tn),u.precision=l;;){if(i=Ge(i.times(e),l),n=n.times(++c),o=r.plus(Ha(i,n,l)),Na(o.d).slice(0,l)===Na(r.d).slice(0,l)){for(;d--;)r=Ge(r.times(r),l);return u.precision=p,t==null?(at=!0,Ge(r,p)):r}r=o}}function jt(e){for(var t=e.e*Je,n=e.d[0];n>=10;n/=10)t++;return t}function mh(e,t,n){if(t>e.LN10.sd())throw at=!0,n&&(e.precision=n),Error(Xn+"LN10 precision limit exceeded");return Ge(new e(e.LN10),t)}function ws(e){for(var t="";e--;)t+="0";return t}function Sl(e,t){var n,a,i,r,o,l,c,d,u,p=1,h=10,f=e,g=f.d,v=f.constructor,y=v.precision;if(f.s<1)throw Error(Xn+(f.s?"NaN":"-Infinity"));if(f.eq(Tn))return new v(0);if(t==null?(at=!1,d=y):d=t,f.eq(10))return t==null&&(at=!0),mh(v,d);if(d+=h,v.precision=d,n=Na(g),a=n.charAt(0),r=jt(f),Math.abs(r)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)f=f.times(e),n=Na(f.d),a=n.charAt(0),p++;r=jt(f),a>1?(f=new v("0."+n),r++):f=new v(a+"."+n.slice(1))}else return c=mh(v,d+2,y).times(r+""),f=Sl(new v(a+"."+n.slice(1)),d-h).plus(c),v.precision=y,t==null?(at=!0,Ge(f,y)):f;for(l=o=f=Ha(f.minus(Tn),f.plus(Tn),d),u=Ge(f.times(f),d),i=3;;){if(o=Ge(o.times(u),d),c=l.plus(Ha(o,new v(i),d)),Na(c.d).slice(0,d)===Na(l.d).slice(0,d))return l=l.times(2),r!==0&&(l=l.plus(mh(v,d+2,y).times(r+""))),l=Ha(l,new v(p),d),v.precision=y,t==null?(at=!0,Ge(l,y)):l;l=c,i+=2}}function A0(e,t){var n,a,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(a,i),t){if(i-=a,n=n-a-1,e.e=Vr(n/Je),e.d=[],a=(n+1)%Je,n<0&&(a+=Je),a<i){for(a&&e.d.push(+t.slice(0,a)),i-=Je;a<i;)e.d.push(+t.slice(a,a+=Je));t=t.slice(a),a=Je-t.length}else a-=i;for(;a--;)t+="0";if(e.d.push(+t),at&&(e.e>Pu||e.e<-Pu))throw Error(Vb+n)}else e.s=0,e.e=0,e.d=[0];return e}function Ge(e,t,n){var a,i,r,o,l,c,d,u,p=e.d;for(o=1,r=p[0];r>=10;r/=10)o++;if(a=t-o,a<0)a+=Je,i=t,d=p[u=0];else{if(u=Math.ceil((a+1)/Je),r=p.length,u>=r)return e;for(d=r=p[u],o=1;r>=10;r/=10)o++;a%=Je,i=a-Je+o}if(n!==void 0&&(r=ri(10,o-i-1),l=d/r%10|0,c=t<0||p[u+1]!==void 0||d%r,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(a>0?i>0?d/ri(10,o-i):0:p[u-1])%10&1||n==(e.s<0?8:7))),t<1||!p[0])return c?(r=jt(e),p.length=1,t=t-r-1,p[0]=ri(10,(Je-t%Je)%Je),e.e=Vr(-t/Je)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(a==0?(p.length=u,r=1,u--):(p.length=u+1,r=ri(10,Je-a),p[u]=i>0?(d/ri(10,o-i)%ri(10,i)|0)*r:0),c)for(;;)if(u==0){(p[0]+=r)==Ft&&(p[0]=1,++e.e);break}else{if(p[u]+=r,p[u]!=Ft)break;p[u--]=0,r=1}for(a=p.length;p[--a]===0;)p.pop();if(at&&(e.e>Pu||e.e<-Pu))throw Error(Vb+jt(e));return e}function AE(e,t){var n,a,i,r,o,l,c,d,u,p,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),at?Ge(t,f):t;if(c=e.d,p=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(u=o<0,u?(n=c,o=-o,l=p.length):(n=p,a=d,l=c.length),i=Math.max(Math.ceil(f/Je),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=p.length,u=i<l,u&&(l=i),i=0;i<l;i++)if(c[i]!=p[i]){u=c[i]<p[i];break}o=0}for(u&&(n=c,c=p,p=n,t.s=-t.s),l=c.length,i=p.length-l;i>0;--i)c[l++]=0;for(i=p.length;i>o;){if(c[--i]<p[i]){for(r=i;r&&c[--r]===0;)c[r]=Ft-1;--c[r],c[i]+=Ft}c[i]-=p[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,at?Ge(t,f):t):new h(0)}function Ii(e,t,n){var a,i=jt(e),r=Na(e.d),o=r.length;return t?(n&&(a=n-o)>0?r=r.charAt(0)+"."+r.slice(1)+ws(a):o>1&&(r=r.charAt(0)+"."+r.slice(1)),r=r+(i<0?"e":"e+")+i):i<0?(r="0."+ws(-i-1)+r,n&&(a=n-o)>0&&(r+=ws(a))):i>=o?(r+=ws(i+1-o),n&&(a=n-i-1)>0&&(r=r+"."+ws(a))):((a=i+1)<o&&(r=r.slice(0,a)+"."+r.slice(a)),n&&(a=n-o)>0&&(i+1===o&&(r+="."),r+=ws(a))),e.s<0?"-"+r:r}function E0(e,t){if(e.length>t)return e.length=t,!0}function EE(e){var t,n,a;function i(r){var o=this;if(!(o instanceof i))return new i(r);if(o.constructor=i,r instanceof i){o.s=r.s,o.e=r.e,o.d=(r=r.d)?r.slice():r;return}if(typeof r=="number"){if(r*0!==0)throw Error(wi+r);if(r>0)o.s=1;else if(r<0)r=-r,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(r===~~r&&r<1e7){o.e=0,o.d=[r];return}return A0(o,r.toString())}else if(typeof r!="string")throw Error(wi+r);if(r.charCodeAt(0)===45?(r=r.slice(1),o.s=-1):o.s=1,vH.test(r))A0(o,r);else throw Error(wi+r)}if(i.prototype=ve,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=EE,i.config=i.set=bH,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return i.config(e),i}function bH(e){if(!e||typeof e!="object")throw Error(Xn+"Object expected");var t,n,a,i=["precision",1,Kr,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((a=e[n=i[t]])!==void 0)if(Vr(a)===a&&a>=i[t+1]&&a<=i[t+2])this[n]=a;else throw Error(wi+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(wi+n+": "+a);return this}var Gb=EE(gH);Tn=new Gb(1);const He=Gb;var yH=e=>e,TE={},IE=e=>e===TE,T0=e=>function t(){return arguments.length===0||arguments.length===1&&IE(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},OE=(e,t)=>e===1?t:T0(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var r=a.filter(o=>o!==TE).length;return r>=e?t(...a):OE(e-r,T0(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=a.map(u=>IE(u)?l.shift():u);return t(...d,...l)}))}),xH=e=>OE(e.length,e),gg=(e,t)=>{for(var n=[],a=e;a<t;++a)n[a-e]=a;return n},wH=xH((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),jH=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(!n.length)return yH;var i=n.reverse(),r=i[0],o=i.slice(1);return function(){return o.reduce((l,c)=>c(l),r(...arguments))}},vg=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function LE(e){var t;return e===0?t=1:t=Math.floor(new He(e).abs().log(10).toNumber())+1,t}function ME(e,t,n){for(var a=new He(e),i=0,r=[];a.lt(t)&&i<1e5;)r.push(a.toNumber()),a=a.add(n),i++;return r}var DE=e=>{var[t,n]=e,[a,i]=[t,n];return t>n&&([a,i]=[n,t]),[a,i]},FE=(e,t,n)=>{if(e.lte(0))return new He(0);var a=LE(e.toNumber()),i=new He(10).pow(a),r=e.div(i),o=a!==1?.05:.1,l=new He(Math.ceil(r.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return t?new He(c.toNumber()):new He(Math.ceil(c.toNumber()))},SH=(e,t,n)=>{var a=new He(1),i=new He(e);if(!i.isint()&&n){var r=Math.abs(e);r<1?(a=new He(10).pow(LE(e)-1),i=new He(Math.floor(i.div(a).toNumber())).mul(a)):r>1&&(i=new He(Math.floor(e)))}else e===0?i=new He(Math.floor((t-1)/2)):n||(i=new He(Math.floor(e)));var o=Math.floor((t-1)/2),l=jH(wH(c=>i.add(new He(c-o).mul(a)).toNumber()),gg);return l(0,t)},zE=function(t,n,a,i){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(a-1)))return{step:new He(0),tickMin:new He(0),tickMax:new He(0)};var o=FE(new He(n).sub(t).div(a-1),i,r),l;t<=0&&n>=0?l=new He(0):(l=new He(t).add(n).div(2),l=l.sub(new He(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new He(n).sub(l).div(o).toNumber()),u=c+d+1;return u>a?zE(t,n,a,i,r+1):(u<a&&(d=n>0?d+(a-u):d,c=n>0?c:c+(a-u)),{step:o,tickMin:l.sub(new He(c).mul(o)),tickMax:l.add(new He(d).mul(o))})},NH=function(t){var[n,a]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[l,c]=DE([n,a]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...gg(0,i-1).map(()=>1/0)]:[...gg(0,i-1).map(()=>-1/0),c];return n>a?vg(d):d}if(l===c)return SH(l,i,r);var{step:u,tickMin:p,tickMax:h}=zE(l,c,o,r,0),f=ME(p,h.add(new He(.1).mul(u)),u);return n>a?vg(f):f},CH=function(t,n){var[a,i]=t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=DE([a,i]);if(o===-1/0||l===1/0)return[a,i];if(o===l)return[o];var c=Math.max(n,2),d=FE(new He(l).sub(o).div(c-1),r,0),u=[...ME(new He(o),new He(l),d),l];return r===!1&&(u=u.map(p=>Math.round(p))),a>i?vg(u):u},RE=e=>e.rootProps.maxBarSize,kH=e=>e.rootProps.barGap,_E=e=>e.rootProps.barCategoryGap,PH=e=>e.rootProps.barSize,Vp=e=>e.rootProps.stackOffset,BE=e=>e.rootProps.reverseStackOrder,Yb=e=>e.options.chartName,Qb=e=>e.rootProps.syncId,$E=e=>e.rootProps.syncMethod,Zb=e=>e.options.eventEmitter,Rt={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},za={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},En={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Gp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},AH={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:za.angleAxisId,includeHidden:!1,name:void 0,reversed:za.reversed,scale:za.scale,tick:za.tick,tickCount:void 0,ticks:void 0,type:za.type,unit:void 0},EH={allowDataOverflow:En.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:En.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:En.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:En.scale,tick:En.tick,tickCount:En.tickCount,ticks:void 0,type:En.type,unit:void 0},TH={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:za.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:za.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:za.scale,tick:za.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},IH={allowDataOverflow:En.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:En.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:En.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:En.scale,tick:En.tick,tickCount:En.tickCount,ticks:void 0,type:"category",unit:void 0},Xb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?TH:AH,Jb=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?IH:EH,Yp=e=>e.polarOptions,ey=te([ls,cs,$t],EW),UE=te([Yp,ey],(e,t)=>{if(e!=null)return ga(e.innerRadius,t,0)}),WE=te([Yp,ey],(e,t)=>{if(e!=null)return ga(e.outerRadius,t,t*.8)}),OH=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},qE=te([Yp],OH);te([Xb,qE],Gp);var HE=te([ey,UE,WE],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});te([Jb,HE],Gp);var KE=te([Be,Yp,UE,WE,ls,cs],(e,t,n,a,i,r)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||a==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:ga(o,i,i/2),cy:ga(l,r,r/2),innerRadius:n,outerRadius:a,startAngle:c,endAngle:d,clockWise:!1}}}),Tt=(e,t)=>t,Qp=(e,t,n)=>n;function ty(e){return e==null?void 0:e.id}function VE(e,t,n){var{chartData:a=[]}=t,{allowDuplicatedCategory:i,dataKey:r}=n,o=new Map;return e.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:a;if(!(d==null||d.length===0)){var u=ty(l);d.forEach((p,h)=>{var f=r==null||i?h:String(At(p,r,null)),g=At(p,l.dataKey,0),v;o.has(f)?v=o.get(f):v={},Object.assign(v,{[u]:g}),o.set(f,v)})}}),Array.from(o.values())}function Zp(e){return e.stackId!=null&&e.dataKey!=null}var Xp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Jp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function LH(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var It=e=>{var t=Be(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Gr=e=>e.tooltip.settings.axisId;function I0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Au(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I0(Object(n),!0).forEach(function(a){MH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function MH(e,t,n){return(t=DH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DH(e){var t=FH(e,"string");return typeof t=="symbol"?t:t+""}function FH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bg=[0,"auto"],Mt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},GE=(e,t)=>e.cartesianAxis.xAxis[t],us=(e,t)=>{var n=GE(e,t);return n??Mt},Dt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:bg,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:$l},YE=(e,t)=>e.cartesianAxis.yAxis[t],ps=(e,t)=>{var n=YE(e,t);return n??Dt},zH={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ny=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??zH},fn=(e,t,n)=>{switch(t){case"xAxis":return us(e,n);case"yAxis":return ps(e,n);case"zAxis":return ny(e,n);case"angleAxis":return Xb(e,n);case"radiusAxis":return Jb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},RH=(e,t,n)=>{switch(t){case"xAxis":return us(e,n);case"yAxis":return ps(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Yl=(e,t,n)=>{switch(t){case"xAxis":return us(e,n);case"yAxis":return ps(e,n);case"angleAxis":return Xb(e,n);case"radiusAxis":return Jb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},QE=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function ZE(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var em=e=>e.graphicalItems.cartesianItems,_H=te([Tt,Qp],ZE),XE=(e,t,n)=>e.filter(n).filter(a=>(t==null?void 0:t.includeHidden)===!0?!0:!a.hide),Ql=te([em,fn,_H],XE,{memoizeOptions:{resultEqualityCheck:Jp}}),JE=te([Ql],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Zp)),eT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),BH=te([Ql],eT),tT=e=>e.map(t=>t.data).filter(Boolean).flat(1),$H=te([Ql],tT,{memoizeOptions:{resultEqualityCheck:Jp}}),nT=(e,t)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:i}=t;return e.length>0?e:n.slice(a,i+1)},ay=te([$H,Kp],nT),aT=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:At(a,t.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(i=>({value:At(i,a)}))):e.map(a=>({value:a})),tm=te([ay,fn,Ql],aT);function sT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function fd(e){if(Aa(e)||e instanceof Date){var t=Number(e);if(bt(t))return t}}function O0(e){if(Array.isArray(e)){var t=[fd(e[0]),fd(e[1])];return $s(t)?t:void 0}var n=fd(e);if(n!=null)return[n,n]}function as(e){return e.map(fd).filter(a2)}function UH(e,t,n){return!n||typeof t!="number"||fa(t)?[]:n.length?as(n.flatMap(a=>{var i=At(e,a.dataKey),r,o;if(Array.isArray(i)?[r,o]=i:r=o=i,!(!bt(r)||!bt(o)))return[t-r,t+o]})):[]}var Ot=e=>{var t=It(e),n=Gr(e);return Yl(e,t,n)},Zl=te([Ot],e=>e==null?void 0:e.dataKey),WH=te([JE,Kp,Ot],VE),iT=(e,t,n,a)=>{var i={},r=t.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),i);return Object.fromEntries(Object.entries(r).map(o=>{var[l,c]=o,d=a?[...c].reverse():c,u=d.map(ty);return[l,{stackedData:d$(e,u,n),graphicalItems:d}]}))},yg=te([WH,JE,Vp,BE],iT),rT=(e,t,n,a)=>{var{dataStartIndex:i,dataEndIndex:r}=t;if(a==null&&n!=="zAxis"){var o=f$(e,i,r);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},qH=te([fn],e=>e.allowDataOverflow),sy=e=>{var t;if(e==null||!("domain"in e))return bg;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=as(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:bg},oT=te([fn],sy),lT=te([oT,qH],NE),HH=te([yg,Zs,Tt,lT],rT,{memoizeOptions:{resultEqualityCheck:Xp}}),iy=e=>e.errorBars,KH=(e,t,n)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>sT(n,a)),Eu=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=n.filter(Boolean);if(i.length!==0){var r=i.flat(),o=Math.min(...r),l=Math.max(...r);return[o,l]}},cT=(e,t,n,a,i)=>{var r,o;if(n.length>0&&e.forEach(l=>{n.forEach(c=>{var d,u,p=(d=a[c.id])===null||d===void 0?void 0:d.filter(b=>sT(i,b)),h=At(l,(u=t.dataKey)!==null&&u!==void 0?u:c.dataKey),f=UH(l,h,p);if(f.length>=2){var g=Math.min(...f),v=Math.max(...f);(r==null||g<r)&&(r=g),(o==null||v>o)&&(o=v)}var y=O0(h);y!=null&&(r=r==null?y[0]:Math.min(r,y[0]),o=o==null?y[1]:Math.max(o,y[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(l=>{var c=O0(At(l,t.dataKey));c!=null&&(r=r==null?c[0]:Math.min(r,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),bt(r)&&bt(o))return[r,o]},VH=te([ay,fn,BH,iy,Tt],cT,{memoizeOptions:{resultEqualityCheck:Xp}});function GH(e){var{value:t}=e;if(Aa(t)||t instanceof Date)return t}var YH=(e,t,n)=>{var a=e.map(GH).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&sA(a))?W1(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},dT=e=>e.referenceElements.dots,Yr=(e,t,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===n:a.yAxisId===n),QH=te([dT,Tt,Qp],Yr),uT=e=>e.referenceElements.areas,ZH=te([uT,Tt,Qp],Yr),pT=e=>e.referenceElements.lines,XH=te([pT,Tt,Qp],Yr),mT=(e,t)=>{var n=as(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},JH=te(QH,Tt,mT),hT=(e,t)=>{var n=as(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},e4=te([ZH,Tt],hT);function t4(e){var t;if(e.x!=null)return as([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return n==null||n.length===0?[]:as(n)}function n4(e){var t;if(e.y!=null)return as([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return n==null||n.length===0?[]:as(n)}var fT=(e,t)=>{var n=e.flatMap(a=>t==="xAxis"?t4(a):n4(a));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},a4=te([XH,Tt],fT),s4=te(JH,a4,e4,(e,t,n)=>Eu(e,n,t)),gT=(e,t,n,a,i,r,o,l)=>{if(n!=null)return n;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=c?Eu(a,r,i):Eu(r,i);return fH(t,d,e.allowDataOverflow)},i4=te([fn,oT,lT,HH,VH,s4,Be,Tt],gT,{memoizeOptions:{resultEqualityCheck:Xp}}),r4=[0,1],vT=(e,t,n,a,i,r,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=Gs(t,r);if(d&&l==null){var u;return W1(0,(u=n==null?void 0:n.length)!==null&&u!==void 0?u:0)}return c==="category"?YH(a,e,d):i==="expand"?r4:o}},ry=te([fn,Be,ay,tm,Vp,Tt,i4],vT),bT=(e,t,n,a,i)=>{if(e!=null){var{scale:r,type:o}=e;if(r==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof r=="string"){var l="scale".concat(Fl(r));return l in Eo?l:"point"}}},Xl=te([fn,Be,QE,Yb,Tt],bT);function o4(e){if(e!=null){if(e in Eo)return Eo[e]();var t="scale".concat(Fl(e));if(t in Eo)return Eo[t]()}}function oy(e,t,n,a){if(!(n==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(a);var i=o4(t);if(i!=null){var r=i.domain(n).range(a);return i$(r),r}}}var yT=(e,t,n)=>{var a=sy(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&$s(e))return NH(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&$s(e))return CH(e,t.tickCount,t.allowDecimals)}},ly=te([ry,Yl,Xl],yT),xT=(e,t,n,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&$s(t)&&Array.isArray(n)&&n.length>0){var i=t[0],r=n[0],o=t[1],l=n[n.length-1];return[Math.min(i,r),Math.max(o,l)]}return t},l4=te([fn,ry,ly,Tt],xT),c4=te(tm,fn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,a=Array.from(as(e.map(l=>l.value))).sort((l,c)=>l-c);if(a.length<2)return 1/0;var i=a[a.length-1]-a[0];if(i===0)return 1/0;for(var r=0;r<a.length-1;r++){var o=a[r+1]-a[r];n=Math.min(n,o)}return n/i}}),wT=te(c4,Be,_E,$t,(e,t,n,a)=>a,(e,t,n,a,i)=>{if(!bt(e))return 0;var r=t==="vertical"?a.height:a.width;if(i==="gap")return e*r/2;if(i==="no-gap"){var o=ga(n,e*r),l=e*r/2;return l-o-(l-o)/r*o}return 0}),d4=(e,t)=>{var n=us(e,t);return n==null||typeof n.padding!="string"?0:wT(e,"xAxis",t,n.padding)},u4=(e,t)=>{var n=ps(e,t);return n==null||typeof n.padding!="string"?0:wT(e,"yAxis",t,n.padding)},p4=te(us,d4,(e,t)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((a=i.right)!==null&&a!==void 0?a:0)+t}}),m4=te(ps,u4,(e,t)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((a=i.bottom)!==null&&a!==void 0?a:0)+t}}),h4=te([$t,p4,Op,Ip,(e,t,n)=>n],(e,t,n,a,i)=>{var{padding:r}=a;return i?[r.left,n.width-r.right]:[e.left+t.left,e.left+e.width-t.right]}),f4=te([$t,Be,m4,Op,Ip,(e,t,n)=>n],(e,t,n,a,i,r)=>{var{padding:o}=i;return r?[a.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Jl=(e,t,n,a)=>{var i;switch(t){case"xAxis":return h4(e,n,a);case"yAxis":return f4(e,n,a);case"zAxis":return(i=ny(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return qE(e);case"radiusAxis":return HE(e,n);default:return}},jT=te([fn,Jl],Gp),Qr=te([fn,Xl,l4,jT],oy);te([Ql,iy,Tt],KH);function ST(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var nm=(e,t)=>t,am=(e,t,n)=>n,g4=te(Ep,nm,am,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(ST)),v4=te(Tp,nm,am,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(ST)),NT=(e,t)=>({width:e.width,height:t.height}),b4=(e,t)=>{var n=typeof t.width=="number"?t.width:$l;return{width:n,height:e.height}},CT=te($t,us,NT),y4=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},x4=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},w4=te(cs,$t,g4,nm,am,(e,t,n,a,i)=>{var r={},o;return n.forEach(l=>{var c=NT(t,l);o==null&&(o=y4(t,a,e));var d=a==="top"&&!i||a==="bottom"&&i;r[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),r}),j4=te(ls,$t,v4,nm,am,(e,t,n,a,i)=>{var r={},o;return n.forEach(l=>{var c=b4(t,l);o==null&&(o=x4(t,a,e));var d=a==="left"&&!i||a==="right"&&i;r[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),r}),S4=(e,t)=>{var n=us(e,t);if(n!=null)return w4(e,n.orientation,n.mirror)},N4=te([$t,us,S4,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var i=n==null?void 0:n[a];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),C4=(e,t)=>{var n=ps(e,t);if(n!=null)return j4(e,n.orientation,n.mirror)},k4=te([$t,ps,C4,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var i=n==null?void 0:n[a];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),kT=te($t,ps,(e,t)=>{var n=typeof t.width=="number"?t.width:$l;return{width:n,height:e.height}}),L0=(e,t,n)=>{switch(t){case"xAxis":return CT(e,n).width;case"yAxis":return kT(e,n).height;default:return}},PT=(e,t,n,a)=>{if(n!=null){var{allowDuplicatedCategory:i,type:r,dataKey:o}=n,l=Gs(e,a),c=t.map(d=>d.value);if(o&&l&&r==="category"&&i&&sA(c))return c}},cy=te([Be,tm,fn,Tt],PT),AT=(e,t,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:r}=n,o=Gs(e,a);if(o&&(i==="number"||r!=="auto"))return t.map(l=>l.value)}},dy=te([Be,tm,Yl,Tt],AT),M0=te([Be,RH,Xl,Qr,cy,dy,Jl,ly,Tt],(e,t,n,a,i,r,o,l,c)=>{if(t!=null){var d=Gs(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:r,duplicateDomain:i,isCategorical:d,niceTicks:l,range:o,realScaleType:n,scale:a}}}),P4=(e,t,n,a,i,r,o,l,c)=>{if(!(t==null||a==null)){var d=Gs(e,c),{type:u,ticks:p,tickCount:h}=t,f=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,g=u==="category"&&a.bandwidth?a.bandwidth()/f:0;g=c==="angleAxis"&&r!=null&&r.length>=2?xn(r[0]-r[1])*2*g:g;var v=p||i;if(v){var y=v.map((b,x)=>{var w=o?o.indexOf(b):b;return{index:x,coordinate:a(w)+g,value:b,offset:g}});return y.filter(b=>bt(b.coordinate))}return d&&l?l.map((b,x)=>({coordinate:a(b)+g,value:b,index:x,offset:g})).filter(b=>bt(b.coordinate)):a.ticks?a.ticks(h).map(b=>({coordinate:a(b)+g,value:b,offset:g})):a.domain().map((b,x)=>({coordinate:a(b)+g,value:o?o[b]:b,index:x,offset:g}))}},ET=te([Be,Yl,Xl,Qr,ly,Jl,cy,dy,Tt],P4),A4=(e,t,n,a,i,r,o)=>{if(!(t==null||n==null||a==null||a[0]===a[1])){var l=Gs(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&(a==null?void 0:a.length)>=2?xn(a[0]-a[1])*2*d:d,l&&r?r.map((u,p)=>({coordinate:n(u)+d,value:u,index:p,offset:d})):n.ticks?n.ticks(c).map(u=>({coordinate:n(u)+d,value:u,offset:d})):n.domain().map((u,p)=>({coordinate:n(u)+d,value:i?i[u]:u,index:p,offset:d}))}},Us=te([Be,Yl,Qr,Jl,cy,dy,Tt],A4),Ws=te(fn,Qr,(e,t)=>{if(!(e==null||t==null))return Au(Au({},e),{},{scale:t})}),E4=te([fn,Xl,ry,jT],oy);te((e,t,n)=>ny(e,n),E4,(e,t)=>{if(!(e==null||t==null))return Au(Au({},e),{},{scale:t})});var T4=te([Be,Ep,Tp],(e,t,n)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),TT=e=>e.options.defaultTooltipEventType,IT=e=>e.options.validateTooltipEventTypes;function OT(e,t,n){if(e==null)return t;var a=e?"axis":"item";return n==null?t:n.includes(a)?a:t}function uy(e,t){var n=TT(e),a=IT(e);return OT(t,n,a)}function I4(e){return xe(t=>uy(t,e))}var LT=(e,t)=>{var n,a=Number(t);if(!(fa(a)||t==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},O4=e=>e.tooltip.settings,Cs={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},L4={itemInteraction:{click:Cs,hover:Cs},axisInteraction:{click:Cs,hover:Cs},keyboardInteraction:Cs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},MT=kn({name:"tooltip",initialState:L4,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:tt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:a}=t.payload,i=ua(e).tooltipItemPayloads.indexOf(n);i>-1&&(e.tooltipItemPayloads[i]=a)},prepare:tt()},removeTooltipEntrySettings:{reducer(e,t){var n=ua(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:tt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:M4,replaceTooltipEntrySettings:D4,removeTooltipEntrySettings:F4,setTooltipSettingsState:z4,setActiveMouseOverItemIndex:DT,mouseLeaveItem:R4,mouseLeaveChart:FT,setActiveClickItemIndex:_4,setMouseOverAxisIndex:zT,setMouseClickAxisIndex:B4,setSyncInteraction:xg,setKeyboardInteraction:wg}=MT.actions,$4=MT.reducer;function D0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Wc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D0(Object(n),!0).forEach(function(a){U4(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function U4(e,t,n){return(t=W4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W4(e){var t=q4(e,"string");return typeof t=="symbol"?t:t+""}function q4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H4(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function K4(e){return e.index!=null}var RT=(e,t,n,a)=>{if(t==null)return Cs;var i=H4(e,t,n);if(i==null)return Cs;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var r=e.settings.active===!0;if(K4(i)){if(r)return Wc(Wc({},i),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return Wc(Wc({},Cs),{},{coordinate:i.coordinate})};function V4(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function G4(e,t){var n=V4(e),a=t[0],i=t[1];if(n===void 0)return!1;var r=Math.min(a,i),o=Math.max(a,i);return n>=r&&n<=o}function Y4(e,t,n){if(n==null||t==null)return!0;var a=At(e,t);return a==null||!$s(n)?!0:G4(a,n)}var py=(e,t,n,a)=>{var i=e==null?void 0:e.index;if(i==null)return null;var r=Number(i);if(!bt(r))return i;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(r,l)),d=t[c];return d==null||Y4(d,n,a)?String(c):null},_T=(e,t,n,a,i,r,o,l)=>{if(!(r==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,r);if(d!=null)return d;var u=i==null?void 0:i[Number(r)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:u.coordinate}}}},BT=(e,t,n,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(r=>{var o;return((o=r.settings)===null||o===void 0?void 0:o.dataKey)===i})},ec=e=>e.options.tooltipPayloadSearcher,Zr=e=>e.tooltip;function F0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function z0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F0(Object(n),!0).forEach(function(a){Q4(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Q4(e,t,n){return(t=Z4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z4(e){var t=X4(e,"string");return typeof t=="symbol"?t:t+""}function X4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J4(e,t){return e??t}var $T=(e,t,n,a,i,r,o)=>{if(!(t==null||r==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=n,p=[];return e.reduce((h,f)=>{var g,{dataDefinedOnItem:v,settings:y}=f,b=J4(v,l),x=Array.isArray(b)?u1(b,d,u):b,w=(g=y==null?void 0:y.dataKey)!==null&&g!==void 0?g:a,j=y==null?void 0:y.nameKey,S;if(a&&Array.isArray(x)&&!Array.isArray(x[0])&&o==="axis"?S=iA(x,a,i):S=r(x,t,c,j),Array.isArray(S))S.forEach(T=>{var L=z0(z0({},y),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});h.push(uj({tooltipEntrySettings:L,dataKey:T.dataKey,payload:T.payload,value:At(T.payload,T.dataKey),name:T.name}))});else{var k;h.push(uj({tooltipEntrySettings:y,dataKey:w,payload:S,value:At(S,w),name:(k=At(S,j))!==null&&k!==void 0?k:y==null?void 0:y.name}))}return h},p)}},my=te([Ot,Be,QE,Yb,It],bT),e5=te([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),t5=te([It,Gr],ZE),tc=te([e5,Ot,t5],XE,{memoizeOptions:{resultEqualityCheck:Jp}}),n5=te([tc],e=>e.filter(Zp)),a5=te([tc],tT,{memoizeOptions:{resultEqualityCheck:Jp}}),Xr=te([a5,Zs],nT),s5=te([n5,Zs,Ot],VE),hy=te([Xr,Ot,tc],aT),UT=te([Ot],sy),i5=te([Ot],e=>e.allowDataOverflow),WT=te([UT,i5],NE),r5=te([tc],e=>e.filter(Zp)),o5=te([s5,r5,Vp,BE],iT),l5=te([o5,Zs,It,WT],rT),c5=te([tc],eT),d5=te([Xr,Ot,c5,iy,It],cT,{memoizeOptions:{resultEqualityCheck:Xp}}),u5=te([dT,It,Gr],Yr),p5=te([u5,It],mT),m5=te([uT,It,Gr],Yr),h5=te([m5,It],hT),f5=te([pT,It,Gr],Yr),g5=te([f5,It],fT),v5=te([p5,g5,h5],Eu),b5=te([Ot,UT,WT,l5,d5,v5,Be,It],gT),nc=te([Ot,Be,Xr,hy,Vp,It,b5],vT),y5=te([nc,Ot,my],yT),x5=te([Ot,nc,y5,It],xT),qT=e=>{var t=It(e),n=Gr(e),a=!1;return Jl(e,t,n,a)},HT=te([Ot,qT],Gp),KT=te([Ot,my,x5,HT],oy),w5=te([Be,hy,Ot,It],PT),j5=te([Be,hy,Ot,It],AT),S5=(e,t,n,a,i,r,o,l)=>{if(t){var{type:c}=t,d=Gs(e,l);if(a){var u=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,p=c==="category"&&a.bandwidth?a.bandwidth()/u:0;return p=l==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?xn(i[0]-i[1])*2*p:p,d&&o?o.map((h,f)=>({coordinate:a(h)+p,value:h,index:f,offset:p})):a.domain().map((h,f)=>({coordinate:a(h)+p,value:r?r[h]:h,index:f,offset:p}))}}},ms=te([Be,Ot,my,KT,qT,w5,j5,It],S5),fy=te([TT,IT,O4],(e,t,n)=>OT(n.shared,e,t)),VT=e=>e.tooltip.settings.trigger,gy=e=>e.tooltip.settings.defaultIndex,ac=te([Zr,fy,VT,gy],RT),Oi=te([ac,Xr,Zl,nc],py),GT=te([ms,Oi],LT),YT=te([ac],e=>{if(e)return e.dataKey});te([ac],e=>{if(e)return e.graphicalItemId});var QT=te([Zr,fy,VT,gy],BT),N5=te([ls,cs,Be,$t,ms,gy,QT,ec],_T),C5=te([ac,N5],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),k5=te([ac],e=>e.active),P5=te([QT,Oi,Zs,Zl,GT,ec,fy],$T),A5=te([P5],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function R0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R0(Object(n),!0).forEach(function(a){E5(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function E5(e,t,n){return(t=T5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T5(e){var t=I5(e,"string");return typeof t=="symbol"?t:t+""}function I5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O5=()=>xe(Ot),L5=()=>{var e=O5(),t=xe(ms),n=xe(KT);return Ir(!e||!n?void 0:_0(_0({},e),{},{scale:n}),t)};function B0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B0(Object(n),!0).forEach(function(a){M5(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function M5(e,t,n){return(t=D5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D5(e){var t=F5(e,"string");return typeof t=="symbol"?t:t+""}function F5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z5=(e,t,n,a)=>{var i=t.find(r=>r&&r.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:i.coordinate}}return{x:0,y:0}},R5=(e,t,n,a)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="centric"){var r=i.coordinate,{radius:o}=a;return Ui(Ui(Ui({},a),Kt(a.cx,a.cy,o,r)),{},{angle:r,radius:o})}var l=i.coordinate,{angle:c}=a;return Ui(Ui(Ui({},a),Kt(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function _5(e,t){var{chartX:n,chartY:a}=e;return n>=t.left&&n<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var ZT=(e,t,n,a,i)=>{var r,o=-1,l=(r=t==null?void 0:t.length)!==null&&r!==void 0?r:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?n[c-1].coordinate:n[l-1].coordinate,u=n[c].coordinate,p=c>=l-1?n[0].coordinate:n[c+1].coordinate,h=void 0;if(xn(u-d)!==xn(p-u)){var f=[];if(xn(p-u)===xn(i[1]-i[0])){h=p;var g=u+i[1]-i[0];f[0]=Math.min(g,(g+d)/2),f[1]=Math.max(g,(g+d)/2)}else{h=d;var v=p+i[1]-i[0];f[0]=Math.min(u,(v+u)/2),f[1]=Math.max(u,(v+u)/2)}var y=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>y[0]&&e<=y[1]||e>=f[0]&&e<=f[1]){({index:o}=n[c]);break}}else{var b=Math.min(d,p),x=Math.max(d,p);if(e>(b+u)/2&&e<=(x+u)/2){({index:o}=n[c]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},B5=()=>xe(Yb),vy=(e,t)=>t,XT=(e,t,n)=>n,by=(e,t,n,a)=>a,$5=te(ms,e=>yp(e,t=>t.coordinate)),yy=te([Zr,vy,XT,by],RT),xy=te([yy,Xr,Zl,nc],py),U5=(e,t,n)=>{if(t!=null){var a=Zr(e);return t==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},JT=te([Zr,vy,XT,by],BT),Tu=te([ls,cs,Be,$t,ms,by,JT,ec],_T),W5=te([yy,Tu],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),eI=te([ms,xy],LT),q5=te([JT,xy,Zs,Zl,eI,ec,vy],$T),H5=te([yy,xy],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),K5=(e,t,n,a,i,r,o)=>{if(!(!e||!n||!a||!i)&&_5(e,o)){var l=g$(e,t),c=ZT(l,r,i,n,a),d=z5(t,i,c,e);return{activeIndex:String(c),activeCoordinate:d}}},V5=(e,t,n,a,i,r,o)=>{if(!(!e||!a||!i||!r||!n)){var l=MW(e,n);if(l){var c=v$(l,t),d=ZT(c,o,r,a,i),u=R5(t,r,d,l);return{activeIndex:String(d),activeCoordinate:u}}}},G5=(e,t,n,a,i,r,o,l)=>{if(!(!e||!t||!a||!i||!r))return t==="horizontal"||t==="vertical"?K5(e,t,a,i,r,o,l):V5(e,t,n,a,i,r,o)},Y5=te(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var a=e[t];if(a!=null)return n?a.panoramaElementId:a.elementId}}),Q5=te(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(Rt)),n=Array.from(new Set(t));return n.sort((a,i)=>a-i)},{memoizeOptions:{resultEqualityCheck:LH}});function $0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function U0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$0(Object(n),!0).forEach(function(a){Z5(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Z5(e,t,n){return(t=X5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X5(e){var t=J5(e,"string");return typeof t=="symbol"?t:t+""}function J5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eK={},tK={zIndexMap:Object.values(Rt).reduce((e,t)=>U0(U0({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),eK)},nK=new Set(Object.values(Rt));function aK(e){return nK.has(e)}var tI=kn({name:"zIndex",initialState:tK,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:tt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!aK(n)&&delete e.zIndexMap[n])},prepare:tt()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n,elementId:a,isPanorama:i}=t.payload;e.zIndexMap[n]?i?e.zIndexMap[n].panoramaElementId=a:e.zIndexMap[n].elementId=a:e.zIndexMap[n]={consumers:0,elementId:i?void 0:a,panoramaElementId:i?a:void 0}},prepare:tt()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElementId=void 0:e.zIndexMap[n].elementId=void 0)},prepare:tt()}}}),{registerZIndexPortal:sK,unregisterZIndexPortal:iK,registerZIndexPortalId:rK,unregisterZIndexPortalId:oK}=tI.actions,lK=tI.reducer;function ea(e){var{zIndex:t,children:n}=e,a=K$(),i=a&&t!==void 0&&t!==0,r=nn(),o=ct();m.useLayoutEffect(()=>i?(o(sK({zIndex:t})),()=>{o(iK({zIndex:t}))}):zl,[o,t,i]);var l=xe(d=>Y5(d,t,r));if(!i)return n;if(!l)return null;var c=document.getElementById(l);return c?sp.createPortal(n,c):null}function jg(){return jg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jg.apply(null,arguments)}function W0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function qc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W0(Object(n),!0).forEach(function(a){cK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function cK(e,t,n){return(t=dK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dK(e){var t=uK(e,"string");return typeof t=="symbol"?t:t+""}function uK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pK(e){var{cursor:t,cursorComp:n,cursorProps:a}=e;return m.isValidElement(t)?m.cloneElement(t,a):m.createElement(n,a)}function mK(e){var t,{coordinate:n,payload:a,index:i,offset:r,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:d,chartName:u}=e,p=n,h=a,f=i;if(!c||!p||u!=="ScatterChart"&&d!=="axis")return null;var g,v,y;if(u==="ScatterChart")g=p,v=GU,y=Rt.cursorLine;else if(u==="BarChart")g=YU(l,p,r,o),v=F1,y=Rt.cursorRectangle;else if(l==="radial"&&oA(p)){var{cx:b,cy:x,radius:w,startAngle:j,endAngle:S}=z1(p);g={cx:b,cy:x,startAngle:j,endAngle:S,innerRadius:w,outerRadius:w},v=_1,y=Rt.cursorLine}else g={points:RW(l,p,r)},v=I1,y=Rt.cursorLine;var k=typeof c=="object"&&"className"in c?c.className:void 0,T=qc(qc(qc(qc({stroke:"#ccc",pointerEvents:"none"},r),g),Dl(c)),{},{payload:h,payloadIndex:f,className:Ve("recharts-tooltip-cursor",k)});return m.createElement(ea,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:y},m.createElement(pK,{cursor:c,cursorComp:v,cursorProps:T}))}function hK(e){var t=L5(),n=j1(),a=Ul(),i=B5();return t==null||n==null||a==null||i==null?null:m.createElement(mK,jg({},e,{offset:n,layout:a,tooltipAxisBandSize:t,chartName:i}))}var nI=m.createContext(null),fK=()=>m.useContext(nI),aI={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function r(c,d,u,p,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,p||c,h),g=n?n+d:d;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],f]:c._events[g].push(f):(c._events[g]=f,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,p;if(this._eventsCount===0)return d;for(p in u=this._events)t.call(u,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=n?n+d:d,p=this._events[u];if(!p)return[];if(p.fn)return[p.fn];for(var h=0,f=p.length,g=new Array(f);h<f;h++)g[h]=p[h].fn;return g},l.prototype.listenerCount=function(d){var u=n?n+d:d,p=this._events[u];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,u,p,h,f,g){var v=n?n+d:d;if(!this._events[v])return!1;var y=this._events[v],b=arguments.length,x,w;if(y.fn){switch(y.once&&this.removeListener(d,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,p),!0;case 4:return y.fn.call(y.context,u,p,h),!0;case 5:return y.fn.call(y.context,u,p,h,f),!0;case 6:return y.fn.call(y.context,u,p,h,f,g),!0}for(w=1,x=new Array(b-1);w<b;w++)x[w-1]=arguments[w];y.fn.apply(y.context,x)}else{var j=y.length,S;for(w=0;w<j;w++)switch(y[w].once&&this.removeListener(d,y[w].fn,void 0,!0),b){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,u);break;case 3:y[w].fn.call(y[w].context,u,p);break;case 4:y[w].fn.call(y[w].context,u,p,h);break;default:if(!x)for(S=1,x=new Array(b-1);S<b;S++)x[S-1]=arguments[S];y[w].fn.apply(y[w].context,x)}}return!0},l.prototype.on=function(d,u,p){return r(this,d,u,p,!1)},l.prototype.once=function(d,u,p){return r(this,d,u,p,!0)},l.prototype.removeListener=function(d,u,p,h){var f=n?n+d:d;if(!this._events[f])return this;if(!u)return o(this,f),this;var g=this._events[f];if(g.fn)g.fn===u&&(!h||g.once)&&(!p||g.context===p)&&o(this,f);else{for(var v=0,y=[],b=g.length;v<b;v++)(g[v].fn!==u||h&&!g[v].once||p&&g[v].context!==p)&&y.push(g[v]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&o(this,u)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(aI);var gK=aI.exports;const vK=Ia(gK);var Nl=new vK,Sg="recharts.syncEvent.tooltip",q0="recharts.syncEvent.brush";function sI(e,t){if(t){var n=Number.parseInt(t,10);if(!fa(n))return e==null?void 0:e[n]}}var bK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},iI=kn({name:"options",initialState:bK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),yK=iI.reducer,{createEventEmitter:xK}=iI.actions;function wK(e){return e.tooltip.syncInteraction}var jK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},rI=kn({name:"chartData",initialState:jK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:a}=t.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:H0,setDataStartEndIndexes:SK,setComputedData:pX}=rI.actions,NK=rI.reducer,CK=["x","y"];function K0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Wi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K0(Object(n),!0).forEach(function(a){kK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function kK(e,t,n){return(t=PK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PK(e){var t=AK(e,"string");return typeof t=="symbol"?t:t+""}function AK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EK(e,t){if(e==null)return{};var n,a,i=TK(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function TK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function IK(){var e=xe(Qb),t=xe(Zb),n=ct(),a=xe($E),i=xe(ms),r=Ul(),o=Lp(),l=xe(c=>c.rootProps.className);m.useEffect(()=>{if(e==null)return zl;var c=(d,u,p)=>{if(t!==p&&e===d){if(a==="index"){var h;if(o&&u!==null&&u!==void 0&&(h=u.payload)!==null&&h!==void 0&&h.coordinate&&u.payload.sourceViewBox){var f=u.payload.coordinate,{x:g,y:v}=f,y=EK(f,CK),{x:b,y:x,width:w,height:j}=u.payload.sourceViewBox,S=Wi(Wi({},y),{},{x:o.x+(w?(g-b)/w:0)*o.width,y:o.y+(j?(v-x)/j:0)*o.height});n(Wi(Wi({},u),{},{payload:Wi(Wi({},u.payload),{},{coordinate:S})}))}else n(u);return}if(i!=null){var k;if(typeof a=="function"){var T={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},L=a(i,T);k=i[L]}else a==="value"&&(k=i.find(R=>String(R.value)===u.payload.label));var{coordinate:F}=u.payload;if(k==null||u.payload.active===!1||F==null||o==null){n(xg({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:O,y:M}=F,P=Math.min(O,o.x+o.width),D=Math.min(M,o.y+o.height),E={x:r==="horizontal"?k.coordinate:P,y:r==="horizontal"?D:k.coordinate},N=xg({active:u.payload.active,coordinate:E,dataKey:u.payload.dataKey,index:String(k.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(N)}}};return Nl.on(Sg,c),()=>{Nl.off(Sg,c)}},[l,n,t,e,a,i,r,o])}function OK(){var e=xe(Qb),t=xe(Zb),n=ct();m.useEffect(()=>{if(e==null)return zl;var a=(i,r,o)=>{t!==o&&e===i&&n(SK(r))};return Nl.on(q0,a),()=>{Nl.off(q0,a)}},[n,t,e])}function LK(){var e=ct();m.useEffect(()=>{e(xK())},[e]),IK(),OK()}function MK(e,t,n,a,i,r){var o=xe(f=>U5(f,e,t)),l=xe(Zb),c=xe(Qb),d=xe($E),u=xe(wK),p=u==null?void 0:u.active,h=Lp();m.useEffect(()=>{if(!p&&c!=null&&l!=null){var f=xg({active:r,coordinate:n,dataKey:o,index:i,label:typeof a=="number"?String(a):a,sourceViewBox:h,graphicalItemId:void 0});Nl.emit(Sg,c,f,l)}},[p,n,o,i,a,l,c,d,r,h])}function V0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function G0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V0(Object(n),!0).forEach(function(a){DK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function DK(e,t,n){return(t=FK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FK(e){var t=zK(e,"string");return typeof t=="symbol"?t:t+""}function zK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RK(e){return e.dataKey}function _K(e,t){return m.isValidElement(e)?m.cloneElement(e,t):typeof e=="function"?m.createElement(e,t):m.createElement(PU,t)}var Y0=[],BK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Js(e){var t,n,a=Yt(e,BK),{active:i,allowEscapeViewBox:r,animationDuration:o,animationEasing:l,content:c,filterNull:d,isAnimationActive:u,offset:p,payloadUniqBy:h,position:f,reverseDirection:g,useTranslate3d:v,wrapperStyle:y,cursor:b,shared:x,trigger:w,defaultIndex:j,portal:S,axisId:k}=a,T=ct(),L=typeof j=="number"?String(j):j;m.useEffect(()=>{T(z4({shared:x,trigger:w,axisId:k,active:i,defaultIndex:L}))},[T,x,w,k,i,L]);var F=Lp(),O=T1(),M=I4(x),{activeIndex:P,isActive:D}=(t=xe($=>H5($,M,w,L)))!==null&&t!==void 0?t:{},E=xe($=>q5($,M,w,L)),N=xe($=>eI($,M,w,L)),R=xe($=>W5($,M,w,L)),C=E,A=fK(),_=(n=i??D)!==null&&n!==void 0?n:!1,[B,H]=DA([C,_]),Z=M==="axis"?N:void 0;MK(M,w,R,Z,P,_);var ie=S??A;if(ie==null||F==null||M==null)return null;var U=C??Y0;_||(U=Y0),d&&U.length&&(U=CA(U.filter($=>$.value!=null&&($.hide!==!0||a.includeHidden)),h,RK));var G=U.length>0,V=m.createElement(MU,{allowEscapeViewBox:r,animationDuration:o,animationEasing:l,isAnimationActive:u,active:_,coordinate:R,hasPayload:G,offset:p,position:f,reverseDirection:g,useTranslate3d:v,viewBox:F,wrapperStyle:y,lastBoundingBox:B,innerRef:H,hasPortalFromProps:!!S},_K(c,G0(G0({},a),{},{payload:U,label:Z,active:_,activeIndex:P,coordinate:R,accessibilityLayer:O})));return m.createElement(m.Fragment,null,sp.createPortal(V,ie),_&&m.createElement(hK,{cursor:b,tooltipEventType:M,coordinate:R,payload:U,index:P}))}var oI=e=>null;oI.displayName="Cell";function $K(e,t,n){return(t=UK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UK(e){var t=WK(e,"string");return typeof t=="symbol"?t:t+""}function WK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class qK{constructor(t){$K(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function Q0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function HK(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q0(Object(n),!0).forEach(function(a){KK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q0(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function KK(e,t,n){return(t=VK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VK(e){var t=GK(e,"string");return typeof t=="symbol"?t:t+""}function GK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YK={cacheSize:2e3,enableCache:!0},lI=HK({},YK),Z0=new qK(lI.cacheSize),QK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},X0="recharts_measurement_span";function ZK(e,t){var n=t.fontSize||"",a=t.fontFamily||"",i=t.fontWeight||"",r=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(r,"|").concat(o,"|").concat(l)}var J0=(e,t)=>{try{var n=document.getElementById(X0);n||(n=document.createElement("span"),n.setAttribute("id",X0),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,QK,t),n.textContent="".concat(e);var a=n.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},$o=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ql.isSsr)return{width:0,height:0};if(!lI.enableCache)return J0(t,n);var a=ZK(t,n),i=Z0.get(a);if(i)return i;var r=J0(t,n);return Z0.set(a,r),r},eS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,XK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,JK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,cI={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},e6=Object.keys(cI),lr="NaN";function t6(e,t){return e*cI[t]}class vn{static parse(t){var n,[,a,i]=(n=JK.exec(t))!==null&&n!==void 0?n:[];return new vn(parseFloat(a),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,fa(t)&&(this.unit=""),n!==""&&!XK.test(n)&&(this.num=NaN,this.unit=""),e6.includes(n)&&(this.num=t6(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new vn(NaN,""):new vn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new vn(NaN,""):new vn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new vn(NaN,""):new vn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new vn(NaN,""):new vn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return fa(this.num)}}function dI(e){if(e.includes(lr))return lr;for(var t=e;t.includes("*")||t.includes("/");){var n,[,a,i,r]=(n=eS.exec(t))!==null&&n!==void 0?n:[],o=vn.parse(a??""),l=vn.parse(r??""),c=i==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return lr;t=t.replace(eS,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,p,h]=(d=tS.exec(t))!==null&&d!==void 0?d:[],f=vn.parse(u??""),g=vn.parse(h??""),v=p==="+"?f.add(g):f.subtract(g);if(v.isNaN())return lr;t=t.replace(tS,v.toString())}return t}var nS=/\(([^()]*)\)/;function n6(e){for(var t=e,n;(n=nS.exec(t))!=null;){var[,a]=n;t=t.replace(nS,dI(a))}return t}function a6(e){var t=e.replace(/\s+/g,"");return t=n6(t),t=dI(t),t}function s6(e){try{return a6(e)}catch{return lr}}function hh(e){var t=s6(e.slice(5,-1));return t===lr?"":t}var i6=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],r6=["dx","dy","angle","className","breakAll"];function Ng(){return Ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ng.apply(null,arguments)}function aS(e,t){if(e==null)return{};var n,a,i=o6(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o6(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var uI=/[ \f\n\r\t\v\u2028\u2029]+/,pI=e=>{var{children:t,breakAll:n,style:a}=e;try{var i=[];st(t)||(n?i=t.toString().split(""):i=t.toString().split(uI));var r=i.map(l=>({word:l,width:$o(l,a).width})),o=n?0:$o("",a).width;return{wordsWithComputedWidth:r,spaceWidth:o}}catch{return null}};function l6(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var mI=(e,t,n,a)=>e.reduce((i,r)=>{var{word:o,width:l}=r,c=i[i.length-1];if(c&&l!=null&&(t==null||a||c.width+l+n<Number(t)))c.words.push(o),c.width+=l+n;else{var d={words:[o],width:l};i.push(d)}return i},[]),hI=e=>e.reduce((t,n)=>t.width>n.width?t:n),c6="",sS=(e,t,n,a,i,r,o,l)=>{var c=e.slice(0,t),d=pI({breakAll:n,style:a,children:c+c6});if(!d)return[!1,[]];var u=mI(d.wordsWithComputedWidth,r,o,l),p=u.length>i||hI(u).width>Number(r);return[p,u]},d6=(e,t,n,a,i)=>{var{maxLines:r,children:o,style:l,breakAll:c}=e,d=ye(r),u=String(o),p=mI(t,a,n,i);if(!d||i)return p;var h=p.length>r||hI(p).width>Number(a);if(!h)return p;for(var f=0,g=u.length-1,v=0,y;f<=g&&v<=u.length-1;){var b=Math.floor((f+g)/2),x=b-1,[w,j]=sS(u,x,c,l,r,a,n,i),[S]=sS(u,b,c,l,r,a,n,i);if(!w&&!S&&(f=b+1),w&&S&&(g=b-1),!w&&S){y=j;break}v++}return y||p},iS=e=>{var t=st(e)?[]:e.toString().split(uI);return[{words:t,width:void 0}]},u6=e=>{var{width:t,scaleToFit:n,children:a,style:i,breakAll:r,maxLines:o}=e;if((t||n)&&!ql.isSsr){var l,c,d=pI({breakAll:r,children:a,style:i});if(d){var{wordsWithComputedWidth:u,spaceWidth:p}=d;l=u,c=p}else return iS(a);return d6({breakAll:r,children:a,maxLines:o,style:i},l,c,t,!!n)}return iS(a)},fI="#808080",p6={angle:0,breakAll:!1,capHeight:"0.71em",fill:fI,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},wy=m.forwardRef((e,t)=>{var n=Yt(e,p6),{x:a,y:i,lineHeight:r,capHeight:o,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:u}=n,p=aS(n,i6),h=m.useMemo(()=>u6({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:c,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,c,p.style,p.width]),{dx:f,dy:g,angle:v,className:y,breakAll:b}=p,x=aS(p,r6);if(!Aa(a)||!Aa(i)||h.length===0)return null;var w=Number(a)+(ye(f)?f:0),j=Number(i)+(ye(g)?g:0);if(!bt(w)||!bt(j))return null;var S;switch(u){case"start":S=hh("calc(".concat(o,")"));break;case"middle":S=hh("calc(".concat((h.length-1)/2," * -").concat(r," + (").concat(o," / 2))"));break;default:S=hh("calc(".concat(h.length-1," * -").concat(r,")"));break}var k=[];if(c){var T=h[0].width,{width:L}=p;k.push("scale(".concat(ye(L)&&ye(T)?L/T:1,")"))}return v&&k.push("rotate(".concat(v,", ").concat(w,", ").concat(j,")")),k.length&&(x.transform=k.join(" ")),m.createElement("text",Ng({},dn(x),{ref:t,x:w,y:j,className:Ve("recharts-text",y),textAnchor:d,fill:l.includes("url")?fI:l}),h.map((F,O)=>{var M=F.words.join(b?"":" ");return m.createElement("tspan",{x:w,dy:O===0?S:r,key:"".concat(M,"-").concat(O)},M)}))});wy.displayName="Text";var m6=["labelRef"];function h6(e,t){if(e==null)return{};var n,a,i=f6(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f6(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function rS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rS(Object(n),!0).forEach(function(a){g6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function g6(e,t,n){return(t=v6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v6(e){var t=b6(e,"string");return typeof t=="symbol"?t:t+""}function b6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ra.apply(null,arguments)}var gI=m.createContext(null),y6=e=>{var{x:t,y:n,upperWidth:a,lowerWidth:i,width:r,height:o,children:l}=e,c=m.useMemo(()=>({x:t,y:n,upperWidth:a,lowerWidth:i,width:r,height:o}),[t,n,a,i,r,o]);return m.createElement(gI.Provider,{value:c},l)},vI=()=>{var e=m.useContext(gI),t=Lp();return e||w1(t)},x6=m.createContext(null),w6=()=>{var e=m.useContext(x6),t=xe(KE);return e||t},j6=e=>{var{value:t,formatter:n}=e,a=st(e.children)?t:e.children;return typeof n=="function"?n(a):a},jy=e=>e!=null&&typeof e=="function",S6=(e,t)=>{var n=xn(t-e),a=Math.min(Math.abs(t-e),360);return n*a},N6=(e,t,n,a,i)=>{var{offset:r,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:p,endAngle:h,clockWise:f}=i,g=(d+u)/2,v=S6(p,h),y=v>=0?1:-1,b,x;switch(t){case"insideStart":b=p+y*r,x=f;break;case"insideEnd":b=h-y*r,x=!f;break;case"end":b=h+y*r,x=f;break;default:throw new Error("Unsupported position ".concat(t))}x=v<=0?x:!x;var w=Kt(l,c,g,b),j=Kt(l,c,g,b+(x?1:-1)*359),S="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(x?0:1,`,
    `).concat(j.x,",").concat(j.y),k=st(e.id)?ul("recharts-radial-line-"):e.id;return m.createElement("text",Ra({},a,{dominantBaseline:"central",className:Ve("recharts-radial-bar-label",o)}),m.createElement("defs",null,m.createElement("path",{id:k,d:S})),m.createElement("textPath",{xlinkHref:"#".concat(k)},n))},C6=(e,t,n)=>{var{cx:a,cy:i,innerRadius:r,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(n==="outside"){var{x:u,y:p}=Kt(a,i,o+t,d);return{x:u,y:p,textAnchor:u>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(r+o)/2,{x:f,y:g}=Kt(a,i,h,d);return{x:f,y:g,textAnchor:"middle",verticalAnchor:"middle"}},Cg=e=>"cx"in e&&ye(e.cx),k6=(e,t)=>{var{parentViewBox:n,offset:a,position:i}=e,r;n!=null&&!Cg(n)&&(r=n);var{x:o,y:l,upperWidth:c,lowerWidth:d,height:u}=t,p=o,h=o+(c-d)/2,f=(p+h)/2,g=(c+d)/2,v=p+c/2,y=u>=0?1:-1,b=y*a,x=y>0?"end":"start",w=y>0?"start":"end",j=c>=0?1:-1,S=j*a,k=j>0?"end":"start",T=j>0?"start":"end";if(i==="top"){var L={x:p+c/2,y:l-b,textAnchor:"middle",verticalAnchor:x};return ht(ht({},L),r?{height:Math.max(l-r.y,0),width:c}:{})}if(i==="bottom"){var F={x:h+d/2,y:l+u+b,textAnchor:"middle",verticalAnchor:w};return ht(ht({},F),r?{height:Math.max(r.y+r.height-(l+u),0),width:d}:{})}if(i==="left"){var O={x:f-S,y:l+u/2,textAnchor:k,verticalAnchor:"middle"};return ht(ht({},O),r?{width:Math.max(O.x-r.x,0),height:u}:{})}if(i==="right"){var M={x:f+g+S,y:l+u/2,textAnchor:T,verticalAnchor:"middle"};return ht(ht({},M),r?{width:Math.max(r.x+r.width-M.x,0),height:u}:{})}var P=r?{width:g,height:u}:{};return i==="insideLeft"?ht({x:f+S,y:l+u/2,textAnchor:T,verticalAnchor:"middle"},P):i==="insideRight"?ht({x:f+g-S,y:l+u/2,textAnchor:k,verticalAnchor:"middle"},P):i==="insideTop"?ht({x:p+c/2,y:l+b,textAnchor:"middle",verticalAnchor:w},P):i==="insideBottom"?ht({x:h+d/2,y:l+u-b,textAnchor:"middle",verticalAnchor:x},P):i==="insideTopLeft"?ht({x:p+S,y:l+b,textAnchor:T,verticalAnchor:w},P):i==="insideTopRight"?ht({x:p+c-S,y:l+b,textAnchor:k,verticalAnchor:w},P):i==="insideBottomLeft"?ht({x:h+S,y:l+u-b,textAnchor:T,verticalAnchor:x},P):i==="insideBottomRight"?ht({x:h+d-S,y:l+u-b,textAnchor:k,verticalAnchor:x},P):i&&typeof i=="object"&&(ye(i.x)||Xa(i.x))&&(ye(i.y)||Xa(i.y))?ht({x:o+ga(i.x,g),y:l+ga(i.y,u),textAnchor:"end",verticalAnchor:"end"},P):ht({x:v,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},P)},P6={angle:0,offset:5,zIndex:Rt.label,position:"middle",textBreakAll:!1};function js(e){var t=Yt(e,P6),{viewBox:n,position:a,value:i,children:r,content:o,className:l="",textBreakAll:c,labelRef:d}=t,u=w6(),p=vI(),h=a==="center"?p:u??p,f,g,v;if(n==null?f=h:Cg(n)?f=n:f=w1(n),!f||st(i)&&st(r)&&!m.isValidElement(o)&&typeof o!="function")return null;var y=ht(ht({},t),{},{viewBox:f});if(m.isValidElement(o)){var{labelRef:b}=y,x=h6(y,m6);return m.cloneElement(o,x)}if(typeof o=="function"){if(g=m.createElement(o,y),m.isValidElement(g))return g}else g=j6(t);var w=dn(t);if(Cg(f)){if(a==="insideStart"||a==="insideEnd"||a==="end")return N6(t,a,g,w,f);v=C6(f,t.offset,t.position)}else v=k6(t,f);return m.createElement(ea,{zIndex:t.zIndex},m.createElement(wy,Ra({ref:d,className:Ve("recharts-label",l)},w,v,{textAnchor:l6(w.textAnchor)?w.textAnchor:v.textAnchor,breakAll:c}),g))}js.displayName="Label";var A6=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return e===!0?m.createElement(js,Ra({key:"label-implicit"},a)):Aa(e)?m.createElement(js,Ra({key:"label-implicit",value:e},a)):m.isValidElement(e)?e.type===js?m.cloneElement(e,ht({key:"label-implicit"},a)):m.createElement(js,Ra({key:"label-implicit",content:e},a)):jy(e)?m.createElement(js,Ra({key:"label-implicit",content:e},a)):e&&typeof e=="object"?m.createElement(js,Ra({},e,{key:"label-implicit"},a)):null};function E6(e){var{label:t,labelRef:n}=e,a=vI();return A6(t,a,n)||null}var bI={},yI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(yI);var xI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(xI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yI,n=xI,a=vp;function i(r){if(a.isArrayLike(r))return t.last(n.toArray(r))}e.last=i})(bI);var T6=bI.last;const I6=Ia(T6);var O6=["valueAccessor"],L6=["dataKey","clockWise","id","textBreakAll","zIndex"];function Iu(){return Iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Iu.apply(null,arguments)}function oS(e,t){if(e==null)return{};var n,a,i=M6(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function M6(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var D6=e=>Array.isArray(e.value)?I6(e.value):e.value,wI=m.createContext(void 0),jI=wI.Provider,SI=m.createContext(void 0);SI.Provider;function F6(){return m.useContext(wI)}function z6(){return m.useContext(SI)}function gd(e){var{valueAccessor:t=D6}=e,n=oS(e,O6),{dataKey:a,clockWise:i,id:r,textBreakAll:o,zIndex:l}=n,c=oS(n,L6),d=F6(),u=z6(),p=d||u;return!p||!p.length?null:m.createElement(ea,{zIndex:l??Rt.label},m.createElement(Qn,{className:"recharts-label-list"},p.map((h,f)=>{var g,v=st(a)?t(h,f):At(h&&h.payload,a),y=st(r)?{}:{id:"".concat(r,"-").concat(f)};return m.createElement(js,Iu({key:"label-".concat(f)},dn(h),c,y,{fill:(g=n.fill)!==null&&g!==void 0?g:h.fill,parentViewBox:h.parentViewBox,value:v,textBreakAll:o,viewBox:h.viewBox,index:f,zIndex:0}))})))}gd.displayName="LabelList";function NI(e){var{label:t}=e;return t?t===!0?m.createElement(gd,{key:"labelList-implicit"}):m.isValidElement(t)||jy(t)?m.createElement(gd,{key:"labelList-implicit",content:t}):typeof t=="object"?m.createElement(gd,Iu({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function kg(){return kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kg.apply(null,arguments)}var CI=e=>{var{cx:t,cy:n,r:a,className:i}=e,r=Ve("recharts-dot",i);return ye(t)&&ye(n)&&ye(a)?m.createElement("circle",kg({},ha(e),Zv(e),{className:r,cx:t,cy:n,r:a})):null},R6={radiusAxis:{},angleAxis:{}},kI=kn({name:"polarAxis",initialState:R6,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:mX,removeRadiusAxis:hX,addAngleAxis:fX,removeAngleAxis:gX}=kI.actions,_6=kI.reducer,PI={exports:{}},Ye={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy=Symbol.for("react.transitional.element"),Ny=Symbol.for("react.portal"),sm=Symbol.for("react.fragment"),im=Symbol.for("react.strict_mode"),rm=Symbol.for("react.profiler"),om=Symbol.for("react.consumer"),lm=Symbol.for("react.context"),cm=Symbol.for("react.forward_ref"),dm=Symbol.for("react.suspense"),um=Symbol.for("react.suspense_list"),pm=Symbol.for("react.memo"),mm=Symbol.for("react.lazy"),B6=Symbol.for("react.view_transition"),$6=Symbol.for("react.client.reference");function ta(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Sy:switch(e=e.type,e){case sm:case rm:case im:case dm:case um:case B6:return e;default:switch(e=e&&e.$$typeof,e){case lm:case cm:case mm:case pm:return e;case om:return e;default:return t}}case Ny:return t}}}Ye.ContextConsumer=om;Ye.ContextProvider=lm;Ye.Element=Sy;Ye.ForwardRef=cm;Ye.Fragment=sm;Ye.Lazy=mm;Ye.Memo=pm;Ye.Portal=Ny;Ye.Profiler=rm;Ye.StrictMode=im;Ye.Suspense=dm;Ye.SuspenseList=um;Ye.isContextConsumer=function(e){return ta(e)===om};Ye.isContextProvider=function(e){return ta(e)===lm};Ye.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sy};Ye.isForwardRef=function(e){return ta(e)===cm};Ye.isFragment=function(e){return ta(e)===sm};Ye.isLazy=function(e){return ta(e)===mm};Ye.isMemo=function(e){return ta(e)===pm};Ye.isPortal=function(e){return ta(e)===Ny};Ye.isProfiler=function(e){return ta(e)===rm};Ye.isStrictMode=function(e){return ta(e)===im};Ye.isSuspense=function(e){return ta(e)===dm};Ye.isSuspenseList=function(e){return ta(e)===um};Ye.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===sm||e===rm||e===im||e===dm||e===um||typeof e=="object"&&e!==null&&(e.$$typeof===mm||e.$$typeof===pm||e.$$typeof===lm||e.$$typeof===om||e.$$typeof===cm||e.$$typeof===$6||e.getModuleId!==void 0)};Ye.typeOf=ta;PI.exports=Ye;var U6=PI.exports,lS=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",cS=null,fh=null,AI=e=>{if(e===cS&&Array.isArray(fh))return fh;var t=[];return m.Children.forEach(e,n=>{st(n)||(U6.isFragment(n)?t=t.concat(AI(n.props.children)):t.push(n))}),fh=t,cS=e,t};function W6(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(i=>lS(i)):a=[lS(t)],AI(e).forEach(i=>{var r=Ar(i,"type.displayName")||Ar(i,"type.name");r&&a.indexOf(r)!==-1&&n.push(i)}),n}var EI=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,TI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${r}]`}let a=n;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(n)===a}e.isPlainObject=t})(TI);var q6=TI.isPlainObject;const H6=Ia(q6);function dS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function uS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dS(Object(n),!0).forEach(function(a){K6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function K6(e,t,n){return(t=V6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V6(e){var t=G6(e,"string");return typeof t=="symbol"?t:t+""}function G6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ou(){return Ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ou.apply(null,arguments)}var pS=(e,t,n,a,i)=>{var r=n-a,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-r/2,",").concat(t+i),o+="L ".concat(e+n-r/2-a,",").concat(t+i),o+="L ".concat(e,",").concat(t," Z"),o},Y6={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Q6=e=>{var t=Yt(e,Y6),{x:n,y:a,upperWidth:i,lowerWidth:r,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:p}=t,h=m.useRef(null),[f,g]=m.useState(-1),v=m.useRef(i),y=m.useRef(r),b=m.useRef(o),x=m.useRef(n),w=m.useRef(a),j=_p(e,"trapezoid-");if(m.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var E=h.current.getTotalLength();E&&g(E)}catch{}},[]),n!==+n||a!==+a||i!==+i||r!==+r||o!==+o||i===0&&r===0||o===0)return null;var S=Ve("recharts-trapezoid",l);if(!p)return m.createElement("g",null,m.createElement("path",Ou({},dn(t),{className:S,d:pS(n,a,i,r,o)})));var k=v.current,T=y.current,L=b.current,F=x.current,O=w.current,M="0px ".concat(f===-1?1:f,"px"),P="".concat(f,"px 0px"),D=O1(["strokeDasharray"],d,c);return m.createElement(Rp,{animationId:j,key:j,canBegin:f>0,duration:d,easing:c,isActive:p,begin:u},E=>{var N=pt(k,i,E),R=pt(T,r,E),C=pt(L,o,E),A=pt(F,n,E),_=pt(O,a,E);h.current&&(v.current=N,y.current=R,b.current=C,x.current=A,w.current=_);var B=E>0?{transition:D,strokeDasharray:P}:{strokeDasharray:M};return m.createElement("path",Ou({},dn(t),{className:S,d:pS(A,_,N,R,C),ref:h,style:uS(uS({},B),t.style)}))})},Z6=["option","shapeType","propTransformer","activeClassName"];function X6(e,t){if(e==null)return{};var n,a,i=J6(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function J6(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function mS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Lu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mS(Object(n),!0).forEach(function(a){e8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function e8(e,t,n){return(t=t8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t8(e){var t=n8(e,"string");return typeof t=="symbol"?t:t+""}function n8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a8(e,t){return Lu(Lu({},t),e)}function s8(e,t){return e==="symbols"}function hS(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return m.createElement(F1,n);case"trapezoid":return m.createElement(Q6,n);case"sector":return m.createElement(_1,n);case"symbols":if(s8(t))return m.createElement(Qv,n);break;case"curve":return m.createElement(I1,n);default:return null}}function i8(e){return m.isValidElement(e)?e.props:e}function II(e){var{option:t,shapeType:n,propTransformer:a=a8,activeClassName:i="recharts-active-shape"}=e,r=X6(e,Z6),o;if(m.isValidElement(t))o=m.cloneElement(t,Lu(Lu({},r),i8(t)));else if(typeof t=="function")o=t(r,r.index);else if(H6(t)&&typeof t!="boolean"){var l=a(t,r);o=m.createElement(hS,{shapeType:n,elementProps:l})}else{var c=r;o=m.createElement(hS,{shapeType:n,elementProps:c})}return r.isActive?m.createElement(Qn,{className:i},o):o}var OI=(e,t,n)=>{var a=ct();return(i,r)=>o=>{e==null||e(i,r,o),a(DT({activeIndex:String(r),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},LI=e=>{var t=ct();return(n,a)=>i=>{e==null||e(n,a,i),t(R4())}},MI=(e,t,n)=>{var a=ct();return(i,r)=>o=>{e==null||e(i,r,o),a(_4({activeIndex:String(r),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function DI(e){var{tooltipEntrySettings:t}=e,n=ct(),a=nn(),i=m.useRef(null);return m.useLayoutEffect(()=>{a||(i.current===null?n(M4(t)):i.current!==t&&n(D4({prev:i.current,next:t})),i.current=t)},[t,n,a]),m.useLayoutEffect(()=>()=>{i.current&&(n(F4(i.current)),i.current=null)},[n]),null}function FI(e){var{legendPayload:t}=e,n=ct(),a=nn(),i=m.useRef(null);return m.useLayoutEffect(()=>{a||(i.current===null?n(rU(t)):i.current!==t&&n(oU({prev:i.current,next:t})),i.current=t)},[n,a,t]),m.useLayoutEffect(()=>()=>{i.current&&(n(lU(i.current)),i.current=null)},[n]),null}var gh,r8=()=>{var[e]=m.useState(()=>ul("uid-"));return e},o8=(gh=xN.useId)!==null&&gh!==void 0?gh:r8;function zI(e,t){var n=o8();return t||(e?"".concat(e,"-").concat(n):n)}var l8=m.createContext(void 0),RI=e=>{var{id:t,type:n,children:a}=e,i=zI("recharts-".concat(n),t);return m.createElement(l8.Provider,{value:i},a(i))},c8={cartesianItems:[],polarItems:[]},_I=kn({name:"graphicalItems",initialState:c8,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:tt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:a}=t.payload,i=ua(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=a)},prepare:tt()},removeCartesianGraphicalItem:{reducer(e,t){var n=ua(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:tt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:tt()},removePolarGraphicalItem:{reducer(e,t){var n=ua(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:tt()}}}),{addCartesianGraphicalItem:d8,replaceCartesianGraphicalItem:u8,removeCartesianGraphicalItem:p8,addPolarGraphicalItem:vX,removePolarGraphicalItem:bX}=_I.actions,m8=_I.reducer,h8=e=>{var t=ct(),n=m.useRef(null);return m.useLayoutEffect(()=>{n.current===null?t(d8(e)):n.current!==e&&t(u8({prev:n.current,next:e})),n.current=e},[t,e]),m.useLayoutEffect(()=>()=>{n.current&&(t(p8(n.current)),n.current=null)},[t]),null},BI=m.memo(h8),f8=["points"];function fS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function vh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fS(Object(n),!0).forEach(function(a){g8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function g8(e,t,n){return(t=v8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v8(e){var t=b8(e,"string");return typeof t=="symbol"?t:t+""}function b8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mu(){return Mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Mu.apply(null,arguments)}function y8(e,t){if(e==null)return{};var n,a,i=x8(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function x8(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function w8(e){var{option:t,dotProps:n,className:a}=e;if(m.isValidElement(t))return m.cloneElement(t,n);if(typeof t=="function")return t(n);var i=Ve(a,typeof t!="boolean"?t.className:""),r=n??{},{points:o}=r,l=y8(r,f8);return m.createElement(CI,Mu({},l,{className:i}))}function j8(e,t){return e==null?!1:t?!0:e.length===1}function S8(e){var{points:t,dot:n,className:a,dotClassName:i,dataKey:r,baseProps:o,needClip:l,clipPathId:c,zIndex:d=Rt.scatter}=e;if(!j8(t,n))return null;var u=EI(n),p=h_(n),h=t.map((g,v)=>{var y,b,x=vh(vh(vh({r:3},o),p),{},{index:v,cx:(y=g.x)!==null&&y!==void 0?y:void 0,cy:(b=g.y)!==null&&b!==void 0?b:void 0,dataKey:r,value:g.value,payload:g.payload,points:t});return m.createElement(w8,{key:"dot-".concat(v),option:n,dotProps:x,className:i})}),f={};return l&&c!=null&&(f.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(c,")")),m.createElement(ea,{zIndex:d},m.createElement(Qn,Mu({className:a},f),h))}function gS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function vS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gS(Object(n),!0).forEach(function(a){N8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function N8(e,t,n){return(t=C8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C8(e){var t=k8(e,"string");return typeof t=="symbol"?t:t+""}function k8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P8={xAxis:{},yAxis:{},zAxis:{}},$I=kn({name:"cartesianAxis",initialState:P8,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:tt()},replaceXAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.xAxis[n.id],e.xAxis[a.id]=a)},prepare:tt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:tt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:tt()},replaceYAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.yAxis[n.id],e.yAxis[a.id]=a)},prepare:tt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:tt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:tt()},replaceZAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.zAxis[n.id],e.zAxis[a.id]=a)},prepare:tt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:tt()},updateYAxisWidth(e,t){var{id:n,width:a}=t.payload,i=e.yAxis[n];if(i){var r=i.widthHistory||[];if(r.length===3&&r[0]===r[2]&&a===r[1]&&a!==i.width&&Math.abs(a-r[0])<=1)return;var o=[...r,a].slice(-3);e.yAxis[n]=vS(vS({},e.yAxis[n]),{},{width:a,widthHistory:o})}}}}),{addXAxis:A8,replaceXAxis:E8,removeXAxis:T8,addYAxis:I8,replaceYAxis:O8,removeYAxis:L8,addZAxis:yX,replaceZAxis:xX,removeZAxis:wX,updateYAxisWidth:M8}=$I.actions,D8=$I.reducer,F8=te([$t],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),z8=te([F8,ls,cs],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),Cy=()=>xe(z8),R8=()=>xe(A5);function bS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function bh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bS(Object(n),!0).forEach(function(a){_8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _8(e,t,n){return(t=B8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B8(e){var t=$8(e,"string");return typeof t=="symbol"?t:t+""}function $8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U8=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:i,dataKey:r,clipPath:o}=e;if(i===!1||t.x==null||t.y==null)return null;var l={index:n,dataKey:r,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=bh(bh(bh({},l),Dl(i)),Zv(i)),d;return m.isValidElement(i)?d=m.cloneElement(i,c):typeof i=="function"?d=i(c):d=m.createElement(CI,c),m.createElement(Qn,{className:"recharts-active-dot",clipPath:o},d)};function W8(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:i,clipPath:r,zIndex:o=Rt.activeDot}=e,l=xe(Oi),c=R8();if(t==null||c==null)return null;var d=t.find(u=>c.includes(u.payload));return st(d)?null:m.createElement(ea,{zIndex:o},m.createElement(U8,{point:d,childIndex:Number(l),mainColor:n,dataKey:i,activeDot:a,clipPath:r}))}var q8="Invariant failed";function H8(e,t){throw new Error(q8)}var K8=["x","y"];function Pg(){return Pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pg.apply(null,arguments)}function yS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function yo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yS(Object(n),!0).forEach(function(a){V8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function V8(e,t,n){return(t=G8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G8(e){var t=Y8(e,"string");return typeof t=="symbol"?t:t+""}function Y8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q8(e,t){if(e==null)return{};var n,a,i=Z8(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z8(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function X8(e,t){var{x:n,y:a}=e,i=Q8(e,K8),r="".concat(n),o=parseInt(r,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||i.height),u=parseInt(d,10),p="".concat(t.width||i.width),h=parseInt(p,10);return yo(yo(yo(yo(yo({},t),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function Du(e){return m.createElement(II,Pg({shapeType:"rectangle",propTransformer:X8,activeClassName:"recharts-active-bar"},e))}var J8=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,i)=>{if(ye(t))return t;var r=ye(a)||st(a);return r?t(a,i):(r||H8(),n)}},eV={},UI=kn({name:"errorBars",initialState:eV,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]||(e[n]=[]),e[n].push(a)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:a,next:i}=t.payload;e[n]&&(e[n]=e[n].map(r=>r.dataKey===a.dataKey&&r.direction===a.direction?i:r))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==a.dataKey||i.direction!==a.direction))}}}),{addErrorBar:jX,replaceErrorBar:SX,removeErrorBar:NX}=UI.actions,tV=UI.reducer,nV=["children"];function aV(e,t){if(e==null)return{};var n,a,i=sV(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sV(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var iV={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},rV=m.createContext(iV);function WI(e){var{children:t}=e,n=aV(e,nV);return m.createElement(rV.Provider,{value:n},t)}function ky(e,t){var n,a,i=xe(d=>us(d,e)),r=xe(d=>ps(d,t)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Mt.allowDataOverflow,l=(a=r==null?void 0:r.allowDataOverflow)!==null&&a!==void 0?a:Dt.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function qI(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,i=Cy(),{needClipX:r,needClipY:o,needClip:l}=ky(t,n);if(!l||!i)return null;var{x:c,y:d,width:u,height:p}=i;return m.createElement("clipPath",{id:"clipPath-".concat(a)},m.createElement("rect",{x:r?c:c-u/2,y:o?d:d-p/2,width:r?u:u*2,height:o?p:p*2}))}function oV(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&bt(e.zIndex)?e.zIndex:t}var lV={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc=m;function cV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dV=typeof Object.is=="function"?Object.is:cV,uV=sc.useSyncExternalStore,pV=sc.useRef,mV=sc.useEffect,hV=sc.useMemo,fV=sc.useDebugValue;lV.useSyncExternalStoreWithSelector=function(e,t,n,a,i){var r=pV(null);if(r.current===null){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=hV(function(){function c(f){if(!d){if(d=!0,u=f,f=a(f),i!==void 0&&o.hasValue){var g=o.value;if(i(g,f))return p=g}return p=f}if(g=p,dV(u,f))return g;var v=a(f);return i!==void 0&&i(g,v)?(u=f,g):(u=f,p=v)}var d=!1,u,p,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,a,i]);var l=uV(e,r[0],r[1]);return mV(function(){o.hasValue=!0,o.value=l},[l]),fV(l),l};function gV(e){e()}function vV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){gV(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!a||e===null||(a=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var xS={notify(){},get:()=>[]};function bV(e,t){let n,a=xS,i=0,r=!1;function o(v){u();const y=a.subscribe(v);let b=!1;return()=>{b||(b=!0,y(),p())}}function l(){a.notify()}function c(){g.onStateChange&&g.onStateChange()}function d(){return r}function u(){i++,n||(n=e.subscribe(c),a=vV())}function p(){i--,n&&i===0&&(n(),n=void 0,a.clear(),a=xS)}function h(){r||(r=!0,u())}function f(){r&&(r=!1,p())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>a};return g}var yV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xV=yV(),wV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",jV=wV(),SV=()=>xV||jV?m.useLayoutEffect:m.useEffect,NV=SV();function wS(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function CV(e,t){if(wS(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!wS(e[n[i]],t[n[i]]))return!1;return!0}var yh=Symbol.for("react-redux-context"),xh=typeof globalThis<"u"?globalThis:{};function kV(){if(!m.createContext)return{};const e=xh[yh]??(xh[yh]=new Map);let t=e.get(m.createContext);return t||(t=m.createContext(null),e.set(m.createContext,t)),t}var PV=kV();function AV(e){const{children:t,context:n,serverState:a,store:i}=e,r=m.useMemo(()=>{const c=bV(i);return{store:i,subscription:c,getServerState:a?()=>a:void 0}},[i,a]),o=m.useMemo(()=>i.getState(),[i]);NV(()=>{const{subscription:c}=r;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[r,o]);const l=n||PV;return m.createElement(l.Provider,{value:r},t)}var EV=AV,TV=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function IV(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function hm(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of n)if(TV.has(a)){if(e[a]==null&&t[a]==null)continue;if(!CV(e[a],t[a]))return!1}else if(!IV(e[a],t[a]))return!1;return!0}var OV=["onMouseEnter","onMouseLeave","onClick"],LV=["value","background","tooltipPosition"],MV=["id"],DV=["onMouseEnter","onClick","onMouseLeave"];function ss(){return ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ss.apply(null,arguments)}function jS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jS(Object(n),!0).forEach(function(a){FV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function FV(e,t,n){return(t=zV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zV(e){var t=RV(e,"string");return typeof t=="symbol"?t:t+""}function RV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fu(e,t){if(e==null)return{};var n,a,i=_V(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _V(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var BV=e=>{var{dataKey:t,name:n,fill:a,legendType:i,hide:r}=e;return[{inactive:r,dataKey:t,type:i,color:a,value:Ap(n,t),payload:e}]},$V=m.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:a,fill:i,name:r,hide:o,unit:l,tooltipType:c}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:Ap(r,t),hide:o,type:c,color:i,unit:l}};return m.createElement(DI,{tooltipEntrySettings:d})});function UV(e){var t=xe(Oi),{data:n,dataKey:a,background:i,allOtherBarProps:r}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=r,d=Fu(r,OV),u=OI(o,a),p=LI(l),h=MI(c,a);if(!i||n==null)return null;var f=Dl(i);return m.createElement(ea,{zIndex:oV(i,Rt.barBackground)},n.map((g,v)=>{var{value:y,background:b,tooltipPosition:x}=g,w=Fu(g,LV);if(!b)return null;var j=u(g,v),S=p(g,v),k=h(g,v),T=sn(sn(sn(sn(sn({option:i,isActive:String(v)===t},w),{},{fill:"#eee"},b),f),gp(d,g,v)),{},{onMouseEnter:j,onMouseLeave:S,onClick:k,dataKey:a,index:v,className:"recharts-bar-background-rectangle"});return m.createElement(Du,ss({key:"background-bar-".concat(v)},T))}))}function WV(e){var{showLabels:t,children:n,rects:a}=e,i=a==null?void 0:a.map(r=>{var o={x:r.x,y:r.y,width:r.width,lowerWidth:r.width,upperWidth:r.width,height:r.height};return sn(sn({},o),{},{value:r.value,payload:r.payload,parentViewBox:r.parentViewBox,viewBox:o,fill:r.fill})});return m.createElement(jI,{value:t?i:void 0},n)}function qV(e){var{shape:t,activeBar:n,baseProps:a,entry:i,index:r,dataKey:o}=e,l=xe(Oi),c=xe(YT),d=n&&String(r)===l&&(c==null||o===c),u=d?n:t;return d?m.createElement(ea,{zIndex:Rt.activeBar},m.createElement(Du,ss({},a,{name:String(a.name)},i,{isActive:d,option:u,index:r,dataKey:o}))):m.createElement(Du,ss({},a,{name:String(a.name)},i,{isActive:d,option:u,index:r,dataKey:o}))}function HV(e){var{shape:t,baseProps:n,entry:a,index:i,dataKey:r}=e;return m.createElement(Du,ss({},n,{name:String(n.name)},a,{isActive:!1,option:t,index:i,dataKey:r}))}function KV(e){var t,{data:n,props:a}=e,i=(t=ha(a))!==null&&t!==void 0?t:{},{id:r}=i,o=Fu(i,MV),{shape:l,dataKey:c,activeBar:d}=a,{onMouseEnter:u,onClick:p,onMouseLeave:h}=a,f=Fu(a,DV),g=OI(u,c),v=LI(h),y=MI(p,c);return n?m.createElement(m.Fragment,null,n.map((b,x)=>m.createElement(Qn,ss({key:"rectangle-".concat(b==null?void 0:b.x,"-").concat(b==null?void 0:b.y,"-").concat(b==null?void 0:b.value,"-").concat(x),className:"recharts-bar-rectangle"},gp(f,b,x),{onMouseEnter:g(b,x),onMouseLeave:v(b,x),onClick:y(b,x)}),d?m.createElement(qV,{shape:l,activeBar:d,baseProps:o,entry:b,index:x,dataKey:c}):m.createElement(HV,{shape:l,baseProps:o,entry:b,index:x,dataKey:c})))):null}function VV(e){var{props:t,previousRectanglesRef:n}=e,{data:a,layout:i,isAnimationActive:r,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,p=n.current,h=_p(t,"recharts-bar-"),[f,g]=m.useState(!1),v=!f,y=m.useCallback(()=>{typeof d=="function"&&d(),g(!1)},[d]),b=m.useCallback(()=>{typeof u=="function"&&u(),g(!0)},[u]);return m.createElement(WV,{showLabels:v,rects:a},m.createElement(Rp,{animationId:h,begin:o,duration:l,isActive:r,easing:c,onAnimationEnd:y,onAnimationStart:b,key:h},x=>{var w=x===1?a:a==null?void 0:a.map((j,S)=>{var k=p&&p[S];if(k)return sn(sn({},j),{},{x:pt(k.x,j.x,x),y:pt(k.y,j.y,x),width:pt(k.width,j.width,x),height:pt(k.height,j.height,x)});if(i==="horizontal"){var T=pt(0,j.height,x),L=pt(j.stackedBarStart,j.y,x);return sn(sn({},j),{},{y:L,height:T})}var F=pt(0,j.width,x),O=pt(j.stackedBarStart,j.x,x);return sn(sn({},j),{},{width:F,x:O})});return x>0&&(n.current=w??null),w==null?null:m.createElement(Qn,null,m.createElement(KV,{props:t,data:w}))}),m.createElement(NI,{label:t.label}),t.children)}function GV(e){var t=m.useRef(null);return m.createElement(VV,{previousRectanglesRef:t,props:e})}var HI=0,YV=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:At(e,t)}};class QV extends m.PureComponent{render(){var{hide:t,data:n,dataKey:a,className:i,xAxisId:r,yAxisId:o,needClip:l,background:c,id:d}=this.props;if(t||n==null)return null;var u=Ve("recharts-bar",i),p=d;return m.createElement(Qn,{className:u,id:d},l&&m.createElement("defs",null,m.createElement(qI,{clipPathId:p,xAxisId:r,yAxisId:o})),m.createElement(Qn,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(p,")"):void 0},m.createElement(UV,{data:n,dataKey:a,background:c,allOtherBarProps:this.props}),m.createElement(GV,this.props)))}}var ZV={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:HI,xAxisId:0,yAxisId:0,zIndex:Rt.bar};function XV(e){var{xAxisId:t,yAxisId:n,hide:a,legendType:i,minPointSize:r,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:p}=ky(t,n),h=Ul(),f=nn(),g=W6(e.children,oI),v=xe(x=>kG(x,t,n,f,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var y,b=v==null?void 0:v[0];return b==null||b.height==null||b.width==null?y=0:y=h==="vertical"?b.height/2:b.width/2,m.createElement(WI,{xAxisId:t,yAxisId:n,data:v,dataPointFormatter:YV,errorBarOffset:y},m.createElement(QV,ss({},e,{layout:h,needClip:p,data:v,xAxisId:t,yAxisId:n,hide:a,legendType:i,minPointSize:r,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function JV(e){var{layout:t,barSettings:{dataKey:n,minPointSize:a},pos:i,bandSize:r,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:p,offset:h,cells:f,parentViewBox:g,dataStartIndex:v}=e,y=t==="horizontal"?l:o,b=u?y.scale.domain():null,x=p$({numericAxis:y}),w=y.scale(x);return p.map((j,S)=>{var k,T,L,F,O,M;u?k=r$(u[S+v],b):(k=At(j,n),Array.isArray(k)||(k=[x,k]));var P=J8(a,HI)(k[1],S);if(t==="horizontal"){var D,[E,N]=[l.scale(k[0]),l.scale(k[1])];T=lj({axis:o,ticks:c,bandSize:r,offset:i.offset,entry:j,index:S}),L=(D=N??E)!==null&&D!==void 0?D:void 0,F=i.size;var R=E-N;if(O=fa(R)?0:R,M={x:T,y:h.top,width:F,height:h.height},Math.abs(P)>0&&Math.abs(O)<Math.abs(P)){var C=xn(O||P)*(Math.abs(P)-Math.abs(O));L-=C,O+=C}}else{var[A,_]=[o.scale(k[0]),o.scale(k[1])];if(T=A,L=lj({axis:l,ticks:d,bandSize:r,offset:i.offset,entry:j,index:S}),F=_-A,O=i.size,M={x:h.left,y:L,width:h.width,height:O},Math.abs(P)>0&&Math.abs(F)<Math.abs(P)){var B=xn(F||P)*(Math.abs(P)-Math.abs(F));F+=B}}if(T==null||L==null||F==null||O==null)return null;var H=sn(sn({},j),{},{stackedBarStart:w,x:T,y:L,width:F,height:O,value:u?k:k[1],payload:j,background:M,tooltipPosition:{x:T+F/2,y:L+O/2},parentViewBox:g},f&&f[S]&&f[S].props);return H}).filter(Boolean)}function eG(e){var t=Yt(e,ZV),n=nn();return m.createElement(RI,{id:t.id,type:"bar"},a=>m.createElement(m.Fragment,null,m.createElement(FI,{legendPayload:BV(t)}),m.createElement($V,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),m.createElement(BI,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:u$(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),m.createElement(ea,{zIndex:t.zIndex},m.createElement(XV,ss({},t,{id:a})))))}var gn=m.memo(eG,hm);gn.displayName="Bar";function SS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Hc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SS(Object(n),!0).forEach(function(a){tG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tG(e,t,n){return(t=nG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nG(e){var t=aG(e,"string");return typeof t=="symbol"?t:t+""}function aG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sG=(e,t)=>t,iG=(e,t,n)=>n,rG=(e,t,n,a)=>a,oG=(e,t,n,a,i)=>i,ic=te([em,oG],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),lG=te([ic],e=>e==null?void 0:e.maxBarSize),cG=(e,t,n,a,i,r)=>r,NS=(e,t,n)=>{var a=n??e;if(!st(a))return ga(a,t,0)},dG=te([Be,em,sG,iG,rG],(e,t,n,a,i)=>t.filter(r=>e==="horizontal"?r.xAxisId===n:r.yAxisId===a).filter(r=>r.isPanorama===i).filter(r=>r.hide===!1).filter(r=>r.type==="bar")),uG=(e,t,n,a)=>{var i=Be(e);return i==="horizontal"?yg(e,"yAxis",n,a):yg(e,"xAxis",t,a)},pG=(e,t,n)=>{var a=Be(e);return a==="horizontal"?L0(e,"xAxis",t):L0(e,"yAxis",n)},mG=(e,t,n)=>{var a={},i=e.filter(Zp),r=e.filter(d=>d.stackId==null),o=i.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),a),l=Object.entries(o).map(d=>{var[u,p]=d,h=p.map(g=>g.dataKey),f=NS(t,n,p[0].barSize);return{stackId:u,dataKeys:h,barSize:f}}),c=r.map(d=>{var u=[d.dataKey].filter(h=>h!=null),p=NS(t,n,d.barSize);return{stackId:void 0,dataKeys:u,barSize:p}});return[...l,...c]},hG=te([dG,PH,pG],mG),fG=(e,t,n,a,i)=>{var r,o,l=ic(e,t,n,a,i);if(l!=null){var c=Be(e),d=RE(e),{maxBarSize:u}=l,p=st(u)?d:u,h,f;return c==="horizontal"?(h=Ws(e,"xAxis",t,a),f=Us(e,"xAxis",t,a)):(h=Ws(e,"yAxis",n,a),f=Us(e,"yAxis",n,a)),(r=(o=Ir(h,f,!0))!==null&&o!==void 0?o:p)!==null&&r!==void 0?r:0}},KI=(e,t,n,a)=>{var i=Be(e),r,o;return i==="horizontal"?(r=Ws(e,"xAxis",t,a),o=Us(e,"xAxis",t,a)):(r=Ws(e,"yAxis",n,a),o=Us(e,"yAxis",n,a)),Ir(r,o)};function gG(e,t,n,a,i){var r=a.length;if(!(r<1)){var o=ga(e,n,0,!0),l,c=[];if(bt(a[0].barSize)){var d=!1,u=n/r,p=a.reduce((b,x)=>b+(x.barSize||0),0);p+=(r-1)*o,p>=n&&(p-=(r-1)*o,o=0),p>=n&&u>0&&(d=!0,u*=.9,p=r*u);var h=(n-p)/2>>0,f={offset:h-o,size:0};l=a.reduce((b,x)=>{var w,j={stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:f.offset+f.size+o,size:d?u:(w=x.barSize)!==null&&w!==void 0?w:0}},S=[...b,j];return f=S[S.length-1].position,S},c)}else{var g=ga(t,n,0,!0);n-2*g-(r-1)*o<=0&&(o=0);var v=(n-2*g-(r-1)*o)/r;v>1&&(v>>=0);var y=bt(i)?Math.min(v,i):v;l=a.reduce((b,x,w)=>[...b,{stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:g+(v+o)*w+(v-y)/2,size:y}}],c)}return l}}var vG=(e,t,n,a,i,r,o)=>{var l=st(o)?t:o,c=gG(n,a,i!==r?i:r,e,l);return i!==r&&c!=null&&(c=c.map(d=>Hc(Hc({},d),{},{position:Hc(Hc({},d.position),{},{offset:d.position.offset-i/2})}))),c},bG=te([hG,RE,kH,_E,fG,KI,lG],vG),yG=(e,t,n,a)=>Ws(e,"xAxis",t,a),xG=(e,t,n,a)=>Ws(e,"yAxis",n,a),wG=(e,t,n,a)=>Us(e,"xAxis",t,a),jG=(e,t,n,a)=>Us(e,"yAxis",n,a),SG=te([bG,ic],(e,t)=>{if(!(e==null||t==null)){var n=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),NG=(e,t)=>{var n=ty(t);if(!(!e||n==null||t==null)){var{stackId:a}=t;if(a!=null){var i=e[a];if(i){var{stackedData:r}=i;if(r)return r.find(o=>o.key===n)}}}},CG=te([uG,ic],NG),kG=te([$t,bb,yG,xG,wG,jG,SG,Be,Kp,KI,CG,ic,cG],(e,t,n,a,i,r,o,l,c,d,u,p,h)=>{var{chartData:f,dataStartIndex:g,dataEndIndex:v}=c;if(!(p==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||n==null||a==null||i==null||r==null||d==null)){var{data:y}=p,b;if(y!=null&&y.length>0?b=y:b=f==null?void 0:f.slice(g,v+1),b!=null)return JV({layout:l,barSettings:p,pos:o,parentViewBox:t,bandSize:d,xAxis:n,yAxis:a,xAxisTicks:i,yAxisTicks:r,stackedData:u,displayedData:b,offset:e,cells:h,dataStartIndex:g})}}),PG=e=>{var{chartData:t}=e,n=ct(),a=nn();return m.useEffect(()=>a?()=>{}:(n(H0(t)),()=>{n(H0(void 0))}),[t,n,a]),null},CS={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},VI=kn({name:"brush",initialState:CS,reducers:{setBrushSettings(e,t){return t.payload==null?CS:t.payload}}}),{setBrushSettings:CX}=VI.actions,AG=VI.reducer;function EG(e,t,n){return(t=TG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TG(e){var t=IG(e,"string");return typeof t=="symbol"?t:t+""}function IG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Py{static create(t){return new Py(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var r=this.bandwidth?this.bandwidth():0;return this.scale(t)+r}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?t>=a&&t<=i:t>=i&&t<=a}}EG(Py,"EPS",1e-4);function OG(e){return(e%180+180)%180}var LG=function(t){var{width:n,height:a}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=OG(i),o=r*Math.PI/180,l=Math.atan(a/n),c=o>l&&o<Math.PI-l?a/Math.sin(o):n/Math.cos(o);return Math.abs(c)},MG={dots:[],areas:[],lines:[]},GI=kn({name:"referenceElements",initialState:MG,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ua(e).dots.findIndex(a=>a===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ua(e).areas.findIndex(a=>a===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ua(e).lines.findIndex(a=>a===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:kX,removeDot:PX,addArea:AX,removeArea:EX,addLine:TX,removeLine:IX}=GI.actions,DG=GI.reducer,FG=m.createContext(void 0),zG=e=>{var{children:t}=e,[n]=m.useState("".concat(ul("recharts"),"-clip")),a=Cy();if(a==null)return null;var{x:i,y:r,width:o,height:l}=a;return m.createElement(FG.Provider,{value:n},m.createElement("defs",null,m.createElement("clipPath",{id:n},m.createElement("rect",{x:i,y:r,height:l,width:o}))),t)};function YI(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function RG(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return LG(a,n)}function _G(e,t,n){var a=n==="width",{x:i,y:r,width:o,height:l}=e;return t===1?{start:a?i:r,end:a?i+o:r+l}:{start:a?i+o:r+l,end:a?i:r}}function zu(e,t,n,a,i){if(e*t<e*a||e*t>e*i)return!1;var r=n();return e*(t-e*r/2-a)>=0&&e*(t+e*r/2-i)<=0}function BG(e,t){return YI(e,t+1)}function $G(e,t,n,a,i){for(var r=(a||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,p=function(){var g=a==null?void 0:a[c];if(g===void 0)return{v:YI(a,d)};var v=c,y,b=()=>(y===void 0&&(y=n(g,v)),y),x=g.coordinate,w=c===0||zu(e,x,b,u,l);w||(c=0,u=o,d+=1),w&&(u=x+e*(b()/2+i),c+=d)},h;d<=r.length;)if(h=p(),h)return h.v;return[]}function kS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kS(Object(n),!0).forEach(function(a){UG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function UG(e,t,n){return(t=WG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WG(e){var t=qG(e,"string");return typeof t=="symbol"?t:t+""}function qG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HG(e,t,n,a,i){for(var r=(a||[]).slice(),o=r.length,{start:l}=t,{end:c}=t,d=function(h){var f=r[h],g,v=()=>(g===void 0&&(g=n(f,h)),g);if(h===o-1){var y=e*(f.coordinate+e*v()/2-c);r[h]=f=Xt(Xt({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate})}else r[h]=f=Xt(Xt({},f),{},{tickCoord:f.coordinate});if(f.tickCoord!=null){var b=zu(e,f.tickCoord,v,l,c);b&&(c=f.tickCoord-e*(v()/2+i),r[h]=Xt(Xt({},f),{},{isShow:!0}))}},u=o-1;u>=0;u--)d(u);return r}function KG(e,t,n,a,i,r){var o=(a||[]).slice(),l=o.length,{start:c,end:d}=t;if(r){var u=a[l-1],p=n(u,l-1),h=e*(u.coordinate+e*p/2-d);if(o[l-1]=u=Xt(Xt({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),u.tickCoord!=null){var f=zu(e,u.tickCoord,()=>p,c,d);f&&(d=u.tickCoord-e*(p/2+i),o[l-1]=Xt(Xt({},u),{},{isShow:!0}))}}for(var g=r?l-1:l,v=function(x){var w=o[x],j,S=()=>(j===void 0&&(j=n(w,x)),j);if(x===0){var k=e*(w.coordinate-e*S()/2-c);o[x]=w=Xt(Xt({},w),{},{tickCoord:k<0?w.coordinate-k*e:w.coordinate})}else o[x]=w=Xt(Xt({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var T=zu(e,w.tickCoord,S,c,d);T&&(c=w.tickCoord+e*(S()/2+i),o[x]=Xt(Xt({},w),{},{isShow:!0}))}},y=0;y<g;y++)v(y);return o}function Ay(e,t,n){var{tick:a,ticks:i,viewBox:r,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:p}=e;if(!i||!i.length||!a)return[];if(ye(c)||ql.isSsr){var h;return(h=BG(i,ye(c)?c:0))!==null&&h!==void 0?h:[]}var f=[],g=l==="top"||l==="bottom"?"width":"height",v=u&&g==="width"?$o(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},y=(w,j)=>{var S=typeof d=="function"?d(w.value,j):w.value;return g==="width"?RG($o(S,{fontSize:t,letterSpacing:n}),v,p):$o(S,{fontSize:t,letterSpacing:n})[g]},b=i.length>=2?xn(i[1].coordinate-i[0].coordinate):1,x=_G(r,b,g);return c==="equidistantPreserveStart"?$G(b,x,y,i,o):(c==="preserveStart"||c==="preserveStartEnd"?f=KG(b,x,y,i,o,c==="preserveStartEnd"):f=HG(b,x,y,i,o),f.filter(w=>w.isShow))}var VG=e=>{var{ticks:t,label:n,labelGapWithTick:a=5,tickSize:i=0,tickMargin:r=0}=e,o=0;if(t){Array.from(t).forEach(u=>{if(u){var p=u.getBoundingClientRect();p.width>o&&(o=p.width)}});var l=n?n.getBoundingClientRect().width:0,c=i+r,d=o+c+l+(n?a:0);return Math.round(d)}return 0},GG=["axisLine","width","height","className","hide","ticks","axisType"];function YG(e,t){if(e==null)return{};var n,a,i=QG(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function QG(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Li(){return Li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Li.apply(null,arguments)}function PS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PS(Object(n),!0).forEach(function(a){ZG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ZG(e,t,n){return(t=XG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XG(e){var t=JG(e,"string");return typeof t=="symbol"?t:t+""}function JG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ka={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Rt.axis};function e7(e){var{x:t,y:n,width:a,height:i,orientation:r,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=yt(yt(yt({},c),ha(l)),{},{fill:"none"});if(r==="top"||r==="bottom"){var u=+(r==="top"&&!o||r==="bottom"&&o);d=yt(yt({},d),{},{x1:t,y1:n+u*i,x2:t+a,y2:n+u*i})}else{var p=+(r==="left"&&!o||r==="right"&&o);d=yt(yt({},d),{},{x1:t+p*a,y1:n,x2:t+p*a,y2:n+i})}return m.createElement("line",Li({},d,{className:Ve("recharts-cartesian-axis-line",Ar(l,"className"))}))}function t7(e,t,n,a,i,r,o,l,c){var d,u,p,h,f,g,v=l?-1:1,y=e.tickSize||o,b=ye(e.tickCoord)?e.tickCoord:e.coordinate;switch(r){case"top":d=u=e.coordinate,h=n+ +!l*i,p=h-v*y,g=p-v*c,f=b;break;case"left":p=h=e.coordinate,u=t+ +!l*a,d=u-v*y,f=d-v*c,g=b;break;case"right":p=h=e.coordinate,u=t+ +l*a,d=u+v*y,f=d+v*c,g=b;break;default:d=u=e.coordinate,h=n+ +l*i,p=h+v*y,g=p+v*c,f=b;break}return{line:{x1:d,y1:p,x2:u,y2:h},tick:{x:f,y:g}}}function n7(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function a7(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function s7(e){var{option:t,tickProps:n,value:a}=e,i,r=Ve(n.className,"recharts-cartesian-axis-tick-value");if(m.isValidElement(t))i=m.cloneElement(t,yt(yt({},n),{},{className:r}));else if(typeof t=="function")i=t(yt(yt({},n),{},{className:r}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Ve(o,t==null?void 0:t.className)),i=m.createElement(wy,Li({},n,{className:o}),a)}return i}var i7=m.forwardRef((e,t)=>{var{ticks:n=[],tick:a,tickLine:i,stroke:r,tickFormatter:o,unit:l,padding:c,tickTextProps:d,orientation:u,mirror:p,x:h,y:f,width:g,height:v,tickSize:y,tickMargin:b,fontSize:x,letterSpacing:w,getTicksConfig:j,events:S,axisType:k}=e,T=Ay(yt(yt({},j),{},{ticks:n}),x,w),L=n7(u,p),F=a7(u,p),O=ha(j),M=Dl(a),P={};typeof i=="object"&&(P=i);var D=yt(yt({},O),{},{fill:"none"},P),E=T.map(C=>yt({entry:C},t7(C,h,f,g,v,u,y,p,b))),N=E.map(C=>{var{entry:A,line:_}=C;return m.createElement(Qn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},i&&m.createElement("line",Li({},D,_,{className:Ve("recharts-cartesian-axis-tick-line",Ar(i,"className"))})))}),R=E.map((C,A)=>{var{entry:_,tick:B}=C,H=yt(yt(yt(yt({textAnchor:L,verticalAnchor:F},O),{},{stroke:"none",fill:r},M),B),{},{index:A,payload:_,visibleTicksCount:T.length,tickFormatter:o,padding:c},d);return m.createElement(Qn,Li({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},gp(S,_,A)),a&&m.createElement(s7,{option:a,tickProps:H,value:"".concat(typeof o=="function"?o(_.value,A):_.value).concat(l||"")}))});return m.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(k,"-ticks")},R.length>0&&m.createElement(ea,{zIndex:Rt.label},m.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(k,"-tick-labels"),ref:t},R)),N.length>0&&m.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(k,"-tick-lines")},N))}),r7=m.forwardRef((e,t)=>{var{axisLine:n,width:a,height:i,className:r,hide:o,ticks:l,axisType:c}=e,d=YG(e,GG),[u,p]=m.useState(""),[h,f]=m.useState(""),g=m.useRef(null);m.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var y;return VG({ticks:g.current,label:(y=e.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var v=m.useCallback(y=>{if(y){var b=y.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=b;var x=b[0];if(x){var w=window.getComputedStyle(x),j=w.fontSize,S=w.letterSpacing;(j!==u||S!==h)&&(p(j),f(S))}}},[u,h]);return o||a!=null&&a<=0||i!=null&&i<=0?null:m.createElement(ea,{zIndex:e.zIndex},m.createElement(Qn,{className:Ve("recharts-cartesian-axis",r)},m.createElement(e7,{x:e.x,y:e.y,width:a,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:ha(e)}),m.createElement(i7,{ref:v,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:h,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),m.createElement(y6,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},m.createElement(E6,{label:e.label,labelRef:e.labelRef}),e.children)))}),Ey=m.forwardRef((e,t)=>{var n=Yt(e,Ka);return m.createElement(r7,Li({},n,{ref:t}))});Ey.displayName="CartesianAxis";var o7=["x1","y1","x2","y2","key"],l7=["offset"],c7=["xAxisId","yAxisId"],d7=["xAxisId","yAxisId"];function AS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AS(Object(n),!0).forEach(function(a){u7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function u7(e,t,n){return(t=p7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p7(e){var t=m7(e,"string");return typeof t=="symbol"?t:t+""}function m7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mi(){return mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mi.apply(null,arguments)}function Ru(e,t){if(e==null)return{};var n,a,i=h7(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h7(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var f7=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:a,y:i,width:r,height:o,ry:l}=e;return m.createElement("rect",{x:a,y:i,ry:l,width:r,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function QI(e){var{option:t,lineItemProps:n}=e,a;if(m.isValidElement(t))a=m.cloneElement(t,n);else if(typeof t=="function")a=t(n);else{var i,{x1:r,y1:o,x2:l,y2:c,key:d}=n,u=Ru(n,o7),p=(i=ha(u))!==null&&i!==void 0?i:{},{offset:h}=p,f=Ru(p,l7);a=m.createElement("line",mi({},f,{x1:r,y1:o,x2:l,y2:c,fill:"none",key:d}))}return a}function g7(e){var{x:t,width:n,horizontal:a=!0,horizontalPoints:i}=e;if(!a||!i||!i.length)return null;var{xAxisId:r,yAxisId:o}=e,l=Ru(e,c7),c=i.map((d,u)=>{var p=en(en({},l),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(u),index:u});return m.createElement(QI,{key:"line-".concat(u),option:a,lineItemProps:p})});return m.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function v7(e){var{y:t,height:n,vertical:a=!0,verticalPoints:i}=e;if(!a||!i||!i.length)return null;var{xAxisId:r,yAxisId:o}=e,l=Ru(e,d7),c=i.map((d,u)=>{var p=en(en({},l),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(u),index:u});return m.createElement(QI,{option:a,lineItemProps:p,key:"line-".concat(u)})});return m.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function b7(e){var{horizontalFill:t,fillOpacity:n,x:a,y:i,width:r,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var d=l.map(p=>Math.round(p+i-i)).sort((p,h)=>p-h);i!==d[0]&&d.unshift(0);var u=d.map((p,h)=>{var f=!d[h+1],g=f?i+o-p:d[h+1]-p;if(g<=0)return null;var v=h%t.length;return m.createElement("rect",{key:"react-".concat(h),y:p,x:a,height:g,width:r,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function y7(e){var{vertical:t=!0,verticalFill:n,fillOpacity:a,x:i,y:r,width:o,height:l,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var d=c.map(p=>Math.round(p+i-i)).sort((p,h)=>p-h);i!==d[0]&&d.unshift(0);var u=d.map((p,h)=>{var f=!d[h+1],g=f?i+o-p:d[h+1]-p;if(g<=0)return null;var v=h%n.length;return m.createElement("rect",{key:"react-".concat(h),x:p,y:r,width:g,height:l,stroke:"none",fill:n[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var x7=(e,t)=>{var{xAxis:n,width:a,height:i,offset:r}=e;return p1(Ay(en(en(en({},Ka),n),{},{ticks:m1(n),viewBox:{x:0,y:0,width:a,height:i}})),r.left,r.left+r.width,t)},w7=(e,t)=>{var{yAxis:n,width:a,height:i,offset:r}=e;return p1(Ay(en(en(en({},Ka),n),{},{ticks:m1(n),viewBox:{x:0,y:0,width:a,height:i}})),r.top,r.top+r.height,t)},j7={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Rt.grid};function gs(e){var t=xb(),n=wb(),a=j1(),i=en(en({},Yt(e,j7)),{},{x:ye(e.x)?e.x:a.left,y:ye(e.y)?e.y:a.top,width:ye(e.width)?e.width:a.width,height:ye(e.height)?e.height:a.height}),{xAxisId:r,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:p,horizontalValues:h,verticalValues:f}=i,g=nn(),v=xe(F=>M0(F,"xAxis",r,g)),y=xe(F=>M0(F,"yAxis",o,g));if(!Ea(d)||!Ea(u)||!ye(l)||!ye(c))return null;var b=i.verticalCoordinatesGenerator||x7,x=i.horizontalCoordinatesGenerator||w7,{horizontalPoints:w,verticalPoints:j}=i;if((!w||!w.length)&&typeof x=="function"){var S=h&&h.length,k=x({yAxis:y?en(en({},y),{},{ticks:S?h:y.ticks}):void 0,width:t??d,height:n??u,offset:a},S?!0:p);cu(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(w=k)}if((!j||!j.length)&&typeof b=="function"){var T=f&&f.length,L=b({xAxis:v?en(en({},v),{},{ticks:T?f:v.ticks}):void 0,width:t??d,height:n??u,offset:a},T?!0:p);cu(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof L,"]")),Array.isArray(L)&&(j=L)}return m.createElement(ea,{zIndex:i.zIndex},m.createElement("g",{className:"recharts-cartesian-grid"},m.createElement(f7,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),m.createElement(b7,mi({},i,{horizontalPoints:w})),m.createElement(y7,mi({},i,{verticalPoints:j})),m.createElement(g7,mi({},i,{offset:a,horizontalPoints:w,xAxis:v,yAxis:y})),m.createElement(v7,mi({},i,{offset:a,verticalPoints:j,xAxis:v,yAxis:y}))))}gs.displayName="CartesianGrid";var ZI=(e,t,n,a)=>Ws(e,"xAxis",t,a),XI=(e,t,n,a)=>Us(e,"xAxis",t,a),JI=(e,t,n,a)=>Ws(e,"yAxis",n,a),eO=(e,t,n,a)=>Us(e,"yAxis",n,a),S7=te([Be,ZI,JI,XI,eO],(e,t,n,a,i)=>Gs(e,"xAxis")?Ir(t,a,!1):Ir(n,i,!1)),N7=(e,t,n,a,i)=>i;function C7(e){return e.type==="line"}var k7=te([em,N7],(e,t)=>e.filter(C7).find(n=>n.id===t)),P7=te([Be,ZI,JI,XI,eO,k7,S7,Kp],(e,t,n,a,i,r,o,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(!(r==null||t==null||n==null||a==null||i==null||a.length===0||i.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:p,data:h}=r,f;if(h!=null&&h.length>0?f=h:f=c==null?void 0:c.slice(d,u+1),f!=null)return G7({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:p,bandSize:o,displayedData:f})}});function A7(e){var t=Dl(e),n=3,a=2;if(t!=null){var{r:i,strokeWidth:r}=t,o=Number(i),l=Number(r);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(l)||l<0)&&(l=a),{r:o,strokeWidth:l}}return{r:n,strokeWidth:a}}var E7=["id"],T7=["type","layout","connectNulls","needClip","shape"],I7=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cl.apply(null,arguments)}function ES(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function wa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ES(Object(n),!0).forEach(function(a){O7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ES(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function O7(e,t,n){return(t=L7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L7(e){var t=M7(e,"string");return typeof t=="symbol"?t:t+""}function M7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ty(e,t){if(e==null)return{};var n,a,i=D7(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function D7(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var F7=e=>{var{dataKey:t,name:n,stroke:a,legendType:i,hide:r}=e;return[{inactive:r,dataKey:t,type:i,color:a,value:Ap(n,t),payload:e}]},z7=m.memo(e=>{var{dataKey:t,data:n,stroke:a,strokeWidth:i,fill:r,name:o,hide:l,unit:c,tooltipType:d}=e,u={dataDefinedOnItem:n,positions:void 0,settings:{stroke:a,strokeWidth:i,fill:r,dataKey:t,nameKey:void 0,name:Ap(o,t),hide:l,type:d,color:a,unit:c}};return m.createElement(DI,{tooltipEntrySettings:u})}),tO=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function R7(e,t){for(var n=e.length%2!==0?[...e,0]:e,a=[],i=0;i<t;++i)a=[...a,...n];return a}var _7=(e,t,n)=>{var a=n.reduce((p,h)=>p+h);if(!a)return tO(t,e);for(var i=Math.floor(e/a),r=e%a,o=t-e,l=[],c=0,d=0;c<n.length;d+=n[c],++c)if(d+n[c]>r){l=[...n.slice(0,c),r-d];break}var u=l.length%2===0?[0,o]:[o];return[...R7(n,i),...l,...u].map(p=>"".concat(p,"px")).join(", ")};function B7(e){var{clipPathId:t,points:n,props:a}=e,{dot:i,dataKey:r,needClip:o}=a,{id:l}=a,c=Ty(a,E7),d=ha(c);return m.createElement(S8,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:r,baseProps:d,needClip:o,clipPathId:t})}function $7(e){var{showLabels:t,children:n,points:a}=e,i=m.useMemo(()=>a==null?void 0:a.map(r=>{var o,l,c={x:(o=r.x)!==null&&o!==void 0?o:0,y:(l=r.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return wa(wa({},c),{},{value:r.value,payload:r.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[a]);return m.createElement(jI,{value:t?i:void 0},n)}function TS(e){var{clipPathId:t,pathRef:n,points:a,strokeDasharray:i,props:r}=e,{type:o,layout:l,connectNulls:c,needClip:d,shape:u}=r,p=Ty(r,T7),h=wa(wa({},dn(p)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:a,type:o,layout:l,connectNulls:c,strokeDasharray:i??r.strokeDasharray});return m.createElement(m.Fragment,null,(a==null?void 0:a.length)>1&&m.createElement(II,Cl({shapeType:"curve",option:u},h,{pathRef:n})),m.createElement(B7,{points:a,clipPathId:t,props:r}))}function U7(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function W7(e){var{clipPathId:t,props:n,pathRef:a,previousPointsRef:i,longestAnimatedLengthRef:r}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:p,animateNewValues:h,width:f,height:g,onAnimationEnd:v,onAnimationStart:y}=n,b=i.current,x=_p(o,"recharts-line-"),w=m.useRef(x),[j,S]=m.useState(!1),k=!j,T=m.useCallback(()=>{typeof v=="function"&&v(),S(!1)},[v]),L=m.useCallback(()=>{typeof y=="function"&&y(),S(!0)},[y]),F=U7(a.current),O=m.useRef(0);w.current!==x&&(O.current=r.current,w.current=x);var M=O.current;return m.createElement($7,{points:o,showLabels:k},n.children,m.createElement(Rp,{animationId:x,begin:d,duration:u,isActive:c,easing:p,onAnimationEnd:T,onAnimationStart:L,key:x},P=>{var D=pt(M,F+M,P),E=Math.min(D,F),N;if(c)if(l){var R="".concat(l).split(/[,\s]+/gim).map(_=>parseFloat(_));N=_7(E,F,R)}else N=tO(F,E);else N=l==null?void 0:String(l);if(P>0&&F>0&&(i.current=o,r.current=Math.max(r.current,E)),b){var C=b.length/o.length,A=P===1?o:o.map((_,B)=>{var H=Math.floor(B*C);if(b[H]){var Z=b[H];return wa(wa({},_),{},{x:pt(Z.x,_.x,P),y:pt(Z.y,_.y,P)})}return h?wa(wa({},_),{},{x:pt(f*2,_.x,P),y:pt(g/2,_.y,P)}):wa(wa({},_),{},{x:_.x,y:_.y})});return i.current=A,m.createElement(TS,{props:n,points:A,clipPathId:t,pathRef:a,strokeDasharray:N})}return m.createElement(TS,{props:n,points:o,clipPathId:t,pathRef:a,strokeDasharray:N})}),m.createElement(NI,{label:n.label}))}function q7(e){var{clipPathId:t,props:n}=e,a=m.useRef(null),i=m.useRef(0),r=m.useRef(null);return m.createElement(W7,{props:n,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:i,pathRef:r})}var H7=(e,t)=>{var n,a;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:At(e.payload,t)}};class K7 extends m.Component{render(){var{hide:t,dot:n,points:a,className:i,xAxisId:r,yAxisId:o,top:l,left:c,width:d,height:u,id:p,needClip:h,zIndex:f}=this.props;if(t)return null;var g=Ve("recharts-line",i),v=p,{r:y,strokeWidth:b}=A7(n),x=EI(n),w=y*2+b,j=h?"url(#clipPath-".concat(x?"":"dots-").concat(v,")"):void 0;return m.createElement(ea,{zIndex:f},m.createElement(Qn,{className:g},h&&m.createElement("defs",null,m.createElement(qI,{clipPathId:v,xAxisId:r,yAxisId:o}),!x&&m.createElement("clipPath",{id:"clipPath-dots-".concat(v)},m.createElement("rect",{x:c-w/2,y:l-w/2,width:d+w,height:u+w}))),m.createElement(WI,{xAxisId:r,yAxisId:o,data:a,dataPointFormatter:H7,errorBarOffset:0},m.createElement(q7,{props:this.props,clipPathId:v}))),m.createElement(W8,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:j}))}}var nO={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Rt.line,type:"linear"};function V7(e){var t=Yt(e,nO),{activeDot:n,animateNewValues:a,animationBegin:i,animationDuration:r,animationEasing:o,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:p,legendType:h,xAxisId:f,yAxisId:g,id:v}=t,y=Ty(t,I7),{needClip:b}=ky(f,g),x=Cy(),w=Ul(),j=nn(),S=xe(O=>P7(O,f,g,j,v));if(w!=="horizontal"&&w!=="vertical"||S==null||x==null)return null;var{height:k,width:T,x:L,y:F}=x;return m.createElement(K7,Cl({},y,{id:v,connectNulls:l,dot:c,activeDot:n,animateNewValues:a,animationBegin:i,animationDuration:r,animationEasing:o,isAnimationActive:u,hide:d,label:p,legendType:h,xAxisId:f,yAxisId:g,points:S,layout:w,height:k,width:T,left:L,top:F,needClip:b}))}function G7(e){var{layout:t,xAxis:n,yAxis:a,xAxisTicks:i,yAxisTicks:r,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((d,u)=>{var p=At(d,o);if(t==="horizontal"){var h=oj({axis:n,ticks:i,bandSize:l,entry:d,index:u}),f=st(p)?null:a.scale(p);return{x:h,y:f,value:p,payload:d}}var g=st(p)?null:n.scale(p),v=oj({axis:a,ticks:r,bandSize:l,entry:d,index:u});return g==null||v==null?null:{x:g,y:v,value:p,payload:d}}).filter(Boolean)}function Y7(e){var t=Yt(e,nO),n=nn();return m.createElement(RI,{id:t.id,type:"line"},a=>m.createElement(m.Fragment,null,m.createElement(FI,{legendPayload:F7(t)}),m.createElement(z7,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),m.createElement(BI,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),m.createElement(V7,Cl({},t,{id:a}))))}var Ag=m.memo(Y7,hm);Ag.displayName="Line";var Q7=["domain","range"],Z7=["domain","range"];function IS(e,t){if(e==null)return{};var n,a,i=X7(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function X7(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function OS(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function aO(e,t){if(e===t)return!0;var{domain:n,range:a}=e,i=IS(e,Q7),{domain:r,range:o}=t,l=IS(t,Z7);return!OS(n,r)||!OS(a,o)?!1:hm(i,l)}var J7=["dangerouslySetInnerHTML","ticks"],e9=["id"];function Eg(){return Eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Eg.apply(null,arguments)}function LS(e,t){if(e==null)return{};var n,a,i=t9(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function t9(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function n9(e){var t=ct(),n=m.useRef(null);return m.useLayoutEffect(()=>{n.current===null?t(A8(e)):n.current!==e&&t(E8({prev:n.current,next:e})),n.current=e},[e,t]),m.useLayoutEffect(()=>()=>{n.current&&(t(T8(n.current)),n.current=null)},[t]),null}var a9=e=>{var{xAxisId:t,className:n}=e,a=xe(bb),i=nn(),r="xAxis",o=xe(y=>Qr(y,r,t,i)),l=xe(y=>ET(y,r,t,i)),c=xe(y=>CT(y,t)),d=xe(y=>N4(y,t)),u=xe(y=>GE(y,t));if(c==null||d==null||u==null)return null;var{dangerouslySetInnerHTML:p,ticks:h}=e,f=LS(e,J7),{id:g}=u,v=LS(u,e9);return m.createElement(Ey,Eg({},f,v,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:Ve("recharts-".concat(r," ").concat(r),n),viewBox:a,ticks:l,axisType:r}))},s9={allowDataOverflow:Mt.allowDataOverflow,allowDecimals:Mt.allowDecimals,allowDuplicatedCategory:Mt.allowDuplicatedCategory,angle:Mt.angle,axisLine:Ka.axisLine,height:Mt.height,hide:!1,includeHidden:Mt.includeHidden,interval:Mt.interval,minTickGap:Mt.minTickGap,mirror:Mt.mirror,orientation:Mt.orientation,padding:Mt.padding,reversed:Mt.reversed,scale:Mt.scale,tick:Mt.tick,tickCount:Mt.tickCount,tickLine:Ka.tickLine,tickSize:Ka.tickSize,type:Mt.type,xAxisId:0},i9=e=>{var t=Yt(e,s9);return m.createElement(m.Fragment,null,m.createElement(n9,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),m.createElement(a9,t))},vs=m.memo(i9,aO);vs.displayName="XAxis";var r9=["dangerouslySetInnerHTML","ticks"],o9=["id"];function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tg.apply(null,arguments)}function MS(e,t){if(e==null)return{};var n,a,i=l9(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l9(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function c9(e){var t=ct(),n=m.useRef(null);return m.useLayoutEffect(()=>{n.current===null?t(I8(e)):n.current!==e&&t(O8({prev:n.current,next:e})),n.current=e},[e,t]),m.useLayoutEffect(()=>()=>{n.current&&(t(L8(n.current)),n.current=null)},[t]),null}var d9=e=>{var{yAxisId:t,className:n,width:a,label:i}=e,r=m.useRef(null),o=m.useRef(null),l=xe(bb),c=nn(),d=ct(),u="yAxis",p=xe(S=>Qr(S,u,t,c)),h=xe(S=>kT(S,t)),f=xe(S=>k4(S,t)),g=xe(S=>ET(S,u,t,c)),v=xe(S=>YE(S,t));if(m.useLayoutEffect(()=>{if(!(a!=="auto"||!h||jy(i)||m.isValidElement(i)||v==null)){var S=r.current;if(S){var k=S.getCalculatedWidth();Math.round(h.width)!==Math.round(k)&&d(M8({id:t,width:k}))}}},[g,h,d,i,t,a,v]),h==null||f==null||v==null)return null;var{dangerouslySetInnerHTML:y,ticks:b}=e,x=MS(e,r9),{id:w}=v,j=MS(v,o9);return m.createElement(Ey,Tg({},x,j,{ref:r,labelRef:o,scale:p,x:f.x,y:f.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:h.width,height:h.height,className:Ve("recharts-".concat(u," ").concat(u),n),viewBox:l,ticks:g,axisType:u}))},u9={allowDataOverflow:Dt.allowDataOverflow,allowDecimals:Dt.allowDecimals,allowDuplicatedCategory:Dt.allowDuplicatedCategory,angle:Dt.angle,axisLine:Ka.axisLine,hide:!1,includeHidden:Dt.includeHidden,interval:Dt.interval,minTickGap:Dt.minTickGap,mirror:Dt.mirror,orientation:Dt.orientation,padding:Dt.padding,reversed:Dt.reversed,scale:Dt.scale,tick:Dt.tick,tickCount:Dt.tickCount,tickLine:Ka.tickLine,tickSize:Ka.tickSize,type:Dt.type,width:Dt.width,yAxisId:0},p9=e=>{var t=Yt(e,u9);return m.createElement(m.Fragment,null,m.createElement(c9,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),m.createElement(d9,t))},bs=m.memo(p9,aO);bs.displayName="YAxis";var m9=(e,t)=>t,Iy=te([m9,Be,KE,It,HT,ms,$5,$t],G5),Oy=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/a)}},sO=Zn("mouseClick"),iO=Bl();iO.startListening({actionCreator:sO,effect:(e,t)=>{var n=e.payload,a=Iy(t.getState(),Oy(n));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(B4({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var Ig=Zn("mouseMove"),rO=Bl(),Kc=null;rO.startListening({actionCreator:Ig,effect:(e,t)=>{var n=e.payload;Kc!==null&&cancelAnimationFrame(Kc);var a=Oy(n);Kc=requestAnimationFrame(()=>{var i=t.getState(),r=uy(i,i.tooltip.settings.shared);if(r==="axis"){var o=Iy(i,a);(o==null?void 0:o.activeIndex)!=null?t.dispatch(zT({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(FT())}Kc=null})}});var DS={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},oO=kn({name:"rootProps",initialState:DS,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:DS.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),h9=oO.reducer,{updateOptions:f9}=oO.actions,lO=kn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:OX}=lO.actions,g9=lO.reducer,cO=Zn("keyDown"),dO=Zn("focus"),Ly=Bl();Ly.startListening({actionCreator:cO,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:i}=n.tooltip,r=e.payload;if(!(r!=="ArrowRight"&&r!=="ArrowLeft"&&r!=="Enter")){var o=py(i,Xr(n),Zl(n),nc(n)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=ms(n);if(r==="Enter"){var d=Tu(n,"axis","hover",String(i.index));t.dispatch(wg({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:d}));return}var u=T4(n),p=u==="left-to-right"?1:-1,h=r==="ArrowRight"?1:-1,f=l+h*p;if(!(c==null||f>=c.length||f<0)){var g=Tu(n,"axis","hover",String(f));t.dispatch(wg({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}}});Ly.startListening({actionCreator:dO,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var r="0",o=Tu(n,"axis","hover",String(r));t.dispatch(wg({activeDataKey:void 0,active:!0,activeIndex:r,activeCoordinate:o}))}}}});var $n=Zn("externalEvent"),uO=Bl(),wh=new Map;uO.startListening({actionCreator:$n,effect:(e,t)=>{var{handler:n,reactEvent:a}=e.payload;if(n!=null){a.persist();var i=a.type,r=wh.get(i);r!==void 0&&cancelAnimationFrame(r);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:C5(l),activeDataKey:YT(l),activeIndex:Oi(l),activeLabel:GT(l),activeTooltipIndex:Oi(l),isTooltipActive:k5(l)};n(c,a)}finally{wh.delete(i)}});wh.set(i,o)}}});var v9=te([Zr],e=>e.tooltipItemPayloads),b9=te([v9,ec,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,a)=>{var i=e.find(l=>l.settings.dataKey===a);if(i!=null){var{positions:r}=i;if(r!=null){var o=t(r,n);return o}}}),pO=Zn("touchMove"),mO=Bl();mO.startListening({actionCreator:pO,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var a=t.getState(),i=uy(a,a.tooltip.settings.shared);if(i==="axis"){var r=Iy(a,Oy({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(zT({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}else if(i==="item"){var o,l=n.touches[0];if(document.elementFromPoint==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(y$),u=(o=c.getAttribute(x$))!==null&&o!==void 0?o:void 0,p=b9(t.getState(),d,u);t.dispatch(DT({activeDataKey:u,activeIndex:d,activeCoordinate:p}))}}}});var y9=zA({brush:AG,cartesianAxis:D8,chartData:NK,errorBars:tV,graphicalItems:m8,layout:e$,legend:cU,options:yK,polarAxis:_6,polarOptions:g9,referenceElements:DG,rootProps:h9,tooltip:$4,zIndex:lK}),x9=function(t){return CB({reducer:y9,preloadedState:t,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([iO.middleware,rO.middleware,Ly.middleware,uO.middleware,mO.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(XA({type:"raf"}))},devTools:ql.devToolsEnabled})};function w9(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,i=nn(),r=m.useRef(null);if(i)return n;r.current==null&&(r.current=x9(t));var o=ob;return m.createElement(EV,{context:o,store:r.current},n)}function j9(e){var{layout:t,margin:n}=e,a=ct(),i=nn();return m.useEffect(()=>{i||(a(ZB(t)),a(QB(n)))},[a,i,t,n]),null}var S9=m.memo(j9,hm);function N9(e){var t=ct();return m.useEffect(()=>{t(f9(e))},[t,e]),null}function FS(e){var{zIndex:t,isPanorama:n}=e,a=n?"recharts-zindex-panorama-":"recharts-zindex-",i=zI("".concat(a).concat(t)),r=ct();return m.useLayoutEffect(()=>(r(rK({zIndex:t,elementId:i,isPanorama:n})),()=>{r(oK({zIndex:t,isPanorama:n}))}),[r,t,i,n]),m.createElement("g",{tabIndex:-1,id:i})}function zS(e){var{children:t,isPanorama:n}=e,a=xe(Q5);if(!a||a.length===0)return t;var i=a.filter(o=>o<0),r=a.filter(o=>o>0);return m.createElement(m.Fragment,null,i.map(o=>m.createElement(FS,{key:o,zIndex:o,isPanorama:n})),t,r.map(o=>m.createElement(FS,{key:o,zIndex:o,isPanorama:n})))}var C9=["children"];function k9(e,t){if(e==null)return{};var n,a,i=P9(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function P9(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function _u(){return _u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_u.apply(null,arguments)}var A9={width:"100%",height:"100%",display:"block"},E9=m.forwardRef((e,t)=>{var n=xb(),a=wb(),i=T1();if(!Ea(n)||!Ea(a))return null;var{children:r,otherAttributes:o,title:l,desc:c}=e,d,u;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=i?0:void 0,typeof o.role=="string"?u=o.role:u=i?"application":void 0),m.createElement(Hv,_u({},o,{title:l,desc:c,role:u,tabIndex:d,width:n,height:a,style:A9,ref:t}),r)}),T9=e=>{var{children:t}=e,n=xe(Op);if(!n)return null;var{width:a,height:i,y:r,x:o}=n;return m.createElement(Hv,{width:a,height:i,x:o,y:r},t)},RS=m.forwardRef((e,t)=>{var{children:n}=e,a=k9(e,C9),i=nn();return i?m.createElement(T9,null,m.createElement(zS,{isPanorama:!0},n)):m.createElement(E9,_u({ref:t},a),m.createElement(zS,{isPanorama:!1},n))});function I9(){var e=ct(),[t,n]=m.useState(null),a=xe(b$);return m.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),r=i.width/t.offsetWidth;bt(r)&&r!==a&&e(JB(r))}},[t,e,a]),n}function _S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function O9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_S(Object(n),!0).forEach(function(a){L9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_S(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function L9(e,t,n){return(t=M9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M9(e){var t=D9(e,"string");return typeof t=="symbol"?t:t+""}function D9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Mi.apply(null,arguments)}var F9=()=>(LK(),null);function Bu(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var z9=m.forwardRef((e,t)=>{var n,a,i=m.useRef(null),[r,o]=m.useState({containerWidth:Bu((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Bu((a=e.style)===null||a===void 0?void 0:a.height)}),l=m.useCallback((d,u)=>{o(p=>{var h=Math.round(d),f=Math.round(u);return p.containerWidth===h&&p.containerHeight===f?p:{containerWidth:h,containerHeight:f}})},[]),c=m.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:u,height:p}=d.getBoundingClientRect();l(u,p);var h=g=>{var{width:v,height:y}=g[0].contentRect;l(v,y)},f=new ResizeObserver(h);f.observe(d),i.current=f}},[t,l]);return m.useEffect(()=>()=>{var d=i.current;d!=null&&d.disconnect()},[l]),m.createElement(m.Fragment,null,m.createElement(Mp,{width:r.containerWidth,height:r.containerHeight}),m.createElement("div",Mi({ref:c},e)))}),R9=m.forwardRef((e,t)=>{var{width:n,height:a}=e,[i,r]=m.useState({containerWidth:Bu(n),containerHeight:Bu(a)}),o=m.useCallback((c,d)=>{r(u=>{var p=Math.round(c),h=Math.round(d);return u.containerWidth===p&&u.containerHeight===h?u:{containerWidth:p,containerHeight:h}})},[]),l=m.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:u}=c.getBoundingClientRect();o(d,u)}},[t,o]);return m.createElement(m.Fragment,null,m.createElement(Mp,{width:i.containerWidth,height:i.containerHeight}),m.createElement("div",Mi({ref:l},e)))}),_9=m.forwardRef((e,t)=>{var{width:n,height:a}=e;return m.createElement(m.Fragment,null,m.createElement(Mp,{width:n,height:a}),m.createElement("div",Mi({ref:t},e)))}),B9=m.forwardRef((e,t)=>{var{width:n,height:a}=e;return Xa(n)||Xa(a)?m.createElement(R9,Mi({},e,{ref:t})):m.createElement(_9,Mi({},e,{ref:t}))});function $9(e){return e===!0?z9:B9}var U9=m.forwardRef((e,t)=>{var{children:n,className:a,height:i,onClick:r,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:p,onMouseUp:h,onTouchEnd:f,onTouchMove:g,onTouchStart:v,style:y,width:b,responsive:x,dispatchTouchEvents:w=!0}=e,j=m.useRef(null),S=ct(),[k,T]=m.useState(null),[L,F]=m.useState(null),O=I9(),M=yb(),P=(M==null?void 0:M.width)>0?M.width:b,D=(M==null?void 0:M.height)>0?M.height:i,E=m.useCallback(z=>{O(z),typeof t=="function"&&t(z),T(z),F(z),z!=null&&(j.current=z)},[O,t,T,F]),N=m.useCallback(z=>{S(sO(z)),S($n({handler:r,reactEvent:z}))},[S,r]),R=m.useCallback(z=>{S(Ig(z)),S($n({handler:d,reactEvent:z}))},[S,d]),C=m.useCallback(z=>{S(FT()),S($n({handler:u,reactEvent:z}))},[S,u]),A=m.useCallback(z=>{S(Ig(z)),S($n({handler:p,reactEvent:z}))},[S,p]),_=m.useCallback(()=>{S(dO())},[S]),B=m.useCallback(z=>{S(cO(z.key))},[S]),H=m.useCallback(z=>{S($n({handler:o,reactEvent:z}))},[S,o]),Z=m.useCallback(z=>{S($n({handler:l,reactEvent:z}))},[S,l]),ie=m.useCallback(z=>{S($n({handler:c,reactEvent:z}))},[S,c]),U=m.useCallback(z=>{S($n({handler:h,reactEvent:z}))},[S,h]),G=m.useCallback(z=>{S($n({handler:v,reactEvent:z}))},[S,v]),V=m.useCallback(z=>{w&&S(pO(z)),S($n({handler:g,reactEvent:z}))},[S,w,g]),$=m.useCallback(z=>{S($n({handler:f,reactEvent:z}))},[S,f]),q=$9(x);return m.createElement(nI.Provider,{value:k},m.createElement(_P.Provider,{value:L},m.createElement(q,{width:P??(y==null?void 0:y.width),height:D??(y==null?void 0:y.height),className:Ve("recharts-wrapper",a),style:O9({position:"relative",cursor:"default",width:P,height:D},y),onClick:N,onContextMenu:H,onDoubleClick:Z,onFocus:_,onKeyDown:B,onMouseDown:ie,onMouseEnter:R,onMouseLeave:C,onMouseMove:A,onMouseUp:U,onTouchEnd:$,onTouchMove:V,onTouchStart:G,ref:E},m.createElement(F9,null),n)))}),W9=["width","height","responsive","children","className","style","compact","title","desc"];function q9(e,t){if(e==null)return{};var n,a,i=H9(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function H9(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var K9=m.forwardRef((e,t)=>{var{width:n,height:a,responsive:i,children:r,className:o,style:l,compact:c,title:d,desc:u}=e,p=q9(e,W9),h=ha(p);return c?m.createElement(m.Fragment,null,m.createElement(Mp,{width:n,height:a}),m.createElement(RS,{otherAttributes:h,title:d,desc:u},r)):m.createElement(U9,{className:o,style:l,width:n,height:a,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},m.createElement(RS,{otherAttributes:h,title:d,desc:u,ref:t},m.createElement(zG,null,r)))});function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Og.apply(null,arguments)}var V9={top:5,right:5,bottom:5,left:5},G9={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:V9,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},hO=m.forwardRef(function(t,n){var a,i=Yt(t.categoricalChartProps,G9),{chartName:r,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,u={chartName:r,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return m.createElement(w9,{preloadedState:{options:u},reduxStoreName:(a=d.id)!==null&&a!==void 0?a:r},m.createElement(PG,{chartData:d.data}),m.createElement(S9,{layout:i.layout,margin:i.margin}),m.createElement(N9,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),m.createElement(K9,Og({},i,{ref:n})))}),Y9=["axis"],BS=m.forwardRef((e,t)=>m.createElement(hO,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Y9,tooltipPayloadSearcher:sI,categoricalChartProps:e,ref:t})),Q9=["axis","item"],xo=m.forwardRef((e,t)=>m.createElement(hO,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Q9,tooltipPayloadSearcher:sI,categoricalChartProps:e,ref:t}));async function Z9(){return le("/dashboard/overview")}async function X9(e){return le(`/dashboard/overview-range?days=${e}`)}async function J9(){return le("/dashboard/bots-health")}async function fO(e){return le(`/dashboard/conversion?days=${e}`)}async function eY(e){return le(`/dashboard/shopify-analytics?days=${e}`)}const Vc=["#6366F1","#EC4899","#10B981","#F59E0B","#3B82F6","#8B5CF6","#F97316","#22C55E"],tY=[10,30,90];function nY(e){switch((e||"en").split("-")[0]){case"it":return"it-IT";case"es":return"es-ES";default:return"en-GB"}}const $S=()=>{var J,X;const{t:e,i18n:t}=Le(),n=m.useMemo(()=>nY(t.resolvedLanguage||t.language),[t.language,t.resolvedLanguage]),[a,i]=m.useState(null),[r,o]=m.useState(null),[l,c]=m.useState(null),[d,u]=m.useState(null),[p,h]=m.useState(10),[f,g]=m.useState(!0),[v,y]=m.useState(!0),[b,x]=m.useState(null);m.useEffect(()=>{let ne=!0;return(async()=>{try{const fe=await Z9();ne&&i(fe)}catch(fe){console.error("Failed to load dashboard",fe),ne&&x(fe.message||e("dashboard.errors.loadFailed"))}finally{ne&&g(!1)}})(),()=>{ne=!1}},[]),m.useEffect(()=>{let ne=!0;return(async()=>{y(!0);try{const[fe,we,Ae]=await Promise.all([X9(p),fO(p),eY(p)]);if(!ne)return;o(fe),c(we),u(Ae)}catch(fe){console.error("Failed to load dashboard range data",fe)}finally{ne&&y(!1)}})(),()=>{ne=!1}},[p]);const w=((a==null?void 0:a.kpis.totalBots)??0)>0,j=r??a,S=r??a,k=((j==null?void 0:j.conversationsLast10Days.series.length)??0)>0,T=((j==null?void 0:j.tokensLast10Days.series.length)??0)>0,L=((j==null?void 0:j.topBotsByConversationsLast30Days.length)??0)>0,F=!!((J=j==null?void 0:j.tokenBreakdownLast10Days)!=null&&J.dates.length),O=(j==null?void 0:j.tokenBreakdownByBotLast10Days)&&j.tokenBreakdownByBotLast10Days.length>0,M=(((X=d==null?void 0:d.perBot)==null?void 0:X.length)??0)>0,P=(ne,ue,fe)=>{const we=t;return typeof we.exists=="function"&&we.exists(ne)?e(ne,fe):ue},D=ne=>ne==null||Number.isNaN(ne)?"":`${ne.toFixed(1)}%`,E=S?Math.round(S.kpis.totalTokensThisMonth/10):0,N=(S==null?void 0:S.kpis.monthlyTokensLimit)==null?null:Math.round(S.kpis.monthlyTokensLimit/10),R=m.useMemo(()=>{if(!S)return"";if(S.kpis.monthlyTokensLimit==null)return P("dashboard.kpisHints.unlimitedPlan","Unlimited plan");if(S.kpis.monthlyTokensLimit<=0)return"";const ne=N??Math.round(S.kpis.monthlyTokensLimit/10);return`${P("dashboard.kpisHints.of","of")} ${ne.toLocaleString(n)}`},[S,n,N,t,e]),C=m.useMemo(()=>S?S.kpis.monthlyEmailsLimit==null?P("dashboard.kpisHints.unlimitedPlan","Unlimited plan"):S.kpis.monthlyEmailsLimit<=0?"":`${P("dashboard.kpisHints.of","of")} ${S.kpis.monthlyEmailsLimit.toLocaleString(n)}`:"",[S,n,t,e]),A=ne=>Math.round(ne/10).toLocaleString(n),_=(ne,ue)=>{const fe=typeof ne=="number"?ne:Number(ne)||0;return[Math.round(fe/10).toLocaleString(n),ue]},B={background:"rgba(2, 6, 23, 0.95)",border:"1px solid rgba(99, 102, 241, 0.35)",borderRadius:12,padding:"0.55rem 0.75rem",fontSize:"0.8rem",color:"#e5e7eb",boxShadow:"0 12px 30px rgba(2, 6, 23, 0.55)"},H={color:"#9ca3af",fontSize:"0.75rem"},Z={fontSize:"0.78rem",color:"#9ca3af"},ie=m.useMemo(()=>!j||!j.conversationsLast10Days.series?0:j.conversationsLast10Days.series.reduce((ne,ue)=>{const fe=(ue.values||[]).reduce((we,Ae)=>we+(Ae||0),0);return ne+fe},0),[j]),U=m.useMemo(()=>{if(!j||!k)return[];const{dates:ne,series:ue}=j.conversationsLast10Days;return ne.map((fe,we)=>{const Ae={date:fe};return ue.forEach(Q=>{Ae[Q.botName]=Q.values[we]??0}),Ae})},[j,k]),G=m.useMemo(()=>{if(!j||!T)return[];const{dates:ne,series:ue}=j.tokensLast10Days;return ne.map((fe,we)=>{const Ae={date:fe};return ue.forEach(Q=>{Ae[Q.botName]=Q.values[we]??0}),Ae})},[j,T]),V=m.useMemo(()=>{if(!j||!F)return[];const{dates:ne,openAiTokens:ue,emailTokens:fe,whatsappTokens:we}=j.tokenBreakdownLast10Days;return ne.map((Ae,Q)=>({date:Ae,openAi:ue[Q]??0,emails:fe[Q]??0,whatsapp:we[Q]??0}))},[j,F]),$=m.useMemo(()=>!j||!O?[]:j.tokenBreakdownByBotLast10Days.map(ne=>({botName:ne.botName,openAi:ne.openAiTokens,emails:ne.emailTokens,whatsapp:ne.whatsappTokens})),[j,O]),q=m.useMemo(()=>!j||!L?[]:j.topBotsByConversationsLast30Days.map(ne=>({name:ne.botName,conversations:ne.conversationCount})),[j,L]),z=m.useMemo(()=>d?d.series.dates.map((ne,ue)=>({date:ne,view:d.series.viewProduct[ue]??0,add:d.series.addToCart[ue]??0,purchase:d.series.purchases[ue]??0})):[],[d]),ee=m.useMemo(()=>{var ne;return(ne=d==null?void 0:d.perBot)!=null&&ne.length?d.perBot.map(ue=>({botName:ue.botName,view:ue.viewProduct,add:ue.addToCart,purchase:ue.purchases})):[]},[d]);return s.jsxs("div",{className:"page-container dashboard-page",children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"page-title",children:e("dashboard.title")}),s.jsx("p",{className:"page-subtitle",children:e("dashboard.subtitle")})]}),w&&s.jsx(de,{to:"/onboarding/bots/new",className:"btn-primary",children:e("dashboard.actions.createNewBot")})]}),!f&&!b&&w&&s.jsx("div",{className:"dashboard-range-panel",children:s.jsxs("div",{className:"dashboard-range-row",children:[s.jsxs("div",{className:"dashboard-range-left",children:[s.jsx("span",{className:"dashboard-range-label",children:e("dashboard.range.label","Time range")}),s.jsx("div",{className:"dashboard-range-pills",children:tY.map(ne=>s.jsxs("button",{type:"button",className:"dashboard-range-pill"+(p===ne?" dashboard-range-pill--active":""),onClick:()=>h(ne),children:[e("dashboard.range.last","Last")," ",ne," ",e("dashboard.range.days","days")]},ne))})]}),s.jsx("div",{className:"dashboard-range-hint",children:v?e("dashboard.range.loading","Updating charts"):e("dashboard.range.hint","Charts update based on this range.")})]})}),f&&s.jsx("div",{className:"card",children:s.jsx("p",{children:e("dashboard.loading")})}),!f&&b&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:b})}),!f&&!b&&!w&&s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"card-title",children:e("dashboard.empty.title")}),s.jsx("p",{className:"card-subtitle",children:e("dashboard.empty.subtitle")}),s.jsx("div",{style:{marginTop:"1rem"},children:s.jsx(de,{to:"/onboarding/bots/new",className:"btn-primary",children:e("dashboard.empty.cta")})})]}),!f&&!b&&w&&a&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"dashboard-section",children:[s.jsx("div",{className:"dashboard-section-header",children:s.jsxs("div",{children:[s.jsx("h2",{className:"dashboard-section-title",children:P("dashboard.sections.overview","At a glance")}),s.jsx("p",{className:"dashboard-section-subtitle",children:P("dashboard.sections.overviewSubtitle","Core health signals across your bots.")})]})}),s.jsxs("div",{className:"dashboard-kpi-row dashboard-kpi-row--top",children:[s.jsxs("div",{className:"dashboard-kpi-card dashboard-kpi-card--bots",children:[s.jsxs("div",{className:"dashboard-kpi-label",children:[s.jsx("span",{className:"dashboard-kpi-icon"}),e("dashboard.kpis.totalBots")]}),s.jsx("div",{className:"dashboard-kpi-value",children:(S==null?void 0:S.kpis.totalBots)??a.kpis.totalBots}),s.jsx("div",{className:"dashboard-kpi-hint",children:e("dashboard.kpisHints.totalBots")})]}),s.jsxs("div",{className:"dashboard-kpi-card dashboard-kpi-card--active",children:[s.jsxs("div",{className:"dashboard-kpi-label",children:[s.jsx("span",{className:"dashboard-kpi-icon"}),e("dashboard.kpis.activeBots")]}),s.jsx("div",{className:"dashboard-kpi-value",children:(S==null?void 0:S.kpis.activeBots)??a.kpis.activeBots}),s.jsx("div",{className:"dashboard-kpi-hint",children:e("dashboard.kpisHints.activeBots")})]}),s.jsxs("div",{className:"dashboard-kpi-card dashboard-kpi-card--conversations",children:[s.jsxs("div",{className:"dashboard-kpi-label",children:[s.jsx("span",{className:"dashboard-kpi-icon"}),e("dashboard.kpis.conversationsLast30Days",{days:p})]}),s.jsx("div",{className:"dashboard-kpi-value",children:(S==null?void 0:S.kpis.totalConversationsLast30Days)??a.kpis.totalConversationsLast30Days}),s.jsx("div",{className:"dashboard-kpi-hint",children:e("dashboard.kpisHints.conversationsLast30Days")})]})]}),s.jsxs("div",{className:"dashboard-kpi-row dashboard-kpi-row--bottom",children:[s.jsxs("div",{className:"dashboard-kpi-card dashboard-kpi-card--tokens",children:[s.jsxs("div",{className:"dashboard-kpi-label",children:[s.jsx("span",{className:"dashboard-kpi-icon"}),e("dashboard.kpis.tokensThisMonth",{days:p})]}),s.jsxs("div",{className:"dashboard-kpi-value-row",children:[s.jsx("div",{className:"dashboard-kpi-value",children:E.toLocaleString(n)}),S.kpis.tokensUsagePercent!=null&&s.jsx("span",{className:"dashboard-kpi-pill",children:D(S.kpis.tokensUsagePercent)})]}),s.jsx("div",{className:"dashboard-kpi-hint",children:R})]}),s.jsxs("div",{className:"dashboard-kpi-card dashboard-kpi-card--emails",children:[s.jsxs("div",{className:"dashboard-kpi-label",children:[s.jsx("span",{className:"dashboard-kpi-icon"}),P("dashboard.kpis.emailsThisMonth",`Emails sent (last ${p} days)`,{days:p})]}),s.jsxs("div",{className:"dashboard-kpi-value-row",children:[s.jsx("div",{className:"dashboard-kpi-value",children:((S==null?void 0:S.kpis.totalEmailsThisMonth)??a.kpis.totalEmailsThisMonth).toLocaleString(n)}),S.kpis.emailsUsagePercent!=null&&s.jsx("span",{className:"dashboard-kpi-pill",children:D(S.kpis.emailsUsagePercent)})]}),s.jsx("div",{className:"dashboard-kpi-hint",children:C})]}),s.jsxs("div",{className:"dashboard-kpi-card dashboard-kpi-card--whatsapp",children:[s.jsxs("div",{className:"dashboard-kpi-label",children:[s.jsx("span",{className:"dashboard-kpi-icon"}),P("dashboard.kpis.whatsappLeadsThisMonth",`WhatsApp leads (last ${p} days)`,{days:p})]}),s.jsx("div",{className:"dashboard-kpi-value",children:((S==null?void 0:S.kpis.totalWhatsappLeadsThisMonth)??a.kpis.totalWhatsappLeadsThisMonth).toLocaleString(n)}),s.jsx("div",{className:"dashboard-kpi-hint",children:P("dashboard.kpisHints.whatsappLeadsThisMonth",`Number of WhatsApp lead templates sent in the last ${p} days`,{days:p})})]})]})]}),ie===0&&s.jsx("section",{className:"dashboard-section",children:s.jsxs("div",{className:"card dashboard-coaching-card",children:[s.jsx("h2",{children:e("dashboard.coaching.title","Get your dashboard moving")}),s.jsx("p",{className:"card-subtitle",children:e("dashboard.coaching.subtitle","No conversations yet in this range. Here are quick ways to get activity.")}),s.jsxs("div",{className:"dashboard-coaching-actions",children:[s.jsx(de,{to:"/onboarding/bots/new",className:"btn-primary",children:e("dashboard.coaching.createBot","Create a bot")}),s.jsx(de,{to:"/app/bots",className:"btn-secondary",children:e("dashboard.coaching.connectChannels","Connect channels")}),s.jsx(de,{to:"/app/bots",className:"btn-secondary",children:e("dashboard.coaching.addKnowledge","Add knowledge")})]})]})}),s.jsx("section",{className:"dashboard-section",children:s.jsxs("div",{className:"dashboard-conversion-card card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:e("dashboard.conversion.title","User journey")}),s.jsx("p",{className:"card-subtitle",children:e("dashboard.conversion.subtitle","Conversations  leads  bookings")})]}),l?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dashboard-conversion-grid",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-conversion-value",children:l.totals.conversations.toLocaleString(n)}),s.jsx("div",{className:"dashboard-conversion-label",children:e("dashboard.conversion.conversations","Conversations")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-conversion-value",children:l.totals.leads.toLocaleString(n)}),s.jsx("div",{className:"dashboard-conversion-label",children:e("dashboard.conversion.leads","Leads")}),s.jsx("div",{className:"dashboard-conversion-rate",children:l.totals.conversations>0?`${l.totals.leadRate.toFixed(1)}%`:""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-conversion-value",children:l.totals.bookings.toLocaleString(n)}),s.jsx("div",{className:"dashboard-conversion-label",children:e("dashboard.conversion.bookings","Bookings")}),s.jsx("div",{className:"dashboard-conversion-rate",children:l.totals.leads>0||l.totals.conversations>0||l.totals.bookings>0?`${l.totals.bookingRate.toFixed(1)}%`:""})]})]}),s.jsx("div",{className:"dashboard-conversion-footer",children:s.jsx(de,{to:"/app/dashboard/conversion",className:"btn-link-small",children:e("dashboard.conversion.viewDetails","View per-bot breakdown")})})]}):s.jsx("p",{className:"card-empty",children:e("dashboard.conversion.empty","Conversion data not available.")})]})}),M&&s.jsx("section",{className:"dashboard-section",children:s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:P("dashboard.shopify.title","Shopify assistant commerce")}),s.jsxs("p",{className:"card-subtitle",children:[P("dashboard.shopify.subtitle","Track product views, add-to-cart clicks, and purchases driven by the assistant."),s.jsxs("span",{className:"dashboard-range-tag",children:[""," ",e("dashboard.range.last","Last")," ",p," ",e("dashboard.range.days","days")]})]})]}),d?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dashboard-kpi-row dashboard-kpi-row--bottom",style:{marginTop:0},children:[s.jsxs("div",{className:"dashboard-kpi-card",children:[s.jsx("div",{className:"dashboard-kpi-label",children:P("dashboard.shopify.viewProduct","View product clicks")}),s.jsx("div",{className:"dashboard-kpi-value",children:d.totals.viewProduct.toLocaleString(n)})]}),s.jsxs("div",{className:"dashboard-kpi-card",children:[s.jsx("div",{className:"dashboard-kpi-label",children:P("dashboard.shopify.addToCart","Add to cart clicks")}),s.jsx("div",{className:"dashboard-kpi-value",children:d.totals.addToCart.toLocaleString(n)})]}),s.jsxs("div",{className:"dashboard-kpi-card",children:[s.jsx("div",{className:"dashboard-kpi-label",children:P("dashboard.shopify.purchases","Purchases")}),s.jsx("div",{className:"dashboard-kpi-value",children:d.totals.purchases.toLocaleString(n)})]}),s.jsxs("div",{className:"dashboard-kpi-card",children:[s.jsx("div",{className:"dashboard-kpi-label",children:P("dashboard.shopify.revenue","Revenue attributed")}),s.jsx("div",{className:"dashboard-kpi-value",children:d.totals.revenueFormatted})]})]}),s.jsx("div",{style:{width:"100%",height:260,marginTop:"1rem"},children:s.jsx(Xs,{children:s.jsxs(xo,{data:z,children:[s.jsx(gs,{strokeDasharray:"3 3"}),s.jsx(vs,{dataKey:"date"}),s.jsx(bs,{allowDecimals:!1}),s.jsx(Js,{contentStyle:{background:"rgba(17,24,39,0.95)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:10,padding:"0.45rem 0.7rem",fontSize:"0.8rem"},labelStyle:{color:"#9ca3af"}}),s.jsx(ii,{}),s.jsx(gn,{dataKey:"view",fill:"#60A5FA",name:P("dashboard.shopify.viewProduct","View product clicks")}),s.jsx(gn,{dataKey:"add",fill:"#F59E0B",name:P("dashboard.shopify.addToCart","Add to cart clicks")}),s.jsx(gn,{dataKey:"purchase",fill:"#22C55E",name:P("dashboard.shopify.purchases","Purchases")})]})})}),ee.length>0&&s.jsxs("div",{style:{width:"100%",height:280,marginTop:"1.5rem"},children:[s.jsx("div",{className:"card-subtitle",style:{marginBottom:"0.6rem"},children:P("dashboard.shopify.byBot","Shopify activity by bot")}),s.jsx(Xs,{children:s.jsxs(xo,{data:ee,children:[s.jsx(gs,{strokeDasharray:"3 3"}),s.jsx(vs,{dataKey:"botName"}),s.jsx(bs,{allowDecimals:!1}),s.jsx(Js,{contentStyle:{background:"rgba(17,24,39,0.95)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:10,padding:"0.45rem 0.7rem",fontSize:"0.8rem"},labelStyle:{color:"#9ca3af"}}),s.jsx(ii,{}),s.jsx(gn,{dataKey:"view",fill:"#60A5FA",name:P("dashboard.shopify.viewProduct","View product clicks")}),s.jsx(gn,{dataKey:"add",fill:"#F59E0B",name:P("dashboard.shopify.addToCart","Add to cart clicks")}),s.jsx(gn,{dataKey:"purchase",fill:"#22C55E",name:P("dashboard.shopify.purchases","Purchases")})]})})]})]}):s.jsx("p",{className:"card-empty",children:P("dashboard.shopify.empty","No Shopify analytics yet.")})]})}),s.jsxs("section",{className:"dashboard-section",children:[s.jsx("div",{className:"dashboard-section-header",children:s.jsxs("div",{children:[s.jsx("h2",{className:"dashboard-section-title",children:P("dashboard.sections.trends","Trends")}),s.jsx("p",{className:"dashboard-section-subtitle",children:P("dashboard.sections.trendsSubtitle","Conversations, usage, and performance over time.")})]})}),s.jsxs("div",{className:"dashboard-grid",children:[s.jsxs("div",{className:"card chart-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:e("dashboard.charts.conversationsLast10Days.title",{days:p})}),s.jsxs("p",{className:"card-subtitle",children:[e("dashboard.charts.conversationsLast10Days.subtitle"),s.jsxs("span",{className:"dashboard-range-tag",children:[""," ",e("dashboard.range.last","Last")," ",p," ",e("dashboard.range.days","days")]})]})]}),k?s.jsx("div",{className:"dashboard-chart",children:s.jsx(Xs,{children:s.jsxs(BS,{data:U,children:[s.jsx(gs,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.18)"}),s.jsx(vs,{dataKey:"date",tick:{fill:"#9ca3af",fontSize:11}}),s.jsx(bs,{allowDecimals:!1,tick:{fill:"#9ca3af",fontSize:11}}),s.jsx(Js,{contentStyle:B,labelStyle:H}),s.jsx(ii,{wrapperStyle:Z}),j.conversationsLast10Days.series.map((ne,ue)=>s.jsx(Ag,{type:"monotone",dataKey:ne.botName,stroke:Vc[ue%Vc.length],strokeWidth:2,dot:!1},ne.botId))]})})}):s.jsx("p",{className:"card-empty",children:e("dashboard.charts.conversationsLast10Days.empty")})]}),s.jsxs("div",{className:"card chart-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:e("dashboard.charts.tokensLast10Days.title",{days:p})}),s.jsxs("p",{className:"card-subtitle",children:[e("dashboard.charts.tokensLast10Days.subtitle"),s.jsxs("span",{className:"dashboard-range-tag",children:[""," ",e("dashboard.range.last","Last")," ",p," ",e("dashboard.range.days","days")]})]})]}),T?s.jsx("div",{className:"dashboard-chart",children:s.jsx(Xs,{children:s.jsxs(BS,{data:G,children:[s.jsx(gs,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.18)"}),s.jsx(vs,{dataKey:"date",tick:{fill:"#9ca3af",fontSize:11}}),s.jsx(bs,{allowDecimals:!1,tickFormatter:A,tick:{fill:"#9ca3af",fontSize:11}}),s.jsx(Js,{contentStyle:B,labelStyle:H,formatter:_}),s.jsx(ii,{wrapperStyle:Z}),j.tokensLast10Days.series.map((ne,ue)=>s.jsx(Ag,{type:"monotone",dataKey:ne.botName,stroke:Vc[ue%Vc.length],strokeWidth:2,dot:!1},ne.botId))]})})}):s.jsx("p",{className:"card-empty",children:e("dashboard.charts.tokensLast10Days.empty")})]}),s.jsxs("div",{className:"card chart-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:P("dashboard.charts.tokensSplitLast10Days.title",`Tokens by channel (last ${p} days)`,{days:p})}),s.jsxs("p",{className:"card-subtitle",children:[P("dashboard.charts.tokensSplitLast10Days.subtitle","OpenAI + knowledge vs emails vs WhatsApp templates"),s.jsxs("span",{className:"dashboard-range-tag",children:[""," ",e("dashboard.range.last","Last")," ",p," ",e("dashboard.range.days","days")]})]})]}),F?s.jsx("div",{className:"dashboard-chart",children:s.jsx(Xs,{children:s.jsxs(xo,{data:V,children:[s.jsx(gs,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.18)"}),s.jsx(vs,{dataKey:"date",tick:{fill:"#9ca3af",fontSize:11}}),s.jsx(bs,{allowDecimals:!1,tickFormatter:A,tick:{fill:"#9ca3af",fontSize:11}}),s.jsx(Js,{contentStyle:B,labelStyle:H,formatter:_}),s.jsx(ii,{wrapperStyle:Z}),s.jsx(gn,{dataKey:"openAi",stackId:"tokens",fill:"#6366F1",name:P("dashboard.tokensSplit.legend.openAi","OpenAI + knowledge"),radius:[6,6,0,0]}),s.jsx(gn,{dataKey:"emails",stackId:"tokens",fill:"#F97316",name:P("dashboard.tokensSplit.legend.emails","Emails")}),s.jsx(gn,{dataKey:"whatsapp",stackId:"tokens",fill:"#22C55E",name:P("dashboard.tokensSplit.legend.whatsapp","WhatsApp templates"),radius:[0,0,6,6]})]})})}):s.jsx("p",{className:"card-empty",children:P("dashboard.charts.tokensSplitLast10Days.empty","Not enough data yet to show the split.")})]}),s.jsxs("div",{className:"card chart-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:P("dashboard.charts.tokensSplitByBotLast10Days.title",`Tokens by bot & channel (last ${p} days)`,{days:p})}),s.jsxs("p",{className:"card-subtitle",children:[P("dashboard.charts.tokensSplitByBotLast10Days.subtitle","How each bot consumes tokens via OpenAI + knowledge, emails, and WhatsApp templates"),s.jsxs("span",{className:"dashboard-range-tag",children:[""," ",e("dashboard.range.last","Last")," ",p," ",e("dashboard.range.days","days")]})]})]}),O?s.jsx("div",{className:"dashboard-chart",children:s.jsx(Xs,{children:s.jsxs(xo,{data:$,children:[s.jsx(gs,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.18)"}),s.jsx(vs,{dataKey:"botName",tick:{fill:"#9ca3af",fontSize:11}}),s.jsx(bs,{allowDecimals:!1,tickFormatter:A,tick:{fill:"#9ca3af",fontSize:11}}),s.jsx(Js,{contentStyle:B,labelStyle:H,formatter:_}),s.jsx(ii,{wrapperStyle:Z}),s.jsx(gn,{dataKey:"openAi",stackId:"tokens",fill:"#6366F1",name:P("dashboard.tokensSplit.legend.openAi","OpenAI + knowledge"),radius:[6,6,0,0]}),s.jsx(gn,{dataKey:"emails",stackId:"tokens",fill:"#F97316",name:P("dashboard.tokensSplit.legend.emails","Emails")}),s.jsx(gn,{dataKey:"whatsapp",stackId:"tokens",fill:"#22C55E",name:P("dashboard.tokensSplit.legend.whatsapp","WhatsApp templates"),radius:[0,0,6,6]})]})})}):s.jsx("p",{className:"card-empty",children:P("dashboard.charts.tokensSplitByBotLast10Days.empty","Not enough data yet to show per-bot split.")})]}),s.jsxs("div",{className:"card chart-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:e("dashboard.charts.topBots.title")}),s.jsxs("p",{className:"card-subtitle",children:[e("dashboard.charts.topBots.subtitle"),s.jsxs("span",{className:"dashboard-range-tag",children:[""," ",e("dashboard.range.last","Last")," ",p," ",e("dashboard.range.days","days")]})]})]}),L?s.jsx("div",{className:"dashboard-chart",children:s.jsx(Xs,{children:s.jsxs(xo,{data:q,children:[s.jsx(gs,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,0.18)"}),s.jsx(vs,{dataKey:"name",tick:{fill:"#9ca3af",fontSize:11}}),s.jsx(bs,{allowDecimals:!1,tick:{fill:"#9ca3af",fontSize:11}}),s.jsx(Js,{contentStyle:B,labelStyle:H}),s.jsx(gn,{dataKey:"conversations",fill:"#6366F1",radius:[6,6,0,0]})]})})}):s.jsx("p",{className:"card-empty",children:e("dashboard.charts.topBots.empty")})]}),s.jsxs("div",{className:"card chart-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:e("dashboard.activity.title")}),s.jsx("p",{className:"card-subtitle",children:e("dashboard.activity.subtitle")})]}),L?s.jsx("ul",{className:"list-plain",children:j.topBotsByConversationsLast30Days.map(ne=>s.jsxs("li",{className:"list-row",children:[s.jsxs("div",{className:"list-row-main",children:[s.jsx("div",{className:"list-title",children:ne.botName}),ne.lastConversationAt&&s.jsxs("div",{className:"list-subtitle",children:[e("dashboard.activity.lastConversation")," ",new Date(ne.lastConversationAt).toLocaleString(n)]})]}),s.jsxs("div",{className:"list-row-meta",children:[s.jsxs("span",{className:"badge",children:[ne.conversationCount," ",e("dashboard.activity.convAbbrev")]}),s.jsx(de,{to:`/app/bots/${ne.botId}/conversations`,className:"btn-link-small",children:e("dashboard.activity.view")})]})]},ne.botId))}):s.jsx("p",{className:"card-empty",children:e("dashboard.activity.empty")})]})]})]})]})]})},aY=()=>{var u,p;const{t:e,i18n:t}=Le(),n=(u=t.resolvedLanguage)!=null&&u.startsWith("it")?"it-IT":(p=t.resolvedLanguage)!=null&&p.startsWith("es")?"es-ES":"en-GB",[a,i]=m.useState(null),[r,o]=m.useState(!0),[l,c]=m.useState(null);m.useEffect(()=>{let h=!0;return J9().then(f=>{h&&i(f)}).catch(f=>{console.error("Failed to load bot health",f),h&&c((f==null?void 0:f.message)||"Failed to load bot health.")}).finally(()=>{h&&o(!1)}),()=>{h=!1}},[]);const d=m.useMemo(()=>a!=null&&a.items?[...a.items].sort((h,f)=>f.healthScore-h.healthScore):[],[a]);return s.jsxs("div",{className:"page-container dashboard-page",children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"page-title",children:e("dashboard.health.title","Bot health")}),s.jsx("p",{className:"page-subtitle",children:e("dashboard.health.subtitle","Quick overview of bot readiness, channels, and recent activity.")})]}),s.jsx(de,{to:"/app/dashboard",className:"btn-secondary",children:e("dashboard.health.back","Back to dashboard")})]}),r&&s.jsx("div",{className:"card",children:s.jsx("p",{children:e("dashboard.loading","Loading")})}),!r&&l&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:l})}),!r&&!l&&s.jsx("div",{className:"dashboard-health-grid",children:d.length===0?s.jsx("div",{className:"card",children:s.jsx("p",{className:"card-empty",children:e("dashboard.health.empty","No bots found yet.")})}):d.map(h=>s.jsxs("div",{className:"card dashboard-health-card",children:[s.jsxs("div",{className:"dashboard-health-header",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"dashboard-health-title",children:h.botName}),s.jsxs("p",{className:"dashboard-health-subtitle",children:[e("dashboard.health.status","Status"),":"," ",s.jsx("strong",{children:h.status})]})]}),s.jsx("div",{className:"dashboard-health-score"+(h.healthScore>=75?" dashboard-health-score--good":h.healthScore>=50?" dashboard-health-score--ok":" dashboard-health-score--poor"),children:h.healthScore})]}),s.jsxs("div",{className:"dashboard-health-meta",children:[s.jsxs("span",{children:[e("dashboard.health.lastConversation","Last conversation"),":"," ",h.lastConversationAt?new Date(h.lastConversationAt).toLocaleString(n):""]}),s.jsxs("span",{children:[e("dashboard.health.conversationsLast30","Conversations (30d)")," ",s.jsx("strong",{children:h.conversationsLast30Days})]})]}),s.jsxs("div",{className:"dashboard-health-badges",children:[s.jsx("span",{className:h.channels.web?"badge-ok":"badge",children:"Web"}),s.jsx("span",{className:h.channels.whatsapp?"badge-ok":"badge",children:"WhatsApp"}),s.jsx("span",{className:h.channels.facebook?"badge-ok":"badge",children:"Facebook"}),s.jsx("span",{className:h.channels.instagram?"badge-ok":"badge",children:"Instagram"})]}),s.jsxs("div",{className:"dashboard-health-flags",children:[s.jsxs("span",{children:[e("dashboard.health.knowledge","Knowledge"),":"," ",h.knowledgeEnabled?"On":"Off"]}),s.jsxs("span",{children:[e("dashboard.health.bookings","Bookings"),":"," ",h.calendarEnabled?"On":"Off"]})]}),s.jsxs("div",{className:"dashboard-health-actions",children:[s.jsx(de,{to:`/app/bots/${h.botId}`,className:"btn-secondary btn-xs",children:e("dashboard.health.viewBot","View bot")}),s.jsx(de,{to:`/app/bots/${h.botId}/settings`,className:"btn-secondary btn-xs",children:e("dashboard.health.settings","Settings")})]})]},h.botId))})]})},sY=[7,14,30,60],iY=()=>{var h,f;const{t:e,i18n:t}=Le(),n=(h=t.resolvedLanguage)!=null&&h.startsWith("it")?"it-IT":(f=t.resolvedLanguage)!=null&&f.startsWith("es")?"es-ES":"en-GB",[a,i]=m.useState(30),[r,o]=m.useState(null),[l,c]=m.useState(!0),[d,u]=m.useState(null);m.useEffect(()=>{let g=!0;return c(!0),fO(a).then(v=>{g&&o(v)}).catch(v=>{console.error("Failed to load conversion data",v),g&&u((v==null?void 0:v.message)||"Failed to load conversion data.")}).finally(()=>{g&&c(!1)}),()=>{g=!1}},[a]);const p=m.useMemo(()=>r!=null&&r.perBot?[...r.perBot].sort((g,v)=>v.bookings-g.bookings):[],[r]);return s.jsxs("div",{className:"page-container dashboard-page",children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"page-title",children:e("dashboard.conversion.title","User journey")}),s.jsx("p",{className:"page-subtitle",children:e("dashboard.conversion.subtitle","Conversion funnel by bot: conversations  leads  bookings.")})]}),s.jsx(de,{to:"/app/dashboard",className:"btn-secondary",children:e("dashboard.conversion.back","Back to dashboard")})]}),s.jsx("div",{className:"dashboard-range-row",children:s.jsxs("div",{className:"dashboard-range-left",children:[s.jsx("span",{className:"dashboard-range-label",children:e("dashboard.range.label","Time range")}),s.jsx("div",{className:"dashboard-range-pills",children:sY.map(g=>s.jsxs("button",{type:"button",className:"dashboard-range-pill"+(a===g?" dashboard-range-pill--active":""),onClick:()=>i(g),children:[e("dashboard.range.last","Last")," ",g," ",e("dashboard.range.days","days")]},g))})]})}),l&&s.jsx("div",{className:"card",children:s.jsx("p",{children:e("dashboard.loading","Loading")})}),!l&&d&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:d})}),!l&&!d&&r&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"card dashboard-conversion-summary",children:s.jsxs("div",{className:"dashboard-conversion-grid",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-conversion-value",children:r.totals.conversations.toLocaleString(n)}),s.jsx("div",{className:"dashboard-conversion-label",children:e("dashboard.conversion.conversations","Conversations")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-conversion-value",children:r.totals.leads.toLocaleString(n)}),s.jsx("div",{className:"dashboard-conversion-label",children:e("dashboard.conversion.leads","Leads")}),s.jsx("div",{className:"dashboard-conversion-rate",children:r.totals.conversations>0?`${r.totals.leadRate.toFixed(1)}%`:""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-conversion-value",children:r.totals.bookings.toLocaleString(n)}),s.jsx("div",{className:"dashboard-conversion-label",children:e("dashboard.conversion.bookings","Bookings")}),s.jsx("div",{className:"dashboard-conversion-rate",children:r.totals.leads>0||r.totals.conversations>0||r.totals.bookings>0?`${r.totals.bookingRate.toFixed(1)}%`:""})]})]})}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:e("dashboard.conversion.perBot","Per-bot breakdown")}),s.jsx("p",{className:"card-subtitle",children:e("dashboard.conversion.perBotSubtitle","Track which bots convert best.")})]}),p.length===0?s.jsx("p",{className:"card-empty",children:e("dashboard.conversion.empty","No conversion data yet.")}):s.jsxs("div",{className:"dashboard-conversion-table",children:[s.jsxs("div",{className:"dashboard-conversion-row dashboard-conversion-row--head",children:[s.jsx("span",{children:e("dashboard.conversion.bot","Bot")}),s.jsx("span",{children:e("dashboard.conversion.conversations","Conversations")}),s.jsx("span",{children:e("dashboard.conversion.leads","Leads")}),s.jsx("span",{children:e("dashboard.conversion.bookings","Bookings")}),s.jsx("span",{children:e("dashboard.conversion.leadRate","Lead rate")}),s.jsx("span",{children:e("dashboard.conversion.bookingRate","Booking rate")})]}),p.map(g=>s.jsxs("div",{className:"dashboard-conversion-row",children:[s.jsx("span",{className:"dashboard-conversion-bot","data-label":e("dashboard.conversion.bot","Bot"),children:g.botName}),s.jsx("span",{"data-label":e("dashboard.conversion.conversations","Conversations"),children:g.conversations.toLocaleString(n)}),s.jsx("span",{"data-label":e("dashboard.conversion.leads","Leads"),children:g.leads.toLocaleString(n)}),s.jsx("span",{"data-label":e("dashboard.conversion.bookings","Bookings"),children:g.bookings.toLocaleString(n)}),s.jsx("span",{"data-label":e("dashboard.conversion.leadRate","Lead rate"),children:g.conversations>0?`${g.leadRate.toFixed(1)}%`:""}),s.jsx("span",{"data-label":e("dashboard.conversion.bookingRate","Booking rate"),children:g.leads>0||g.conversations>0||g.bookings>0?`${g.bookingRate.toFixed(1)}%`:""})]},g.botId))]})]})]})]})},rY=()=>{const{slug:e}=St(),[t,n]=m.useState(null),[a,i]=m.useState(!0),[r,o]=m.useState(null);return m.useEffect(()=>{e&&(i(!0),o(null),Mk(e).then(l=>n(l)).catch(l=>{console.error(l),o(l.message||"Failed to load bot")}).finally(()=>i(!1)))},[e]),e?a?s.jsx("div",{children:"Loading..."}):r?s.jsx("div",{children:r}):t?s.jsx("div",{className:"widget-page",children:s.jsx(Dk,{slug:t.slug,botName:t.name,showPoweredBy:!0})}):s.jsx("div",{children:"Bot not found."}):s.jsx("div",{children:"No bot slug provided."})},jh=(e,t)=>new Intl.NumberFormat("en-GB",{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2}).format(e/100),oY={free:Ma,starter:Ma,basic:Ma,growth:Ma,pro:Ma,scale:Ma,enterprise:Ma},lY=e=>{const t=e.name.toLowerCase();return oY[t]??Ma},cY=e=>{var t;return e.monthlyAmountCents===0||((t=e.code)==null?void 0:t.toLowerCase())==="free"},dY=()=>{const{t:e}=Le(),{id:t}=St(),n=Bt(),[a,i]=m.useState(null),[r,o]=m.useState(!0),[l,c]=m.useState(null),[d,u]=m.useState([]),[p,h]=m.useState(!1),[f,g]=m.useState(null),[v,y]=m.useState(null),[b,x]=m.useState(!1),[w,j]=m.useState(null),S=N=>N==null?e("botPlan.plans.unlimited","Unlimited"):(N/10).toLocaleString("en-GB"),k={free:N=>[{id:"energy",label:e("botPlan.features.free.energy","{{amount}} Energy per month",{amount:S(N.monthlyTokens)}),available:!0},{id:"messages",label:e("botPlan.features.free.messages","Up to 150 AI Assistant messages"),available:!0},{id:"pages",label:e("botPlan.features.free.pages","Up to 100 ingested pages"),available:!0},{id:"emails",label:e("botPlan.features.free.emails","Up to 20 emails"),available:!0},{id:"whatsappTemplates",label:e("botPlan.features.free.whatsappTemplates","No WhatsApp template messages (outbound)"),available:!1}],starter:N=>[{id:"energy",label:e("botPlan.features.starter.energy","{{amount}} Energy per month",{amount:S(N.monthlyTokens)}),available:!0},{id:"messages",label:e("botPlan.features.starter.messages","Up to 3,000 AI Assistant messages"),available:!0},{id:"pages",label:e("botPlan.features.starter.pages","Up to 1,500 ingested pages"),available:!0},{id:"emails",label:e("botPlan.features.starter.emails","Up to 1,000 emails"),available:!0},{id:"whatsappTemplates",label:e("botPlan.features.starter.whatsappTemplates","Up to 200 WhatsApp template messages (outbound)"),available:!0}],growth:N=>[{id:"energy",label:e("botPlan.features.growth.energy","{{amount}} Energy per month",{amount:S(N.monthlyTokens)}),available:!0},{id:"messages",label:e("botPlan.features.growth.messages","Up to 17,000 AI Assistant messages"),available:!0},{id:"pages",label:e("botPlan.features.growth.pages","Up to 6,000 ingested pages"),available:!0},{id:"emails",label:e("botPlan.features.growth.emails","Up to 5,000 emails"),available:!0},{id:"whatsappTemplates",label:e("botPlan.features.growth.whatsappTemplates","Up to 1,000 WhatsApp template messages (outbound)"),available:!0}],scale:N=>[{id:"energy",label:e("botPlan.features.scale.energy","{{amount}} Energy per month",{amount:S(N.monthlyTokens)}),available:!0},{id:"messages",label:e("botPlan.features.scale.messages","Up to 65,000 AI Assistant messages"),available:!0},{id:"pages",label:e("botPlan.features.scale.pages","Up to 20,000 ingested pages"),available:!0},{id:"emails",label:e("botPlan.features.scale.emails","Up to 20,000 emails"),available:!0},{id:"whatsappTemplates",label:e("botPlan.features.scale.whatsappTemplates","Up to 5,000 WhatsApp template messages (outbound)"),available:!0}],default:N=>[{id:"energy",label:e("botPlan.features.default.energy","{{amount}} Energy per month",{amount:S(N.monthlyTokens)}),available:!0}]},T=N=>{const R=N.name.toLowerCase();return(k[R]??k.default)(N)};m.useEffect(()=>{t&&(o(!0),c(null),h(!0),Promise.all([wt(t),rP(t,{}),lP()]).then(([N,R,C])=>{i(N),u(C),C.length>0&&y(C[0].id)}).catch(N=>{console.error(N),c((N==null?void 0:N.message)||e("botPlan.errors.loadFailed"))}).finally(()=>{o(!1),h(!1)}))},[t]);const L=N=>{y(N)};if(!t)return s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botPlan.missingId")})});if(r)return s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botPlan.loading")})});if(l&&!a)return s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{children:e("botPlan.errorTitle")}),s.jsx("p",{children:l})]});if(!a)return s.jsx("div",{className:"page-container",children:s.jsx("h1",{children:e("botPlan.notFoundTitle")})});const F=a.status==="ACTIVE",O=d.find(N=>N.id===v)||null,M=async()=>{if(!(!t||!a)){if(!v){c(e("botPlan.errors.selectPlan"));return}x(!0),c(null),j(null);try{if(F){await oP(t,{usagePlanId:v}),j(e("botPlan.success.planUpdatedProration"));const N=await wt(t);i(N)}else{const N=jP(),R={usagePlanId:v};N&&(R.referralCode=N);const C=d.find(A=>A.id===v)||null;if(C&&cY(C)){await iP(t,{usagePlanId:v}),j(e("botPlan.success.planActivated","Plan activated."));const A=await wt(t);i(A)}else{const{checkoutUrl:A}=await sP(t,R);window.location.href=A}}}catch(N){console.error(N),c((N==null?void 0:N.message)||e("botPlan.errors.updateFailed"))}finally{x(!1)}}},D=(N=>{const R=N.toUpperCase();return R==="ACTIVE"?"plan-summary-status plan-summary-status-ok":R==="DRAFT"?"plan-summary-status plan-summary-status-warn":R==="CANCELLED"||R==="INACTIVE"?"plan-summary-status plan-summary-status-error":"plan-summary-status"})(a.status),E=O?jh(O.monthlyAmountCents,O.currency):null;return s.jsxs("div",{children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:e("botPlan.title")}),s.jsx("p",{className:"muted",children:e("botPlan.subtitle",{botName:a.name})})]}),s.jsx("div",{className:"header-actions",children:s.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>n(`/app/bots/${a.id}/features`),children:e("botPlan.backToFeatures")})})]}),l&&s.jsx("div",{className:"form-error",children:l}),w&&s.jsx("div",{className:"form-success",children:w}),s.jsxs("div",{className:"detail-layout",children:[s.jsxs("section",{className:"detail-main",children:[s.jsx("h2",{children:e("botPlan.plans.title")}),s.jsx("p",{className:"usage-plans-subtitle",children:e("botPlan.plans.subtitle")}),s.jsxs("div",{className:"plan-info-card",children:[s.jsx("div",{className:"plan-info-icon","aria-hidden":"true",children:"i"}),s.jsxs("div",{className:"plan-info-body",children:[s.jsx("h3",{className:"plan-info-title",children:e("botPlan.energyInfo.title","How Energy and limits work")}),s.jsx("p",{children:e("botPlan.energyInfo.main","Almost every action on the platform consumes Energy (assistant messages, document retrieval, tools, ingestion). WhatsApp template messages (outbound) have their own limit and do not consume Energy.")}),s.jsx("p",{className:"muted",children:e("botPlan.energyInfo.estimates",'The "Up to" values shown in each plan are maximum estimates if you spent all your Energy on a single type of task. Actual usage varies based on message length, document size and context.')})]})]}),p&&s.jsx("p",{children:e("botPlan.plans.loading")}),f&&s.jsx("p",{className:"form-error",children:f}),d.length===0&&!p&&s.jsx("p",{className:"muted",children:e("botPlan.plans.empty")}),s.jsx("div",{className:"plan-cards",children:d.map(N=>{const R=N.id===v;return s.jsxs("div",{className:`plan-card ${R?"selected":""}`,onClick:()=>L(N.id),children:[s.jsx("div",{className:"plan-card-media",children:s.jsx("img",{src:lY(N),alt:e("botPlan.plans.planImageAlt",{planName:N.name})})}),s.jsxs("div",{className:"plan-card-header",children:[s.jsx("div",{className:"plan-card-name",children:N.name}),s.jsxs("div",{className:"plan-card-price",children:[jh(N.monthlyAmountCents,N.currency),"/",e("botPlan.perMonth")]})]}),N.description&&s.jsx("p",{className:"plan-card-description",children:N.description}),s.jsx("ul",{className:"plan-limits",children:s.jsxs("li",{children:[e("botPlan.plans.tokensPerMonth")," ",s.jsx("strong",{children:S(N.monthlyTokens)})]})}),s.jsx("ul",{className:"plan-features",children:T(N).map(C=>s.jsxs("li",{className:"plan-feature",children:[s.jsx("span",{className:"plan-feature-icon "+(C.available?"plan-feature-icon--ok":"plan-feature-icon--off"),children:C.available?"":""}),s.jsx("span",{className:"plan-feature-text",children:C.label})]},C.id))}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:C=>{C.stopPropagation(),L(N.id)},children:e(R?"botPlan.plans.selected":"botPlan.plans.select")})]},N.id)})})]}),s.jsxs("section",{className:"detail-side",children:[s.jsxs("div",{className:"plan-summary-header",children:[s.jsx("h2",{style:{margin:0},children:e("botPlan.summary.title")}),s.jsxs("span",{className:D,children:[e("botPlan.summary.statusLabel")," ",s.jsx("strong",{children:a.status})]})]}),s.jsx("p",{className:"muted",style:{marginTop:"0.35rem"},children:e("botPlan.summary.subtitle")}),s.jsx("h3",{style:{marginTop:"0.9rem",marginBottom:"0.35rem"},children:e("botPlan.summary.featuresSubtotal")}),s.jsx("h3",{style:{marginTop:"1.4rem",marginBottom:"0.3rem"},children:e("botPlan.summary.selectedPlan")}),O?s.jsxs("div",{className:"plan-summary-lines",children:[s.jsxs("div",{className:"plan-summary-line",children:[s.jsx("span",{className:"plan-summary-line-label",children:O.name}),s.jsxs("span",{className:"plan-summary-line-amount",children:[jh(O.monthlyAmountCents,O.currency),"/",e("botPlan.perMonth")]})]}),s.jsxs("div",{className:"plan-summary-line",children:[s.jsx("span",{className:"plan-summary-line-label",children:e("botPlan.plans.tokensPerMonthLabel")}),s.jsx("span",{className:"plan-summary-line-amount",children:S(O.monthlyTokens)})]})]}):s.jsx("p",{className:"muted",children:e("botPlan.summary.noPlanSelected")}),O&&s.jsx("ul",{className:"plan-features plan-features--summary",children:T(O).map(N=>s.jsxs("li",{className:"plan-feature",children:[s.jsx("span",{className:"plan-feature-icon "+(N.available?"plan-feature-icon--ok":"plan-feature-icon--off"),children:N.available?"":""}),s.jsx("span",{className:"plan-feature-text",children:N.label})]},N.id))}),s.jsxs("div",{className:"plan-summary-total",style:{marginTop:"1.4rem"},children:[s.jsx("span",{children:e("botPlan.summary.totalPerMonth")}),s.jsx("strong",{children:E??e("botPlan.summary.selectPlanToSeeTotal")})]}),!F&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn-primary",type:"button",onClick:M,disabled:b||!O,style:{marginTop:"1rem"},children:e(b?"botPlan.actions.redirecting":"botPlan.actions.activatePay")}),s.jsx("p",{className:"detail-side-note",children:e("botPlan.notes.redirectToStripe")})]}),F&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn-primary",type:"button",onClick:M,disabled:b||!O,style:{marginTop:"1rem"},children:e(b?"botPlan.actions.updating":"botPlan.actions.changePlan")}),s.jsx("p",{className:"detail-side-note",children:e("botPlan.notes.proration")})]})]})]})]})},wo=["name","email","phone","service","datetime"],ei=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],uY=()=>{const{t:e}=Le(),{id:t}=St(),[n,a]=m.useState(null),[i,r]=m.useState(null),[o,l]=m.useState(""),[c,d]=m.useState(!0),[u,p]=m.useState(!1),[h,f]=m.useState(null),[g,v]=m.useState(null),[y,b]=m.useState(!1),x=()=>{const U={};return ei.forEach(G=>{U[G]={enabled:!1,windows:[{start:"",end:"",maxSimultaneousBookings:""}]}}),U},w=(U,G)=>{const V=x();return U&&ei.forEach($=>{const q=U[$];q&&q.length>0&&(V[$]={enabled:!0,windows:q.map(z=>({start:z.start,end:z.end,maxSimultaneousBookings:typeof z.maxSimultaneousBookings=="number"?String(z.maxSimultaneousBookings):G}))})}),V},j=U=>{const G=U.trim();if(!G)return null;const V=Number(G);return!Number.isFinite(V)||V<=0?null:Math.floor(V)},S=U=>{const G={};return ei.forEach(V=>{const $=U[V];if(!$.enabled)return;const q=[];$.windows.forEach(z=>{const ee=z.start.trim(),J=z.end.trim();!ee||!J||ee>=J||q.push({start:ee,end:J,maxSimultaneousBookings:z.maxSimultaneousBookings})}),q.length>0&&(G[V]=q.map(z=>({start:z.start,end:z.end,maxSimultaneousBookings:j(z.maxSimultaneousBookings)})))}),Object.keys(G).length>0?G:null};m.useEffect(()=>{t&&(d(!0),f(null),v(null),wt(t).then(U=>{a(U);const V=(U.bookingRequiredFields||[]).filter(J=>!wo.includes(J)),$=J=>typeof J=="number"?String(J):"",q=(J,X)=>String(typeof J=="number"?J:X),z=Array.isArray(U.bookingServices)?U.bookingServices:[],ee=z.length>0?z.map(J=>{const X=w(J.weeklySchedule??null,$(J.maxSimultaneousBookings)),ne=ei.find(ue=>X[ue].enabled)??"monday";return{name:J.name||"",aliases:(J.aliases||[]).join(", "),calendarId:J.calendarId||"",durationMinutes:typeof J.durationMinutes=="number"?String(J.durationMinutes):"30",maxSimultaneousBookings:$(J.maxSimultaneousBookings),weeklySchedule:X,activeDay:ne}}):[(()=>{const J=w(U.bookingWeeklySchedule??null,$(U.bookingMaxSimultaneousBookings)),X=ei.find(ne=>J[ne].enabled)??"monday";return{name:"General",aliases:"",calendarId:U.calendarId||"",durationMinutes:U.defaultDurationMinutes?String(U.defaultDurationMinutes):"30",maxSimultaneousBookings:$(U.bookingMaxSimultaneousBookings),weeklySchedule:J,activeDay:X}})()];r({timeZone:U.timeZone||"",calendarId:U.calendarId||"",bookingMinLeadHours:$(U.bookingMinLeadHours),bookingMaxAdvanceDays:$(U.bookingMaxAdvanceDays),bookingReminderWindowHours:q(U.bookingReminderWindowHours,1),bookingReminderMinLeadHours:q(U.bookingReminderMinLeadHours,1),bookingConfirmationEmailEnabled:U.bookingConfirmationEmailEnabled??!0,bookingReminderEmailEnabled:U.bookingReminderEmailEnabled??!0,bookingConfirmationSubjectTemplate:U.bookingConfirmationSubjectTemplate??"",bookingReminderSubjectTemplate:U.bookingReminderSubjectTemplate??"",bookingCancellationSubjectTemplate:U.bookingCancellationSubjectTemplate??"",bookingConfirmationBodyTextTemplate:U.bookingConfirmationBodyTextTemplate??"",bookingReminderBodyTextTemplate:U.bookingReminderBodyTextTemplate??"",bookingCancellationBodyTextTemplate:U.bookingCancellationBodyTextTemplate??"",bookingConfirmationBodyHtmlTemplate:U.bookingConfirmationBodyHtmlTemplate??"",bookingReminderBodyHtmlTemplate:U.bookingReminderBodyHtmlTemplate??"",bookingCancellationBodyHtmlTemplate:U.bookingCancellationBodyHtmlTemplate??"",customBookingFields:V,services:ee})}).catch(U=>{console.error(U),f((U==null?void 0:U.message)||e("botSettings.errors.loadFailed"))}).finally(()=>d(!1)))},[t,e]);const k=U=>G=>{if(!i)return;const V=G.target.value;r({...i,[U]:V})},T=U=>G=>{i&&r({...i,[U]:G.target.checked})},L=()=>{if(!i)return;const U=o.trim();if(!U)return;if(i.customBookingFields.some(V=>V.toLowerCase()===U.toLowerCase())||wo.includes(U)){l("");return}r({...i,customBookingFields:[...i.customBookingFields,U]}),l("")},F=U=>{i&&r({...i,customBookingFields:i.customBookingFields.filter(G=>G!==U)})},O=(U,G)=>V=>{if(!i)return;const $=[...i.services];$[U]={...$[U],[G]:V.target.value},r({...i,services:$})},M=(U,G,V)=>{if(!i)return;const $=[...i.services],q=$[U];$[U]={...q,weeklySchedule:{...q.weeklySchedule,[G]:{...q.weeklySchedule[G],enabled:V}}},r({...i,services:$})},P=(U,G,V,$,q)=>{if(!i)return;const z=[...i.services],ee=z[U],J=ee.weeklySchedule[G],X=[...J.windows];X[V]={...X[V],[$]:q},z[U]={...ee,weeklySchedule:{...ee.weeklySchedule,[G]:{...J,windows:X}}},r({...i,services:z})},D=(U,G)=>{if(!i)return;const V=[...i.services],$=V[U],q=$.weeklySchedule[G];V[U]={...$,weeklySchedule:{...$.weeklySchedule,[G]:{...q,windows:[...q.windows,{start:"",end:"",maxSimultaneousBookings:""}]}}},r({...i,services:V})},E=(U,G,V)=>{if(!i)return;const $=[...i.services],q=$[U],z=q.weeklySchedule[G],ee=z.windows.filter((J,X)=>X!==V);$[U]={...q,weeklySchedule:{...q.weeklySchedule,[G]:{...z,windows:ee.length>0?ee:[{start:"",end:"",maxSimultaneousBookings:""}]}}},r({...i,services:$})},N=(U,G)=>{if(!i)return;const V=[...i.services];V[U]={...V[U],activeDay:G},r({...i,services:V})},R=()=>{if(!i)return;const U=[...i.services];U.length===1&&!U[0].name.trim()&&(U[0]={...U[0],name:"General"});const G={name:"",aliases:"",calendarId:"",durationMinutes:"30",maxSimultaneousBookings:"",weeklySchedule:x(),activeDay:"monday"};r({...i,services:[...U,G]})},C=U=>{if(!i)return;const G=i.services.filter((V,$)=>$!==U);r({...i,services:G.length?G:[]})},A=U=>{const G=U.trim();if(!G)return null;const V=Number(G);return!Number.isFinite(V)||V<0?null:V},_=(U,G)=>{const V=A(U);return V??G},B=U=>{const G=U.trim();return G===""?null:G},H=async U=>{if(U.preventDefault(),!(!t||!i)){p(!0),f(null),v(null);try{const G=Array.from(new Set(i.customBookingFields.map(X=>X.trim()).filter(X=>X.length>0))),V=G.length>0?[...wo,...G]:[...wo],$={timeZone:i.timeZone.trim()||null,calendarId:i.calendarId.trim()||null,bookingMinLeadHours:A(i.bookingMinLeadHours),bookingMaxAdvanceDays:A(i.bookingMaxAdvanceDays),bookingReminderWindowHours:_(i.bookingReminderWindowHours,1),bookingReminderMinLeadHours:_(i.bookingReminderMinLeadHours,1),bookingConfirmationEmailEnabled:i.bookingConfirmationEmailEnabled,bookingReminderEmailEnabled:i.bookingReminderEmailEnabled,bookingConfirmationSubjectTemplate:B(i.bookingConfirmationSubjectTemplate),bookingReminderSubjectTemplate:B(i.bookingReminderSubjectTemplate),bookingCancellationSubjectTemplate:B(i.bookingCancellationSubjectTemplate),bookingConfirmationBodyTextTemplate:B(i.bookingConfirmationBodyTextTemplate),bookingReminderBodyTextTemplate:B(i.bookingReminderBodyTextTemplate),bookingCancellationBodyTextTemplate:B(i.bookingCancellationBodyTextTemplate),bookingConfirmationBodyHtmlTemplate:B(i.bookingConfirmationBodyHtmlTemplate),bookingReminderBodyHtmlTemplate:B(i.bookingReminderBodyHtmlTemplate),bookingCancellationBodyHtmlTemplate:B(i.bookingCancellationBodyHtmlTemplate),bookingRequiredFields:V};for(const X of i.services)for(const ne of ei){const ue=X.weeklySchedule[ne];if(ue.enabled){for(const fe of ue.windows)if(!j(fe.maxSimultaneousBookings)){f(e("botSettings.sections.availability.slotsRequired","Please set the slots for every enabled time window."));return}}}let q;const z=i.services.length>1,ee=i.services.map(X=>{const ne=X.name.trim(),ue=X.calendarId.trim();if(z&&!ne||!ue)return null;const fe=_(X.durationMinutes,30),we=S(X.weeklySchedule),Ae=X.aliases.split(",").map(Q=>Q.trim()).filter(Q=>Q.length>0);return{name:ne||"General",aliases:Ae,calendarId:ue,durationMinutes:fe,maxSimultaneousBookings:A(X.maxSimultaneousBookings),weeklySchedule:we}}).filter(Boolean);if(z&&ee.length!==i.services.length){f(e("botSettings.onboarding.booking.serviceNameRequired","Service name is required when you add multiple services."));return}if(ee.length===0){f(e("botSettings.onboarding.booking.servicesRequired","Add at least one service with a calendar before saving."));return}const J=ee[0];q=await ln(t,{...$,bookingServices:ee,calendarId:(J==null?void 0:J.calendarId)||null,defaultDurationMinutes:(J==null?void 0:J.durationMinutes)||30,bookingMaxSimultaneousBookings:(J==null?void 0:J.maxSimultaneousBookings)??null,bookingWeeklySchedule:(J==null?void 0:J.weeklySchedule)??null}),a(q),v(e("botSettings.success.saved"))}catch(G){console.error(G),f((G==null?void 0:G.message)||e("botSettings.errors.saveFailed"))}finally{p(!1)}}};if(!t)return s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botSettings.missingId")})});if(c)return s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("botSettings.loading")})});if(h&&!n)return s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{children:e("botSettings.title")}),s.jsx("p",{children:h})]});if(!n||!i)return s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{children:e("botSettings.title")}),s.jsx("p",{children:e("botSettings.notFound")})]});const Z=n.useCalendar,ie=i.services.length>1;return s.jsxs("div",{children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{className:"bot-header",children:[s.jsx("div",{className:"bot-avatar",children:n.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h1",{className:"bot-title",children:e("botSettings.title")}),s.jsxs("p",{className:"muted",children:[e("botDetails.slugLabel")," ",s.jsx("code",{children:n.slug})]})]})]}),s.jsx("div",{className:"page-header-actions",children:s.jsx(de,{to:`/app/bots/${n.id}`,className:"btn-secondary",children:e("botSettings.backToOverview")})})]}),s.jsxs("div",{className:"detail-layout",children:[s.jsxs("section",{className:"detail-main bot-settings-main",children:[s.jsx("p",{className:"muted bot-settings-intro",children:e("botSettings.intro")}),h&&s.jsx("div",{className:"form-error",children:h}),g&&s.jsx("div",{className:"form-success",children:g}),!Z&&s.jsxs("div",{className:"alert-warning",style:{marginBottom:"1rem"},children:[s.jsx("strong",{children:e("botSettings.calendarDisabled.title")})," ",e("botSettings.calendarDisabled.body")," ",s.jsx(de,{to:`/app/bots/${n.id}/features`,children:e("botSettings.featuresAndPlan")}),"."]}),s.jsxs("form",{className:"form",onSubmit:H,children:[s.jsxs("fieldset",{className:"form-fieldset bot-settings-section",children:[s.jsx("legend",{children:e("botSettings.sections.timezone.title","Business time zone")}),s.jsx("p",{className:"muted bot-settings-hint",children:e("botSettings.sections.timezone.hint","Used to validate booking times across all services.")}),s.jsx("div",{className:"bot-settings-grid",children:s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.fields.timeZone.label")}),s.jsx("input",{type:"text",value:i.timeZone,onChange:k("timeZone"),placeholder:e("botSettings.fields.timeZone.placeholder")}),s.jsx("span",{className:"bot-settings-help",children:e("botSettings.fields.timeZone.help")})]})})]}),s.jsxs("fieldset",{className:"form-fieldset bot-settings-section",children:[s.jsx("legend",{children:e("botSettings.sections.services.title","Services & calendars")}),s.jsx("p",{className:"muted bot-settings-hint",children:e("botSettings.sections.services.hint","Create one service per calendar and set its duration, capacity, and opening hours.")}),i.services.map((U,G)=>s.jsxs("div",{className:"booking-day-detail-card",style:{marginBottom:"1.2rem"},children:[s.jsxs("div",{className:"booking-day-detail-header",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"booking-day-detail-title",children:U.name||e("botSettings.sections.services.unnamed","Service")}),s.jsx("p",{className:"booking-day-detail-subtitle",children:e("botSettings.sections.services.cardHint","Configure the calendar and availability for this service.")})]}),i.services.length>1&&s.jsx("button",{type:"button",className:"btn-link booking-remove-range",onClick:()=>C(G),children:e("botSettings.sections.services.remove","Remove service")})]}),s.jsxs("div",{className:"bot-settings-grid",style:{marginBottom:"1rem"},children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:ie?e("botSettings.services.fields.name","Service name"):e("botSettings.services.fields.labelOptional","Label (optional)")}),s.jsx("input",{type:"text",value:U.name,onChange:O(G,"name"),placeholder:e(ie?"botSettings.services.fields.namePlaceholder":"botSettings.services.fields.labelPlaceholder",ie?"e.g. Haircut":"e.g. General")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.services.fields.aliases","Aliases (optional)")}),s.jsx("input",{type:"text",value:U.aliases,onChange:O(G,"aliases"),placeholder:e("botSettings.services.fields.aliasesPlaceholder","e.g. womens haircut, haircut for women")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.fields.calendarId.label")}),s.jsx("input",{type:"text",value:U.calendarId,onChange:O(G,"calendarId"),placeholder:e("botSettings.fields.calendarId.placeholder")}),s.jsxs("span",{className:"bot-settings-help",children:[e("botSettings.fields.calendarId.help")," ",s.jsx("code",{children:"primary"})]})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.services.fields.duration","Duration (minutes)")}),s.jsx("input",{type:"number",min:5,max:480,value:U.durationMinutes,onChange:O(G,"durationMinutes"),placeholder:e("botSettings.fields.defaultDurationMinutes.placeholder")})]})]}),s.jsx("div",{className:"booking-day-tabs",children:ei.map(V=>{const $=U.weeklySchedule[V],q=U.activeDay===V,z=$.enabled,ee=["booking-day-pill",q&&"booking-day-pill--active"].filter(Boolean).join(" ");return s.jsxs("button",{type:"button",className:ee,onClick:()=>N(G,V),children:[s.jsx("span",{className:"booking-day-pill-label",children:e(`botSettings.weekdays.${V}`)}),s.jsx("span",{className:"booking-day-pill-dot"+(z?" booking-day-pill-dot--on":""),"aria-hidden":"true"})]},`${G}-${V}`)})}),(()=>{const V=U.activeDay,$=U.weeklySchedule[V];return s.jsxs("div",{className:"booking-day-detail-card",children:[s.jsxs("div",{className:"booking-day-detail-header",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"booking-day-detail-title",children:e(`botSettings.weekdays.${V}`)}),s.jsx("p",{className:"booking-day-detail-subtitle",children:$.enabled?e("botSettings.sections.availability.enabledHint","Bookings are allowed on this day within the time ranges below."):e("botSettings.sections.availability.disabledHint","Bookings are not allowed on this day until you enable it.")})]}),s.jsxs("label",{className:"booking-toggle",children:[s.jsx("input",{type:"checkbox",checked:$.enabled,onChange:q=>M(G,V,q.target.checked)}),s.jsx("span",{className:"booking-toggle-slider"}),s.jsx("span",{className:"booking-toggle-label",children:e("botSettings.sections.availability.acceptBookings","Accept bookings this day")})]})]}),s.jsx("div",{className:"booking-day-ranges",children:$.windows.map((q,z)=>s.jsxs("div",{className:"booking-day-range-row",children:[s.jsxs("div",{className:"booking-day-range-inputs",children:[s.jsxs("label",{children:[s.jsx("span",{className:"booking-range-label",children:e("botSettings.sections.availability.from","From")}),s.jsx("input",{type:"time",value:q.start,onChange:ee=>P(G,V,z,"start",ee.target.value)})]}),s.jsxs("label",{children:[s.jsx("span",{className:"booking-range-label",children:e("botSettings.sections.availability.to","To")}),s.jsx("input",{type:"time",value:q.end,onChange:ee=>P(G,V,z,"end",ee.target.value)})]}),s.jsxs("label",{children:[s.jsx("span",{className:"booking-range-label",children:e("botSettings.sections.availability.slots","Slots")}),(()=>{const ee=$.enabled&&!j(q.maxSimultaneousBookings);return s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"number",min:1,className:ee?"input-error":void 0,value:q.maxSimultaneousBookings,onChange:J=>P(G,V,z,"maxSimultaneousBookings",J.target.value),placeholder:e("botSettings.sections.availability.slotsPlaceholder","e.g. 1")}),ee&&s.jsx("div",{className:"field-error",children:e("botSettings.sections.availability.slotsRequired","Please set the slots for every enabled time window.")})]})})()]})]}),z>0&&s.jsx("button",{type:"button",className:"btn-link booking-remove-range",onClick:()=>E(G,V,z),children:e("botSettings.sections.availability.removeRange","Remove range")})]},`${G}-${V}-${z}`))}),s.jsx("button",{type:"button",className:"btn-secondary btn-xs booking-add-range btn-color",onClick:()=>D(G,V),children:e("botSettings.sections.availability.addRange","Add time range")}),s.jsx("p",{className:"muted bot-settings-hint",children:e("botSettings.sections.availability.note")})]})})()]},G)),s.jsx("button",{type:"button",className:"btn-secondary booking-custom-field-add-btn",onClick:R,children:e("botSettings.sections.services.add","Add service")})]}),s.jsxs("fieldset",{className:"form-fieldset bot-settings-section",children:[s.jsx("legend",{children:e("botSettings.sections.bookingRules.title")}),s.jsx("p",{className:"muted bot-settings-hint",children:e("botSettings.sections.bookingRules.hint")}),s.jsxs("div",{className:"bot-settings-grid",children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.fields.bookingMinLeadHours.label")}),s.jsx("input",{type:"number",min:0,step:1,value:i.bookingMinLeadHours,onChange:k("bookingMinLeadHours"),placeholder:e("botSettings.fields.bookingMinLeadHours.placeholder")}),s.jsx("span",{className:"bot-settings-help",children:e("botSettings.fields.bookingMinLeadHours.help")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.fields.bookingMaxAdvanceDays.label")}),s.jsx("input",{type:"number",min:0,step:1,value:i.bookingMaxAdvanceDays,onChange:k("bookingMaxAdvanceDays"),placeholder:e("botSettings.fields.bookingMaxAdvanceDays.placeholder")}),s.jsx("span",{className:"bot-settings-help",children:e("botSettings.fields.bookingMaxAdvanceDays.help")})]})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"1rem",marginBottom:y?"0.6rem":"0"},children:[s.jsx("span",{className:"bot-settings-help",children:e("botSettings.advanced.prompt")}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>b(U=>!U),children:e(y?"botSettings.advanced.hide":"botSettings.advanced.show")})]}),y&&s.jsxs(s.Fragment,{children:[s.jsxs("fieldset",{className:"form-fieldset bot-settings-section",children:[s.jsx("legend",{children:e("botSettings.sections.reminderWindow.title")}),s.jsx("p",{className:"muted bot-settings-hint",children:e("botSettings.sections.reminderWindow.hint")}),s.jsxs("div",{className:"bot-settings-grid",children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.fields.bookingReminderWindowHours.label")}),s.jsx("input",{type:"number",min:0,step:1,value:i.bookingReminderWindowHours,onChange:k("bookingReminderWindowHours"),placeholder:e("botSettings.fields.bookingReminderWindowHours.placeholder")}),s.jsx("span",{className:"bot-settings-help",children:e("botSettings.fields.bookingReminderWindowHours.help")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.fields.bookingReminderMinLeadHours.label")}),s.jsx("input",{type:"number",min:0,step:1,value:i.bookingReminderMinLeadHours,onChange:k("bookingReminderMinLeadHours"),placeholder:e("botSettings.fields.bookingReminderMinLeadHours.placeholder")}),s.jsx("span",{className:"bot-settings-help",children:e("botSettings.fields.bookingReminderMinLeadHours.help")})]})]})]}),s.jsxs("fieldset",{className:"form-fieldset bot-settings-section",children:[s.jsx("legend",{children:e("botSettings.sections.emails.title")}),s.jsxs("p",{className:"muted bot-settings-hint",children:[e("botSettings.sections.emails.hint")," ",s.jsx("code",{children:"{{client.name}}"}),","," ",s.jsx("code",{children:"{{client.email}}"}),","," ",s.jsx("code",{children:"{{booking.start}}"}),","," ",s.jsx("code",{children:"{{booking.end}}"}),","," ",s.jsx("code",{children:"{{booking.service}}"}),","," ",s.jsx("code",{children:"{{bot.name}}"}),"."]}),s.jsxs("div",{className:"bot-settings-email-toggles",children:[s.jsxs("label",{className:"checkbox-inline",children:[s.jsx("input",{type:"checkbox",checked:i.bookingConfirmationEmailEnabled,onChange:T("bookingConfirmationEmailEnabled")}),s.jsx("span",{children:e("botSettings.toggles.confirmationEmail")})]}),s.jsxs("label",{className:"checkbox-inline",children:[s.jsx("input",{type:"checkbox",checked:i.bookingReminderEmailEnabled,onChange:T("bookingReminderEmailEnabled")}),s.jsx("span",{children:e("botSettings.toggles.reminderEmail")})]})]}),s.jsxs("div",{className:"bot-settings-email-group",children:[s.jsx("h3",{className:"bot-settings-subtitle",children:e("botSettings.emailGroups.confirmation.title")}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.emailFields.subject")}),s.jsx("input",{type:"text",value:i.bookingConfirmationSubjectTemplate,onChange:k("bookingConfirmationSubjectTemplate"),placeholder:e("botSettings.emailGroups.confirmation.subjectPlaceholder")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.emailFields.bodyText")}),s.jsx("textarea",{rows:4,value:i.bookingConfirmationBodyTextTemplate,onChange:k("bookingConfirmationBodyTextTemplate"),placeholder:e("botSettings.emailGroups.confirmation.textPlaceholder")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.emailFields.bodyHtmlOptional")}),s.jsx("textarea",{rows:5,value:i.bookingConfirmationBodyHtmlTemplate,onChange:k("bookingConfirmationBodyHtmlTemplate"),placeholder:e("botSettings.emailGroups.confirmation.htmlPlaceholder")}),s.jsx("span",{className:"bot-settings-help",children:e("botSettings.emailGroups.confirmation.htmlHelp")})]})]}),s.jsxs("div",{className:"bot-settings-email-group",children:[s.jsx("h3",{className:"bot-settings-subtitle",children:e("botSettings.emailGroups.reminder.title")}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.emailFields.subject")}),s.jsx("input",{type:"text",value:i.bookingReminderSubjectTemplate,onChange:k("bookingReminderSubjectTemplate"),placeholder:e("botSettings.emailGroups.reminder.subjectPlaceholder")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.emailFields.bodyText")}),s.jsx("textarea",{rows:4,value:i.bookingReminderBodyTextTemplate,onChange:k("bookingReminderBodyTextTemplate"),placeholder:e("botSettings.emailGroups.reminder.textPlaceholder")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.emailFields.bodyHtmlOptional")}),s.jsx("textarea",{rows:5,value:i.bookingReminderBodyHtmlTemplate,onChange:k("bookingReminderBodyHtmlTemplate"),placeholder:e("botSettings.emailGroups.reminder.htmlPlaceholder")}),s.jsx("span",{className:"bot-settings-help",children:e("botSettings.emailGroups.reminder.htmlHelp")})]})]}),s.jsxs("div",{className:"bot-settings-email-group",children:[s.jsx("h3",{className:"bot-settings-subtitle",children:e("botSettings.emailGroups.cancellation.title")}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.emailFields.subject")}),s.jsx("input",{type:"text",value:i.bookingCancellationSubjectTemplate,onChange:k("bookingCancellationSubjectTemplate"),placeholder:e("botSettings.emailGroups.cancellation.subjectPlaceholder")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.emailFields.bodyText")}),s.jsx("textarea",{rows:4,value:i.bookingCancellationBodyTextTemplate,onChange:k("bookingCancellationBodyTextTemplate"),placeholder:e("botSettings.emailGroups.cancellation.textPlaceholder")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botSettings.emailFields.bodyHtmlOptional")}),s.jsx("textarea",{rows:5,value:i.bookingCancellationBodyHtmlTemplate,onChange:k("bookingCancellationBodyHtmlTemplate"),placeholder:e("botSettings.emailGroups.cancellation.htmlPlaceholder")}),s.jsx("span",{className:"bot-settings-help",children:e("botSettings.emailGroups.cancellation.htmlHelp")})]})]})]}),s.jsxs("fieldset",{className:"form-fieldset bot-settings-section",children:[s.jsx("legend",{children:e("botSettings.sections.bookingFields.title")}),s.jsx("p",{className:"muted bot-settings-hint",children:e("botSettings.sections.bookingFields.hint")}),s.jsxs("div",{className:"bot-settings-booking-fields",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"bot-settings-subtitle",children:e("botSettings.bookingFields.alwaysRequiredTitle")}),s.jsx("ul",{className:"booking-base-fields-list",children:wo.map(U=>s.jsx("li",{className:"booking-base-field-pill",children:s.jsx("span",{children:U})},U))}),s.jsx("p",{className:"bot-settings-help",style:{marginTop:"0.6rem"},children:e("botSettings.bookingFields.alwaysRequiredHelp")})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"bot-settings-subtitle",children:e("botSettings.bookingFields.additionalTitle")}),i.customBookingFields.length===0&&s.jsxs("p",{className:"bot-settings-help",children:[e("botSettings.bookingFields.additionalEmpty")," ",s.jsx("code",{children:"notes"}),", ",s.jsx("code",{children:"company"}),", ",s.jsx("code",{children:"guests_count"}),"."]}),i.customBookingFields.length>0&&s.jsx("div",{className:"booking-custom-fields-chips",children:i.customBookingFields.map(U=>s.jsxs("div",{className:"booking-custom-field-chip",children:[s.jsx("span",{children:U}),s.jsx("button",{type:"button",className:"booking-custom-field-remove",onClick:()=>F(U),"aria-label":e("botSettings.bookingFields.removeFieldAria",{field:U}),children:""})]},U))}),s.jsxs("div",{className:"booking-custom-field-form",children:[s.jsx("input",{type:"text",value:o,onChange:U=>l(U.target.value),placeholder:e("botSettings.bookingFields.addPlaceholder")}),s.jsx("button",{type:"button",className:"btn-secondary booking-custom-field-add-btn",onClick:L,children:e("botSettings.bookingFields.addButton")})]}),s.jsx("p",{className:"bot-settings-help",children:e("botSettings.bookingFields.keysHelp")})]})]})]})]}),s.jsxs("div",{className:"form-actions-inline",style:{marginTop:"1rem"},children:[s.jsx("button",{className:"btn-primary",type:"submit",disabled:u,children:e(u?"botSettings.actions.saving":"botSettings.actions.save")}),s.jsx("span",{className:"bot-settings-help",children:e("botSettings.actions.note")})]})]})]}),s.jsxs("section",{className:"detail-side bot-settings-side",children:[s.jsx("h2",{children:e("botSettings.side.title")}),s.jsx("p",{className:"muted",style:{marginTop:"0.25rem"},children:e("botSettings.side.subtitle")}),s.jsxs("div",{className:"bot-settings-side-card",children:[s.jsx("h3",{children:e("botSettings.side.cards.calendar.title")}),s.jsx("p",{className:"muted",children:e("botSettings.side.cards.calendar.text")})]}),s.jsxs("div",{className:"bot-settings-side-card",children:[s.jsx("h3",{children:e("botSettings.side.cards.timeRules.title")}),s.jsx("p",{className:"muted",children:e("botSettings.side.cards.timeRules.text")})]}),s.jsxs("div",{className:"bot-settings-side-card",children:[s.jsx("h3",{children:e("botSettings.side.cards.emailTemplates.title")}),s.jsxs("p",{className:"muted",children:[e("botSettings.side.cards.emailTemplates.text")," ",s.jsx("code",{children:"{{client.name}}"})," ",e("botSettings.side.cards.emailTemplates.and")," ",s.jsx("code",{children:"{{booking.start}}"})," ",e("botSettings.side.cards.emailTemplates.replaced"),"."]})]}),s.jsxs("div",{className:"bot-settings-side-card",children:[s.jsx("h3",{children:e("botSettings.side.cards.bookingFields.title")}),s.jsx("p",{className:"muted",children:e("botSettings.side.cards.bookingFields.text")})]})]})]})]})},pY=/^[a-z0-9][a-z0-9-]*\.myshopify\.com$/;function mY(){if(ma.startsWith("http"))try{return new URL(ma).origin}catch{return window.location.origin}return window.location.origin}const hY=()=>{const{t:e}=Le(),{id:t}=St(),[n,a]=m.useState(""),[i,r]=m.useState(""),[o,l]=m.useState([]),[c,d]=m.useState(!0),[u,p]=m.useState(null),[h,f]=m.useState(null),[g,v]=m.useState(""),[y,b]=m.useState(!1),[x,w]=m.useState(null),[j,S]=m.useState(null),[k,T]=m.useState(!1),L=m.useMemo(()=>mY(),[]),F=async()=>{if(t){d(!0),p(null),f(null);try{const[C,A]=await Promise.all([wt(t),cl(t)]);a(C.name),r(C.slug),l(A.items||[])}catch(C){console.error(C),p((C==null?void 0:C.message)||e("shopifyPage.errors.loadFailed","Failed to load Shopify integration."))}finally{d(!1)}}};m.useEffect(()=>{F()},[t]);const O=o.find(C=>C.isActive)||o[0]||null,M=()=>{if(!t)return;p(null),f(null);const C=g.trim().toLowerCase();if(!pY.test(C)){p(e("shopifyPage.errors.invalidShop","Enter a valid .myshopify.com domain (e.g. mystore.myshopify.com)."));return}b(!0);const A=`${ma}/shopify/install?shop=${encodeURIComponent(C)}&botId=${encodeURIComponent(t)}`;window.location.href=A},P=async C=>{if(t){p(null),f(null);try{await Af(C.shopDomain,t),f(e("shopifyPage.success.linked","Shop linked to this assistant.")),F()}catch(A){console.error(A),p((A==null?void 0:A.message)||e("shopifyPage.errors.linkFailed","Failed to link shop."))}}},D=async C=>{if(t&&window.confirm(e("shopifyPage.confirm.unlink","Unlink this Shopify shop from the assistant? The app will stay installed."))){p(null),f(null);try{await Af(C.shopDomain,null),f(e("shopifyPage.success.unlinked","Shop unlinked from this assistant.")),F()}catch(A){console.error(A),p((A==null?void 0:A.message)||e("shopifyPage.errors.unlinkFailed","Failed to unlink shop."))}}},E=async C=>{p(null),f(null),w(C.shopDomain);try{const A=await Wv(C.shopDomain);f(e("shopifyPage.success.syncComplete","Product sync completed.")),console.log("Shopify sync result",A),F()}catch(A){console.error(A),p((A==null?void 0:A.message)||e("shopifyPage.errors.syncFailed","Product sync failed."))}finally{w(null)}},N=async C=>{T(!0),p(null);try{const A=await tR(C.shopDomain);S(A)}catch(A){console.error(A),S(null),p((A==null?void 0:A.message)||e("shopifyPage.errors.widgetFailed","Failed to fetch widget configuration."))}finally{T(!1)}},R=O?`${L}/embed.js?shop=${encodeURIComponent(O.shopDomain)}`:null;return t?s.jsxs("div",{className:"shopify-page",children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:e("shopifyPage.title","Shopify")}),s.jsx("p",{className:"muted",children:e("shopifyPage.subtitle","Connect a Shopify store so this assistant can search products, build carts, and answer order questions.")})]}),s.jsx(de,{to:`/app/bots/${t}`,className:"btn-secondary",children:e("shopifyPage.backToBot","Back to bot")})]}),u&&s.jsx("div",{className:"form-error",children:u}),h&&s.jsx("div",{className:"form-success",children:h}),c?s.jsx("div",{className:"detail-main",children:s.jsx("p",{children:e("shopifyPage.loading","Loading Shopify integration...")})}):s.jsxs("div",{className:"shopify-grid",children:[s.jsxs("section",{className:"detail-main shopify-card",children:[s.jsxs("div",{className:"shopify-card-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:e("shopifyPage.connect.title","Connect your store")}),s.jsx("p",{className:"muted",children:e("shopifyPage.connect.subtitle","Install the app on your Shopify store and link it to this assistant.")})]}),O&&s.jsx("span",{className:`status-badge ${O.isActive?"status-badge-ok":"status-badge-warn"}`,children:O.isActive?e("shopifyPage.status.active","Active"):e("shopifyPage.status.inactive","Inactive")})]}),s.jsxs("div",{className:"shopify-install-form",children:[s.jsxs("label",{className:"form-field shopify-inline-field",children:[s.jsx("span",{children:e("shopifyPage.connect.shopDomain","Shop domain")}),s.jsx("input",{type:"text",value:g,onChange:C=>v(C.target.value),placeholder:e("shopifyPage.connect.shopPlaceholder","mystore.myshopify.com")})]}),s.jsx("button",{type:"button",className:"btn-primary",disabled:y,onClick:M,children:y?e("shopifyPage.actions.redirecting","Redirecting..."):e("shopifyPage.actions.install","Install / Update app")})]}),O&&s.jsxs("div",{className:"shopify-summary",children:[s.jsxs("div",{className:"shopify-summary-row",children:[s.jsx("span",{className:"shopify-summary-label",children:e("shopifyPage.summary.connectedShop","Connected shop")}),s.jsx("span",{children:O.shopDomain})]}),s.jsxs("div",{className:"shopify-summary-row",children:[s.jsx("span",{className:"shopify-summary-label",children:e("shopifyPage.summary.scopes","Scopes")}),s.jsx("span",{className:"shopify-code",children:O.scopes||"read_products, read_orders, read_fulfillments, write_script_tags"})]}),s.jsxs("div",{className:"shopify-summary-row",children:[s.jsx("span",{className:"shopify-summary-label",children:e("shopifyPage.summary.catalog","Catalog cache")}),s.jsxs("span",{children:[e("shopifyPage.summary.products","Products"),":"," ",O.productCount," "," ",e("shopifyPage.summary.variants","Variants"),":"," ",O.variantCount]})]}),s.jsxs("div",{className:"shopify-summary-row",children:[s.jsx("span",{className:"shopify-summary-label",children:e("shopifyPage.summary.lastSync","Last sync")}),s.jsx("span",{children:O.lastProductsSyncAt?new Date(O.lastProductsSyncAt).toLocaleString():e("shopifyPage.summary.neverSynced","Never")})]}),O.shopCurrency&&s.jsxs("div",{className:"shopify-summary-row",children:[s.jsx("span",{className:"shopify-summary-label",children:e("shopifyPage.summary.currency","Currency")}),s.jsx("span",{children:O.shopCurrency})]})]}),O&&s.jsxs("div",{className:"shopify-actions",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>E(O),disabled:x===O.shopDomain,children:x===O.shopDomain?e("shopifyPage.actions.syncing","Syncing..."):e("shopifyPage.actions.sync","Sync products")}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>P(O),children:e("shopifyPage.actions.relink","Relink to this bot")}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>D(O),children:e("shopifyPage.actions.unlink","Unlink")})]})]}),s.jsxs("section",{className:"detail-side shopify-card shopify-side",children:[s.jsx("h2",{children:e("shopifyPage.widget.title","Widget & checkout")}),s.jsx("p",{className:"muted",children:e("shopifyPage.widget.subtitle","The widget is embedded automatically using a Shopify script tag.")}),s.jsxs("div",{className:"shopify-widget-box",children:[s.jsxs("div",{className:"shopify-widget-row",children:[s.jsx("span",{className:"shopify-summary-label",children:e("shopifyPage.widget.scriptUrl","Script URL")}),s.jsx("span",{className:"shopify-code",children:R||e("shopifyPage.widget.notReady","Connect a shop first.")})]}),s.jsxs("div",{className:"shopify-widget-row",children:[s.jsx("span",{className:"shopify-summary-label",children:e("shopifyPage.widget.demo","Widget demo")}),s.jsx("span",{children:i?s.jsx("a",{className:"btn-link",href:`/widget/${encodeURIComponent(i)}`,target:"_blank",rel:"noreferrer",children:e("shopifyPage.actions.openDemo","Open widget demo")}):e("shopifyPage.widget.notReady","Connect a shop first.")})]})]}),O&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:"btn-secondary shopify-widget-button",onClick:()=>N(O),disabled:k,children:k?e("shopifyPage.actions.checking","Checking..."):e("shopifyPage.actions.checkWidget","Check widget config")}),j&&s.jsxs("div",{className:"shopify-widget-result",children:[s.jsx("span",{className:"shopify-summary-label",children:e("shopifyPage.widget.connectedTo","Connected to")}),s.jsx("strong",{children:j.botName||n}),s.jsxs("span",{className:"muted small",children:[e("shopifyPage.widget.botSlug","Slug"),": ",j.botSlug]})]})]})]}),s.jsxs("section",{className:"detail-main shopify-card",children:[s.jsx("h2",{children:e("shopifyPage.capabilities.title","Capabilities enabled")}),s.jsxs("ul",{className:"shopify-capabilities",children:[s.jsx("li",{children:e("shopifyPage.capabilities.search","Search and answer product questions using cached catalog data.")}),s.jsx("li",{children:e("shopifyPage.capabilities.cart","Generate add-to-cart and cart URLs using the Online Store cart endpoints.")}),s.jsx("li",{children:e("shopifyPage.capabilities.orders","Lookup order status via Admin API with read_orders/read_fulfillments.")}),s.jsx("li",{children:e("shopifyPage.capabilities.webhooks","Webhooks for uninstall, catalog updates, and data protection.")})]}),s.jsxs("div",{className:"shopify-note",children:[s.jsx("strong",{children:e("shopifyPage.capabilities.noteTitle","Security")}),s.jsx("p",{className:"muted",children:e("shopifyPage.capabilities.noteBody","This is a public app using Admin API scopes only. Storefront tokens are not used.")})]})]}),s.jsxs("section",{className:"detail-main shopify-card",children:[s.jsx("h2",{children:e("shopifyPage.webhooks.title","Registered webhooks")}),s.jsxs("ul",{className:"shopify-webhook-list",children:[s.jsx("li",{children:"app/uninstalled"}),s.jsx("li",{children:"products/update"}),s.jsx("li",{children:"products/delete"}),s.jsxs("li",{children:["inventory_levels/update ",e("shopifyPage.webhooks.inventoryNote","(if read_inventory)")]}),s.jsx("li",{children:"customers/data_request"}),s.jsx("li",{children:"customers/redact"}),s.jsx("li",{children:"shop/redact"})]})]})]})]}):s.jsx("div",{className:"page-container",children:s.jsx("p",{children:e("shopifyPage.missingId","Missing bot id.")})})},Sh=(e,t,n)=>new Intl.NumberFormat(n,{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2}).format(e/100);function US(e,t){const[n,a]=e.split("-").map(Number),i=new Date(Date.UTC(n,a-1+t,1));return Za(i)}const fY=()=>{const{t:e,i18n:t}=Le(),n=m.useMemo(()=>{var x;return(x=t.resolvedLanguage)!=null&&x.startsWith("it")?"it-IT":"en-GB"},[t.resolvedLanguage]),[a,i]=m.useState(()=>Za(new Date)),[r,o]=m.useState(null),[l,c]=m.useState(null),[d,u]=m.useState(!0),[p,h]=m.useState(!1),[f,g]=m.useState(null),v=m.useMemo(()=>{var w,j,S,k;return((j=(w=r==null?void 0:r.codes)==null?void 0:w.find(T=>T.isActive))==null?void 0:j.code)||((k=(S=r==null?void 0:r.codes)==null?void 0:S[0])==null?void 0:k.code)||null},[r]),y=m.useMemo(()=>v?`${window.location.origin}/?ref=${encodeURIComponent(v)}`:null,[v]);m.useEffect(()=>{let x=!0;return(async()=>{u(!0),g(null);try{const[w,j]=await Promise.all([dR(),Nw(a)]);if(!x)return;o(w),c(j)}catch(w){if(!x)return;g((w==null?void 0:w.message)||"Failed to load referrer data.")}finally{if(!x)return;u(!1)}})(),()=>{x=!1}},[]),m.useEffect(()=>{if(!r)return;let x=!0;return(async()=>{h(!0),g(null);try{const w=await Nw(a);if(!x)return;c(w)}catch(w){if(!x)return;g((w==null?void 0:w.message)||"Failed to load stats.")}finally{if(!x)return;h(!1)}})(),()=>{x=!1}},[a,r]);const b=async()=>{y&&await navigator.clipboard.writeText(y)};return s.jsxs("div",{className:"page-root",children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:e("referrer.title","Referrer")}),s.jsx("p",{className:"muted",children:e("referrer.subtitle","Your codes, conversions and payouts.")})]}),s.jsxs("div",{className:"page-header-actions",children:[s.jsxs("button",{className:"btn-secondary",type:"button",onClick:()=>i(US(a,-1)),children:[" ",e("common.prev","Prev")]}),s.jsx("div",{className:"month-pill",children:a}),s.jsxs("button",{className:"btn-secondary",type:"button",onClick:()=>i(US(a,1)),children:[e("common.next","Next")," "]})]})]}),d&&s.jsx("div",{className:"card",children:s.jsx("p",{children:e("common.loading","Loading...")})}),!d&&f&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:f})}),!d&&!f&&r&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"card-title",children:e("referrer.yourCodes","Your referral codes")}),r.codes.length===0?s.jsx("p",{className:"muted",children:e("referrer.noCodes","No codes yet. Ask an admin to create one.")}):s.jsx("div",{className:"ref-codes",children:r.codes.map(x=>s.jsxs("span",{className:`badge ${x.isActive?"badge-ok":""}`,children:[x.code," ",x.isActive?" active":""]},x.code))}),y&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"ref-link-row",children:[s.jsx("input",{className:"ref-link-input",type:"text",readOnly:!0,value:y}),s.jsx("button",{className:"btn-secondary",type:"button",onClick:b,children:e("common.copy","Copy")})]}),s.jsx("p",{className:"muted",style:{marginTop:"0.5rem"},children:e("referrer.linkHint","Share this link. A cookie is set on click and applied at checkout.")})]})]}),s.jsxs("div",{className:"card",style:{marginTop:"1rem"},children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:e("referrer.statsTitle","Month stats")}),s.jsx("p",{className:"card-subtitle",children:p?e("common.loading","Loading..."):e("referrer.statsSub","UTC month summary.")})]}),l&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"ref-stats-grid",children:[s.jsxs("div",{className:"dashboard-kpi-card",children:[s.jsx("div",{className:"dashboard-kpi-label",children:e("referrer.activeClients","Active clients")}),s.jsx("div",{className:"dashboard-kpi-value",children:l.activeAttributions})]}),s.jsxs("div",{className:"dashboard-kpi-card",children:[s.jsx("div",{className:"dashboard-kpi-label",children:e("referrer.conversions","Conversions")}),s.jsx("div",{className:"dashboard-kpi-value",children:l.conversionsThisMonth})]}),s.jsxs("div",{className:"dashboard-kpi-card",children:[s.jsx("div",{className:"dashboard-kpi-label",children:e("referrer.referredUsers","Referred signups")}),s.jsx("div",{className:"dashboard-kpi-value",children:l.referredUsersTotal})]})]}),s.jsx("hr",{className:"section-separator"}),s.jsx("h3",{style:{margin:0},children:e("referrer.totalsByCurrency","Totals by currency")}),l.totalsByCurrency.length===0?s.jsx("p",{className:"muted",style:{marginTop:"0.5rem"},children:e("referrer.noTotals","No commissions recorded for this month yet.")}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:e("common.currency","Currency")}),s.jsx("th",{children:e("referrer.revenue","Revenue")}),s.jsx("th",{children:e("referrer.commission","Commission")})]})}),s.jsx("tbody",{children:l.totalsByCurrency.map(x=>s.jsxs("tr",{children:[s.jsx("td",{children:x.currency.toUpperCase()}),s.jsx("td",{children:Sh(x.revenueCents,x.currency,n)}),s.jsx("td",{children:Sh(x.commissionCents,x.currency,n)})]},x.currency))})]})}),s.jsx("h3",{style:{marginTop:"1.2rem"},children:e("referrer.payoutPeriods","Payout periods")}),l.payoutPeriods.length===0?s.jsx("p",{className:"muted",children:e("referrer.noPayouts","No payout periods for this month.")}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:e("common.currency","Currency")}),s.jsx("th",{children:e("common.amount","Amount")}),s.jsx("th",{children:e("common.status","Status")}),s.jsx("th",{children:e("common.paidAt","Paid at")})]})}),s.jsx("tbody",{children:l.payoutPeriods.map((x,w)=>s.jsxs("tr",{children:[s.jsx("td",{children:x.currency.toUpperCase()}),s.jsx("td",{children:Sh(x.amountCents,x.currency,n)}),s.jsx("td",{children:x.status}),s.jsx("td",{children:x.paidAt?new Date(x.paidAt).toLocaleString(n):""})]},`${x.currency}-${w}`))})]})}),s.jsx("h3",{style:{marginTop:"1.2rem"},children:e("referrer.referredUsersList","Referred users")}),l.referredUsers.length===0?s.jsx("p",{className:"muted",children:e("referrer.noReferredUsers","No referred users yet.")}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:e("common.email","Email")}),s.jsx("th",{children:e("referrer.referredAt","Registered at")}),s.jsx("th",{children:e("referrer.referralCode","Referral code")})]})}),s.jsx("tbody",{children:l.referredUsers.map(x=>s.jsxs("tr",{children:[s.jsx("td",{children:x.email}),s.jsx("td",{children:new Date(x.createdAt).toLocaleString(n)}),s.jsx("td",{children:x.referralCode??""})]},x.id))})]})})]})]})]})]})},jo=(e,t,n)=>new Intl.NumberFormat(n,{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2}).format(e/100);function WS(e,t){const[n,a]=e.split("-").map(Number),i=new Date(Date.UTC(n,a-1+t,1));return Za(i)}function gY(e){const t=e.trim();return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}async function vY(e){var t;try{if((t=navigator.clipboard)!=null&&t.writeText)return await navigator.clipboard.writeText(e),!0}catch{}try{const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.left="-9999px",n.style.top="0",document.body.appendChild(n),n.focus(),n.select();const a=document.execCommand("copy");return document.body.removeChild(n),a}catch{return!1}}const bY=()=>{const e=m.useMemo(()=>"en-GB",[]),[t,n]=m.useState(()=>Za(new Date)),[a,i]=m.useState(null),[r,o]=m.useState(!0),[l,c]=m.useState(null),[d,u]=m.useState(!1),[p,h]=m.useState(""),[f,g]=m.useState(""),[v,y]=m.useState(!0),[b,x]=m.useState(!1),[w,j]=m.useState(null),[S,k]=m.useState(null),T=m.useRef(null),L=m.useCallback(async(M,P)=>{o(!0),c(null);try{const D=await pR(M);if(P!=null&&P.aborted)return;i(D)}catch(D){if(P!=null&&P.aborted)return;c((D==null?void 0:D.message)||"Failed to load admin referral overview.")}finally{if(P!=null&&P.aborted)return;o(!1)}},[]);m.useEffect(()=>{const M=new AbortController;return L(t,M.signal),()=>M.abort()},[t,L]),m.useEffect(()=>{if(!d)return;const M=window.setTimeout(()=>{var D;(D=T.current)==null||D.focus()},0),P=D=>{D.key==="Escape"&&u(!1)};return window.addEventListener("keydown",P),()=>{window.clearTimeout(M),window.removeEventListener("keydown",P)}},[d]);const F=()=>{h(""),g(""),y(!0),j(null),k(null),u(!0)},O=async M=>{M.preventDefault();const P=p.trim().toLowerCase();if(!gY(P)){j("Please enter a valid email address.");return}let D;if(f.trim()){const E=Number(f.trim());if(!Number.isFinite(E)||!Number.isInteger(E)){j("Commission BPS must be a whole number (e.g. 1000 = 10%).");return}if(E<1||E>5e3){j("Commission BPS must be between 1 and 5000.");return}D=E}x(!0),j(null),k(null);try{const N={...await uR({email:P,commissionBps:D,createCode:v}),email:P};k(N),await L(t)}catch(E){j((E==null?void 0:E.message)||"Failed to create/activate partner.")}finally{x(!1)}};return s.jsxs("div",{className:"page-root",children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Referrals admin"}),s.jsx("p",{className:"muted",children:"Overview + partners drill-down."})]}),s.jsxs("div",{className:"page-header-actions",children:[s.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>n(WS(t,-1)),children:" Prev"}),s.jsx("div",{className:"month-pill",children:t}),s.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>n(WS(t,1)),children:"Next "}),s.jsx("button",{className:"btn-primary",type:"button",onClick:F,children:"+ Add partner"})]})]}),r&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"Loading..."})}),!r&&l&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:l})}),!r&&!l&&a&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"card-header",children:[s.jsxs("h2",{children:["Totals (",a.monthKey,")"]}),s.jsx("p",{className:"card-subtitle",children:"Revenue/commission + due payouts for the selected month."})]}),s.jsx("h3",{style:{marginTop:"0.7rem"},children:"Month"}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Currency"}),s.jsx("th",{children:"Revenue"}),s.jsx("th",{children:"Commission"}),s.jsx("th",{children:"Due (OPEN)"}),s.jsx("th",{children:"Paid"})]})}),s.jsx("tbody",{children:a.totals.monthByCurrency.map(M=>{var E,N;const P=((E=a.totals.dueThisMonth.openByCurrency.find(R=>R.currency===M.currency))==null?void 0:E.amountCents)??0,D=((N=a.totals.dueThisMonth.paidByCurrency.find(R=>R.currency===M.currency))==null?void 0:N.amountCents)??0;return s.jsxs("tr",{children:[s.jsx("td",{children:M.currency.toUpperCase()}),s.jsx("td",{children:jo(M.revenueCents,M.currency,e)}),s.jsx("td",{children:jo(M.commissionCents,M.currency,e)}),s.jsx("td",{children:jo(P,M.currency,e)}),s.jsx("td",{children:jo(D,M.currency,e)})]},M.currency)})})]})})]}),s.jsxs("div",{className:"card",style:{marginTop:"1.1rem"},children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"Partners"}),s.jsx("p",{className:"card-subtitle",children:"Click a partner to drill down (attributions, commissions, payouts)."})]}),a.partners.length===0?s.jsx("p",{className:"card-empty",children:"No partners found."}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table payments-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Clients"}),s.jsx("th",{children:"Active"}),s.jsx("th",{children:"Last conversion"}),s.jsx("th",{children:"Month commission"}),s.jsx("th",{className:"payments-actions-cell",children:"Action"})]})}),s.jsx("tbody",{children:a.partners.map(M=>{var E;const P=M.month.totalsByCurrency.reduce((N,R)=>N+R.commissionCents,0),D=((E=M.month.totalsByCurrency[0])==null?void 0:E.currency)||"eur";return s.jsxs("tr",{children:[s.jsx("td",{children:M.email}),s.jsx("td",{children:M.status}),s.jsx("td",{children:M.clientsTotal}),s.jsx("td",{children:M.clientsActive}),s.jsx("td",{children:M.lastConversionAt?new Date(M.lastConversionAt).toLocaleString(e):""}),s.jsx("td",{children:jo(P,D,e)}),s.jsx("td",{className:"payments-actions-cell",children:s.jsx(de,{className:"btn-link-small",to:`/app/admin/referrals/partners/${M.partnerId}?month=${encodeURIComponent(t)}`,children:"View"})})]},M.partnerId)})})]})})]})]}),d&&s.jsx("div",{role:"dialog","aria-modal":"true","aria-label":"Add referral partner",onMouseDown:M=>{M.target===M.currentTarget&&u(!1)},style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},children:s.jsxs("div",{className:"card",style:{width:"min(720px, 100%)",maxHeight:"85vh",overflow:"auto",background:"#0f172ae6",borderRadius:"0.5rem",padding:"1rem"},children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{style:{margin:0},children:"Add / Activate partner"}),s.jsxs("p",{className:"card-subtitle",style:{marginTop:"0.35rem"},children:["The user must already be registered. This will set their role to ",s.jsx("b",{children:"REFERRER"})," and create or update their partner record."]})]}),s.jsx("form",{onSubmit:O,children:s.jsxs("div",{style:{display:"grid",gap:"0.85rem"},children:[s.jsxs("div",{children:[s.jsx("label",{className:"label",htmlFor:"partner-email",children:"User email"}),s.jsx("input",{id:"partner-email",ref:T,className:"input",type:"email",placeholder:"user@example.com",value:p,onChange:M=>h(M.target.value),disabled:b,autoComplete:"email",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"label",htmlFor:"partner-bps",children:["Commission (BPS) ",s.jsx("span",{className:"muted",children:"(optional, 15000)"})]}),s.jsx("input",{id:"partner-bps",className:"input",type:"number",inputMode:"numeric",min:1,max:5e3,step:1,placeholder:"Leave empty to use default",value:f,onChange:M=>g(M.target.value),disabled:b}),s.jsxs("p",{className:"muted",style:{marginTop:"0.35rem"},children:["Example: ",s.jsx("b",{children:"1000"})," = 10% commission."]})]}),s.jsxs("label",{style:{display:"flex",gap:"0.55rem",alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:v,onChange:M=>y(M.target.checked),disabled:b}),s.jsx("span",{children:"Create a referral code (if they don't have one)"})]}),w&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{style:{margin:0},children:w})}),S&&s.jsxs("div",{className:"card",style:{border:"1px solid rgba(0,0,0,0.12)"},children:[s.jsxs("p",{style:{marginTop:0,marginBottom:"0.5rem"},children:[" Partner activated for ",s.jsx("b",{children:S.email})]}),s.jsxs("div",{style:{display:"grid",gap:"0.35rem"},children:[s.jsxs("div",{children:[s.jsx("span",{className:"muted",children:"Commission:"})," ",s.jsxs("b",{children:[S.commissionBps," bps"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"muted",children:"Partner ID:"})," ",s.jsx("code",{children:S.partnerId})]}),s.jsxs("div",{children:[s.jsx("span",{className:"muted",children:"Created code:"})," ",s.jsx("b",{children:S.createdCode?S.createdCode:" (already had one)"})," ",S.createdCode&&s.jsx("button",{className:"btn-secondary",type:"button",style:{marginLeft:"0.6rem"},onClick:async()=>{await vY(S.createdCode||"")||alert("Could not copy to clipboard.")},children:"Copy"})]})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.6rem",marginTop:"0.25rem"},children:[s.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>u(!1),disabled:b,children:"Close"}),s.jsx("button",{className:"btn-primary",type:"submit",disabled:b,children:b?"Saving...":"Activate partner"})]})]})})]})})]})},qi=(e,t,n)=>new Intl.NumberFormat(n,{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2}).format(e/100);function yY(){const{search:e}=lt();return m.useMemo(()=>new URLSearchParams(e),[e])}const xY=()=>{const e=m.useMemo(()=>"en-GB",[]),{id:t}=St(),a=yY().get("month")||Za(new Date),[i,r]=m.useState(a),[o,l]=m.useState(null),[c,d]=m.useState(!0),[u,p]=m.useState(null),[h,f]=m.useState(!1),g=async()=>{if(t){d(!0),p(null);try{const b=await mR({partnerId:t,month:i,take:50,skip:0});l(b)}catch(b){p((b==null?void 0:b.message)||"Failed to load partner detail.")}finally{d(!1)}}};m.useEffect(()=>{g()},[t,i]);const v=m.useMemo(()=>o?o.month.payoutPeriods.some(b=>b.status==="OPEN"):!1,[o]),y=async()=>{if(t){f(!0),p(null);try{await hR({partnerId:t,monthKey:i}),await g()}catch(b){p((b==null?void 0:b.message)||"Failed to mark paid.")}finally{f(!1)}}};return s.jsxs("div",{className:"page-root",children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Partner detail"}),s.jsx("p",{className:"muted",children:(o==null?void 0:o.partner.email)||""})]}),s.jsxs("div",{className:"page-header-actions",children:[s.jsx(de,{className:"btn-secondary",to:"/app/admin/referrals",children:" Back"}),s.jsx("div",{className:"month-pill",children:i})]})]}),u&&s.jsx("div",{className:"form-error",children:u}),c&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"Loading..."})}),!c&&o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"Summary"}),s.jsx("p",{className:"card-subtitle",children:"Clients + month/lifetime totals."})]}),s.jsxs("div",{className:"ref-detail-summary",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-kpi-label",children:"Clients (total)"}),s.jsx("div",{className:"dashboard-kpi-value",children:o.clients.total})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-kpi-label",children:"Clients (active)"}),s.jsx("div",{className:"dashboard-kpi-value",children:o.clients.active})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-kpi-label",children:"Commission BPS"}),s.jsx("div",{className:"dashboard-kpi-value",children:o.partner.commissionBps})]})]}),s.jsx("hr",{className:"section-separator"}),s.jsxs("h3",{style:{margin:0},children:["Month totals (",o.month.monthKey,")"]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Currency"}),s.jsx("th",{children:"Revenue"}),s.jsx("th",{children:"Commission"})]})}),s.jsx("tbody",{children:o.month.totalsByCurrency.map(b=>s.jsxs("tr",{children:[s.jsx("td",{children:b.currency.toUpperCase()}),s.jsx("td",{children:qi(b.revenueCents,b.currency,e)}),s.jsx("td",{children:qi(b.commissionCents,b.currency,e)})]},b.currency))})]})}),s.jsxs("h3",{style:{marginTop:"1.2rem"},children:["Payout periods (",o.month.monthKey,")"]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Currency"}),s.jsx("th",{children:"Amount"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Paid at"})]})}),s.jsx("tbody",{children:o.month.payoutPeriods.map((b,x)=>s.jsxs("tr",{children:[s.jsx("td",{children:b.currency.toUpperCase()}),s.jsx("td",{children:qi(b.amountCents,b.currency,e)}),s.jsx("td",{children:b.status}),s.jsx("td",{children:b.paidAt?new Date(b.paidAt).toLocaleString(e):""})]},`${b.currency}-${x}`))})]})}),s.jsxs("div",{style:{marginTop:"0.9rem",display:"flex",gap:"0.6rem",flexWrap:"wrap"},children:[s.jsx("button",{className:"btn-primary",type:"button",disabled:!v||h,onClick:y,children:h?"Marking...":"Mark OPEN payouts as PAID"}),s.jsx("button",{className:"btn-secondary",type:"button",onClick:()=>r(Za(new Date)),children:"Jump to current month"})]})]}),s.jsxs("div",{className:"card",style:{marginTop:"1.1rem"},children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"Recent attributions"}),s.jsx("p",{className:"card-subtitle",children:"Latest client attributions (paginated server-side in the endpoint)."})]}),o.recent.attributions.length===0?s.jsx("p",{className:"card-empty",children:"No attributions found."}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Started"}),s.jsx("th",{children:"Referral code"}),s.jsx("th",{children:"User"}),s.jsx("th",{children:"Bot"}),s.jsx("th",{children:"Stripe sub"})]})}),s.jsx("tbody",{children:o.recent.attributions.map(b=>s.jsxs("tr",{children:[s.jsx("td",{children:new Date(b.startedAt).toLocaleString(e)}),s.jsx("td",{children:b.referralCode}),s.jsx("td",{children:b.referredUser.email}),s.jsx("td",{children:b.bot.name}),s.jsx("td",{children:b.stripeSubscriptionId??""})]},b.id))})]})})]}),s.jsxs("div",{className:"card",style:{marginTop:"1.1rem"},children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"Recent commissions"}),s.jsx("p",{className:"card-subtitle",children:"Ledger items for this partner."})]}),o.recent.commissions.length===0?s.jsx("p",{className:"card-empty",children:"No commissions found."}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Created"}),s.jsx("th",{children:"Month"}),s.jsx("th",{children:"Currency"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Revenue"}),s.jsx("th",{children:"Commission"}),s.jsx("th",{children:"Invoice"})]})}),s.jsx("tbody",{children:o.recent.commissions.map(b=>s.jsxs("tr",{children:[s.jsx("td",{children:new Date(b.createdAt).toLocaleString(e)}),s.jsx("td",{children:b.monthKey}),s.jsx("td",{children:b.currency.toUpperCase()}),s.jsx("td",{children:b.status}),s.jsx("td",{children:qi(b.revenueCents,b.currency,e)}),s.jsx("td",{children:qi(b.commissionCents,b.currency,e)}),s.jsx("td",{children:b.stripeInvoiceId??""})]},b.id))})]})})]}),s.jsxs("div",{className:"card",style:{marginTop:"1.1rem"},children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"Referred users"}),s.jsx("p",{className:"card-subtitle",children:"Users who registered with this partners link (latest first)."})]}),o.referredUsers.items.length===0?s.jsx("p",{className:"card-empty",children:"No referred users found."}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Registered"}),s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Referral code"})]})}),s.jsx("tbody",{children:o.referredUsers.items.map(b=>s.jsxs("tr",{children:[s.jsx("td",{children:new Date(b.createdAt).toLocaleString(e)}),s.jsx("td",{children:b.email}),s.jsx("td",{children:b.referralCode??""})]},b.id))})]})})]}),s.jsxs("div",{className:"card",style:{marginTop:"1.1rem"},children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"Payout history"}),s.jsx("p",{className:"card-subtitle",children:"Last 24 periods."})]}),o.payoutHistory.length===0?s.jsx("p",{className:"card-empty",children:"No payout history found."}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Month"}),s.jsx("th",{children:"Currency"}),s.jsx("th",{children:"Amount"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Paid at"})]})}),s.jsx("tbody",{children:o.payoutHistory.map((b,x)=>s.jsxs("tr",{children:[s.jsx("td",{children:b.monthKey}),s.jsx("td",{children:b.currency.toUpperCase()}),s.jsx("td",{children:qi(b.amountCents,b.currency,e)}),s.jsx("td",{children:b.status}),s.jsx("td",{children:b.paidAt?new Date(b.paidAt).toLocaleString(e):""})]},`${b.monthKey}-${b.currency}-${x}`))})]})})]})]})]})};async function wY(e){const t=new URLSearchParams;e.q&&e.q.trim()&&t.set("q",e.q.trim()),e.role&&t.set("role",e.role),typeof e.page=="number"&&t.set("page",String(e.page)),t.set("pageSize",String(e.pageSize));const n=t.toString()?`?${t.toString()}`:"";return le(`/admin/users${n}`)}async function qS(e,t){return le(`/admin/users/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}const HS=20,jY=[{label:"All roles",value:""},{label:"Client",value:"CLIENT"},{label:"Team member",value:"TEAM_MEMBER"},{label:"Referrer",value:"REFERRER"},{label:"Admin",value:"ADMIN"}],SY=()=>{const[e,t]=m.useState([]),[n,a]=m.useState(!0),[i,r]=m.useState(null),[o,l]=m.useState(1),[c,d]=m.useState(0),[u,p]=m.useState(""),[h,f]=m.useState(""),[g,v]=m.useState(""),[y,b]=m.useState(null),[x,w]=m.useState(null),j=m.useMemo(()=>c>0?Math.ceil(c/HS):1,[c]),S=m.useCallback(async E=>{const N=(E==null?void 0:E.pageOverride)??o;a(!0),r(null);try{const R=await wY({q:h||void 0,role:g||void 0,page:N,pageSize:HS});t(R.items),d(R.total),l(R.page)}catch(R){console.error("Failed to load users:",R),r((R==null?void 0:R.message)||"Failed to load users")}finally{a(!1)}},[o,h,g]);m.useEffect(()=>{S()},[h,g,o,S]);const k=E=>{E.preventDefault(),l(1),f(u.trim())},T=()=>{p(""),f(""),v(""),l(1)},L=async(E,N)=>{w(null),b(E);try{await qS(E,{role:N}),await S()}catch(R){console.error("Failed to update user:",R),w((R==null?void 0:R.message)||"Failed to update user")}finally{b(null)}},F=async E=>{w(null),b(E.id);try{await qS(E.id,{emailVerified:!E.emailVerified}),await S()}catch(N){console.error("Failed to update user:",N),w((N==null?void 0:N.message)||"Failed to update user")}finally{b(null)}},O=E=>{if(!E)return"";const N=new Date(E);return Number.isNaN(N.getTime())?"":N.toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})},M=E=>E.toLocaleString(void 0),P=o<=1||n,D=o>=j||n;return s.jsxs("div",{className:"page-root",children:[s.jsxs("header",{className:"page-header",children:[s.jsx("h1",{children:"Users admin"}),s.jsx("p",{className:"page-subtitle",children:"Inspect and manage users, roles, referral status and usage. Read-only aggregates; destructive actions stay in other tools."})]}),s.jsxs("section",{"aria-label":"User filters",className:"card",children:[s.jsxs("form",{className:"admin-filters-bar",onSubmit:k,children:[s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"user-search",children:"Search"}),s.jsx("input",{id:"user-search",className:"input",type:"search",placeholder:"Search by email or name",value:u,onChange:E=>p(E.target.value)})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"user-role-filter",children:"Role"}),s.jsx("select",{id:"user-role-filter",className:"select",value:g,onChange:E=>{const N=E.target.value;v(N),l(1)},children:jY.map(E=>s.jsx("option",{value:E.value,children:E.label},E.label))})]}),s.jsxs("div",{className:"admin-filter-actions",children:[s.jsx("button",{type:"submit",className:"btn-secondary",disabled:n,children:"Apply"}),s.jsx("button",{type:"button",className:"btn-link-small",onClick:T,disabled:n&&!h&&!g,children:"Clear"})]})]}),s.jsxs("div",{className:"admin-filters-meta",children:[s.jsxs("span",{children:["Page ",o," of ",j,"  ",M(c)," users"]}),s.jsx("span",{className:"admin-filters-note",children:"Usage numbers are from the last 30 days."})]})]}),n&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"Loading users"})}),!n&&i&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:i})}),x&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:x})}),!n&&!i&&e.length===0&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"No users match your filters."})}),!n&&!i&&e.length>0&&s.jsxs("section",{"aria-label":"Users list",className:"card",children:[s.jsx("div",{className:"admin-table-wrapper",children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"User"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Bots"}),s.jsx("th",{children:"Referrals"}),s.jsx("th",{children:"Last usage"}),s.jsx("th",{"aria-label":"Row actions"})]})}),s.jsx("tbody",{children:e.map(E=>{const N=y===E.id;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"admin-user-main",children:[s.jsx("div",{className:"admin-user-email",children:E.email}),s.jsxs("div",{className:"admin-user-meta",children:[E.name&&s.jsx("span",{children:E.name}),s.jsxs("span",{children:["Joined ",O(E.createdAt)]})]})]})}),s.jsx("td",{children:s.jsxs("select",{className:"select select-sm",value:E.role,disabled:N,onChange:R=>L(E.id,R.target.value),children:[s.jsx("option",{value:"CLIENT",children:"Client"}),s.jsx("option",{value:"ADMIN",children:"Admin"})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[s.jsx("span",{className:E.emailVerified?"status-pill status-pill-success":"status-pill status-pill-muted",children:E.emailVerified?"Email verified":"Email not verified"}),s.jsx("span",{className:E.mfaEnabled?"status-pill status-pill-success":"status-pill status-pill-muted",children:E.mfaEnabled?"MFA enabled":"MFA disabled"})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-number-cell",children:[s.jsx("span",{className:"admin-number-main",children:M(E.botsCount)}),s.jsx("span",{className:"admin-number-sub",children:"bots"})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[s.jsx("span",{className:E.isReferralPartner?"status-pill status-pill-info":"status-pill status-pill-muted",children:E.isReferralPartner?"Partner":"Not partner"}),s.jsxs("span",{className:"admin-number-sub",children:[M(E.referralLeadsCount)," ",E.referralLeadsCount===1?"lead":"leads"]})]})}),s.jsx("td",{children:O(E.lastUsageAt)}),s.jsx("td",{className:"admin-actions-cell",children:s.jsx("button",{type:"button",className:"btn-link-small",disabled:N,onClick:()=>F(E),children:E.emailVerified?"Mark unverified":"Mark verified"})})]},E.id)})})]})}),s.jsxs("footer",{className:"admin-table-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!P&&l(E=>Math.max(1,E-1)),disabled:P,children:" Previous"}),s.jsxs("span",{children:["Page ",o," of ",j]}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!D&&l(E=>Math.min(j,E+1)),disabled:D,children:"Next "})]})]})]})};async function NY(e){const t=new URLSearchParams;e.q&&e.q.trim()&&t.set("q",e.q.trim()),e.status&&t.set("status",e.status),typeof e.hasSubscription=="boolean"&&t.set("hasSubscription",e.hasSubscription?"true":"false"),e.planCode&&e.planCode.trim()&&t.set("planCode",e.planCode.trim()),typeof e.page=="number"&&t.set("page",String(e.page)),t.set("pageSize",String(e.pageSize));const n=t.toString()?`?${t.toString()}`:"";return le(`/admin/bots${n}`)}async function Nh(e,t){return le(`/admin/bots/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function gO(){return le("/admin/usage-plans")}const KS=20,VS=[{label:"All statuses",value:""},{label:"Draft",value:"DRAFT"},{label:"Pending payment",value:"PENDING_PAYMENT"},{label:"Active",value:"ACTIVE"},{label:"Suspended",value:"SUSPENDED"},{label:"Canceled",value:"CANCELED"}],CY=()=>{const[e,t]=m.useState([]),[n,a]=m.useState(!0),[i,r]=m.useState(null),[o,l]=m.useState(1),[c,d]=m.useState(0),[u,p]=m.useState(""),[h,f]=m.useState(""),[g,v]=m.useState(""),[y,b]=m.useState("all"),[x,w]=m.useState(""),[j,S]=m.useState(null),[k,T]=m.useState(null),[L,F]=m.useState([]),[O,M]=m.useState(!0),[P,D]=m.useState(null),E=m.useMemo(()=>c>0?Math.ceil(c/KS):1,[c]),N=m.useCallback(async()=>{M(!0),D(null);try{const $=await gO();F($.items)}catch($){console.error("Failed to load usage plans:",$),D(($==null?void 0:$.message)||"Failed to load usage plans")}finally{M(!1)}},[]),R=m.useCallback(async $=>{const q=($==null?void 0:$.pageOverride)??o;a(!0),r(null);try{const ee=await NY({q:h||void 0,status:g||void 0,hasSubscription:y==="all"?void 0:y==="with",planCode:x||void 0,page:q,pageSize:KS});t(ee.items),d(ee.total),l(ee.page)}catch(z){console.error("Failed to load bots:",z),r((z==null?void 0:z.message)||"Failed to load bots")}finally{a(!1)}},[o,h,g,y,x]);m.useEffect(()=>{N()},[N]),m.useEffect(()=>{R()},[h,g,y,x,o,R]);const C=$=>{$.preventDefault(),l(1),f(u.trim())},A=()=>{p(""),f(""),v(""),b("all"),w(""),l(1)},_=async($,q)=>{T(null),S($);try{await Nh($,{status:q}),await R()}catch(z){console.error("Failed to update bot:",z),T((z==null?void 0:z.message)||"Failed to update bot")}finally{S(null)}},B=async $=>{T(null),S($.id);try{await Nh($.id,{autoEvaluateConversations:!$.autoEvaluateConversations}),await R()}catch(q){console.error("Failed to update bot:",q),T((q==null?void 0:q.message)||"Failed to update bot")}finally{S(null)}},H=async($,q)=>{T(null),S($.id);try{await Nh($.id,{usagePlanId:q||null}),await R()}catch(z){console.error("Failed to update subscription plan:",z),T((z==null?void 0:z.message)||"Failed to update subscription plan")}finally{S(null)}},Z=($,q)=>{if($==null)return"";const z=$/100,ee=q||"USD";try{return new Intl.NumberFormat(void 0,{style:"currency",currency:ee}).format(z)}catch{return`${z.toFixed(2)} ${ee}`}},ie=$=>{const q=new Date($);return Number.isNaN(q.getTime())?"":q.toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})},U=$=>$.toLocaleString(void 0),G=o<=1||n,V=o>=E||n;return s.jsxs("div",{className:"page-root",children:[s.jsxs("header",{className:"page-header",children:[s.jsx("h1",{children:"Bots & subscriptions"}),s.jsx("p",{className:"page-subtitle",children:"Inspect bots, subscription plans, channels and booking settings. Admin-only quick actions for status and plan changes."})]}),s.jsxs("section",{"aria-label":"Bot filters",className:"card",children:[s.jsxs("form",{className:"admin-filters-bar",onSubmit:C,children:[s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"bot-search",children:"Search"}),s.jsx("input",{id:"bot-search",className:"input",type:"search",placeholder:"Search by bot name, slug or owner email",value:u,onChange:$=>p($.target.value)})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"bot-status-filter",children:"Status"}),s.jsx("select",{id:"bot-status-filter",className:"select",value:g,onChange:$=>{const q=$.target.value;v(q),l(1)},children:VS.map($=>s.jsx("option",{value:$.value,children:$.label},$.label))})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"bot-subscription-filter",children:"Subscription"}),s.jsxs("select",{id:"bot-subscription-filter",className:"select",value:y,onChange:$=>{const q=$.target.value;b(q),l(1)},children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"with",children:"With subscription"}),s.jsx("option",{value:"without",children:"Without subscription"})]})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"bot-plan-filter",children:"Plan"}),s.jsxs("select",{id:"bot-plan-filter",className:"select",value:x,onChange:$=>{w($.target.value),l(1)},disabled:O||!!P,children:[s.jsx("option",{value:"",children:"All plans"}),L.map($=>s.jsxs("option",{value:$.code,children:[$.code,"  ",$.name,$.isActive?"":" (inactive)"]},$.id))]})]}),s.jsxs("div",{className:"admin-filter-actions",children:[s.jsx("button",{type:"submit",className:"btn-secondary",disabled:n,children:"Apply"}),s.jsx("button",{type:"button",className:"btn-link-small",onClick:A,disabled:n&&!h&&!g&&y==="all",children:"Clear"})]})]}),s.jsxs("div",{className:"admin-filters-meta",children:[s.jsxs("span",{children:["Page ",o," of ",E,"  ",U(c)," bots"]}),P&&s.jsx("span",{className:"admin-filters-note admin-filters-note-error",children:P})]})]}),n&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"Loading bots"})}),!n&&i&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:i})}),k&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:k})}),!n&&!i&&e.length===0&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"No bots match your filters."})}),!n&&!i&&e.length>0&&s.jsxs("section",{"aria-label":"Bots list",className:"card",children:[s.jsx("div",{className:"admin-table-wrapper",children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Bot"}),s.jsx("th",{children:"Owner"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Plan"}),s.jsx("th",{children:"Billing"}),s.jsx("th",{children:"Channels"}),s.jsx("th",{children:"Booking"}),s.jsx("th",{"aria-label":"Row actions"})]})}),s.jsx("tbody",{children:e.map($=>{const q=j===$.id,z=$.subscription,ee=(z==null?void 0:z.usagePlanId)??"",J=L,X=[];return $.booking.enabled&&X.push("Calendar on"),$.booking.bookingConfirmationEmailEnabled&&X.push("Conf. emails"),$.booking.bookingReminderEmailEnabled&&X.push("Reminder emails"),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"admin-bot-main",children:[s.jsx("div",{className:"admin-bot-name",children:$.name}),s.jsxs("div",{className:"admin-bot-meta",children:[s.jsxs("span",{className:"admin-bot-slug",children:["/",$.slug]}),s.jsxs("span",{children:["Created ",ie($.createdAt)]})]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-owner-main",children:[s.jsx("div",{className:"admin-owner-email",children:$.owner.email}),$.owner.name&&s.jsx("div",{className:"admin-owner-name",children:$.owner.name})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[s.jsx("select",{className:"select select-sm",value:$.status,disabled:q,onChange:ne=>_($.id,ne.target.value),children:VS.filter(ne=>ne.value).map(ne=>s.jsx("option",{value:ne.value,children:ne.label},ne.value))}),s.jsx("button",{type:"button",className:"btn-link-small",disabled:q,onClick:()=>B($),children:$.autoEvaluateConversations?"Disable auto-eval":"Enable auto-eval"})]})}),s.jsx("td",{children:z?s.jsxs("div",{className:"admin-plan-cell",children:[s.jsxs("select",{className:"select select-sm",value:ee,disabled:q||O||!!P,onChange:ne=>H($,ne.target.value||""),children:[s.jsx("option",{value:"",children:"No plan / legacy"}),J.map(ne=>s.jsxs("option",{value:ne.id,children:[ne.code,"  ",ne.name,ne.isActive?"":" (inactive)"]},ne.id))]}),s.jsxs("div",{className:"admin-plan-meta",children:[s.jsx("span",{className:"admin-plan-code",children:z.usagePlanCode||""}),s.jsx("span",{className:"admin-plan-status",children:z.status.toLowerCase()})]})]}):s.jsx("span",{className:"status-pill status-pill-muted",children:"No subscription"})}),s.jsx("td",{children:z?s.jsxs("div",{className:"admin-number-cell",children:[s.jsx("span",{className:"admin-number-main",children:Z(z.monthlyAmountCents,z.currency)}),s.jsxs("span",{className:"admin-number-sub",children:["customer ",z.stripeCustomerId.slice(0,8),""]})]}):""}),s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[$.channelWeb&&s.jsx("span",{className:"status-pill status-pill-info",children:"Web"}),$.channelWhatsapp&&s.jsx("span",{className:"status-pill status-pill-info",children:"WhatsApp"}),$.channelInstagram&&s.jsx("span",{className:"status-pill status-pill-info",children:"Instagram"}),$.channelMessenger&&s.jsx("span",{className:"status-pill status-pill-info",children:"Messenger"}),s.jsxs("span",{className:"admin-number-sub",children:[$.externalChannelCount," connected channel",$.externalChannelCount===1?"":"s"]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[X.length>0?X.map(ne=>s.jsx("span",{className:"status-pill status-pill-muted",children:ne},ne)):s.jsx("span",{className:"status-pill status-pill-muted",children:"Booking off"}),$.booking.timeZone&&s.jsxs("span",{className:"admin-number-sub",children:["TZ ",$.booking.timeZone]})]})}),s.jsx("td",{className:"admin-actions-cell",children:s.jsx("a",{href:`/app/bots/${$.slug}`,className:"btn-link-small",target:"_blank",rel:"noopener noreferrer",children:"Open bot "})})]},$.id)})})]})}),s.jsxs("footer",{className:"admin-table-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!G&&l($=>Math.max(1,$-1)),disabled:G,children:" Previous"}),s.jsxs("span",{children:["Page ",o," of ",E]}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!V&&l($=>Math.min(E,$+1)),disabled:V,children:"Next "})]})]})]})};async function kY(e){const t=new URLSearchParams;e.q&&e.q.trim()&&t.set("q",e.q.trim()),e.dateFrom&&e.dateFrom.trim()&&t.set("dateFrom",e.dateFrom.trim()),e.dateTo&&e.dateTo.trim()&&t.set("dateTo",e.dateTo.trim()),typeof e.onlyUpcoming=="boolean"&&t.set("onlyUpcoming",e.onlyUpcoming?"true":"false"),typeof e.page=="number"&&t.set("page",String(e.page)),t.set("pageSize",String(e.pageSize));const n=t.toString()?`?${t.toString()}`:"";return le(`/admin/bookings${n}`)}const GS=20,PY=()=>{const[e,t]=m.useState([]),[n,a]=m.useState(!0),[i,r]=m.useState(null),[o,l]=m.useState(1),[c,d]=m.useState(0),[u,p]=m.useState(""),[h,f]=m.useState(""),[g,v]=m.useState(""),[y,b]=m.useState(""),[x,w]=m.useState(!1),j=m.useMemo(()=>c>0?Math.ceil(c/GS):1,[c]),S=m.useCallback(async D=>{const E=(D==null?void 0:D.pageOverride)??o;a(!0),r(null);try{const N=await kY({q:h||void 0,dateFrom:g||void 0,dateTo:y||void 0,onlyUpcoming:x?!0:void 0,page:E,pageSize:GS});t(N.items),d(N.total),l(N.page)}catch(N){console.error("Failed to load bookings:",N),r((N==null?void 0:N.message)||"Failed to load bookings")}finally{a(!1)}},[o,h,g,y,x]);m.useEffect(()=>{S()},[h,g,y,x,o,S]);const k=D=>{D.preventDefault(),l(1),f(u.trim())},T=()=>{p(""),f(""),v(""),b(""),w(!1),l(1)},L=(D,E)=>{if(!D)return"";const N=new Date(D);if(Number.isNaN(N.getTime()))return"";const R={year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"};try{return N.toLocaleString(void 0,E?{...R,timeZone:E}:R)}catch{return N.toLocaleString(void 0,R)}},F=D=>D.toLocaleString(void 0),O=D=>{const E=D.bookingConfig,N=D.timeZone||D.bot.timeZone||void 0,R=new Date,C=new Date(D.start);return E.bookingReminderEmailEnabled?D.reminderEmailSentAt?{label:`Sent ${L(D.reminderEmailSentAt,N)}`,variant:"ok"}:C.getTime()<=R.getTime()?{label:"Missed (no reminder sent)",variant:"warn"}:{label:"Pending (not sent yet)",variant:"muted"}:{label:"Reminders off (bot config)",variant:"muted"}},M=o<=1||n,P=o>=j||n;return s.jsxs("div",{className:"page-root",children:[s.jsxs("header",{className:"page-header",children:[s.jsx("h1",{children:"Bookings admin"}),s.jsx("p",{className:"page-subtitle",children:"Inspect bookings across all bots. Check calendar integration, timezones and reminder delivery status."})]}),s.jsxs("section",{"aria-label":"Booking filters",className:"card",children:[s.jsxs("form",{className:"admin-filters-bar",onSubmit:k,children:[s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"booking-search",children:"Search"}),s.jsx("input",{id:"booking-search",className:"input",type:"search",placeholder:"Search by name, email, phone, service, bot name or slug",value:u,onChange:D=>p(D.target.value)})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"booking-date-from",children:"From"}),s.jsx("input",{id:"booking-date-from",className:"input",type:"date",value:g,onChange:D=>{v(D.target.value),l(1)}})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"booking-date-to",children:"To"}),s.jsx("input",{id:"booking-date-to",className:"input",type:"date",value:y,onChange:D=>{b(D.target.value),l(1)}})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"booking-upcoming",children:"Upcoming only"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx("input",{id:"booking-upcoming",type:"checkbox",checked:x,onChange:D=>{w(D.target.checked),l(1)}}),s.jsx("span",{className:"admin-filters-note",children:"Show only bookings with start time in the future"})]})]}),s.jsxs("div",{className:"admin-filter-actions",children:[s.jsx("button",{type:"submit",className:"btn-secondary",disabled:n,children:"Apply"}),s.jsx("button",{type:"button",className:"btn-link-small",onClick:T,disabled:n&&!h&&!g&&!y&&!x,children:"Clear"})]})]}),s.jsx("div",{className:"admin-filters-meta",children:s.jsxs("span",{children:["Page ",o," of ",j,"  ",F(c)," bookings"]})})]}),n&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"Loading bookings"})}),!n&&i&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:i})}),!n&&!i&&e.length===0&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"No bookings match your filters."})}),!n&&!i&&e.length>0&&s.jsxs("section",{"aria-label":"Bookings list",className:"card",children:[s.jsx("div",{className:"admin-table-wrapper",children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Booking"}),s.jsx("th",{children:"Bot"}),s.jsx("th",{children:"When"}),s.jsx("th",{children:"Calendar"}),s.jsx("th",{children:"Reminder"}),s.jsx("th",{children:"Created"})]})}),s.jsx("tbody",{children:e.map(D=>{const E=D.timeZone||D.bot.timeZone||void 0,N=O(D),R=N.variant==="ok"?"status-pill status-pill-success":N.variant==="warn"?"status-pill status-pill-warning":"status-pill status-pill-muted";return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"admin-booking-main",children:[s.jsxs("div",{className:"admin-booking-name",children:[D.name,"  ",s.jsx("span",{className:"muted",children:D.service})]}),s.jsxs("div",{className:"admin-booking-meta",children:[s.jsx("span",{children:D.email}),D.phone&&s.jsx("span",{children:D.phone}),s.jsxs("span",{className:"muted",children:["ID ",s.jsxs("code",{children:[D.id.slice(0,8),""]})]})]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-bot-main",children:[s.jsx("div",{className:"admin-bot-name",children:D.bot.name}),s.jsxs("div",{className:"admin-bot-meta",children:[s.jsxs("span",{className:"admin-bot-slug",children:["/",D.bot.slug]}),s.jsx("span",{className:"muted",children:D.bot.owner.email})]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[s.jsx("span",{children:L(D.start,E)}),s.jsx("span",{className:"admin-number-sub",children:L(D.end,E)}),s.jsxs("span",{className:"admin-number-sub",children:["TZ ",E||"n/a"," (stored: ",D.timeZone,")"]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[s.jsxs("span",{className:"admin-number-sub",children:["Calendar:"," ",D.calendarId?s.jsx("code",{children:D.calendarId}):s.jsx("span",{className:"muted",children:"none"})]}),s.jsxs("span",{className:"admin-number-sub",children:["Event:"," ",D.calendarEventId?s.jsx("code",{children:D.calendarEventId}):s.jsx("span",{className:"muted",children:"none"})]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[s.jsx("span",{className:R,children:N.label}),s.jsxs("span",{className:"admin-number-sub",children:["Conf. emails:"," ",D.bookingConfig.bookingConfirmationEmailEnabled?"on":"off"]})]})}),s.jsx("td",{children:L(D.createdAt,E)})]},D.id)})})]})}),s.jsxs("footer",{className:"admin-table-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!M&&l(D=>Math.max(1,D-1)),disabled:M,children:" Previous"}),s.jsxs("span",{children:["Page ",o," of ",j]}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!P&&l(D=>Math.min(j,D+1)),disabled:P,children:"Next "})]})]})]})};async function AY(e){const t=new URLSearchParams;e.q&&e.q.trim()&&t.set("q",e.q.trim()),e.status&&t.set("status",e.status),e.planCode&&e.planCode.trim()&&t.set("planCode",e.planCode.trim()),typeof e.overLimitOnly=="boolean"&&t.set("overLimitOnly",e.overLimitOnly?"true":"false"),typeof e.page=="number"&&t.set("page",String(e.page)),t.set("pageSize",String(e.pageSize));const n=t.toString()?`?${t.toString()}`:"";return le(`/admin/email-usage${n}`)}const YS=20,EY=[{label:"All statuses",value:""},{label:"Draft",value:"DRAFT"},{label:"Pending payment",value:"PENDING_PAYMENT"},{label:"Active",value:"ACTIVE"},{label:"Suspended",value:"SUSPENDED"},{label:"Canceled",value:"CANCELED"}],TY=()=>{const[e,t]=m.useState([]),[n,a]=m.useState([]),[i,r]=m.useState(!0),[o,l]=m.useState(null),[c,d]=m.useState(1),[u,p]=m.useState(0),[h,f]=m.useState(null),[g,v]=m.useState(null),[y,b]=m.useState(""),[x,w]=m.useState(""),[j,S]=m.useState(""),[k,T]=m.useState(""),[L,F]=m.useState(!1),[O,M]=m.useState([]),[P,D]=m.useState(!0),[E,N]=m.useState(null),R=m.useMemo(()=>u>0?Math.ceil(u/YS):1,[u]),C=m.useCallback(async()=>{D(!0),N(null);try{const q=await gO();M(q.items)}catch(q){console.error("Failed to load usage plans:",q),N((q==null?void 0:q.message)||"Failed to load usage plans")}finally{D(!1)}},[]),A=m.useCallback(async q=>{const z=(q==null?void 0:q.pageOverride)??c;r(!0),l(null);try{const ee=await AY({q:x||void 0,status:j||void 0,planCode:k||void 0,overLimitOnly:L?!0:void 0,page:z,pageSize:YS});t(ee.items),a(ee.summaryByPlan),p(ee.total),d(ee.page),f(ee.monthStart),v(ee.monthEndExclusive)}catch(ee){console.error("Failed to load email usage:",ee),l((ee==null?void 0:ee.message)||"Failed to load email usage")}finally{r(!1)}},[c,x,j,k,L]);m.useEffect(()=>{C()},[C]),m.useEffect(()=>{A()},[x,j,k,L,c,A]);const _=q=>{q.preventDefault(),d(1),w(y.trim())},B=()=>{b(""),w(""),S(""),T(""),F(!1),d(1)},H=(q,z)=>{const ee=q/100,J=z||"USD";try{return new Intl.NumberFormat(void 0,{style:"currency",currency:J}).format(ee)}catch{return`${ee.toFixed(2)} ${J}`}},Z=q=>q.toLocaleString(void 0),ie=(q,z)=>{if(!q)return"";const ee=new Date(q);return Number.isNaN(ee.getTime())?"":ee.toLocaleDateString(void 0,{year:"numeric",month:"long"})},U=q=>q==null?"":`${Math.round(q*100)}%`,G=c<=1||i,V=c>=R||i,$=ie(h);return s.jsxs("div",{className:"page-root",children:[s.jsxs("header",{className:"page-header",children:[s.jsx("h1",{children:"Email usage & quotas"}),s.jsx("p",{className:"page-subtitle",children:"Monitor outbound emails per bot against plan limits for the current month. Useful to spot accounts close to or over quota."})]}),s.jsxs("section",{"aria-label":"Email usage filters",className:"card",children:[s.jsxs("form",{className:"admin-filters-bar",onSubmit:_,children:[s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"emails-search",children:"Search"}),s.jsx("input",{id:"emails-search",className:"input",type:"search",placeholder:"Search by bot name, slug or owner email",value:y,onChange:q=>b(q.target.value)})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"emails-status-filter",children:"Bot status"}),s.jsx("select",{id:"emails-status-filter",className:"select",value:j,onChange:q=>{const z=q.target.value;S(z),d(1)},children:EY.map(q=>s.jsx("option",{value:q.value,children:q.label},q.label))})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"emails-plan-filter",children:"Plan"}),s.jsxs("select",{id:"emails-plan-filter",className:"select",value:k,onChange:q=>{T(q.target.value),d(1)},disabled:P||!!E,children:[s.jsx("option",{value:"",children:"All plans"}),O.map(q=>s.jsxs("option",{value:q.code,children:[q.code,"  ",q.name,q.isActive?"":" (inactive)"]},q.id))]})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"emails-over-limit",children:"Only over limit"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx("input",{id:"emails-over-limit",type:"checkbox",checked:L,onChange:q=>{F(q.target.checked),d(1)}}),s.jsx("span",{className:"admin-filters-note",children:"Show only bots where emails > plan email limit"})]})]}),s.jsxs("div",{className:"admin-filter-actions",children:[s.jsx("button",{type:"submit",className:"btn-secondary",disabled:i,children:"Apply"}),s.jsx("button",{type:"button",className:"btn-link-small",onClick:B,disabled:i&&!x&&!j&&!k&&!L,children:"Clear"})]})]}),s.jsxs("div",{className:"admin-filters-meta",children:[s.jsxs("span",{children:[$&&s.jsxs(s.Fragment,{children:["Month: ",s.jsx("strong",{children:$})," "," "]}),"Page ",c," of ",R,"  ",Z(u)," bots"]}),E&&s.jsx("span",{className:"admin-filters-note admin-filters-note-error",children:E})]})]}),i&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"Loading email usage"})}),!i&&o&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:o})}),!i&&!o&&e.length===0&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"No bots match your filters."})}),!i&&!o&&n.length>0&&s.jsxs("section",{"aria-label":"Email usage summary by plan",className:"card",children:[s.jsx("h2",{className:"card-title",children:"By plan (visible rows)"}),s.jsx("div",{className:"admin-table-wrapper",children:s.jsxs("table",{className:"admin-table admin-table-compact",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Plan"}),s.jsx("th",{children:"Bots"}),s.jsx("th",{children:"Over limit"}),s.jsx("th",{children:"Emails this month"}),s.jsx("th",{children:"Limit per bot"})]})}),s.jsx("tbody",{children:n.map(q=>s.jsxs("tr",{children:[s.jsx("td",{children:q.usagePlanCode?s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:q.usagePlanCode})," ",s.jsx("span",{className:"admin-number-sub",children:q.usagePlanName||""})]}):s.jsx("span",{className:"muted",children:"No plan / legacy"})}),s.jsx("td",{children:Z(q.botsCount)}),s.jsx("td",{children:Z(q.overLimitBotsCount)}),s.jsx("td",{children:Z(q.totalEmailsThisMonth)}),s.jsx("td",{children:q.monthlyEmails!=null?`${Z(q.monthlyEmails)} / bot`:"Unlimited"})]},q.usagePlanId??"NO_PLAN"))})]})})]}),!i&&!o&&e.length>0&&s.jsxs("section",{"aria-label":"Email usage per bot",className:"card",children:[s.jsx("div",{className:"admin-table-wrapper",children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Bot"}),s.jsx("th",{children:"Owner"}),s.jsx("th",{children:"Plan"}),s.jsx("th",{children:"Emails (month)"}),s.jsx("th",{children:"Usage vs limit"}),s.jsx("th",{"aria-label":"Row actions"})]})}),s.jsx("tbody",{children:e.map(q=>{const z=q.usagePlan,ee=q.monthlyEmailLimit!=null;let J="status-pill status-pill-muted";return ee&&q.usageRatio!=null&&(q.isOverLimit?J="status-pill status-pill-warning":q.usageRatio>=.8?J="status-pill status-pill-info":J="status-pill status-pill-success"),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"admin-bot-main",children:[s.jsx("div",{className:"admin-bot-name",children:q.botName}),s.jsxs("div",{className:"admin-bot-meta",children:[s.jsxs("span",{className:"admin-bot-slug",children:["/",q.botSlug]}),s.jsxs("span",{className:"admin-number-sub",children:["Status ",q.botStatus.toLowerCase()]})]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-owner-main",children:[s.jsx("div",{className:"admin-owner-email",children:q.owner.email}),q.owner.name&&s.jsx("div",{className:"admin-owner-name",children:q.owner.name})]})}),s.jsx("td",{children:z?s.jsxs("div",{className:"admin-plan-cell",children:[s.jsxs("div",{className:"admin-plan-code",children:[s.jsx("strong",{children:z.code})," ",s.jsx("span",{className:"admin-number-sub",children:z.name})]}),s.jsx("div",{className:"admin-number-sub",children:z.monthlyEmails!=null?`${Z(z.monthlyEmails)} emails / month`:"Unlimited emails"}),s.jsxs("div",{className:"admin-number-sub",children:[H(z.monthlyAmountCents,z.currency)," / month"]})]}):s.jsx("span",{className:"status-pill status-pill-muted",children:"No plan / legacy"})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-number-cell",children:[s.jsx("span",{className:"admin-number-main",children:Z(q.emailsThisMonth)}),s.jsx("span",{className:"admin-number-sub",children:"this month"})]})}),s.jsx("td",{children:ee?s.jsxs("div",{className:"admin-status-stack",children:[s.jsxs("span",{className:J,children:[U(q.usageRatio)," of"," ",Z(q.monthlyEmailLimit)," emails"]}),q.isOverLimit&&s.jsxs("span",{className:"admin-number-sub",children:["Over limit by"," ",Z(q.emailsThisMonth-(q.monthlyEmailLimit||0))," ","emails"]})]}):s.jsx("span",{className:"status-pill status-pill-muted",children:"No email limit"})}),s.jsx("td",{className:"admin-actions-cell",children:s.jsx("a",{href:`/app/bots/${q.botSlug}`,className:"btn-link-small",target:"_blank",rel:"noopener noreferrer",children:"Open bot "})})]},q.botId)})})]})}),s.jsxs("footer",{className:"admin-table-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!G&&d(q=>Math.max(1,q-1)),disabled:G,children:" Previous"}),s.jsxs("span",{children:["Page ",c," of ",R]}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!V&&d(q=>Math.min(R,q+1)),disabled:V,children:"Next "})]})]})]})};async function IY(e){const t=new URLSearchParams;e.q&&e.q.trim()&&t.set("q",e.q.trim()),e.status&&e.status.trim()&&t.set("status",e.status.trim()),typeof e.hasReferral=="boolean"&&t.set("hasReferral",e.hasReferral?"true":"false"),e.dateFrom&&e.dateFrom.trim()&&t.set("dateFrom",e.dateFrom.trim()),e.dateTo&&e.dateTo.trim()&&t.set("dateTo",e.dateTo.trim()),typeof e.page=="number"&&t.set("page",String(e.page)),t.set("pageSize",String(e.pageSize));const n=t.toString()?`?${t.toString()}`:"";return le(`/admin/payments${n}`)}const QS=20,OY=()=>{const[e,t]=m.useState([]),[n,a]=m.useState([]),[i,r]=m.useState(!0),[o,l]=m.useState(null),[c,d]=m.useState(1),[u,p]=m.useState(0),[h,f]=m.useState(""),[g,v]=m.useState(""),[y,b]=m.useState(""),[x,w]=m.useState("all"),[j,S]=m.useState(""),[k,T]=m.useState(""),L=m.useMemo(()=>u>0?Math.ceil(u/QS):1,[u]),F=m.useCallback(async C=>{const A=(C==null?void 0:C.pageOverride)??c;r(!0),l(null);try{const B=await IY({q:g||void 0,status:y||void 0,hasReferral:x==="all"?void 0:x==="with",dateFrom:j||void 0,dateTo:k||void 0,page:A,pageSize:QS});t(B.items),a(B.totalsByCurrency),p(B.total),d(B.page)}catch(_){console.error("Failed to load payments:",_),l((_==null?void 0:_.message)||"Failed to load payments")}finally{r(!1)}},[c,g,y,x,j,k]);m.useEffect(()=>{F()},[g,y,x,j,k,c,F]);const O=C=>{C.preventDefault(),d(1),v(h.trim())},M=()=>{f(""),v(""),b(""),w("all"),S(""),T(""),d(1)},P=(C,A)=>{const _=C/100,B=A||"USD";try{return new Intl.NumberFormat(void 0,{style:"currency",currency:B}).format(_)}catch{return`${_.toFixed(2)} ${B}`}},D=C=>C.toLocaleString(void 0),E=C=>{if(!C)return"";const A=new Date(C);return Number.isNaN(A.getTime())?"":A.toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})},N=c<=1||i,R=c>=L||i;return s.jsxs("div",{className:"page-root",children:[s.jsxs("header",{className:"page-header",children:[s.jsx("h1",{children:"Payments & invoices"}),s.jsx("p",{className:"page-subtitle",children:"Inspect Stripe payments across all bots. See who paid what, when, on which plan, and which payments generated referral commissions."})]}),s.jsxs("section",{"aria-label":"Payments filters",className:"card",children:[s.jsxs("form",{className:"admin-filters-bar",onSubmit:O,children:[s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"payments-search",children:"Search"}),s.jsx("input",{id:"payments-search",className:"input",type:"search",placeholder:"Search billing email, name, bot name, slug or owner email",value:h,onChange:C=>f(C.target.value)})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"payments-status",children:"Status contains"}),s.jsx("input",{id:"payments-status",className:"input",type:"text",placeholder:"e.g. succeeded, failed, requires_action",value:y,onChange:C=>{b(C.target.value),d(1)}})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"payments-referral-filter",children:"Referral"}),s.jsxs("select",{id:"payments-referral-filter",className:"select",value:x,onChange:C=>{const A=C.target.value;w(A),d(1)},children:[s.jsx("option",{value:"all",children:"All payments"}),s.jsx("option",{value:"with",children:"With referral commission"}),s.jsx("option",{value:"without",children:"Without referral commission"})]})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"payments-date-from",children:"From (created)"}),s.jsx("input",{id:"payments-date-from",className:"input",type:"date",value:j,onChange:C=>{S(C.target.value),d(1)}})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"payments-date-to",children:"To (created)"}),s.jsx("input",{id:"payments-date-to",className:"input",type:"date",value:k,onChange:C=>{T(C.target.value),d(1)}})]}),s.jsxs("div",{className:"admin-filter-actions",children:[s.jsx("button",{type:"submit",className:"btn-secondary",disabled:i,children:"Apply"}),s.jsx("button",{type:"button",className:"btn-link-small",onClick:M,disabled:i&&!g&&!y&&x==="all"&&!j&&!k,children:"Clear"})]})]}),s.jsx("div",{className:"admin-filters-meta",children:s.jsxs("span",{children:["Page ",c," of ",L,"  ",D(u)," payments"]})})]}),i&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"Loading payments"})}),!i&&o&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:o})}),!i&&!o&&e.length===0&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"No payments match your filters."})}),!i&&!o&&n.length>0&&s.jsxs("section",{"aria-label":"Payment totals",className:"card",children:[s.jsx("h2",{className:"card-title",children:"Totals by currency (matching filters)"}),s.jsx("div",{className:"admin-table-wrapper",children:s.jsxs("table",{className:"admin-table admin-table-compact",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Currency"}),s.jsx("th",{children:"Payments"}),s.jsx("th",{children:"Total amount"})]})}),s.jsx("tbody",{children:n.map(C=>s.jsxs("tr",{children:[s.jsx("td",{children:C.currency}),s.jsx("td",{children:D(C.count)}),s.jsx("td",{children:P(C.totalAmountCents,C.currency)})]},C.currency))})]})})]}),!i&&!o&&e.length>0&&s.jsxs("section",{"aria-label":"Payments list",className:"card",children:[s.jsx("div",{className:"admin-table-wrapper",children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Payment"}),s.jsx("th",{children:"Bot"}),s.jsx("th",{children:"Plan & billing"}),s.jsx("th",{children:"Referral"}),s.jsx("th",{children:"Period"}),s.jsx("th",{children:"Created"})]})}),s.jsx("tbody",{children:e.map(C=>{const A=C.plan,_=C.referral,B=C.status.toLowerCase();let H="status-pill status-pill-muted";return B.includes("succeeded")||B==="paid"?H="status-pill status-pill-success":B.includes("requires")||B.includes("past_due")?H="status-pill status-pill-info":(B.includes("failed")||B.includes("canceled"))&&(H="status-pill status-pill-warning"),s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"admin-payment-main",children:[s.jsxs("div",{className:"admin-number-cell",children:[s.jsx("span",{className:"admin-number-main",children:P(C.amountCents,C.currency)}),s.jsxs("span",{className:"admin-number-sub",children:["Status:"," ",s.jsx("span",{className:H,children:C.status})]})]}),s.jsxs("div",{className:"admin-payment-meta",children:[s.jsxs("span",{className:"admin-number-sub",children:["Customer:"," ",s.jsxs("code",{children:[C.stripeCustomerId.slice(0,10),""]})]}),C.stripeInvoiceId&&s.jsxs("span",{className:"admin-number-sub",children:["Invoice: ",s.jsx("code",{children:C.stripeInvoiceId})]}),C.stripePaymentIntentId&&s.jsxs("span",{className:"admin-number-sub",children:["PaymentIntent:"," ",s.jsx("code",{children:C.stripePaymentIntentId})]})]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-bot-main",children:[s.jsx("div",{className:"admin-bot-name",children:C.bot.name}),s.jsxs("div",{className:"admin-bot-meta",children:[s.jsxs("span",{className:"admin-bot-slug",children:["/",C.bot.slug]}),s.jsxs("span",{className:"admin-number-sub",children:["Owner ",C.bot.owner.email]}),s.jsxs("span",{className:"admin-number-sub",children:["Bot status ",C.bot.status.toLowerCase()]})]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-plan-cell",children:[C.billingEmail&&s.jsxs("div",{className:"admin-number-sub",children:[C.billingName&&s.jsxs(s.Fragment,{children:[C.billingName," "," "]}),C.billingEmail]}),A?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"admin-plan-code",children:[s.jsx("strong",{children:A.code})," ",s.jsx("span",{className:"admin-number-sub",children:A.name})]}),s.jsxs("div",{className:"admin-number-sub",children:["Plan billing:"," ",P(A.monthlyAmountCents,A.currency)," ","/ month"]})]}):s.jsx("span",{className:"status-pill status-pill-muted",children:"No linked plan"})]})}),s.jsx("td",{children:_?s.jsxs("div",{className:"admin-status-stack",children:[s.jsxs("span",{className:"status-pill status-pill-info",children:["Referral ",_.status.toLowerCase()]}),s.jsxs("span",{className:"admin-number-sub",children:["Partner:"," ",_.partnerUserEmail||_.partnerId.slice(0,8)+""]}),s.jsxs("span",{className:"admin-number-sub",children:["Base:"," ",P(_.amountBaseCents,_.currency)," "," Commission:"," ",P(_.commissionCents,_.currency)]})]}):s.jsx("span",{className:"status-pill status-pill-muted",children:"No referral"})}),s.jsx("td",{children:s.jsx("div",{className:"admin-status-stack",children:s.jsxs("span",{children:[C.periodStart?E(C.periodStart):"","  ",""," ",C.periodEnd?E(C.periodEnd):""]})})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[s.jsx("span",{children:E(C.createdAt)}),s.jsxs("span",{className:"admin-number-sub",children:["Updated ",E(C.updatedAt)]})]})})]},C.id)})})]})}),s.jsxs("footer",{className:"admin-table-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!N&&d(C=>Math.max(1,C-1)),disabled:N,children:" Previous"}),s.jsxs("span",{children:["Page ",c," of ",L]}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!R&&d(C=>Math.min(L,C+1)),disabled:R,children:"Next "})]})]})]})};async function LY(e){const t=new URLSearchParams;e.month&&t.set("month",e.month),e.q&&t.set("q",e.q),e.model&&t.set("model",e.model),t.set("take",String(e.take)),typeof e.skip=="number"&&t.set("skip",String(e.skip));const n=t.toString()?`?${t.toString()}`:"";return le(`/admin/openai-usage${n}`)}const Gc=50;function ZS(e,t){const[n,a]=e.split("-").map(Number),i=new Date(Date.UTC(n,a-1+t,1));return Za(i)}const Lt=(e,t)=>new Intl.NumberFormat(t,{maximumFractionDigits:0}).format(e),MY=()=>{const e=m.useMemo(()=>"en-GB",[]),[t,n]=m.useState(()=>Za(new Date)),[a,i]=m.useState(""),[r,o]=m.useState(""),[l,c]=m.useState({q:"",model:""}),[d,u]=m.useState(0),[p,h]=m.useState(null),[f,g]=m.useState(!0),[v,y]=m.useState(null),b=()=>{c({q:a.trim(),model:r.trim()}),u(0)};m.useEffect(()=>{let P=!1;return(async()=>{g(!0),y(null);try{const E=await LY({month:t,q:l.q||void 0,model:l.model||void 0,take:Gc,skip:d});P||h(E)}catch(E){P||y(E instanceof Error?E.message:"Failed to load OpenAI usage")}finally{P||g(!1)}})(),()=>{P=!0}},[t,l.q,l.model,d]);const x=()=>{n(P=>ZS(P,-1)),u(0)},w=()=>{n(P=>ZS(P,1)),u(0)},j=()=>{n(Za(new Date)),u(0)},S=()=>{u(P=>Math.max(0,P-Gc))},k=()=>{p&&p.paging.hasMore&&u(P=>P+Gc)},T=(p==null?void 0:p.paging.total)??0,L=(p==null?void 0:p.paging.skip)??0,F=Math.min(((p==null?void 0:p.paging.skip)??0)+((p==null?void 0:p.paging.take)??Gc),T),O=m.useMemo(()=>!p||p.global.byModel.length===0?null:p.global.byModel[0],[p]),M=p==null?void 0:p.global;return s.jsxs("div",{className:"page-root",children:[s.jsx("header",{className:"page-header",children:s.jsxs("div",{children:[s.jsx("h1",{children:"OpenAI & Crawler usage (admin)"}),s.jsx("p",{className:"muted",children:"Monitor token usage per bot, see global OpenAI load by model and knowledge (Crawler) costs for the selected billing month."})]})}),s.jsxs("section",{className:"card mb-3",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{children:"Time window"})}),s.jsxs("div",{className:"card-body admin-toolbar",children:[s.jsxs("div",{className:"admin-toolbar-left",children:[s.jsxs("span",{className:"pill",children:["Month: ",s.jsx("strong",{children:t})]}),p&&s.jsxs("span",{className:"pill pill-muted",children:["UTC window:"," ",s.jsxs("strong",{children:[new Date(p.window.from).toISOString().slice(0,10)," "," ",new Date(p.window.to).toISOString().slice(0,10)]})]})]}),s.jsxs("div",{className:"admin-toolbar-right",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:x,children:" Previous month"}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:j,children:"Current month"}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:w,children:"Next month "})]})]})]}),s.jsxs("section",{className:"card mb-3",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{children:"Filters"})}),s.jsxs("div",{className:"card-body admin-toolbar",children:[s.jsxs("div",{className:"admin-toolbar-left",children:[s.jsx("input",{type:"text",className:"input",placeholder:"Search by bot name, slug or owner email",value:a,onChange:P=>i(P.target.value),onKeyDown:P=>{P.key==="Enter"&&b()}}),s.jsx("input",{type:"text",className:"input",placeholder:"Filter by model (e.g. gpt-4o-mini)",value:r,onChange:P=>o(P.target.value),onKeyDown:P=>{P.key==="Enter"&&b()}})]}),s.jsx("div",{className:"admin-toolbar-right",children:s.jsx("button",{type:"button",className:"btn-primary",onClick:b,children:"Apply filters"})})]})]}),v&&s.jsx("section",{className:"card mb-3",children:s.jsx("div",{className:"card-body",children:s.jsx("div",{className:"form-error",children:v})})}),s.jsxs("section",{className:"card mb-3",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{children:"Global usage summary"})}),s.jsx("div",{className:"card-body",children:f&&!p?s.jsx("p",{children:"Loading"}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"dashboard-kpis",children:[s.jsxs("div",{className:"dashboard-kpi",children:[s.jsx("div",{className:"dashboard-kpi-label",children:"Monthly tokens (AI + Crawler)"}),s.jsx("div",{className:"dashboard-kpi-value",children:Lt((M==null?void 0:M.totalTokens)??0,e)}),s.jsxs("div",{className:"dashboard-kpi-subvalue",children:["OpenAI:"," ",Lt((M==null?void 0:M.totalTokensOpenAI)??0,e),"  Crawler:"," ",Lt((M==null?void 0:M.totalTokensKnowledge)??0,e)]})]}),s.jsxs("div",{className:"dashboard-kpi",children:[s.jsx("div",{className:"dashboard-kpi-label",children:"OpenAI requests (all bots)"}),s.jsx("div",{className:"dashboard-kpi-value",children:Lt((M==null?void 0:M.requestCount)??0,e)})]}),s.jsxs("div",{className:"dashboard-kpi",children:[s.jsx("div",{className:"dashboard-kpi-label",children:"Top model (by tokens)"}),s.jsx("div",{className:"dashboard-kpi-value",children:O?s.jsxs(s.Fragment,{children:[O.model," ",s.jsxs("span",{className:"dashboard-kpi-subvalue",children:["(",Lt(O.totalTokens,e)," tokens)"]})]}):""})]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("h3",{children:"Usage by model (OpenAI + Crawler)"}),p&&p.global.byModel.length===0&&s.jsx("p",{className:"muted",children:"No usage recorded for this month."}),p&&p.global.byModel.length>0&&s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Model"}),s.jsx("th",{className:"text-right",children:"Tokens"}),s.jsx("th",{className:"text-right",children:"Requests"})]})}),s.jsx("tbody",{children:p.global.byModel.map(P=>s.jsxs("tr",{children:[s.jsx("td",{children:P.model}),s.jsx("td",{className:"text-right",children:Lt(P.totalTokens,e)}),s.jsx("td",{className:"text-right",children:P.model==="Crawler"?"":Lt(P.requestCount,e)})]},P.model))})]})})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("h3",{children:"Top users by tokens (AI + Crawler)"}),p&&p.global.topUsers.length===0&&s.jsx("p",{className:"muted",children:"No user-level usage records for this month."}),p&&p.global.topUsers.length>0&&s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"User"}),s.jsx("th",{children:"Email"}),s.jsx("th",{className:"text-right",children:"Tokens (AI + Crawler)"}),s.jsx("th",{className:"text-right",children:"OpenAI requests"})]})}),s.jsx("tbody",{children:p.global.topUsers.map(P=>s.jsxs("tr",{children:[s.jsx("td",{children:P.name||""}),s.jsx("td",{children:P.email}),s.jsx("td",{className:"text-right",children:Lt(P.totalTokens,e)}),s.jsx("td",{className:"text-right",children:Lt(P.requestCount,e)})]},P.userId))})]})})]})]})})]}),s.jsxs("section",{className:"card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"Bots usage"}),s.jsx("div",{className:"card-header-meta",children:T>0&&s.jsxs("span",{className:"muted",children:["Showing ",L+1,"",F," of ",T," bots"]})})]}),s.jsx("div",{className:"card-body",children:f&&!p?s.jsx("p",{children:"Loading"}):!p||p.bots.length===0?s.jsx("p",{className:"muted",children:"No bots match the current filters."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Bot"}),s.jsx("th",{children:"Owner"}),s.jsx("th",{children:"Plan"}),s.jsx("th",{className:"text-right",children:"Tokens (combined / breakdown)"}),s.jsx("th",{className:"text-right",children:"Requests (OpenAI)"}),s.jsx("th",{className:"text-right",children:"Usage vs plan"})]})}),s.jsx("tbody",{children:p.bots.map(P=>{var A;const D=((A=P.plan)==null?void 0:A.monthlyTokens)??null,E=P.monthTokens.totalTokens,N=P.knowledgeTokens??0,R=P.totalTokensAll??E+N,C=D?Math.min(999,Math.round(R/D*100)):null;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"table-main-cell",children:[s.jsx("div",{className:"table-main-title",children:P.name}),s.jsxs("div",{className:"table-main-subtitle",children:[s.jsx("code",{children:P.slug})," "," ",s.jsx("span",{className:"pill pill-muted",children:P.status})]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"table-main-cell",children:[s.jsx("div",{className:"table-main-title",children:P.owner.name||""}),s.jsx("div",{className:"table-main-subtitle",children:P.owner.email})]})}),s.jsx("td",{children:P.plan?s.jsxs("div",{className:"table-main-cell",children:[s.jsx("div",{className:"table-main-title",children:P.plan.name}),s.jsx("div",{className:"table-main-subtitle",children:P.plan.monthlyTokens?`${Lt(P.plan.monthlyTokens,e)} tokens / month`:"Unlimited tokens"})]}):s.jsx("span",{className:"muted",children:"No usage plan"})}),s.jsxs("td",{className:"text-right",children:[s.jsx("div",{children:Lt(R,e)}),s.jsxs("div",{className:"muted",children:["OpenAI:"," ",Lt(E,e)," (",Lt(P.monthTokens.promptTokens,e)," ","/"," ",Lt(P.monthTokens.completionTokens,e),")  Crawler:"," ",Lt(N,e)]})]}),s.jsx("td",{className:"text-right",children:Lt(P.monthTokens.requests,e)}),s.jsx("td",{className:"text-right",children:D?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[C,"% of plan",C>=90&&s.jsx("span",{className:"pill pill-warning ml-1",children:"near limit"})]}),s.jsxs("div",{className:"muted",children:[Lt(R,e)," /"," ",Lt(D,e)]})]}):s.jsx("span",{className:"muted",children:"Unlimited"})})]},P.botId)})})]})}),s.jsxs("div",{className:"table-pagination",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:S,disabled:d===0,children:"Previous"}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:k,disabled:!p.paging.hasMore,children:"Next"})]})]})})]})]})};async function DY(e){const t=new URLSearchParams;e!=null&&e.q&&t.set("q",e.q),typeof(e==null?void 0:e.limit)=="number"&&t.set("limit",String(e.limit));const n=t.toString()?`?${t.toString()}`:"";return le(`/admin/integrations${n}`)}async function FY(e){return le(`/admin/integrations/meta/${encodeURIComponent(e)}`,{method:"DELETE"})}async function zY(e){return le(`/admin/integrations/whatsapp/${encodeURIComponent(e)}`,{method:"DELETE"})}const RY=()=>{const e=m.useMemo(()=>"en-GB",[]),[t,n]=m.useState(""),[a,i]=m.useState(null),[r,o]=m.useState(!0),[l,c]=m.useState(null),[d,u]=m.useState(null),p=async j=>{o(!0),c(null);try{const S=await DY({q:j&&j.trim()?j.trim():void 0});i(S)}catch(S){c((S==null?void 0:S.message)||"Failed to load integrations.")}finally{o(!1)}};m.useEffect(()=>{p()},[]);const h=async j=>{j.preventDefault(),await p(t)},f=async()=>{n(""),await p()},g=async j=>{if(window.confirm("Disconnect this Meta integration?")){u(j),c(null);try{await FY(j),await p(t)}catch(S){c((S==null?void 0:S.message)||"Failed to delete Meta integration.")}finally{u(null)}}},v=async j=>{if(window.confirm("Disconnect this WhatsApp integration?")){u(j),c(null);try{await zY(j),await p(t)}catch(S){c((S==null?void 0:S.message)||"Failed to delete WhatsApp integration.")}finally{u(null)}}},y=(a==null?void 0:a.meta.length)??0,b=(a==null?void 0:a.whatsapp.length)??0,x=m.useMemo(()=>{if(!a)return 0;const j=new Set;return a.meta.forEach(S=>j.add(S.bot.id)),a.whatsapp.forEach(S=>j.add(S.bot.id)),j.size},[a]),w=m.useMemo(()=>{if(!a)return 0;const j=new Set;return a.meta.forEach(S=>j.add(S.user.id)),a.whatsapp.forEach(S=>j.add(S.user.id)),j.size},[a]);return s.jsxs("div",{className:"page-root",children:[s.jsxs("div",{className:"page-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Integrations admin"}),s.jsx("p",{className:"muted",children:"Inspect Meta (Facebook / Instagram / Messenger) and WhatsApp sessions across all bots."})]}),s.jsxs("form",{className:"page-header-actions",onSubmit:h,children:[s.jsx("input",{className:"input",type:"search",placeholder:"Search by email, bot, channel, WABA...",value:t,onChange:j=>n(j.target.value)}),s.jsx("button",{className:"btn-secondary",type:"button",onClick:f,children:"Clear"}),s.jsx("button",{className:"btn-primary",type:"submit",children:"Search"})]})]}),r&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"Loading."})}),!r&&l&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:l})}),!r&&!l&&a&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"Summary"}),s.jsx("p",{className:"card-subtitle",children:"High-level view of connected sessions."})]}),s.jsxs("div",{className:"dashboard-kpi-grid",children:[s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-kpi-label",children:"Meta sessions"}),s.jsx("div",{className:"dashboard-kpi-value",children:y})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-kpi-label",children:"WhatsApp sessions"}),s.jsx("div",{className:"dashboard-kpi-value",children:b})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-kpi-label",children:"Distinct bots"}),s.jsx("div",{className:"dashboard-kpi-value",children:x})]}),s.jsxs("div",{children:[s.jsx("div",{className:"dashboard-kpi-label",children:"Distinct users"}),s.jsx("div",{className:"dashboard-kpi-value",children:w})]})]})]}),s.jsxs("div",{className:"card",style:{marginTop:"1.1rem"},children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"Meta integrations"}),s.jsx("p",{className:"card-subtitle",children:"Long-lived sessions for Facebook / Instagram / Messenger bots."})]}),a.meta.length===0?s.jsx("p",{className:"card-empty",children:"No Meta integrations found."}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Bot"}),s.jsx("th",{children:"User"}),s.jsx("th",{children:"Channel"}),s.jsx("th",{children:"Pages"}),s.jsx("th",{children:"Created"}),s.jsx("th",{className:"payments-actions-cell",children:"Actions"})]})}),s.jsx("tbody",{children:a.meta.map(j=>{const S=j.pages.count===0?"":`${j.pages.names.join(", ")}${j.pages.count>j.pages.names.length?` +${j.pages.count-j.pages.names.length}`:""}`;return s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("div",{children:j.bot.name}),s.jsx("div",{className:"muted",children:s.jsx("code",{children:j.bot.slug})})]}),s.jsx("td",{children:j.user.email}),s.jsx("td",{children:j.channelType}),s.jsx("td",{children:S}),s.jsx("td",{children:new Date(j.createdAt).toLocaleString(e)}),s.jsx("td",{className:"payments-actions-cell",children:s.jsx("button",{type:"button",className:"btn-link-small danger",onClick:()=>g(j.id),disabled:d===j.id,children:d===j.id?"Removing...":"Disconnect"})})]},j.id)})})]})})]}),s.jsxs("div",{className:"card",style:{marginTop:"1.1rem"},children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"WhatsApp integrations"}),s.jsx("p",{className:"card-subtitle",children:"Connected WhatsApp Business Accounts and phone numbers."})]}),a.whatsapp.length===0?s.jsx("p",{className:"card-empty",children:"No WhatsApp integrations found."}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Bot"}),s.jsx("th",{children:"User"}),s.jsx("th",{children:"WABA ID"}),s.jsx("th",{children:"Phone numbers"}),s.jsx("th",{children:"Created"}),s.jsx("th",{className:"payments-actions-cell",children:"Actions"})]})}),s.jsx("tbody",{children:a.whatsapp.map(j=>{const S=j.phoneNumbers.count===0?"":`${j.phoneNumbers.display.join(", ")}${j.phoneNumbers.count>j.phoneNumbers.display.length?` +${j.phoneNumbers.count-j.phoneNumbers.display.length}`:""}`;return s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("div",{children:j.bot.name}),s.jsx("div",{className:"muted",children:s.jsx("code",{children:j.bot.slug})})]}),s.jsx("td",{children:j.user.email}),s.jsx("td",{children:j.wabaId?s.jsx("code",{children:j.wabaId}):s.jsx("span",{className:"muted",children:""})}),s.jsx("td",{children:S}),s.jsx("td",{children:new Date(j.createdAt).toLocaleString(e)}),s.jsx("td",{className:"payments-actions-cell",children:s.jsx("button",{type:"button",className:"btn-link-small danger",onClick:()=>v(j.id),disabled:d===j.id,children:d===j.id?"Removing...":"Disconnect"})})]},j.id)})})]})})]})]})]})};async function _Y(e){const t=new URLSearchParams;e!=null&&e.search&&t.set("search",e.search),e!=null&&e.includeInactive&&t.set("includeInactive","true"),t.set("take",String(e.take)),t.set("skip",String(e.skip));const n=t.toString()?`?${t.toString()}`:"";return le(`/admin/plans${n}`)}async function BY(e){return le("/admin/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function XS(e,t){return le(`/admin/plans/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function $Y(e){return le(`/admin/plans/${encodeURIComponent(e)}`,{method:"DELETE"})}async function UY(e){const t=new URLSearchParams;e!=null&&e.search&&t.set("search",e.search),e!=null&&e.includeInactive&&t.set("includeInactive","true");const n=t.toString()?`?${t.toString()}`:"";return le(`/admin/feature-prices${n}`)}async function WY(e){return le("/admin/feature-prices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function JS(e,t){return le(`/admin/feature-prices/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function qY(e){return le(`/admin/feature-prices/${encodeURIComponent(e)}`,{method:"DELETE"})}function eN(e,t){const n=(t||"eur").toUpperCase(),a=e/100;try{return new Intl.NumberFormat(void 0,{style:"currency",currency:n}).format(a)}catch{return`${a.toFixed(2)} ${n}`}}const tN={code:"",name:"",description:"",monthlyTokens:"",monthlyEmails:"",monthlyAmountCents:"",currency:"eur",stripePriceId:"",isActive:!0},nN={code:"",label:"",monthlyAmountCents:"",currency:"eur",stripePriceId:"",isActive:!0},HY=()=>{const[e,t]=m.useState([]),[n,a]=m.useState(0),[i,r]=m.useState(!1),[o,l]=m.useState(null),[c,d]=m.useState(""),[u,p]=m.useState(!1),[h,f]=m.useState(tN),[g,v]=m.useState(null),[y,b]=m.useState(null),[x,w]=m.useState(!1),[j,S]=m.useState([]),[k,T]=m.useState(0),[L,F]=m.useState(!1),[O,M]=m.useState(null),[P,D]=m.useState(""),[E,N]=m.useState(!1),[R,C]=m.useState(nN),[A,_]=m.useState(null),[B,H]=m.useState(null),[Z,ie]=m.useState(!1),U=async()=>{r(!0),l(null);try{const Q=await _Y({search:c||void 0,includeInactive:u,take:100,skip:0});t(Q.items),a(Q.total)}catch(Q){l((Q==null?void 0:Q.message)||"Failed to load usage plans.")}finally{r(!1)}},G=async()=>{F(!0),M(null);try{const Q=await UY({search:P||void 0,includeInactive:E});S(Q.items),T(Q.total)}catch(Q){M((Q==null?void 0:Q.message)||"Failed to load feature prices.")}finally{F(!1)}};m.useEffect(()=>{U(),G()},[]);const V=()=>{f(tN),v(null),b(null)},$=Q=>{f({code:Q.code,name:Q.name,description:Q.description||"",monthlyTokens:Q.monthlyTokens!=null?String(Q.monthlyTokens):"",monthlyEmails:Q.monthlyEmails!=null?String(Q.monthlyEmails):"",monthlyAmountCents:String(Q.monthlyAmountCents),currency:Q.currency||"eur",stripePriceId:Q.stripePriceId||"",isActive:Q.isActive})},q=async Q=>{Q.preventDefault(),b(null);const be=h.code.trim(),Oe=h.name.trim(),Ie=h.description.trim()||"";if(!be){b("Code is required.");return}if(!Oe){b("Name is required.");return}const We=Number(h.monthlyAmountCents);if(!Number.isFinite(We)||We<0){b("Monthly price (in cents) must be a non-negative integer.");return}let ze=null;if(h.monthlyTokens.trim()!==""){const Ee=Number(h.monthlyTokens);if(!Number.isFinite(Ee)||Ee<0){b("Monthly tokens must be a non-negative integer or blank.");return}ze=Math.trunc(Ee)}let ke=null;if(h.monthlyEmails.trim()!==""){const Ee=Number(h.monthlyEmails);if(!Number.isFinite(Ee)||Ee<0){b("Monthly emails must be a non-negative integer or blank.");return}ke=Math.trunc(Ee)}const qe={code:be,name:Oe,description:Ie||null,monthlyTokens:ze,monthlyEmails:ke,monthlyAmountCents:Math.trunc(We),currency:(h.currency||"eur").toLowerCase(),stripePriceId:h.stripePriceId.trim()||null,isActive:h.isActive};w(!0);try{g?await XS(g,qe):await BY(qe),await U(),V()}catch(Ee){b((Ee==null?void 0:Ee.message)||"Failed to save usage plan.")}finally{w(!1)}},z=Q=>{v(Q.id),$(Q),window.scrollTo({top:0,behavior:"smooth"})},ee=async Q=>{if(window.confirm(`Delete plan "${Q.name}"? This cannot be undone.`))try{await $Y(Q.id),await U()}catch(Oe){alert((Oe==null?void 0:Oe.message)||"Failed to delete usage plan.")}},J=async Q=>{try{await XS(Q.id,{isActive:!Q.isActive}),await U()}catch(be){alert((be==null?void 0:be.message)||"Failed to update plan status.")}},X=()=>{C(nN),_(null),H(null)},ne=Q=>{C({code:Q.code,label:Q.label,monthlyAmountCents:String(Q.monthlyAmountCents),currency:Q.currency||"eur",stripePriceId:Q.stripePriceId||"",isActive:Q.isActive})},ue=async Q=>{Q.preventDefault(),H(null);const be=R.code.trim(),Oe=R.label.trim();if(!be){H("Code is required.");return}if(!Oe){H("Label is required.");return}const Ie=Number(R.monthlyAmountCents);if(!Number.isFinite(Ie)||Ie<0){H("Monthly price (in cents) must be a non-negative integer.");return}const We={code:be,label:Oe,monthlyAmountCents:Math.trunc(Ie),currency:(R.currency||"eur").toLowerCase(),stripePriceId:R.stripePriceId.trim()||null,isActive:R.isActive};ie(!0);try{A?await JS(A,We):await WY(We),await G(),X()}catch(ze){H((ze==null?void 0:ze.message)||"Failed to save feature price.")}finally{ie(!1)}},fe=Q=>{_(Q.id),ne(Q),window.scrollTo({top:0,behavior:"smooth"})},we=async Q=>{if(window.confirm(`Delete feature price "${Q.label}"? This cannot be undone.`))try{await qY(Q.id),await G()}catch(Oe){alert((Oe==null?void 0:Oe.message)||"Failed to delete feature price.")}},Ae=async Q=>{try{await JS(Q.id,{isActive:!Q.isActive}),await G()}catch(be){alert((be==null?void 0:be.message)||"Failed to update feature price status.")}};return s.jsxs("div",{className:"page-root",children:[s.jsx("div",{className:"page-header",children:s.jsxs("div",{children:[s.jsx("h1",{children:"Plans & feature prices"}),s.jsx("p",{className:"muted",children:"Manage usage plans and legacy feature add-ons."})]})}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"Usage plans"}),s.jsx("p",{className:"card-subtitle",children:"Per-bot plans with token & email quotas."})]}),s.jsxs("div",{className:"card-toolbar",children:[s.jsx("div",{className:"card-toolbar-left",children:s.jsx("input",{type:"text",className:"form-control",placeholder:"Search by code or name",value:c,onChange:Q=>d(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&U()}})}),s.jsxs("label",{className:"form-checkbox",children:[s.jsx("input",{type:"checkbox",checked:u,onChange:Q=>{p(Q.target.checked),U()}}),s.jsx("span",{children:"Include inactive"})]}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>void U(),children:"Reload"})]}),s.jsxs("div",{className:"card-body",children:[s.jsx("h3",{style:{marginTop:0},children:g?"Edit plan":"Create new plan"}),y&&s.jsx("div",{className:"form-error",children:y}),s.jsxs("form",{onSubmit:q,className:"form-grid",children:[s.jsxs("div",{className:"form-row",children:[s.jsxs("label",{children:["Code",s.jsx("input",{type:"text",className:"form-control",value:h.code,onChange:Q=>f(be=>({...be,code:Q.target.value})),placeholder:"STARTER"})]}),s.jsxs("label",{children:["Name",s.jsx("input",{type:"text",className:"form-control",value:h.name,onChange:Q=>f(be=>({...be,name:Q.target.value})),placeholder:"Starter"})]})]}),s.jsx("div",{className:"form-row",children:s.jsxs("label",{className:"form-grow",children:["Description",s.jsx("input",{type:"text",className:"form-control",value:h.description,onChange:Q=>f(be=>({...be,description:Q.target.value})),placeholder:"Short description (optional)"})]})}),s.jsxs("div",{className:"form-row",children:[s.jsxs("label",{children:["Monthly tokens",s.jsx("input",{type:"number",className:"form-control",value:h.monthlyTokens,onChange:Q=>f(be=>({...be,monthlyTokens:Q.target.value})),placeholder:"Leave blank for unlimited",min:0})]}),s.jsxs("label",{children:["Monthly emails",s.jsx("input",{type:"number",className:"form-control",value:h.monthlyEmails,onChange:Q=>f(be=>({...be,monthlyEmails:Q.target.value})),placeholder:"Leave blank for unlimited",min:0})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("label",{children:["Monthly price (cents)",s.jsx("input",{type:"number",className:"form-control",value:h.monthlyAmountCents,onChange:Q=>f(be=>({...be,monthlyAmountCents:Q.target.value})),placeholder:"e.g. 2900",min:0,required:!0})]}),s.jsxs("label",{children:["Currency",s.jsx("input",{type:"text",className:"form-control",value:h.currency,onChange:Q=>f(be=>({...be,currency:Q.target.value})),placeholder:"eur",maxLength:3})]}),s.jsxs("label",{children:["Stripe price ID",s.jsx("input",{type:"text",className:"form-control",value:h.stripePriceId,onChange:Q=>f(be=>({...be,stripePriceId:Q.target.value})),placeholder:"price_..."})]})]}),s.jsx("div",{className:"form-row",children:s.jsxs("label",{className:"form-checkbox",children:[s.jsx("input",{type:"checkbox",checked:h.isActive,onChange:Q=>f(be=>({...be,isActive:Q.target.checked}))}),s.jsx("span",{children:"Active"})]})}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{type:"submit",className:"btn-primary",disabled:x,children:x?g?"Saving...":"Creating...":g?"Save changes":"Create plan"}),g&&s.jsx("button",{type:"button",className:"btn-link",onClick:V,disabled:x,children:"Cancel edit"})]})]})]}),s.jsxs("div",{className:"card-body",children:[s.jsx("h3",{style:{marginTop:0},children:"Existing plans"}),o&&s.jsx("div",{className:"form-error",children:o}),i&&s.jsx("p",{children:"Loading plans"}),!i&&e.length===0&&s.jsx("p",{className:"muted",children:"No plans found."}),!i&&e.length>0&&s.jsxs("div",{className:"table-responsive",children:[s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Code"}),s.jsx("th",{children:"Quotas"}),s.jsx("th",{children:"Price"}),s.jsx("th",{children:"Stripe price"}),s.jsx("th",{children:"Active"}),s.jsx("th",{children:"Subscriptions"}),s.jsx("th",{})]})}),s.jsx("tbody",{children:e.map(Q=>s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("div",{children:Q.name}),s.jsx("div",{className:"muted small",children:Q.description||""})]}),s.jsx("td",{children:s.jsx("code",{children:Q.code})}),s.jsxs("td",{children:[s.jsxs("div",{className:"small",children:["Tokens:"," ",Q.monthlyTokens!=null?Q.monthlyTokens.toLocaleString():""]}),s.jsxs("div",{className:"small",children:["Emails:"," ",Q.monthlyEmails!=null?Q.monthlyEmails.toLocaleString():""]})]}),s.jsx("td",{children:eN(Q.monthlyAmountCents,Q.currency)}),s.jsx("td",{className:"small",children:Q.stripePriceId?s.jsx("code",{children:Q.stripePriceId}):s.jsx("span",{className:"muted",children:""})}),s.jsx("td",{children:s.jsx("button",{type:"button",className:Q.isActive?"badge badge-success":"badge",onClick:()=>void J(Q),children:Q.isActive?"Active":"Inactive"})}),s.jsx("td",{children:Q.subscriptionsCount}),s.jsxs("td",{className:"table-actions",children:[s.jsx("button",{type:"button",className:"btn-link",onClick:()=>z(Q),children:"Edit"}),s.jsx("button",{type:"button",className:"btn-link text-danger",onClick:()=>void ee(Q),children:"Delete"})]})]},Q.id))})]}),s.jsx("div",{className:"table-footer",children:s.jsxs("span",{className:"muted",children:["Showing ",e.length," of ",n," plan(s)"]})})]})]})]}),s.jsxs("div",{className:"card",style:{marginTop:"2rem"},children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:"Feature prices (legacy)"}),s.jsx("p",{className:"card-subtitle",children:"Standalone feature add-ons, kept for backwards compatibility."})]}),s.jsxs("div",{className:"card-toolbar",children:[s.jsx("div",{className:"card-toolbar-left",children:s.jsx("input",{type:"text",className:"form-control",placeholder:"Search by code or label",value:P,onChange:Q=>D(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&G()}})}),s.jsxs("label",{className:"form-checkbox",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:Q=>{N(Q.target.checked),G()}}),s.jsx("span",{children:"Include inactive"})]}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>void G(),children:"Reload"})]}),s.jsxs("div",{className:"card-body",children:[s.jsx("h3",{style:{marginTop:0},children:A?"Edit feature price":"Create new feature price"}),B&&s.jsx("div",{className:"form-error",children:B}),s.jsxs("form",{onSubmit:ue,className:"form-grid",children:[s.jsxs("div",{className:"form-row",children:[s.jsxs("label",{children:["Code",s.jsx("input",{type:"text",className:"form-control",value:R.code,onChange:Q=>C(be=>({...be,code:Q.target.value})),placeholder:"DOMAIN_CRAWLER"})]}),s.jsxs("label",{children:["Label",s.jsx("input",{type:"text",className:"form-control",value:R.label,onChange:Q=>C(be=>({...be,label:Q.target.value})),placeholder:"Domain crawler add-on"})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("label",{children:["Monthly price (cents)",s.jsx("input",{type:"number",className:"form-control",value:R.monthlyAmountCents,onChange:Q=>C(be=>({...be,monthlyAmountCents:Q.target.value})),placeholder:"e.g. 900",min:0,required:!0})]}),s.jsxs("label",{children:["Currency",s.jsx("input",{type:"text",className:"form-control",value:R.currency,onChange:Q=>C(be=>({...be,currency:Q.target.value})),placeholder:"eur",maxLength:3})]}),s.jsxs("label",{children:["Stripe price ID",s.jsx("input",{type:"text",className:"form-control",value:R.stripePriceId,onChange:Q=>C(be=>({...be,stripePriceId:Q.target.value})),placeholder:"price_..."})]})]}),s.jsx("div",{className:"form-row",children:s.jsxs("label",{className:"form-checkbox",children:[s.jsx("input",{type:"checkbox",checked:R.isActive,onChange:Q=>C(be=>({...be,isActive:Q.target.checked}))}),s.jsx("span",{children:"Active"})]})}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{type:"submit",className:"btn-primary",disabled:Z,children:Z?A?"Saving...":"Creating...":A?"Save changes":"Create feature price"}),A&&s.jsx("button",{type:"button",className:"btn-link",onClick:X,disabled:Z,children:"Cancel edit"})]})]})]}),s.jsxs("div",{className:"card-body",children:[s.jsx("h3",{style:{marginTop:0},children:"Existing feature prices"}),O&&s.jsx("div",{className:"form-error",children:O}),L&&s.jsx("p",{children:"Loading feature prices"}),!L&&j.length===0&&s.jsx("p",{className:"muted",children:"No feature prices found."}),!L&&j.length>0&&s.jsxs("div",{className:"table-responsive",children:[s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Label"}),s.jsx("th",{children:"Code"}),s.jsx("th",{children:"Price"}),s.jsx("th",{children:"Stripe price"}),s.jsx("th",{children:"Active"}),s.jsx("th",{})]})}),s.jsx("tbody",{children:j.map(Q=>s.jsxs("tr",{children:[s.jsx("td",{children:Q.label}),s.jsx("td",{children:s.jsx("code",{children:Q.code})}),s.jsx("td",{children:eN(Q.monthlyAmountCents,Q.currency)}),s.jsx("td",{className:"small",children:Q.stripePriceId?s.jsx("code",{children:Q.stripePriceId}):s.jsx("span",{className:"muted",children:""})}),s.jsx("td",{children:s.jsx("button",{type:"button",className:Q.isActive?"badge badge-success":"badge",onClick:()=>void Ae(Q),children:Q.isActive?"Active":"Inactive"})}),s.jsxs("td",{className:"table-actions",children:[s.jsx("button",{type:"button",className:"btn-link",onClick:()=>fe(Q),children:"Edit"}),s.jsx("button",{type:"button",className:"btn-link text-danger",onClick:()=>void we(Q),children:"Delete"})]})]},Q.id))})]}),s.jsx("div",{className:"table-footer",children:s.jsxs("span",{className:"muted",children:["Showing ",j.length," of ",k," feature price(s)"]})})]})]})]})]})};async function KY(e){const t=new URLSearchParams;e.q&&e.q.trim()&&t.set("q",e.q.trim()),typeof e.page=="number"&&t.set("page",String(e.page)),t.set("pageSize",String(e.pageSize));const n=t.toString()?`?${t.toString()}`:"";return le(`/admin/conversations/bots${n}`)}async function VY(e){const t=new URLSearchParams;e.q&&e.q.trim()&&t.set("q",e.q.trim()),e.botId&&e.botId.trim()&&t.set("botId",e.botId.trim()),e.channel&&t.set("channel",e.channel),e.mode&&t.set("mode",e.mode),typeof e.page=="number"&&t.set("page",String(e.page)),t.set("pageSize",String(e.pageSize));const n=t.toString()?`?${t.toString()}`:"";return le(`/admin/conversations${n}`)}const Yc=20,GY=[{label:"All channels",value:""},{label:"Web",value:"WEB"},{label:"WhatsApp",value:"WHATSAPP"},{label:"Facebook",value:"FACEBOOK"},{label:"Instagram",value:"INSTAGRAM"}],YY=[{label:"All modes",value:""},{label:"AI",value:"AI"},{label:"Human",value:"HUMAN"}],QY=()=>{const[e,t]=m.useState([]),[n,a]=m.useState(!0),[i,r]=m.useState(null),[o,l]=m.useState(1),[c,d]=m.useState(0),[u,p]=m.useState(""),[h,f]=m.useState(""),[g,v]=m.useState(null),[y,b]=m.useState([]),[x,w]=m.useState(!0),[j,S]=m.useState(null),[k,T]=m.useState(1),[L,F]=m.useState(0),[O,M]=m.useState(""),[P,D]=m.useState(""),E=m.useMemo(()=>c>0?Math.ceil(c/Yc):1,[c]),N=m.useMemo(()=>L>0?Math.ceil(L/Yc):1,[L]),R=m.useCallback(async z=>{const ee=(z==null?void 0:z.pageOverride)??o;a(!0),r(null);try{const J=await KY({q:h||void 0,page:ee,pageSize:Yc});t(J.items),d(J.total),l(J.page)}catch(J){console.error("Failed to load bots:",J),r((J==null?void 0:J.message)||"Failed to load bots")}finally{a(!1)}},[o,h]),C=m.useCallback(async z=>{const ee=(z==null?void 0:z.pageOverride)??k;if(g){w(!0),S(null);try{const J=await VY({botId:g.id,channel:O||void 0,mode:P||void 0,page:ee,pageSize:Yc});b(J.items),F(J.total),T(J.page)}catch(J){console.error("Failed to load conversations:",J),S((J==null?void 0:J.message)||"Failed to load conversations")}finally{w(!1)}}},[k,O,P,g]);m.useEffect(()=>{R()},[h,o,R]),m.useEffect(()=>{C()},[O,P,k,C]);const A=z=>{z.preventDefault(),l(1),f(u.trim())},_=()=>{p(""),f(""),l(1)},B=z=>{v(z),T(1),M(""),D("")},H=()=>{v(null),b([]),F(0),T(1),M(""),D(""),S(null)},Z=z=>{if(!z)return"-";const ee=new Date(z);return Number.isNaN(ee.getTime())?"-":ee.toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})},ie=z=>z.toLocaleString(void 0),U=z=>z?z.length<=4?"****":`${"*".repeat(Math.max(0,z.length-4))}${z.slice(-4)}`:"-",G=k<=1||x,V=k>=N||x,$=o<=1||n,q=o>=E||n;return s.jsxs("div",{className:"page-root",children:[s.jsxs("header",{className:"page-header",children:[s.jsx("h1",{children:"Conversations admin"}),s.jsx("p",{className:"page-subtitle",children:"Review conversations by bot. Start from a bot summary, then drill into individual conversations."})]}),!g&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{"aria-label":"Bot filters",className:"card",children:[s.jsxs("form",{className:"admin-filters-bar",onSubmit:A,children:[s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"bot-search",children:"Search"}),s.jsx("input",{id:"bot-search",className:"input",type:"search",placeholder:"Search by bot name, slug, or owner email",value:u,onChange:z=>p(z.target.value)})]}),s.jsxs("div",{className:"admin-filter-actions",children:[s.jsx("button",{type:"submit",className:"btn-secondary",disabled:n,children:"Apply"}),s.jsx("button",{type:"button",className:"btn-link-small",onClick:_,disabled:n&&!h,children:"Clear"})]})]}),s.jsx("div",{className:"admin-filters-meta",children:s.jsxs("span",{children:["Page ",o," of ",E," - ",ie(c)," bots"]})})]}),n&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"Loading bots..."})}),!n&&i&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:i})}),!n&&!i&&e.length===0&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"No bots match your filters."})}),!n&&!i&&e.length>0&&s.jsxs("section",{"aria-label":"Bots list",className:"card",children:[s.jsx("div",{className:"admin-table-wrapper",children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Bot"}),s.jsx("th",{children:"Owner"}),s.jsx("th",{children:"Conversations"}),s.jsx("th",{children:"Last message"}),s.jsx("th",{"aria-label":"Row actions"})]})}),s.jsx("tbody",{children:e.map(z=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"admin-bot-main",children:[s.jsx("div",{className:"admin-bot-name",children:z.name}),s.jsxs("div",{className:"admin-bot-meta",children:[s.jsxs("span",{className:"admin-bot-slug",children:["/",z.slug]}),s.jsxs("span",{className:"muted",children:["Status ",z.status]})]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-owner-main",children:[s.jsx("div",{className:"admin-owner-email",children:z.owner.email}),z.owner.name&&s.jsx("div",{className:"admin-owner-name",children:z.owner.name})]})}),s.jsx("td",{children:ie(z.conversationCount)}),s.jsx("td",{children:z.lastMessageAt?Z(z.lastMessageAt):"-"}),s.jsx("td",{className:"admin-actions-cell",children:s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>B(z),children:"View conversations"})})]},z.id))})]})}),s.jsxs("footer",{className:"admin-table-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!$&&l(z=>Math.max(1,z-1)),disabled:$,children:"<- Previous"}),s.jsxs("span",{children:["Page ",o," of ",E]}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!q&&l(z=>Math.min(E,z+1)),disabled:q,children:"Next ->"})]})]})]}),g&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{"aria-label":"Conversation filters",className:"card",children:[s.jsxs("div",{className:"admin-filters-bar",children:[s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("div",{className:"admin-filter-label",children:"Selected bot"}),s.jsxs("div",{className:"admin-number-sub",children:[g.name," / ",g.slug]})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"conversation-channel",children:"Channel"}),s.jsx("select",{id:"conversation-channel",className:"select",value:O,onChange:z=>{M(z.target.value),T(1)},children:GY.map(z=>s.jsx("option",{value:z.value,children:z.label},z.label))})]}),s.jsxs("div",{className:"admin-filter-group",children:[s.jsx("label",{className:"admin-filter-label",htmlFor:"conversation-mode",children:"Mode"}),s.jsx("select",{id:"conversation-mode",className:"select",value:P,onChange:z=>{D(z.target.value),T(1)},children:YY.map(z=>s.jsx("option",{value:z.value,children:z.label},z.label))})]}),s.jsx("div",{className:"admin-filter-actions",children:s.jsx("button",{type:"button",className:"btn-secondary",onClick:H,children:"<- Back to bots"})})]}),s.jsx("div",{className:"admin-filters-meta",children:s.jsxs("span",{children:["Page ",k," of ",N," - ",ie(L)," conversations"]})})]}),x&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"Loading conversations..."})}),!x&&j&&s.jsx("div",{className:"card card-error",children:s.jsx("p",{children:j})}),!x&&!j&&y.length===0&&s.jsx("div",{className:"card",children:s.jsx("p",{children:"No conversations match your filters."})}),!x&&!j&&y.length>0&&s.jsxs("section",{"aria-label":"Conversations list",className:"card",children:[s.jsx("div",{className:"admin-table-wrapper",children:s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Conversation"}),s.jsx("th",{children:"Channel / Mode"}),s.jsx("th",{children:"Last message"}),s.jsx("th",{children:"Messages"}),s.jsx("th",{children:"Eval"}),s.jsx("th",{"aria-label":"Row actions"})]})}),s.jsx("tbody",{children:y.map(z=>{const ee=z.mode==="HUMAN"?"status-pill status-pill-warning":"status-pill status-pill-muted",J=z.latestEval?`${z.latestEval.score}/10`:"-";return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[s.jsx("span",{children:U(z.externalUserId)}),s.jsxs("span",{className:"admin-number-sub",children:["ID ",s.jsxs("code",{children:[z.id.slice(0,8),"..."]})]})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[s.jsx("span",{className:"status-pill status-pill-info",children:z.channel}),s.jsx("span",{className:ee,children:z.mode})]})}),s.jsx("td",{children:s.jsxs("div",{className:"admin-status-stack",children:[s.jsx("span",{children:Z(z.lastMessageAt)}),s.jsxs("span",{className:"admin-number-sub",children:["Started ",Z(z.createdAt)]})]})}),s.jsx("td",{children:ie(z.messageCount)}),s.jsx("td",{children:J}),s.jsx("td",{className:"admin-actions-cell",children:s.jsx(de,{to:`/app/conversations/${z.id}`,className:"btn-link-small",children:"View"})})]},z.id)})})]})}),s.jsxs("footer",{className:"admin-table-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!G&&T(z=>Math.max(1,z-1)),disabled:G,children:"<- Previous"}),s.jsxs("span",{children:["Page ",k," of ",N]}),s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>!V&&T(z=>Math.min(N,z+1)),disabled:V,children:"Next ->"})]})]})]})]})};function ZY(e,t,n="default"){const a=t||"__bot__",i=r=>o=>`/onboarding/bots/${encodeURIComponent(o||a)}${r}`;return n==="shopify"?[{key:"bot",label:e("onboardingLayout.steps.bot","1. Create bot"),description:e("onboardingLayout.steps.botDescription","Name your assistant and choose how customers will see it."),path:()=>"/onboarding/bots/new"},{key:"shopify",label:e("onboardingLayout.steps.shopify","2. Shopify sync"),description:e("onboardingLayout.steps.shopifyDescription","Link your Shopify store and sync products."),path:i("/shopify")},{key:"channels",label:e("onboardingLayout.steps.channels","3. Channels"),description:e("onboardingLayout.steps.channelsDescription","Connect WhatsApp, Facebook, Instagram or your website."),path:i("/channels")},{key:"booking",label:e("onboardingLayout.steps.booking","4. Bookings"),description:e("onboardingLayout.steps.bookingDescription","Let Coslo propose and book meetings directly from chat."),path:i("/booking")},{key:"leadAds",label:e("onboardingLayout.steps.leadAds","5. Lead Ads"),description:e("onboardingLayout.steps.leadAdsDescription","Sync your Facebook Lead Ads and send WhatsApp messages automatically."),path:i("/lead-ads")},{key:"plan",label:e("onboardingLayout.steps.plan","6. Plan & billing"),description:e("onboardingLayout.steps.planDescription","Review configuration, pick your plan and start using Coslo."),path:i("/plan")}]:[{key:"bot",label:e("onboardingLayout.steps.bot","1. Create bot"),description:e("onboardingLayout.steps.botDescription","Name your assistant and choose how customers will see it."),path:()=>"/onboarding/bots/new"},{key:"channels",label:e("onboardingLayout.steps.channels","2. Channels"),description:e("onboardingLayout.steps.channelsDescription","Connect WhatsApp, Facebook, Instagram or your website."),path:i("/channels")},{key:"booking",label:e("onboardingLayout.steps.booking","3. Bookings"),description:e("onboardingLayout.steps.bookingDescription","Let Coslo propose and book meetings directly from chat."),path:i("/booking")},{key:"leadAds",label:e("onboardingLayout.steps.leadAds","4. Lead Ads"),description:e("onboardingLayout.steps.leadAdsDescription","Sync your Facebook Lead Ads and send WhatsApp messages automatically."),path:i("/lead-ads")},{key:"plan",label:e("onboardingLayout.steps.plan","5. Plan & billing"),description:e("onboardingLayout.steps.planDescription","Review configuration, pick your plan and start using Coslo."),path:i("/plan")},{key:"knowledge",label:e("onboardingLayout.steps.knowledge","6. Knowledge"),description:e("onboardingLayout.steps.knowledgeDescription","Let Coslo learn from your website so it can answer detailed questions."),path:i("/knowledge")}]}const is=({currentStep:e,botId:t,title:n,subtitle:a,children:i,layout:r,rightAction:o,flow:l="default"})=>{const{t:c}=Le(),d=ZY(c,t,l),u=d.findIndex(f=>f.key===e),p=d.length,h=(r??"split")==="full";return s.jsx("section",{className:"auth-landing",children:s.jsx("div",{className:"lp-container",children:s.jsxs("div",{className:"auth-layout-onboarding",children:[s.jsxs("header",{className:"onboarding-header",children:[s.jsx("div",{className:"onboarding-header-top",children:s.jsx("p",{className:"auth-eyebrow",children:c("onboardingLayout.eyebrow","Guided onboarding  {current}/{total}").replace("{current}",String(u+1)).replace("{total}",String(p))})}),s.jsx("ol",{className:"onboarding-steps",children:d.map((f,g)=>{const v=f.key===e,y=g<u,b=g>u,x=["onboarding-step",v&&"onboarding-step--active",y&&"onboarding-step--done",b&&"onboarding-step--future"].filter(Boolean).join(" "),w=f.key==="bot"||!!t,j=s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"onboarding-step-index",children:y?"":g+1}),s.jsxs("div",{className:"onboarding-step-text",children:[s.jsx("div",{className:"onboarding-step-label",children:f.label}),s.jsx("div",{className:"onboarding-step-description",children:f.description})]})]});if(!w)return s.jsx("li",{className:x,children:s.jsx("div",{className:"onboarding-step-inner onboarding-step-inner--disabled",children:j})},f.key);const S=f.key==="bot"?f.path("__ignored__"):f.path(t);return s.jsx("li",{className:x,children:s.jsx(de,{className:"onboarding-step-inner",to:S,children:j})},f.key)})})]}),s.jsxs("div",{className:h?"onboarding-main onboarding-main--full":"onboarding-main",children:[s.jsxs("div",{className:h?"onboarding-main-copy onboarding-main-copy--full":"onboarding-main-copy",children:[s.jsx("h1",{className:"auth-title",children:n}),a&&s.jsx("p",{className:"auth-subtitle",children:a}),s.jsx("div",{className:"onboarding-title-row",children:o&&s.jsx("div",{className:"onboarding-header-actions",children:o})})]}),s.jsx("div",{className:h?"auth-card onboarding-card onboarding-main-card onboarding-main-card--full":"auth-card onboarding-card onboarding-main-card",children:i})]})]})})})},XY=()=>{const{t:e}=Le(),t=Bt(),n=lt(),i=Ll(n.search)||Rv(),r=Zk(n.search)||!!i,[o,l]=m.useState({name:"",slug:"",description:""}),[c,d]=m.useState(!1),[u,p]=m.useState(null),h=g=>v=>{const y=v.target.value;l(b=>({...b,[g]:y}))},f=async g=>{g.preventDefault(),p(null),d(!0);try{const v={name:o.name.trim(),slug:o.slug.trim(),description:o.description.trim()||void 0,channelWeb:!0,knowledgeSource:"RAG",useDomainCrawler:!0,usePdfCrawler:!0},y=await aP(v);if(r&&i){_v(y.id,i),vi(),t(`/onboarding/bots/${encodeURIComponent(y.id)}/shopify?shop=${encodeURIComponent(i)}&shopify=1`);return}t(`/onboarding/bots/${encodeURIComponent(y.id)}/channels`)}catch(v){console.error(v),p((v==null?void 0:v.message)||e("botCreate.errors.createFailed","Unable to create the bot. Please try again."))}finally{d(!1)}};return s.jsx(is,{currentStep:"bot",flow:r?"shopify":"default",title:e("botCreate.onboarding.title","Create your first Coslo bot"),subtitle:e("botCreate.onboarding.subtitle","Give your assistant a name and a short description. You can change this later."),children:s.jsxs("form",{className:"form",onSubmit:f,children:[u&&s.jsx("div",{className:"form-error onboarding-form-error-txt",children:u}),s.jsx("p",{className:"muted",style:{marginBottom:"1rem"},children:e("botCreate.onboarding.intro","This information is used in the dashboard and in your internal tools, not in the public widget.")}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botCreate.fields.name","Bot name")}),s.jsx("input",{type:"text",value:o.name,onChange:h("name"),required:!0,placeholder:e("botCreate.onboarding.namePlaceholder","e.g. Acme Support Assistant")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botCreate.fields.slug","Bot slug")}),s.jsx("input",{type:"text",value:o.slug,onChange:h("slug"),required:!0,placeholder:e("botCreate.onboarding.slugPlaceholder","e.g. acme-support")}),s.jsx("small",{children:e("botCreate.fields.slugHelp","Used in URLs and widget embedding. Lowercase, letters and dashes.")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:e("botCreate.fields.description","Short description")}),s.jsx("textarea",{value:o.description,onChange:h("description"),rows:2,placeholder:e("botCreate.onboarding.descriptionPlaceholder","Optional. A short sentence about what this bot does.")})]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{className:"btn-primary",type:"submit",disabled:c||!o.name.trim()||!o.slug.trim(),children:c?e("botCreate.actions.creating","Creating"):e("botCreate.actions.create","Create bot and continue")})})]})})},aN=/^[a-z0-9][a-z0-9-]*\.myshopify\.com$/,JY=()=>{const{id:e}=St(),t=lt(),n=Bt(),{t:a}=Le(),[i,r]=m.useState(!0),[o,l]=m.useState(null),[c,d]=m.useState(!1),[u,p]=m.useState(!1),[h,f]=m.useState(!1),[g,v]=m.useState([]),[y,b]=m.useState(""),[x,w]=m.useState(!1),[j,S]=m.useState(!1),k=Il(),T=Ll(t.search),L=m.useMemo(()=>T||(k==null?void 0:k.shopDomain)||"",[T,k==null?void 0:k.shopDomain]);m.useEffect(()=>{e&&(r(!0),l(null),wt(e).then(async A=>{if(L&&(_v(e,L),b(L)),A.knowledgeSource!=="SHOPIFY"||A.useDomainCrawler||A.usePdfCrawler)try{await ln(e,{knowledgeSource:"SHOPIFY",useDomainCrawler:!1,usePdfCrawler:!1})}catch(_){console.error("Failed to update bot knowledge source",_)}}).catch(A=>{console.error(A),l((A==null?void 0:A.message)||a("shopifyOnboarding.errors.loadBot","Unable to load this bot right now."))}).finally(()=>r(!1)))},[e,L,a]);const F=async()=>{if(e){d(!0);try{const _=(await cl(e)).items||[];v(_);const B=_.find(H=>H.isActive)||_[0];B!=null&&B.shopDomain&&!y&&b(B.shopDomain)}catch(A){console.error(A)}finally{d(!1)}}};m.useEffect(()=>{e&&F().catch(()=>{})},[e]);const O=g.find(A=>A.isActive)||g[0]||null,M=!!(O!=null&&O.shopDomain),P=!!(O!=null&&O.lastProductsSyncAt);m.useEffect(()=>{if(!(!e||!L)&&!j){if(M&&(O!=null&&O.shopDomain)){S(!0);return}y||b(L),S(!0),D(L).catch(()=>{})}},[e,L,M,O==null?void 0:O.shopDomain,j]);const D=async A=>{var B;if(!e)return;const _=(A||y).trim().toLowerCase();if(!aN.test(_)){l(a("shopifyPage.errors.invalidShop","Enter a valid .myshopify.com domain (e.g. mystore.myshopify.com)."));return}p(!0),l(null),w(!1);try{await Af(_,e),await F()}catch(H){console.error(H),(B=H==null?void 0:H.message)!=null&&B.includes("already linked")?(w(!0),l(a("shopifyOnboarding.errors.linkedToOther","This Shopify store is already linked to another Coslo account. Please unlink it first."))):l((H==null?void 0:H.message)||a("shopifyPage.errors.linkFailed","Failed to link shop."))}finally{p(!1)}},E=()=>{if(!e)return;const A=y.trim().toLowerCase();if(!aN.test(A)){l(a("shopifyPage.errors.invalidShop","Enter a valid .myshopify.com domain (e.g. mystore.myshopify.com)."));return}const _=`${window.location.pathname}${window.location.search}`,B=`${ma}/shopify/install?shop=${encodeURIComponent(A)}&botId=${encodeURIComponent(e)}&returnTo=${encodeURIComponent(_)}`;window.location.href=B},N=async()=>{if(O){f(!0),l(null);try{await Wv(O.shopDomain),await F()}catch(A){console.error(A),l((A==null?void 0:A.message)||a("shopifyPage.errors.syncFailed","Product sync failed."))}finally{f(!1)}}},R=()=>{if(!e)return;const A=qr(y||L||"");n(`/onboarding/bots/${encodeURIComponent(e)}/channels${A}`)},C=c?a("shopifyPage.loading","Loading Shopify integration..."):M?a("shopifyPage.status.active","Active"):a("shopifyPage.status.inactive","Inactive");return s.jsx(is,{currentStep:"shopify",botId:e,flow:"shopify",title:a("shopifyOnboarding.title","Connect your Shopify store"),subtitle:a("shopifyOnboarding.subtitle","We detected a Shopify install. Link the store to this bot and sync products."),layout:"full",children:i?s.jsx("p",{className:"muted",children:a("common.loading","Loading")}):s.jsxs("div",{className:"shopify-page",children:[o&&s.jsx("div",{className:"alert alert-warn",children:o}),s.jsx("div",{className:"shopify-grid",children:s.jsxs("section",{className:"detail-main shopify-card",children:[s.jsxs("div",{className:"shopify-card-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:a("shopifyPage.connect.title","Connect your store")}),s.jsx("p",{className:"muted",children:a("shopifyPage.connect.subtitle","Install the app on your Shopify store and link it to this assistant.")})]}),s.jsx("span",{className:"status-badge "+(M?"status-badge-ok":"status-badge-warn"),children:C})]}),s.jsxs("div",{className:"shopify-install-form",children:[s.jsxs("label",{className:"form-field shopify-inline-field",children:[s.jsx("span",{children:a("shopifyPage.connect.shopDomain","Shop domain")}),s.jsx("input",{type:"text",value:y,onChange:A=>b(A.target.value),placeholder:a("shopifyPage.connect.shopPlaceholder","mystore.myshopify.com"),disabled:!!L})]}),!M&&s.jsxs("div",{className:"shopify-actions",children:[s.jsx("button",{type:"button",className:"btn-primary",onClick:D,disabled:u||x,children:u?a("shopifyPage.actions.redirecting","Redirecting..."):a("shopifyOnboarding.actions.link","Link shop")}),s.jsx("button",{type:"button",className:"btn-secondary btn-color",onClick:E,disabled:u||x,children:a("shopifyPage.actions.install","Install / Update app")})]})]}),O&&s.jsxs("div",{className:"shopify-summary",children:[s.jsxs("div",{className:"shopify-summary-row",children:[s.jsx("span",{className:"shopify-summary-label",children:a("shopifyPage.summary.connectedShop","Connected shop")}),s.jsx("span",{children:O.shopDomain})]}),s.jsxs("div",{className:"shopify-summary-row",children:[s.jsx("span",{className:"shopify-summary-label",children:a("shopifyPage.summary.catalog","Catalog cache")}),s.jsxs("span",{children:[a("shopifyPage.summary.products","Products"),":"," ",O.productCount," -"," ",a("shopifyPage.summary.variants","Variants"),":"," ",O.variantCount]})]}),s.jsxs("div",{className:"shopify-summary-row",children:[s.jsx("span",{className:"shopify-summary-label",children:a("shopifyPage.summary.lastSync","Last sync")}),s.jsx("span",{children:O.lastProductsSyncAt?new Date(O.lastProductsSyncAt).toLocaleString():a("shopifyPage.summary.neverSynced","Never")})]})]}),M&&s.jsx("div",{className:"shopify-actions",children:s.jsx("button",{type:"button",className:"btn-primary",onClick:N,disabled:!O||h,children:h?a("shopifyPage.actions.syncing","Syncing..."):a("shopifyPage.actions.sync","Sync products")})})]})}),s.jsxs("div",{className:"onboarding-form-actions",style:{marginTop:"1.2rem"},children:[s.jsx("button",{className:"btn-secondary btn-color",type:"button",onClick:()=>n(-1),children:a("common.back","Back")}),s.jsx("button",{className:"btn-primary",type:"button",onClick:R,disabled:!P||x,children:a("shopifyOnboarding.actions.continue","Continue to channels")})]}),!P&&s.jsx("p",{className:"muted",style:{marginTop:"0.75rem"},children:a("shopifyOnboarding.syncHint","Sync products to continue with onboarding.")})]})})},$u={channelWeb:!0};function eQ(e){const t=n=>e.some(a=>a.type===n);return{channelWhatsapp:t("WHATSAPP"),channelMessenger:t("FACEBOOK"),channelInstagram:t("INSTAGRAM")}}const sN=7*24*60*60*1e3;function tQ(e){return e==="FACEBOOK"||e==="INSTAGRAM"}const nQ=()=>{var se;const{id:e}=St(),t=lt(),n=Bt(),{t:a}=Le();m.useEffect(()=>{Ml(e,t.search)},[e,t.search]);const i=Il(),r=Ol(e),o=r?qr(i==null?void 0:i.shopDomain):"",[l,c]=m.useState([]),[d,u]=m.useState(!0),[p,h]=m.useState(null),[f,g]=m.useState(!0),[v,y]=m.useState(!0),[b,x]=m.useState(null),[w,j]=m.useState(!1),[S,k]=m.useState(null),[T,L]=m.useState(""),[F,O]=m.useState(!1),[M,P]=m.useState(!1),[D,E]=m.useState(null),[N,R]=m.useState(!1),[C,A]=m.useState(!1),[_,B]=m.useState(null),[H,Z]=m.useState(""),[ie,U]=m.useState(!1),[G,V]=m.useState(!1),[$,q]=m.useState(""),[z,ee]=m.useState(!1),J=()=>{e&&(u(!0),h(null),Pi(e).then(K=>c(K)).catch(K=>{console.error(K),h((K==null?void 0:K.message)||a("botChannels.errors.loadFailed"))}).finally(()=>u(!1)))},X=()=>{const K=new URLSearchParams(t.search);K.has("metaSessionId")&&(K.delete("metaSessionId"),n({pathname:t.pathname,search:K.toString()},{replace:!0}))},ne=()=>{const oe=new URLSearchParams(t.search).get("metaSessionId");if(!oe){x(null),k(null),L(""),P(!1);return}j(!0),k(null),pP(oe).then(Ce=>{x(Ce),L(""),P(!0)}).catch(Ce=>{console.error(Ce),k((Ce==null?void 0:Ce.message)||a("botChannels.errors.metaSessionLoad")),x(null),P(!1)}).finally(()=>j(!1))};m.useEffect(()=>{J()},[e]),m.useEffect(()=>{ne()},[t.search]);const ue=K=>{E(K),R(!1),A(!1)},fe=()=>{E(null),R(!1),A(!1)},we=async()=>{if(!(!e||!D)){A(!0),h(null);try{const K=`/onboarding/bots/${encodeURIComponent(e)}/channels`,{url:oe}=await uP(e,D,K);window.location.href=oe}catch(K){console.error(K);const oe=D==="FACEBOOK"?"botChannels.errors.facebookConnectFailed":"botChannels.errors.instagramConnectFailed";h((K==null?void 0:K.message)||a(oe)),A(!1)}}},Ae=()=>{P(!1),x(null),L(""),X()},Q=async()=>{if(!(!b||!T)){O(!0),h(null);try{await mP(b.id,T),x(null),L(""),X(),P(!1),J()}catch(K){console.error(K),h((K==null?void 0:K.message)||a("botChannels.errors.metaAttachFailed"))}finally{O(!1)}}},be=async()=>{if(!e)return;h(null),U(!0);const K="1465664871200825",oe="927419609614257",Ce="https://coslo.it/app/bots";try{const $e=window.localStorage.getItem("wa_last_connect_ts");if($e){const Ne=parseInt($e,10);if(Date.now()-Ne<sN&&!window.confirm(a("botChannels.whatsapp.confirmReconnectWithinWeek","You recently connected WhatsApp. Start a new embedded signup anyway?"))){U(!1);return}}(await SP(K)).login(Ne=>{(async()=>{if(!Ne||!Ne.authResponse||!Ne.authResponse.code){h(a("botChannels.errors.whatsappCancelled")),U(!1);return}const mt=Ne.authResponse.code;try{const Nt=await hP(e,{code:mt,redirectUri:Ce});B(Nt),Z(""),q("")}catch(Nt){console.error(Nt),h((Nt==null?void 0:Nt.message)||a("botChannels.errors.whatsappSignupFailed"))}finally{U(!1)}})()},{config_id:oe,redirect_uri:Ce,response_type:"code",override_default_response_type:!0}),window.localStorage.setItem("wa_last_connect_ts",Date.now().toString())}catch($e){console.error($e),h(($e==null?void 0:$e.message)||a("botChannels.errors.whatsappInitFailed")),U(!1)}},Oe=async()=>{if(!(!_||!H)){V(!0),h(null);try{await fP(_.sessionId,H,$||void 0),B(null),Z(""),q(""),J()}catch(K){console.error(K),h((K==null?void 0:K.message)||a("botChannels.errors.whatsappAttachFailed"))}finally{V(!1)}}},Ie=async K=>{if(e&&window.confirm(a("botChannels.confirm.deleteChannel"))){h(null);try{await dP(e,K),J()}catch(oe){console.error(oe),h((oe==null?void 0:oe.message)||a("botChannels.errors.deleteFailed"))}}},We=K=>{if(!K)return{label:a("botChannels.status.notConnected"),className:"status-badge newstatus-badge-warn",isConnected:!1};const oe=K.meta||{};if(!tQ(K.type))return oe.needsReconnect===!0?{label:a("botChannels.status.needsReconnect"),className:"status-badge newstatus-badge-error",isConnected:!1}:{label:a("botChannels.status.active"),className:"status-badge newstatus-badge-ok",isConnected:!0};const Ce=Date.now(),$e=oe.needsReconnect===!0,Se=oe.tokenExpiresAt;let Ne=null;if(Se){const Nt=new Date(Se);isNaN(Nt.getTime())||(Ne=Nt)}if($e)return{label:a("botChannels.status.needsReconnect"),className:"status-badge newstatus-badge-error",isConnected:!1};if(!Ne)return{label:a("botChannels.status.connectedUnknownExpiry"),className:"status-badge newstatus-badge-ok",isConnected:!0};const mt=Ne.getTime()-Ce;return mt<=0?{label:a("botChannels.status.expired"),className:"status-badge newstatus-badge-error",isConnected:!1}:mt<=sN?{label:a("botChannels.status.expiringSoon"),className:"status-badge newstatus-badge-warn",isConnected:!1}:{label:a("botChannels.status.connected"),className:"status-badge newstatus-badge-ok",isConnected:!0}},ze=K=>{const{label:oe,className:Ce}=We(K);return s.jsx("span",{className:Ce,children:oe})},ke=l.find(K=>K.type==="FACEBOOK")||null,qe=l.find(K=>K.type==="INSTAGRAM")||null,Ee=l.find(K=>K.type==="WHATSAPP")||null,I=We(ke),Y=We(qe),W=We(Ee),ae=f&&(I.isConnected||Y.isConnected),pe=v&&W.isConnected,Te=ae||pe,he=async()=>{if(!(!e||!Te)){ee(!0);try{const K=await Pi(e),oe=eQ(K);await ln(e,{...$u,channelWhatsapp:v?oe.channelWhatsapp:!1,channelMessenger:f?oe.channelMessenger:!1,channelInstagram:f?oe.channelInstagram:!1}),n(`/onboarding/bots/${encodeURIComponent(e)}/booking${o}`)}catch(K){console.error("Failed to save channel features",K)}finally{ee(!1)}}},_e=async()=>{if(e){ee(!0);try{await ln(e,{...$u,channelWhatsapp:!1,channelMessenger:!1,channelInstagram:!1}),n(`/onboarding/bots/${encodeURIComponent(e)}/booking${o}`)}catch(K){console.error("Failed to skip channels",K)}finally{ee(!1)}}};if(!e)return s.jsx(is,{currentStep:"channels",title:a("botChannels.onboarding.channels.title","Where should Coslo talk with your customers?"),children:s.jsx("p",{className:"muted",children:a("botChannels.missingId")})});const Wt=/^\d{6}$/.test($);return s.jsx(is,{currentStep:"channels",botId:e,flow:r?"shopify":"default",title:a("botChannels.onboarding.channels.title","Where should Coslo talk with your customers?"),subtitle:a("botChannels.onboarding.channels.subtitle","Connect at least one channel now. You can always add more later from the dashboard."),layout:"full",children:s.jsxs("div",{className:"page",style:{margin:0,padding:0},children:[s.jsx("div",{className:"onboarding-section-header",children:s.jsx("button",{type:"button",className:"btn-secondary btn-color",onClick:_e,disabled:z,children:a("botChannels.onboarding.common.skip","Skip for now")})}),D&&s.jsx("div",{className:"meta-permissions-modal-backdrop",children:s.jsxs("div",{className:"meta-permissions-modal",children:[s.jsxs("div",{className:"meta-permissions-modal-header",children:[s.jsx("h2",{children:a(D==="FACEBOOK"?"botChannels.meta.permissionsDialog.titleFacebook":"botChannels.meta.permissionsDialog.titleInstagram")}),s.jsx("button",{type:"button",className:"btn-ghost small",onClick:fe,children:a("botChannels.actions.cancel")})]}),s.jsxs("div",{className:"meta-permissions-modal-body",children:[s.jsx("p",{className:"muted",children:a(D==="FACEBOOK"?"botChannels.meta.permissionsDialog.introFacebook":"botChannels.meta.permissionsDialog.introInstagram")}),s.jsx("p",{className:"meta-permissions-list-title",children:a("botChannels.meta.permissionsDialog.listTitle")}),D==="FACEBOOK"?s.jsxs("ul",{className:"meta-permissions-list",children:[s.jsx("li",{children:a("botChannels.meta.permissionsDialog.facebook.pagesShowList")}),s.jsx("li",{children:a("botChannels.meta.permissionsDialog.facebook.pagesMessaging")}),s.jsx("li",{children:a("botChannels.meta.permissionsDialog.facebook.pagesManageMetadata")}),s.jsx("li",{children:a("botChannels.meta.permissionsDialog.facebook.businessManagement")})]}):s.jsxs("ul",{className:"meta-permissions-list",children:[s.jsx("li",{children:a("botChannels.meta.permissionsDialog.instagram.pagesShowList")}),s.jsx("li",{children:a("botChannels.meta.permissionsDialog.instagram.instagramBasic")}),s.jsx("li",{children:a("botChannels.meta.permissionsDialog.instagram.instagramManageMessages")}),s.jsx("li",{children:a("botChannels.meta.permissionsDialog.instagram.pagesManageMetadata")}),s.jsx("li",{children:a("botChannels.meta.permissionsDialog.instagram.businessManagement")})]}),s.jsxs("label",{className:"checkbox-inline",style:{marginTop:"0.75rem"},children:[s.jsx("input",{type:"checkbox",checked:N,onChange:K=>R(K.target.checked)}),s.jsx("span",{children:a("botChannels.meta.permissionsDialog.checkboxLabel")})]}),s.jsx("p",{className:"muted small",style:{marginTop:"0.5rem"},children:a("botChannels.meta.permissionsDialog.footerNote")})]}),s.jsxs("div",{className:"meta-permissions-modal-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:fe,children:a("botChannels.actions.cancel")}),s.jsx("button",{type:"button",className:"btn-primary",disabled:!N||C,onClick:we,children:a(D==="FACEBOOK"?"botChannels.meta.permissionsDialog.continueFacebook":"botChannels.meta.permissionsDialog.continueInstagram")})]})]})}),b&&M&&s.jsx("div",{className:"meta-page-select-modal-backdrop",children:s.jsxs("div",{className:"meta-page-select-modal",children:[s.jsxs("div",{className:"meta-page-select-modal-header",children:[s.jsx("h2",{children:b.channelType==="FACEBOOK"?a("botChannels.meta.selectModal.titleFacebook"):a("botChannels.meta.selectModal.titleInstagram")}),s.jsx("button",{type:"button",className:"btn-ghost small",onClick:Ae,children:a("botChannels.actions.cancel")})]}),s.jsxs("div",{className:"meta-page-select-modal-body",children:[s.jsx("p",{className:"muted",children:b.channelType==="FACEBOOK"?a("botChannels.meta.selectModal.introFacebook"):a("botChannels.meta.selectModal.introInstagram")}),w&&s.jsx("p",{className:"muted",children:a("botChannels.meta.loadingPages")}),S&&s.jsxs("div",{className:"form-error onboarding-form-error-txt",children:[a("botChannels.meta.sessionLoadFailed"),":"," ",S]}),!w&&!S&&(()=>{const K=b.pages.filter(Ne=>b.channelType==="INSTAGRAM"?!!Ne.instagramBusinessId:!0),oe=K.filter(Ne=>!Ne.isBusinessManaged),Ce=K.filter(Ne=>Ne.isBusinessManaged),$e=b.pages&&b.pages.length>0,Se=b.channelType==="INSTAGRAM"&&$e&&K.length===0;return K.length===0?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"muted",children:a("botChannels.meta.selectModal.noPages")}),Se&&s.jsx("p",{className:"muted small",style:{marginTop:"0.5rem"},children:a("botChannels.meta.selectModal.editPreviousSettingsHint")})]}):s.jsxs(s.Fragment,{children:[oe.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"meta-page-select-group-title",children:a("botChannels.meta.selectModal.personalGroupTitle")}),s.jsx("div",{className:"meta-page-select-list",children:oe.map(Ne=>s.jsxs("label",{className:"meta-page-select-item"+(T===Ne.id?" selected":""),children:[s.jsx("input",{type:"radio",name:"meta-page-select",value:Ne.id,checked:T===Ne.id,onChange:()=>L(Ne.id)}),s.jsx("span",{className:"meta-page-select-name",children:Ne.name})]},Ne.id))})]}),Ce.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"meta-page-select-group-title",children:a("botChannels.meta.selectModal.businessGroupTitle")}),s.jsx("div",{className:"meta-page-select-list",children:Ce.map(Ne=>s.jsxs("label",{className:"meta-page-select-item"+(T===Ne.id?" selected":""),children:[s.jsx("input",{type:"radio",name:"meta-page-select",value:Ne.id,checked:T===Ne.id,onChange:()=>L(Ne.id)}),s.jsxs("span",{className:"meta-page-select-name",children:[Ne.name,Ne.businessName?` (${Ne.businessName})`:""]})]},Ne.id))})]})]})})()]}),s.jsxs("div",{className:"meta-page-select-modal-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:Ae,children:a("botChannels.actions.cancel")}),s.jsx("button",{type:"button",className:"btn-primary",disabled:!T||F,onClick:Q,children:a(F?"botChannels.actions.connecting":"botChannels.actions.connectSelected")})]})]})}),_&&s.jsx("div",{className:"meta-page-select-modal-backdrop",children:s.jsxs("div",{className:"meta-page-select-modal",children:[s.jsxs("div",{className:"meta-page-select-modal-header",children:[s.jsx("h2",{children:a("botChannels.whatsapp.pinModal.title","Connect WhatsApp Business")}),s.jsx("button",{type:"button",className:"btn-ghost small",onClick:()=>{B(null),Z(""),q("")},children:a("botChannels.actions.cancel")})]}),s.jsxs("div",{className:"meta-page-select-modal-body",children:[s.jsx("p",{className:"muted",children:a("botChannels.whatsapp.pinModal.intro","Select the WhatsApp Business phone number you want to connect and enter the two-step verification PIN for that number.")}),s.jsx("p",{className:"muted small",style:{marginTop:"0.5rem"},children:a("botChannels.whatsapp.pinModal.whatIsPin","This PIN is the 6-digit two-step verification PIN configured for this phone number in WhatsApp Manager, not your Google Authenticator code or login 2FA.")}),s.jsxs("ol",{className:"muted small",style:{marginTop:"0.75rem"},children:[s.jsx("li",{children:a("botChannels.whatsapp.pinModal.step1","Open WhatsApp Manager and go to Account tools  Phone numbers.")}),s.jsx("li",{children:a("botChannels.whatsapp.pinModal.step2","Click the gear icon next to your phone number and open Two-step verification.")}),s.jsx("li",{children:a("botChannels.whatsapp.pinModal.step3","If you don't remember the PIN, turn off two-step verification from there (you'll get an email), then set a new 6-digit PIN.")}),s.jsx("li",{children:a("botChannels.whatsapp.pinModal.step4","Come back here and enter that exact 6-digit PIN.")})]}),s.jsxs("label",{className:"form-field",style:{marginTop:"1rem"},children:[s.jsx("span",{children:a("botChannels.whatsapp.numberLabel")}),s.jsxs("select",{value:H,onChange:K=>Z(K.target.value),children:[s.jsx("option",{value:"",children:a("botChannels.whatsapp.selectPlaceholder")}),_.numbers.map(K=>s.jsxs("option",{value:K.id,children:[K.displayPhoneNumber||K.id,K.verifiedName?`  ${K.verifiedName}`:""]},K.id))]})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:a("botChannels.whatsapp.pinLabel","WhatsApp two-step verification PIN")}),s.jsx("input",{type:"text",maxLength:6,value:$,onChange:K=>q(K.target.value.replace(/\D/g,"")),placeholder:a("botChannels.whatsapp.pinPlaceholder","6-digit PIN set in WhatsApp Manager")}),s.jsx("p",{className:"muted small",style:{marginTop:"0.25rem"},children:a("botChannels.whatsapp.pinModal.pinHint","Enter exactly the same 6-digit PIN you see under Two-step verification for this phone number in WhatsApp Manager.")})]})]}),s.jsxs("div",{className:"meta-page-select-modal-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{B(null),Z(""),q("")},children:a("botChannels.actions.cancel")}),s.jsx("button",{type:"button",className:"btn-primary",disabled:!H||!Wt||G,onClick:Oe,children:a(G?"botChannels.actions.connecting":"botChannels.actions.connectSelected")})]})]})}),p&&s.jsx("div",{className:"form-error",children:p}),d&&s.jsx("p",{className:"muted",children:a("botChannels.loading")}),!d&&s.jsxs("div",{className:"connect-grid",children:[s.jsxs("section",{className:"connect-card",children:[s.jsxs("header",{className:"connect-card-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:a("botChannels.onboarding.channels.meta.title","Meta inbox (Facebook & Instagram)")}),s.jsx("p",{className:"connect-card-subtitle",children:a("botChannels.onboarding.channels.meta.subtitle","Connect your Facebook page and Instagram Business account so Coslo can reply to messages automatically.")})]}),s.jsxs("div",{className:"connect-card-toggle",children:[s.jsxs("label",{className:"booking-toggle",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:K=>g(K.target.checked)}),s.jsx("span",{className:"booking-toggle-slider"}),s.jsx("span",{className:"booking-toggle-label",children:f?a("botChannels.onboarding.channels.meta.toggleOn","Meta inbox is ON"):a("botChannels.onboarding.channels.meta.toggleOff","Meta inbox is OFF")})]}),!f&&s.jsx("p",{className:"muted small",children:a("botChannels.onboarding.channels.meta.toggleOffHint","Keep Meta inbox disabled if you don't want Coslo to reply on Facebook or Instagram for this bot.")})]})]}),f?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"connect-channel",children:[s.jsxs("div",{className:"connect-channel-main",children:[s.jsx("div",{className:"connect-channel-icon connect-channel-icon-facebook",children:"f"}),s.jsxs("div",{className:"connect-channel-text",children:[s.jsxs("div",{className:"connect-channel-title-row",children:[s.jsx("span",{className:"connect-channel-title",children:a("botChannels.labels.facebookPage")}),ze(ke)]}),s.jsx("p",{className:"connect-channel-description",children:a("botChannels.connectSocial.facebookDesc")}),ke&&s.jsxs("p",{className:"connect-channel-meta",children:[a("botChannels.connectSocial.connectedPage")," ",s.jsx("strong",{children:((se=ke.meta)==null?void 0:se.pageName)||a("botChannels.meta.connectedViaMeta")})]})]})]}),s.jsxs("div",{className:"connect-channel-actions",children:[!I.isConnected&&s.jsx("button",{type:"button",className:"btn-primary btn-sm",onClick:()=>ue("FACEBOOK"),children:a(ke?"botChannels.actions.reconnectFacebook":"botChannels.actions.connectFacebook")}),ke&&s.jsx("button",{type:"button",className:"btn-secondary btn-sm btn-color",onClick:()=>Ie(ke.id),children:a("botChannels.actions.disconnect")})]})]}),s.jsxs("div",{className:"connect-channel",children:[s.jsxs("div",{className:"connect-channel-main",children:[s.jsx("div",{className:"connect-channel-icon connect-channel-icon-instagram",children:"ig"}),s.jsxs("div",{className:"connect-channel-text",children:[s.jsxs("div",{className:"connect-channel-title-row",children:[s.jsx("span",{className:"connect-channel-title",children:a("botChannels.labels.instagramBusiness")}),ze(qe)]}),s.jsx("p",{className:"connect-channel-description",children:a("botChannels.connectSocial.instagramDesc")}),qe&&s.jsxs("p",{className:"connect-channel-meta",children:[a("botChannels.connectSocial.connectedAccount")," ",s.jsx("strong",{children:(()=>{const K=qe.meta||{};return K.igUsername||K.igName||K.pageName||a("botChannels.meta.connectedViaMeta")})()})]})]})]}),s.jsxs("div",{className:"connect-channel-actions",children:[!Y.isConnected&&s.jsx("button",{type:"button",className:"btn-primary btn-sm",onClick:()=>ue("INSTAGRAM"),children:a(qe?"botChannels.actions.reconnectInstagram":"botChannels.actions.connectInstagram")}),qe&&s.jsx("button",{type:"button",className:"btn-secondary btn-sm btn-color",onClick:()=>Ie(qe.id),children:a("botChannels.actions.disconnect")})]})]})]}):s.jsx("p",{className:"muted small",style:{marginTop:"0.75rem"},children:a("botChannels.onboarding.channels.meta.disabledBody","Meta inbox is disabled for this bot. Turn it on above if you want to connect Facebook or Instagram.")})]}),s.jsxs("section",{className:"connect-card",children:[s.jsxs("header",{className:"connect-card-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:a("botChannels.onboarding.channels.whatsapp.title","WhatsApp Business (embedded signup)")}),s.jsx("p",{className:"connect-card-subtitle",children:a("botChannels.onboarding.channels.whatsapp.subtitle","Connect a WhatsApp Business number using the official Meta embedded signup flow.")})]}),s.jsxs("div",{className:"connect-card-toggle",children:[s.jsxs("label",{className:"booking-toggle",children:[s.jsx("input",{type:"checkbox",checked:v,onChange:K=>y(K.target.checked)}),s.jsx("span",{className:"booking-toggle-slider"}),s.jsx("span",{className:"booking-toggle-label",children:v?a("botChannels.onboarding.channels.whatsapp.toggleOn","WhatsApp is ON"):a("botChannels.onboarding.channels.whatsapp.toggleOff","WhatsApp is OFF")})]}),!v&&s.jsx("p",{className:"muted small",children:a("botChannels.onboarding.channels.whatsapp.toggleOffHint","Keep WhatsApp disabled if you don't want Coslo to send messages on WhatsApp for this bot.")})]})]}),v?s.jsxs("div",{className:"connect-channel",children:[s.jsxs("div",{className:"connect-channel-main",children:[s.jsx("div",{className:"connect-channel-icon connect-channel-icon-whatsapp",children:"wa"}),s.jsxs("div",{className:"connect-channel-text",children:[s.jsxs("div",{className:"connect-channel-title-row",children:[s.jsx("span",{className:"connect-channel-title",children:a("botChannels.labels.whatsappBusiness")}),ze(Ee)]}),s.jsx("p",{className:"connect-channel-description",children:a("botChannels.connectSocial.whatsappDesc")}),Ee&&s.jsxs("p",{className:"connect-channel-meta",children:[a("botChannels.connectSocial.connectedNumber")," ",s.jsx("strong",{children:(()=>{const K=Ee.meta||{};return K.displayPhoneNumber||K.display_phone_number||Ee.externalId})()})]})]})]}),s.jsxs("div",{className:"connect-channel-actions",children:[!W.isConnected&&s.jsx("button",{type:"button",className:"btn-primary btn-sm",onClick:be,disabled:ie,children:a(ie?"botChannels.actions.connectingWhatsapp":Ee?"botChannels.actions.reconnectWhatsapp":"botChannels.actions.connectWhatsapp")}),Ee&&s.jsx("button",{type:"button",className:"btn-secondary btn-sm btn-color",onClick:()=>Ie(Ee.id),children:a("botChannels.actions.disconnect")})]})]}):s.jsx("p",{className:"muted small",style:{marginTop:"0.75rem"},children:a("botChannels.onboarding.channels.whatsapp.disabledBody","WhatsApp is disabled for this bot. Turn it on above if you want to connect a number.")})]})]}),s.jsxs("div",{className:"onboarding-form-actions",style:{marginTop:"1.2rem"},children:[s.jsx("button",{className:"btn-secondary btn-color",type:"button",onClick:()=>n(-1),disabled:z,children:a("common.back","Back")}),s.jsx("button",{className:"btn-primary",type:"button",onClick:he,disabled:!Te||z,children:a("botChannels.onboarding.channels.next","Continue to bookings")})]})]})})},hi=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],vO=()=>{const e={};return hi.forEach(t=>{e[t]={enabled:!1,windows:[{start:"",end:"",maxSimultaneousBookings:""}]}}),e},iN=(e,t)=>{const n=vO();return e&&hi.forEach(a=>{const i=e[a];i&&i.length>0&&(n[a]={enabled:!0,windows:i.map(r=>({start:r.start,end:r.end,maxSimultaneousBookings:typeof r.maxSimultaneousBookings=="number"?String(r.maxSimultaneousBookings):t}))})}),n},aQ=e=>{const t={};return hi.forEach(n=>{const a=e[n];if(!a.enabled)return;const i=[];a.windows.forEach(r=>{const o=r.start.trim(),l=r.end.trim();!o||!l||o>=l||i.push({start:o,end:l,maxSimultaneousBookings:r.maxSimultaneousBookings})}),i.length>0&&(t[n]=i.map(r=>({start:r.start,end:r.end,maxSimultaneousBookings:vd(r.maxSimultaneousBookings)})))}),Object.keys(t).length>0?t:null},So=(e,t)=>{const n=e.trim();if(!n)return t;const a=Number(n);return!Number.isFinite(a)||a<0?t:Math.floor(a)},vd=e=>{const t=e.trim();if(!t)return null;const n=Number(t);return!Number.isFinite(n)||n<=0?null:Math.floor(n)},sQ=()=>{const{id:e}=St(),{t}=Le(),n=Bt(),a=lt();m.useEffect(()=>{Ml(e,a.search)},[e,a.search]);const i=Il(),r=Ol(e),o=r?qr(i==null?void 0:i.shopDomain):"",[l,c]=m.useState(null),[d,u]=m.useState(!0),[p,h]=m.useState(!1),[f,g]=m.useState(null),[v,y]=m.useState(!1);m.useEffect(()=>{if(!e){u(!1);return}u(!0),g(null),wt(e).then(E=>{const N=A=>typeof A=="number"?String(A):"",R=Array.isArray(E.bookingServices)?E.bookingServices:[],C=R.length>0?R.map(A=>{const _=iN(A.weeklySchedule??null,N(A.maxSimultaneousBookings)),B=hi.find(H=>_[H].enabled)??"monday";return{name:A.name||"",aliases:(A.aliases||[]).join(", "),calendarId:A.calendarId||"",durationMinutes:typeof A.durationMinutes=="number"?String(A.durationMinutes):"30",maxSimultaneousBookings:N(A.maxSimultaneousBookings),weeklySchedule:_,activeDay:B}}):[(()=>{const A=iN(E.bookingWeeklySchedule??null,N(E.bookingMaxSimultaneousBookings)),_=hi.find(B=>A[B].enabled)??"monday";return{name:"General",aliases:"",calendarId:E.calendarId||"",durationMinutes:E.defaultDurationMinutes?String(E.defaultDurationMinutes):"30",maxSimultaneousBookings:N(E.bookingMaxSimultaneousBookings),weeklySchedule:A,activeDay:_}})()];c({timeZone:E.timeZone||"",calendarId:E.calendarId||"",bookingMinLeadHours:N(E.bookingMinLeadHours),bookingMaxAdvanceDays:N(E.bookingMaxAdvanceDays),bookingReminderWindowHours:N(E.bookingReminderWindowHours??1),bookingReminderMinLeadHours:N(E.bookingReminderMinLeadHours??1),services:C}),y(!!E.useCalendar)}).catch(E=>{console.error(E),g((E==null?void 0:E.message)||t("botSettings.errors.loadFailed"))}).finally(()=>u(!1))},[e,t]);const b=E=>N=>{l&&c({...l,[E]:N.target.value})},x=(E,N)=>R=>{if(!l)return;const C=[...l.services];C[E]={...C[E],[N]:R.target.value},c({...l,services:C})},w=(E,N,R)=>{if(!l)return;const C=[...l.services],A=C[E];C[E]={...A,weeklySchedule:{...A.weeklySchedule,[N]:{...A.weeklySchedule[N],enabled:R}}},c({...l,services:C})},j=(E,N,R,C,A)=>{if(!l)return;const _=[...l.services],B=_[E],H=B.weeklySchedule[N],Z=[...H.windows];Z[R]={...Z[R],[C]:A},_[E]={...B,weeklySchedule:{...B.weeklySchedule,[N]:{...H,windows:Z}}},c({...l,services:_})},S=(E,N)=>{if(!l)return;const R=[...l.services],C=R[E],A=C.weeklySchedule[N];R[E]={...C,weeklySchedule:{...C.weeklySchedule,[N]:{...A,windows:[...A.windows,{start:"",end:"",maxSimultaneousBookings:""}]}}},c({...l,services:R})},k=(E,N,R)=>{if(!l)return;const C=[...l.services],A=C[E],_=A.weeklySchedule[N],B=_.windows.filter((H,Z)=>Z!==R);C[E]={...A,weeklySchedule:{...A.weeklySchedule,[N]:{..._,windows:B.length>0?B:[{start:"",end:"",maxSimultaneousBookings:""}]}}},c({...l,services:C})},T=(E,N)=>{if(!l)return;const R=[...l.services];R[E]={...R[E],activeDay:N},c({...l,services:R})},L=()=>{if(!l)return;const E=[...l.services];E.length===1&&!E[0].name.trim()&&(E[0]={...E[0],name:"General"});const N={name:"",aliases:"",calendarId:"",durationMinutes:"30",maxSimultaneousBookings:"",weeklySchedule:vO(),activeDay:"monday"};c({...l,services:[...E,N]})},F=E=>{if(!l)return;const N=l.services.filter((R,C)=>C!=E);c({...l,services:N.length?N:[]})},O=()=>{n(-1)},M=async E=>{if(E.preventDefault(),!(!e||!l)&&v){h(!0),g(null);try{const N=So(l.bookingMinLeadHours,3),R=So(l.bookingMaxAdvanceDays,30),C={timeZone:l.timeZone.trim()||null,calendarId:l.calendarId.trim()||null,bookingMinLeadHours:N,bookingMaxAdvanceDays:R,bookingReminderWindowHours:So(l.bookingReminderWindowHours,1),bookingReminderMinLeadHours:So(l.bookingReminderMinLeadHours,1),useCalendar:v,...$u};for(const H of l.services)for(const Z of hi){const ie=H.weeklySchedule[Z];if(ie.enabled){for(const U of ie.windows)if(!vd(U.maxSimultaneousBookings)){g(t("botSettings.sections.availability.slotsRequired","Please set the slots for every enabled time window."));return}}}const A=l.services.length>1,_=l.services.map(H=>{const Z=H.name.trim(),ie=H.calendarId.trim();if(!ie||A&&!Z)return null;const U=So(H.durationMinutes,30),G=aQ(H.weeklySchedule),V=H.aliases.split(",").map($=>$.trim()).filter($=>$.length>0);return{name:Z||"General",aliases:V,calendarId:ie,durationMinutes:U,maxSimultaneousBookings:vd(H.maxSimultaneousBookings),weeklySchedule:G}}).filter(Boolean);if(A&&_.length!==l.services.length){g(t("botSettings.onboarding.booking.serviceNameRequired","Service name is required when you add multiple services."));return}if(_.length===0){g(t("botSettings.onboarding.booking.servicesRequired","Add at least one service with a calendar before continuing."));return}const B=_[0];await ln(e,{...C,bookingServices:_,calendarId:(B==null?void 0:B.calendarId)||null,defaultDurationMinutes:(B==null?void 0:B.durationMinutes)||30,bookingMaxSimultaneousBookings:(B==null?void 0:B.maxSimultaneousBookings)??null,bookingWeeklySchedule:(B==null?void 0:B.weeklySchedule)??null}),n(`/onboarding/bots/${encodeURIComponent(e)}/lead-ads${o}`)}catch(N){console.error(N),g((N==null?void 0:N.message)||t("botSettings.errors.saveFailed"))}finally{h(!1)}}},P=async()=>{if(e){h(!0),g(null);try{await ln(e,{...$u,useCalendar:!1}),n(`/onboarding/bots/${encodeURIComponent(e)}/lead-ads${o}`)}catch(E){console.error(E),g((E==null?void 0:E.message)||t("common.error","Something went wrong"))}finally{h(!1)}}},D=()=>{if(!e)return s.jsx("p",{className:"muted",children:t("botSettings.missingId","Missing bot id in URL.")});if(d||!l)return s.jsx("p",{className:"muted",children:t("botSettings.loading","Loading")});const E=l.services.length>1;return s.jsxs("form",{className:"form booking-form",onSubmit:M,children:[s.jsx("div",{className:"onboarding-section-header",children:s.jsx("button",{type:"button",className:"btn-secondary btn-color",onClick:P,disabled:p,children:t("botSettings.onboarding.common.skip","Skip for now")})}),f&&s.jsx("div",{className:"form-error onboarding-form-error-txt",children:f}),s.jsxs("div",{className:"booking-enable-row",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"booking-section-title",children:t("botSettings.onboarding.booking.toggleTitle","Let Coslo propose and book meetings")}),s.jsx("p",{className:"booking-section-subtitle",children:t("botSettings.onboarding.booking.toggleSubtitle","When enabled, Coslo will check your calendar and offer time slots directly in chat.")})]}),s.jsxs("div",{className:"booking-enable-toggle",children:[s.jsxs("label",{className:"booking-toggle",children:[s.jsx("input",{type:"checkbox",checked:v,onChange:N=>y(N.target.checked)}),s.jsx("span",{className:"booking-toggle-slider"}),s.jsx("span",{className:"booking-toggle-label",children:v?t("botSettings.onboarding.booking.toggleOn","Bookings are ON"):t("botSettings.onboarding.booking.toggleOff","Bookings are OFF")})]}),!v&&s.jsx("p",{className:"muted small",children:t("botSettings.onboarding.booking.toggleOffHint","You can keep bookings disabled for now and still complete onboarding. Youll be able to turn them on later from the app.")})]})]}),!v&&s.jsxs("div",{className:"form-actions booking-actions",children:[s.jsx("button",{className:"btn-secondary btn-color",type:"button",onClick:O,disabled:p,children:t("common.back","Back")}),s.jsx("button",{className:"btn-primary",type:"button",disabled:!0,title:t("botSettings.onboarding.booking.enableToContinue","Turn on bookings above or skip this step to continue."),children:t("botSettings.onboarding.booking.nextWhenDisabled","Continue to Lead Ads")})]}),v&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"booking-grid",children:[s.jsxs("section",{className:"booking-section",children:[s.jsx("h2",{className:"booking-section-title",children:t("botSettings.sections.timezone.title","Business time zone")}),s.jsx("p",{className:"booking-section-subtitle",children:t("botSettings.sections.timezone.hint","Used to validate booking times across all services.")}),s.jsx("div",{className:"booking-fields-grid",children:s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:t("botSettings.fields.timeZone.label")}),s.jsx("input",{type:"text",value:l.timeZone,onChange:b("timeZone"),placeholder:t("botSettings.fields.timeZone.placeholder","e.g. Europe/Rome")}),s.jsx("span",{className:"bot-settings-help",children:t("botSettings.fields.timeZone.help")})]})})]}),s.jsxs("section",{className:"booking-section",children:[s.jsx("h2",{className:"booking-section-title",children:t("botSettings.sections.bookingRules.title","Booking rules")}),s.jsx("p",{className:"booking-section-subtitle",children:t("botSettings.sections.bookingRules.hint","Control how far in advance users can book.")}),s.jsxs("div",{className:"booking-fields-grid",children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:t("botSettings.fields.bookingMinLeadHours.label")}),s.jsx("input",{type:"number",min:0,step:1,value:l.bookingMinLeadHours,onChange:b("bookingMinLeadHours"),placeholder:t("botSettings.fields.bookingMinLeadHours.placeholder")}),s.jsx("span",{className:"bot-settings-help",children:t("botSettings.fields.bookingMinLeadHours.help")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:t("botSettings.fields.bookingMaxAdvanceDays.label")}),s.jsx("input",{type:"number",min:0,step:1,value:l.bookingMaxAdvanceDays,onChange:b("bookingMaxAdvanceDays"),placeholder:t("botSettings.fields.bookingMaxAdvanceDays.placeholder")}),s.jsx("span",{className:"bot-settings-help",children:t("botSettings.fields.bookingMaxAdvanceDays.help")})]})]})]})]}),s.jsxs("section",{className:"booking-section booking-availability",children:[s.jsx("h2",{className:"booking-section-title",children:t("botSettings.sections.services.title","Services & calendars")}),s.jsx("p",{className:"booking-section-subtitle",children:t("botSettings.sections.services.hint","Create one service per calendar and set its duration, capacity, and opening hours.")}),l.services.map((N,R)=>s.jsxs("div",{className:"booking-day-detail-card",style:{marginBottom:"1.2rem"},children:[s.jsxs("div",{className:"booking-day-detail-header",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"booking-day-detail-title",children:N.name||t("botSettings.sections.services.unnamed","Service")}),s.jsx("p",{className:"booking-day-detail-subtitle",children:t("botSettings.sections.services.cardHint","Configure the calendar and availability for this service.")})]}),l.services.length>1&&s.jsx("button",{type:"button",className:"btn-link booking-remove-range",onClick:()=>F(R),children:t("botSettings.sections.services.remove","Remove service")})]}),s.jsxs("div",{className:"booking-fields-grid",style:{marginBottom:"1rem"},children:[s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:E?t("botSettings.services.fields.name","Service name"):t("botSettings.services.fields.labelOptional","Label (optional)")}),s.jsx("input",{type:"text",value:N.name,onChange:x(R,"name"),placeholder:t(E?"botSettings.services.fields.namePlaceholder":"botSettings.services.fields.labelPlaceholder",E?"e.g. Haircut":"e.g. General")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:t("botSettings.services.fields.aliases","Aliases (optional)")}),s.jsx("input",{type:"text",value:N.aliases,onChange:x(R,"aliases"),placeholder:t("botSettings.services.fields.aliasesPlaceholder","e.g. womens haircut, haircut for women")})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:t("botSettings.fields.calendarId.label")}),s.jsx("input",{type:"text",value:N.calendarId,onChange:x(R,"calendarId"),placeholder:t("botSettings.fields.calendarId.placeholder","e.g. primary or a specific calendar id")}),s.jsxs("span",{className:"bot-settings-help",children:[t("botSettings.fields.calendarId.help")," ",s.jsx("code",{children:"primary"})]})]}),s.jsxs("label",{className:"form-field",children:[s.jsx("span",{children:t("botSettings.services.fields.duration","Duration (minutes)")}),s.jsx("input",{type:"number",min:5,max:480,value:N.durationMinutes,onChange:x(R,"durationMinutes"),placeholder:t("botSettings.fields.defaultDurationMinutes.placeholder","30")})]})]}),s.jsx("div",{className:"booking-day-tabs",children:hi.map(C=>{const A=N.weeklySchedule[C],_=N.activeDay===C,B=A.enabled,H=["booking-day-pill",_&&"booking-day-pill--active"].filter(Boolean).join(" ");return s.jsxs("button",{type:"button",className:H,onClick:()=>T(R,C),children:[s.jsx("span",{className:"booking-day-pill-label",children:t(`botSettings.weekdays.${C}`)}),s.jsx("span",{className:"booking-day-pill-dot"+(B?" booking-day-pill-dot--on":""),"aria-hidden":"true"})]},`${R}-${C}`)})}),(()=>{const C=N.activeDay,A=N.weeklySchedule[C];return s.jsxs("div",{className:"booking-day-detail-card",children:[s.jsxs("div",{className:"booking-day-detail-header",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"booking-day-detail-title",children:t(`botSettings.weekdays.${C}`)}),s.jsx("p",{className:"booking-day-detail-subtitle",children:A.enabled?t("botSettings.sections.availability.enabledHint","Bookings are allowed on this day within the time ranges below."):t("botSettings.sections.availability.disabledHint","Bookings are not allowed on this day until you enable it.")})]}),s.jsxs("label",{className:"booking-toggle",children:[s.jsx("input",{type:"checkbox",checked:A.enabled,onChange:_=>w(R,C,_.target.checked)}),s.jsx("span",{className:"booking-toggle-slider"}),s.jsx("span",{className:"booking-toggle-label",children:t("botSettings.sections.availability.acceptBookings","Accept bookings this day")})]})]}),s.jsx("div",{className:"booking-day-ranges",children:A.windows.map((_,B)=>s.jsxs("div",{className:"booking-day-range-row",children:[s.jsxs("div",{className:"booking-day-range-inputs",children:[s.jsxs("label",{children:[s.jsx("span",{className:"booking-range-label",children:t("botSettings.sections.availability.from","From")}),s.jsx("input",{type:"time",value:_.start,onChange:H=>j(R,C,B,"start",H.target.value)})]}),s.jsxs("label",{children:[s.jsx("span",{className:"booking-range-label",children:t("botSettings.sections.availability.to","To")}),s.jsx("input",{type:"time",value:_.end,onChange:H=>j(R,C,B,"end",H.target.value)})]}),s.jsxs("label",{children:[s.jsx("span",{className:"booking-range-label",children:t("botSettings.sections.availability.slots","Slots")}),(()=>{const H=A.enabled&&!vd(_.maxSimultaneousBookings);return s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"number",min:1,className:H?"input-error":void 0,value:_.maxSimultaneousBookings,onChange:Z=>j(R,C,B,"maxSimultaneousBookings",Z.target.value),placeholder:t("botSettings.sections.availability.slotsPlaceholder","e.g. 1")}),H&&s.jsx("div",{className:"field-error",children:t("botSettings.sections.availability.slotsRequired","Please set the slots for every enabled time window.")})]})})()]})]}),B>0&&s.jsx("button",{type:"button",className:"btn-link booking-remove-range",onClick:()=>k(R,C,B),children:t("botSettings.sections.availability.removeRange","Remove range")})]},`${R}-${C}-${B}`))}),s.jsx("button",{type:"button",className:"btn-secondary btn-xs booking-add-range btn-color",onClick:()=>S(R,C),children:t("botSettings.sections.availability.addRange","Add time range")}),s.jsx("p",{className:"bot-settings-hint booking-availability-note",children:t("botSettings.sections.availability.note")})]})})()]},R)),s.jsx("button",{type:"button",className:"btn-secondary btn-xs booking-add-range btn-color",onClick:L,children:t("botSettings.sections.services.add","Add service")})]}),s.jsxs("div",{className:"form-actions booking-actions",children:[s.jsx("button",{className:"btn-secondary btn-color",type:"button",onClick:O,disabled:p,children:t("common.back","Back")}),s.jsx("button",{className:"btn-primary",type:"submit",disabled:p,children:p?t("botSettings.actions.saving","Saving"):t("botSettings.onboarding.booking.next","Save & continue to Lead Ads")})]})]})]})};return s.jsx(is,{currentStep:"booking",botId:e,flow:r?"shopify":"default",title:t("botSettings.onboarding.booking.title","Enable bookings from chat"),subtitle:t("botSettings.onboarding.booking.subtitle","Connect your calendar, define your available slots and booking rules."),layout:"full",children:s.jsx("div",{className:"onboarding-booking",children:D()})})},Ch={name:"",language:"en_US",category:"UTILITY",headerEnabled:!1,headerText:"",bodyText:"",footerEnabled:!1,footerText:"",buttons:[]};function iQ(e){switch(e){case"APPROVED":return"status-badge status-badge-ok";case"PENDING":return"status-badge status-badge-warn";case"REJECTED":return"status-badge status-badge-error";default:return"status-badge"}}function rQ(e){const t=[];if(e.headerEnabled&&e.headerText.trim()&&t.push({type:"HEADER",format:"TEXT",text:e.headerText.trim(),example:e.headerText.includes("{{")?{header_text:["Example header"]}:void 0}),e.bodyText.trim()){const a=e.bodyText.trim(),i=a.match(/\{\{\d+\}\}/g)||[];t.push({type:"BODY",text:a,example:i.length>0?{body_text:i.map((r,o)=>`Example ${o+1}`)}:void 0})}e.footerEnabled&&e.footerText.trim()&&t.push({type:"FOOTER",text:e.footerText.trim()});const n=e.buttons.filter(a=>a.text.trim()).map(a=>({type:a.type,text:a.text.trim(),url:a.type==="URL"?a.url:void 0,phone_number:a.type==="PHONE_NUMBER"?a.phone_number:void 0}));return n.length>0&&t.push({type:"BUTTONS",buttons:n}),t}function oQ(e){var r;const t=e.components.find(o=>o.type==="HEADER"),n=e.components.find(o=>o.type==="BODY"),a=e.components.find(o=>o.type==="FOOTER"),i=e.components.find(o=>o.type==="BUTTONS");return{name:e.name,language:e.language,category:e.category,headerEnabled:!!t,headerText:(t==null?void 0:t.text)??"",bodyText:(n==null?void 0:n.text)??"",footerEnabled:!!a,footerText:(a==null?void 0:a.text)??"",buttons:((r=i==null?void 0:i.buttons)==null?void 0:r.map((o,l)=>({id:`${e.id}-btn-${l}`,type:o.type,text:o.text,url:o.url,phone_number:o.phone_number})))??[]}}const lQ=()=>{const{id:e}=St(),{t}=Le(),n=Bt(),a=lt();m.useEffect(()=>{Ml(e,a.search)},[e,a.search]);const i=Il(),r=Ol(e),o=r?qr(i==null?void 0:i.shopDomain):"",[l,c]=m.useState(null),[d,u]=m.useState([]),[p,h]=m.useState([]),[f,g]=m.useState(!0),[v,y]=m.useState(!1),[b,x]=m.useState(null),[w,j]=m.useState({phoneFieldName:"phone_number",consentFieldName:"whatsapp_opt_in",requiresWhatsappOptIn:!0,templateName:"",templateLanguage:""}),[S,k]=m.useState(!1),[T,L]=m.useState(!1),[F,O]=m.useState(!1),[M,P]=m.useState(null),[D,E]=m.useState("create"),[N,R]=m.useState(null),[C,A]=m.useState(Ch),[_,B]=m.useState(!1),[H,Z]=m.useState(!1);m.useEffect(()=>{if(!e)return;async function I(){try{g(!0),x(null);const[Y,W]=await Promise.all([wt(e),Pi(e)]);c(Y),u(W)}catch(Y){console.error(Y),x((Y==null?void 0:Y.message)||"Failed to load bot or channels.")}finally{g(!1)}}I()},[e]);const ie=m.useMemo(()=>d.find(I=>I.type==="WHATSAPP")||null,[d]),U=m.useMemo(()=>d.find(I=>I.type==="FACEBOOK")||null,[d]),G=m.useMemo(()=>ie?(ie.meta||{}).needsReconnect!==!0:!1,[ie]),V=m.useMemo(()=>U?(U.meta||{}).needsReconnect!==!0:!1,[U]),$=V&&G;async function q(){if(!e||!G){h([]);return}try{y(!0),x(null);const I=await gP(e,{limit:50});h(I.items)}catch(I){console.error(I),x((I==null?void 0:I.message)||"Failed to load WhatsApp templates.")}finally{y(!1)}}async function z(){if(e)try{k(!0),x(null);const I=await Uv(e);j(I?{phoneFieldName:I.phoneFieldName||"phone_number",consentFieldName:I.consentFieldName||"whatsapp_opt_in",requiresWhatsappOptIn:I.requiresWhatsappOptIn,templateName:I.templateName||"",templateLanguage:I.templateLanguage||""}:{phoneFieldName:"phone_number",consentFieldName:"whatsapp_opt_in",requiresWhatsappOptIn:!0,templateName:"",templateLanguage:""})}catch(I){console.error(I),x((I==null?void 0:I.message)||"Failed to load Lead Ads  WhatsApp automation.")}finally{k(!1)}}m.useEffect(()=>{e&&(async()=>(await z(),await q()))()},[e,G]);const ee=m.useMemo(()=>p.filter(I=>I.status==="APPROVED"),[p]);m.useEffect(()=>{if(!l)return;const I=!!l.leadWhatsappMessages200||!!l.leadWhatsappMessages500||!!l.leadWhatsappMessages1000,Y=!!w.templateName&&!!w.templateLanguage;L(I||Y)},[l,w.templateName,w.templateLanguage]),m.useEffect(()=>{$||L(!1)},[$]);const J=m.useMemo(()=>ee.find(I=>I.id===M)||null,[ee,M]);function X(I,Y){A(W=>({...W,[I]:Y}))}function ne(I){const Y=I.toLowerCase().replace(/[^a-z0-9_]/g,"_").replace(/_{2,}/g,"_").replace(/^_+|_+$/g,"");X("name",Y)}function ue(){A(I=>({...I,buttons:[...I.buttons,{id:`btn-${Date.now()}-${I.buttons.length}`,type:"QUICK_REPLY",text:""}]}))}function fe(I,Y){A(W=>({...W,buttons:W.buttons.map(ae=>ae.id===I?{...ae,...Y}:ae)}))}function we(I){A(Y=>({...Y,buttons:Y.buttons.filter(W=>W.id!==I)}))}function Ae(){E("create"),R(null),A(Ch),Z(!0)}function Q(I){E("edit"),R(I.id),A(oQ(I)),P(I.id),Z(!0)}function be(){Z(!1)}async function Oe(I){if(I.preventDefault(),!e)return;B(!0),x(null);const Y=rQ(C),W={name:C.name,category:C.category,language:C.language,components:Y};try{D==="create"?(await vP(e,W),A(Ch)):D==="edit"&&N&&await bP(e,N,W),await q(),Z(!1)}catch(ae){console.error(ae),x((ae==null?void 0:ae.message)||t("whatsappTemplates.messages.saveFailed",{defaultValue:"Failed to save template."}))}finally{B(!1)}}const Ie=()=>{n(-1)},We=I=>{P(I.id),j(Y=>({...Y,templateName:I.name,templateLanguage:I.language}))},ze=()=>{var I,Y;return T?$?(I=w.phoneFieldName)!=null&&I.trim()?w.requiresWhatsappOptIn&&!((Y=w.consentFieldName)!=null&&Y.trim())?t("whatsappTemplates.leadAutomation.errors.missingConsentField","If you require explicit opt-in, you must specify the consent field name."):!w.templateName||!w.templateLanguage?t("whatsappTemplates.leadAutomation.errors.missingTemplate","Please select an approved WhatsApp template."):null:t("whatsappTemplates.leadAutomation.errors.missingPhoneField","Please specify the phone field name from your lead forms."):t("whatsappTemplates.onboarding.errors.channelsNotReady","To enable this automation, connect both Facebook and WhatsApp in the Channels step."):null},ke=async I=>{e&&await ln(e,{leadWhatsappMessages200:I,leadWhatsappMessages500:!1,leadWhatsappMessages1000:!1})},qe=async()=>{if(e){O(!0),x(null);try{await ke(!1),n(`/onboarding/bots/${encodeURIComponent(e)}/plan${o}`)}catch(I){console.error(I),x((I==null?void 0:I.message)||t("whatsappTemplates.onboarding.errors.save","Could not save Lead Ads configuration."))}finally{O(!1)}}},Ee=async()=>{if(!e)return;const I=ze();if(I){x(I);return}O(!0),x(null);try{if(T){const Y={phoneFieldName:w.phoneFieldName||"phone_number",consentFieldName:w.consentFieldName||"",requiresWhatsappOptIn:w.requiresWhatsappOptIn,templateName:w.templateName||"",templateLanguage:w.templateLanguage||""};await yP(e,Y),await ke(!0)}else await ke(!1);n(`/onboarding/bots/${encodeURIComponent(e)}/plan${o}`)}catch(Y){console.error(Y),x((Y==null?void 0:Y.message)||t("whatsappTemplates.onboarding.errors.save","Could not save Lead Ads configuration."))}finally{O(!1)}};return e?f?s.jsx(is,{currentStep:"leadAds",botId:e,flow:r?"shopify":"default",title:t("whatsappTemplates.onboarding.title","Connect Facebook Lead Ads and WhatsApp automation"),subtitle:t("whatsappTemplates.onboarding.subtitle","Choose or create a WhatsApp template and map the fields from your Lead Ads forms."),layout:"full",children:s.jsx("p",{className:"muted",children:t("common.loading","Loading")})}):s.jsx(is,{currentStep:"leadAds",botId:e,flow:r?"shopify":"default",title:t("whatsappTemplates.onboarding.title","Connect Facebook Lead Ads and WhatsApp automation"),subtitle:t("whatsappTemplates.onboarding.subtitle","Choose or create a WhatsApp template and map the fields from your Lead Ads forms."),layout:"full",children:s.jsxs("div",{className:"leadads-layout",children:[s.jsxs("div",{className:"onboarding-section-header",children:[s.jsx("div",{}),s.jsx("button",{type:"button",className:"btn-secondary btn-color",onClick:qe,disabled:F,children:t("whatsappTemplates.onboarding.common.skip","Skip for now")})]}),!$&&s.jsxs("div",{className:"alert alert-warning leadads-warning",children:[s.jsx("div",{className:"alert-title",children:t("whatsappTemplates.onboarding.warningTitle","Connect channels to activate automation")}),s.jsxs("div",{className:"alert-body",children:[!V&&t("whatsappTemplates.onboarding.warningFacebook","Connect a Facebook page in the Channels step so Coslo can read new leads."),!V&&!G&&" ",!G&&t("whatsappTemplates.onboarding.warningWhatsapp","Connect a WhatsApp Business number in the Channels step to send messages.")]})]}),b&&s.jsx("div",{className:"form-error onboarding-form-error-txt",children:b}),s.jsxs("div",{className:"leadads-status-row",children:[s.jsxs("div",{className:"leadads-status-main",children:[s.jsx("span",{className:"leadads-status-label",children:t("whatsappTemplates.onboarding.requirementsTitle","Connection status")}),s.jsxs("div",{className:"leadads-status-pills",children:[s.jsxs("span",{className:"leadads-status-pill",children:[s.jsx("span",{className:"leadads-status-dot leadads-status-dot--fb"}),"Facebook"," ",V?t("common.connected","connected"):t("common.notConnected","not connected")]}),s.jsxs("span",{className:"leadads-status-pill",children:[s.jsx("span",{className:"leadads-status-dot leadads-status-dot--wa"}),"WhatsApp"," ",G?t("common.connected","connected"):t("common.notConnected","not connected")]})]})]}),s.jsxs("div",{className:"leadads-toggle",children:[s.jsxs("label",{className:"booking-toggle",children:[s.jsx("input",{type:"checkbox",checked:T,disabled:!$||F,onChange:I=>L(I.target.checked)}),s.jsx("span",{className:"booking-toggle-slider"}),s.jsx("span",{className:"booking-toggle-label",children:T?t("whatsappTemplates.onboarding.toggleOn","Lead Ads automation is ON"):t("whatsappTemplates.onboarding.toggleOff","Lead Ads automation is OFF")})]}),!$&&s.jsx("p",{className:"muted small",children:t("whatsappTemplates.onboarding.toggleDisabledHint","Connect both channels to turn this automation on.")}),T&&$&&s.jsx("p",{className:"muted small",children:t("whatsappTemplates.onboarding.toggleOnHint","New leads from your Facebook forms will automatically receive a WhatsApp message using the template below.")})]})]}),!T&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"leadads-disabled-hint",children:s.jsx("p",{className:"muted",children:t("whatsappTemplates.onboarding.disabledHint","You can keep Lead Ads automation turned off for now and still complete onboarding. Youll be able to come back here later from the app and turn it on.")})}),s.jsxs("div",{className:"onboarding-form-actions",style:{marginTop:"1.2rem"},children:[s.jsx("button",{className:"btn-secondary btn-color",type:"button",onClick:Ie,disabled:F,children:t("common.back","Back")}),s.jsx("button",{className:"btn-primary",type:"button",onClick:Ee,disabled:F,children:F?t("common.saving","Saving"):t("whatsappTemplates.onboarding.next","Review plan & pay")})]})]}),T&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"leadads-grid",children:[s.jsx("section",{className:"lead-card",children:s.jsxs("form",{onSubmit:I=>I.preventDefault(),className:"form",children:[s.jsx("header",{className:"lead-card-header",children:s.jsxs("div",{children:[s.jsx("h2",{children:t("whatsappTemplates.leadAutomation.title","Lead Ads  WhatsApp automation")}),s.jsx("p",{className:"lead-card-subtitle",children:t("whatsappTemplates.onboarding.automationHint","When a new lead arrives from Meta, Coslo will send a WhatsApp template and optionally check for explicit opt-in.")})]})}),S?s.jsx("p",{className:"muted",children:t("whatsappTemplates.leadAutomation.loading","Loading automation settings")}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"form-grid-2",children:[s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:t("whatsappTemplates.leadAutomation.phoneField","Phone field name")}),s.jsx("input",{type:"text",value:w.phoneFieldName||"",onChange:I=>j(Y=>({...Y,phoneFieldName:I.target.value})),placeholder:"phone_number",required:!0}),s.jsx("div",{className:"muted small",children:t("whatsappTemplates.leadAutomation.phoneFieldHelp","Name of the form field that contains the phone number in the lead payload.")})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:t("whatsappTemplates.leadAutomation.consentField","Consent field name (optional)")}),s.jsx("input",{type:"text",value:w.consentFieldName||"",onChange:I=>j(Y=>({...Y,consentFieldName:I.target.value})),placeholder:"whatsapp_opt_in"}),s.jsx("div",{className:"muted small",children:t("whatsappTemplates.leadAutomation.consentFieldHelp","Name of the yes/no field used for WhatsApp consent.")})]})]}),s.jsx("div",{className:"form-field form-field-inline",children:s.jsxs("label",{className:"booking-toggle",children:[s.jsx("input",{type:"checkbox",checked:w.requiresWhatsappOptIn,onChange:I=>j(Y=>({...Y,requiresWhatsappOptIn:I.target.checked}))}),s.jsx("span",{className:"booking-toggle-slider"}),s.jsx("span",{className:"booking-toggle-label",children:t("whatsappTemplates.leadAutomation.requireOptIn","Require explicit WhatsApp opt-in")})]})}),s.jsx("hr",{}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:t("whatsappTemplates.leadAutomation.template","Template to send")}),s.jsxs("select",{value:w.templateName&&w.templateLanguage?`${w.templateName}:${w.templateLanguage}`:"",onChange:I=>{const Y=I.target.value;j(W=>{if(!Y)return{...W,templateName:"",templateLanguage:""};const[ae,pe]=Y.split(":");return{...W,templateName:ae,templateLanguage:pe}})},disabled:ee.length===0,required:!0,children:[s.jsx("option",{value:"",children:t("whatsappTemplates.leadAutomation.templatePlaceholder","Select an approved template")}),ee.map(I=>s.jsxs("option",{value:`${I.name}:${I.language}`,children:[I.name," (",I.language,")"]},I.id))]}),s.jsx("div",{className:"muted small",children:t("whatsappTemplates.leadAutomation.templateHelp","Template used for new leads from Meta. Only approved templates are available.")})]}),J&&s.jsx("div",{className:"leadads-template-preview",children:s.jsxs("p",{className:"muted small",children:[t("whatsappTemplates.onboarding.previewLabel","Selected template:")," ",s.jsxs("strong",{children:[J.name," (",J.language,")"]})]})}),s.jsx("p",{className:"muted small",children:t("whatsappTemplates.onboarding.autoSaveHint","Settings and templates will be saved when you click Review plan & pay.")})]})]})}),s.jsxs("section",{className:"lead-card",children:[s.jsxs("header",{className:"lead-card-header lead-card-header--row",children:[s.jsxs("div",{children:[s.jsx("h2",{children:t("whatsappTemplates.title","WhatsApp message templates")}),l&&s.jsx("p",{className:"lead-card-subtitle",children:t("whatsappTemplates.subtitle",{defaultValue:"Choose which template should be used for new leads from {{name}}.",name:l.name})})]}),s.jsx("button",{type:"button",className:"btn-primary btn-sm",onClick:Ae,disabled:!G,children:t("whatsappTemplates.addTemplate","New template")})]}),v?s.jsx("p",{className:"muted",children:t("whatsappTemplates.loadingTemplates","Loading templates")}):G?p.length===0?s.jsxs("div",{className:"wa-template-empty",children:[s.jsx("p",{className:"muted",children:t("whatsappTemplates.empty","No WhatsApp templates found for this bot yet.")}),s.jsx("button",{type:"button",className:"btn-primary",onClick:Ae,children:t("whatsappTemplates.emptyCta","Create your first template")})]}):s.jsx("div",{className:"lead-template-list",children:p.map(I=>{const Y=I.name===w.templateName&&I.language===w.templateLanguage;return s.jsxs("button",{type:"button",className:"lead-template-row"+(Y?" lead-template-row--active":""),onClick:()=>We(I),children:[s.jsxs("div",{className:"lead-template-main",children:[s.jsxs("div",{className:"lead-template-name",children:[I.name,s.jsxs("span",{className:"lead-template-language",children:[" "," ",I.language]})]}),s.jsx("div",{className:"lead-template-meta",children:s.jsx("span",{children:I.category})})]}),s.jsxs("div",{className:"lead-template-status",children:[s.jsx("span",{className:iQ(I.status),children:I.status}),s.jsx("button",{type:"button",className:"btn-secondary btn-xs btn-color",onClick:W=>{W.stopPropagation(),Q(I)},disabled:!G,children:t("whatsappTemplates.actions.edit","Edit")})]})]},I.id)})}):s.jsx("p",{className:"muted",children:t("whatsappTemplates.templates.requireWhatsapp","Connect a WhatsApp number on the Channels step to sync and manage templates.")})]})]}),s.jsxs("div",{className:"form-actions",style:{marginTop:"1.2rem"},children:[s.jsx("button",{className:"btn-secondary btn-color",type:"button",onClick:Ie,disabled:F,children:t("common.back","Back")}),s.jsx("button",{className:"btn-primary",type:"button",onClick:Ee,disabled:F,children:F?t("common.saving","Saving"):t("whatsappTemplates.onboarding.next","Review plan & pay")})]})]}),H&&s.jsx("div",{className:"wa-template-modal-backdrop",children:s.jsxs("div",{className:"wa-template-modal",children:[s.jsxs("div",{className:"wa-template-modal-header",children:[s.jsx("h2",{children:D==="create"?t("whatsappTemplates.modal.createTitle","New WhatsApp template"):t("whatsappTemplates.modal.editTitle","Edit WhatsApp template")}),s.jsx("button",{type:"button",className:"btn-ghost btn-xs",onClick:be,children:""})]}),s.jsxs("form",{onSubmit:Oe,className:"form",children:[s.jsxs("div",{className:"form-grid-2",children:[s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:t("whatsappTemplates.form.name","Template name")}),s.jsx("input",{type:"text",value:C.name,onChange:I=>ne(I.target.value),disabled:D==="edit",placeholder:t("whatsappTemplates.form.namePlaceholder","e.g. order_update"),required:!0}),s.jsx("div",{className:"muted small",children:t("whatsappTemplates.form.nameHelp","Lowercase, numbers and underscores only. This is not visible to end users.")})]}),s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:t("whatsappTemplates.form.language","Language")}),s.jsx("input",{type:"text",value:C.language,onChange:I=>X("language",I.target.value),placeholder:"en_US",required:!0}),s.jsx("div",{className:"muted small",children:t("whatsappTemplates.form.languageHelp","Use WhatsApp language codes like en_US, it_IT, es_ES")})]})]}),s.jsx("div",{className:"form-grid-2",children:s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:t("whatsappTemplates.form.category","Category")}),s.jsxs("select",{value:C.category,onChange:I=>X("category",I.target.value),children:[s.jsx("option",{value:"UTILITY",children:t("whatsappTemplates.category.utility","Utility")}),s.jsx("option",{value:"MARKETING",children:t("whatsappTemplates.category.marketing","Marketing")}),s.jsx("option",{value:"AUTHENTICATION",children:t("whatsappTemplates.category.authentication","Authentication")})]})]})}),s.jsx("hr",{}),s.jsxs("div",{className:"form-section",children:[s.jsx("div",{className:"form-field form-field-inline",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:C.headerEnabled,onChange:I=>X("headerEnabled",I.target.checked)})," ",t("whatsappTemplates.form.header","Header (optional)")]})}),C.headerEnabled&&s.jsxs("div",{className:"form-field",children:[s.jsx("textarea",{value:C.headerText,onChange:I=>X("headerText",I.target.value),maxLength:60,placeholder:t("whatsappTemplates.form.headerPlaceholder","Short title shown above the body")}),s.jsx("div",{className:"muted small",children:t("whatsappTemplates.form.headerHelp","Up to 60 characters. You can use variables like {{1}}.")})]})]}),s.jsx("div",{className:"form-section",children:s.jsxs("div",{className:"form-field",children:[s.jsx("label",{children:t("whatsappTemplates.form.body","Body")}),s.jsx("textarea",{value:C.bodyText,onChange:I=>X("bodyText",I.target.value),rows:5,placeholder:t("whatsappTemplates.form.bodyPlaceholder","Main message text. Use {{1}}, {{2}},  for variables."),required:!0}),s.jsx("div",{className:"muted small",children:t("whatsappTemplates.form.bodyHelp","Keep it clear and concise. Variables will be filled at send time.")})]})}),s.jsxs("div",{className:"form-section",children:[s.jsx("div",{className:"form-field form-field-inline",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:C.footerEnabled,onChange:I=>X("footerEnabled",I.target.checked)})," ",t("whatsappTemplates.form.footer","Footer (optional)")]})}),C.footerEnabled&&s.jsx("div",{className:"form-field",children:s.jsx("textarea",{value:C.footerText,onChange:I=>X("footerText",I.target.value),maxLength:60,placeholder:t("whatsappTemplates.form.footerPlaceholder","Small line below the message (e.g. legal or brand).")})})]}),s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"form-field",children:[s.jsxs("div",{className:"form-label-row",children:[s.jsx("label",{children:t("whatsappTemplates.form.buttons","Buttons")}),s.jsx("button",{type:"button",className:"btn-secondary btn-xs btn-color",onClick:ue,children:t("whatsappTemplates.form.addButton","Add button")})]}),s.jsx("div",{className:"muted small",children:t("whatsappTemplates.form.buttonsHelp","Optional quick reply, URL or phone buttons.")})]}),C.buttons.map(I=>s.jsxs("div",{className:"wa-template-button-row form-grid-3",children:[s.jsx("div",{className:"form-field",children:s.jsxs("select",{value:I.type,onChange:Y=>fe(I.id,{type:Y.target.value,url:Y.target.value==="URL"?I.url:void 0,phone_number:Y.target.value==="PHONE_NUMBER"?I.phone_number:void 0}),children:[s.jsx("option",{value:"QUICK_REPLY",children:t("whatsappTemplates.buttons.quickReply","Quick reply")}),s.jsx("option",{value:"URL",children:t("whatsappTemplates.buttons.url","URL")}),s.jsx("option",{value:"PHONE_NUMBER",children:t("whatsappTemplates.buttons.phone","Phone number")})]})}),s.jsx("div",{className:"form-field",children:s.jsx("input",{type:"text",value:I.text,onChange:Y=>fe(I.id,{text:Y.target.value}),placeholder:t("whatsappTemplates.buttons.textPlaceholder","Button label"),required:!0})}),s.jsxs("div",{className:"form-field form-field-inline",children:[I.type==="URL"&&s.jsx("input",{type:"url",value:I.url||"",onChange:Y=>fe(I.id,{url:Y.target.value}),placeholder:"https://example.com",required:!0}),I.type==="PHONE_NUMBER"&&s.jsx("input",{type:"tel",value:I.phone_number||"",onChange:Y=>fe(I.id,{phone_number:Y.target.value}),placeholder:"+1 555 123456",required:!0}),s.jsx("button",{type:"button",className:"btn-ghost btn-xs",onClick:()=>we(I.id),children:t("whatsappTemplates.buttons.remove","Remove")})]})]},I.id))]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{type:"submit",className:"btn-primary",disabled:_,children:_?t("common.saving","Saving"):D==="create"?t("whatsappTemplates.actions.create","Create template"):t("whatsappTemplates.actions.update","Update template")})})]})]})})]})}):null},kh=(e,t)=>new Intl.NumberFormat("en-GB",{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2}).format(e/100),cQ=()=>{const{id:e}=St(),{t}=Le(),n=Bt(),a=lt();m.useEffect(()=>{Ml(e,a.search)},[e,a.search]);const i=Ol(e),r=V=>V==null?t("botPlan.plans.unlimited","Unlimited"):(V/10).toLocaleString("en-GB"),o={free:V=>[{id:"energy",label:t("botPlan.features.free.energy","{{amount}} Energy per month",{amount:r(V.monthlyTokens)}),available:!0},{id:"messages",label:t("botPlan.features.free.messages","Up to 150 AI Assistant messages"),available:!0},{id:"pages",label:t("botPlan.features.free.pages","Up to 100 ingested pages"),available:!0},{id:"emails",label:t("botPlan.features.free.emails","Up to 20 emails"),available:!0},{id:"whatsappTemplates",label:t("botPlan.features.free.whatsappTemplates","No WhatsApp template messages (outbound)"),available:!1}],starter:V=>[{id:"energy",label:t("botPlan.features.starter.energy","{{amount}} Energy per month",{amount:r(V.monthlyTokens)}),available:!0},{id:"messages",label:t("botPlan.features.starter.messages","Up to 3,000 AI Assistant messages"),available:!0},{id:"pages",label:t("botPlan.features.starter.pages","Up to 1,500 ingested pages"),available:!0},{id:"emails",label:t("botPlan.features.starter.emails","Up to 1,000 emails"),available:!0},{id:"whatsappTemplates",label:t("botPlan.features.starter.whatsappTemplates","Up to 200 WhatsApp template messages (outbound)"),available:!0}],growth:V=>[{id:"energy",label:t("botPlan.features.growth.energy","{{amount}} Energy per month",{amount:r(V.monthlyTokens)}),available:!0},{id:"messages",label:t("botPlan.features.growth.messages","Up to 17,000 AI Assistant messages"),available:!0},{id:"pages",label:t("botPlan.features.growth.pages","Up to 6,000 ingested pages"),available:!0},{id:"emails",label:t("botPlan.features.growth.emails","Up to 5,000 emails"),available:!0},{id:"whatsappTemplates",label:t("botPlan.features.growth.whatsappTemplates","Up to 1,000 WhatsApp template messages (outbound)"),available:!0}],scale:V=>[{id:"energy",label:t("botPlan.features.scale.energy","{{amount}} Energy per month",{amount:r(V.monthlyTokens)}),available:!0},{id:"messages",label:t("botPlan.features.scale.messages","Up to 65,000 AI Assistant messages"),available:!0},{id:"pages",label:t("botPlan.features.scale.pages","Up to 20,000 ingested pages"),available:!0},{id:"emails",label:t("botPlan.features.scale.emails","Up to 20,000 emails"),available:!0},{id:"whatsappTemplates",label:t("botPlan.features.scale.whatsappTemplates","Up to 5,000 WhatsApp template messages (outbound)"),available:!0}],default:V=>[{id:"energy",label:t("botPlan.features.default.energy","{{amount}} Energy per month",{amount:r(V.monthlyTokens)}),available:!0}]},l="growth",c=V=>{const $=V.name.toLowerCase();return(o[$]??o.default)(V)},d=V=>V.name.toLowerCase()===l,u=V=>{var $;return V.monthlyAmountCents===0||(($=V.code)==null?void 0:$.toLowerCase())==="free"},[p,h]=m.useState(null),[f,g]=m.useState([]),[v,y]=m.useState(!0),[b,x]=m.useState(null),[w,j]=m.useState([]),[S,k]=m.useState(!1),[T,L]=m.useState(null),[F,O]=m.useState(null),[M,P]=m.useState(!1),[D,E]=m.useState(null);m.useEffect(()=>{if(!e)return;const V=e;y(!0),x(null),k(!0),Promise.all([wt(V),Pi(V),lP()]).then(([$,q,z])=>{h($),g(q),j(z),z.length>0&&O(z[0].id)}).catch($=>{console.error("Failed to load onboarding plan data",$),x(($==null?void 0:$.message)||t("botPlan.errors.loadFailed"))}).finally(()=>{y(!1),k(!1)})},[e]);const N=V=>f.some($=>$.type===V),R=p==null?void 0:p.useCalendar,C=p&&(p.leadWhatsappMessages200||p.leadWhatsappMessages500||p.leadWhatsappMessages1000),A=()=>{e&&n(`/onboarding/bots/${encodeURIComponent(e)}/lead-ads`)},_=V=>{O(V),E(null)},B=async()=>{if(!e||!p||!F)return;const V=p.status==="ACTIVE",$=w.find(q=>q.id===F)||null;P(!0),x(null),E(null);try{if(V){await oP(e,{usagePlanId:F}),E(t("botPlan.success.planUpdatedProration"));const q=await wt(e);h(q)}else{const q=jP(),z={usagePlanId:F};if(q&&(z.referralCode=q),$&&u($))await iP(e,{usagePlanId:F}),i?(Qk(),n(`/app/bots/${encodeURIComponent(e)}`,{replace:!0})):n(`/onboarding/bots/${encodeURIComponent(e)}/knowledge?checkout=success&free=1`);else{const{checkoutUrl:ee}=await sP(e,z);window.location.href=ee}}}catch(q){console.error(q),x((q==null?void 0:q.message)||t("botPlan.errors.updateFailed"))}finally{P(!1)}};if(!e)return null;const H=t("botPlan.onboarding.title","Choose your plan and start using Coslo"),Z=t("botPlan.onboarding.subtitle","Weve preconfigured your channels, bookings and Lead Ads. Now pick the plan that matches your volume."),ie=w.find(V=>V.id===F)||null,U=ie?kh(ie.monthlyAmountCents,ie.currency):null,G=(p==null?void 0:p.status)==="ACTIVE";return s.jsx(is,{currentStep:"plan",botId:e,flow:i?"shopify":"default",title:H,subtitle:Z,layout:"full",children:s.jsxs("div",{className:"onb-plan-layout",children:[b&&s.jsx("div",{className:"form-error onboarding-form-error-txt",children:b}),D&&s.jsxs("div",{className:"alert alert-success",children:[s.jsx("div",{className:"alert-title",children:t("botPlan.success.title","Plan updated")}),s.jsx("div",{className:"alert-body",children:D})]}),s.jsxs("section",{className:"onb-plan-info",children:[s.jsx("div",{className:"onb-plan-info-icon","aria-hidden":"true",children:"i"}),s.jsxs("div",{className:"onb-plan-info-body",children:[s.jsx("h2",{className:"onb-plan-info-title",children:t("botPlan.energyInfo.title","How Energy and limits work")}),s.jsx("p",{style:{color:"#5b5b5b"},children:t("botPlan.energyInfo.main","Almost every action on the platform consumes Energy (assistant messages, document retrieval, tools, ingestion). WhatsApp template messages (outbound) have their own limit and do not consume Energy.")}),s.jsx("p",{className:"muted",children:t("botPlan.energyInfo.estimates",'The "Up to" values shown in each plan are maximum estimates if you spent all your Energy on a single type of task. Actual usage varies based on message length, document size and context.')})]})]}),s.jsxs("section",{className:"onb-plan-summary-card",children:[s.jsxs("header",{className:"onb-plan-summary-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:t("botPlan.onboarding.summaryTitle","Configuration summary")}),s.jsx("p",{className:"onb-plan-summary-subtitle",children:t("botPlan.onboarding.summarySubtitle","Heres what youve configured for this bot so far.")})]}),p&&s.jsxs("span",{className:"onb-plan-status-pill",children:[t("botPlan.summary.statusLabel","Status:")," ",s.jsx("strong",{children:p.status})]})]}),v||!p?s.jsx("p",{className:"muted",children:t("common.loading","Loading")}):s.jsxs("ul",{className:"onb-plan-summary-list",children:[s.jsxs("li",{children:[s.jsx("span",{className:"onb-plan-summary-label",children:t("botPlan.onboarding.summary.channels","Channels")}),s.jsxs("span",{className:"onb-plan-summary-value",children:[["WEB","WHATSAPP","FACEBOOK","INSTAGRAM"].filter(V=>N(V)).join(", ")||t("botPlan.onboarding.summary.none","None configured"),"  ",s.jsx(de,{to:`/onboarding/bots/${encodeURIComponent(p.id)}/channels`,children:t("botPlan.onboarding.edit","Edit")})]})]}),s.jsxs("li",{children:[s.jsx("span",{className:"onb-plan-summary-label",children:t("botPlan.onboarding.summary.booking","Bookings")}),s.jsxs("span",{className:"onb-plan-summary-value",children:[R?t("botPlan.onboarding.summary.enabled","Enabled"):t("botPlan.onboarding.summary.disabled","Disabled"),"  ",s.jsx(de,{to:`/onboarding/bots/${encodeURIComponent(p.id)}/booking`,children:t("botPlan.onboarding.edit","Edit")})]})]}),s.jsxs("li",{children:[s.jsx("span",{className:"onb-plan-summary-label",children:t("botPlan.onboarding.summary.leadAds","Lead Ads  WhatsApp")}),s.jsxs("span",{className:"onb-plan-summary-value",children:[C?t("botPlan.onboarding.summary.enabled","Enabled"):t("botPlan.onboarding.summary.disabled","Disabled"),"  ",s.jsx(de,{to:`/onboarding/bots/${encodeURIComponent(p.id)}/lead-ads`,children:t("botPlan.onboarding.edit","Edit")})]})]})]})]}),s.jsxs("div",{className:"onb-plan-grid",children:[s.jsxs("section",{className:"onb-plan-card",children:[s.jsxs("header",{className:"onb-plan-card-header",children:[s.jsx("h2",{children:t("botPlan.plans.title","Plans")}),s.jsx("p",{className:"onb-plan-card-subtitle",children:t("botPlan.plans.subtitle","All features are available in every plan. Choose how much monthly Energy you want. Estimates below show what you could get if you spent all Energy on a single type of task.")})]}),S&&s.jsx("p",{className:"muted",children:t("botPlan.plans.loading","Loading plans")}),T&&s.jsx("p",{className:"form-error onboarding-form-error-txt",children:T}),!S&&w.length===0&&!T&&s.jsx("p",{className:"muted",children:t("botPlan.plans.empty","No plans available.")}),w.length>0&&s.jsx("div",{className:"onb-plan-cards",children:w.map(V=>{const $=V.id===F,q=c(V),z=d(V);return s.jsx("button",{type:"button",className:"onb-plan-card-item"+($?" onb-plan-card-item--selected":""),onClick:()=>_(V.id),children:s.jsx("div",{className:"onb-plan-card-inner",children:s.jsxs("div",{className:"onb-plan-card-copy",children:[s.jsxs("div",{className:"onb-plan-card-header-row",children:[s.jsx("div",{className:"onb-plan-card-name",children:V.name}),z&&s.jsx("span",{className:"onb-plan-badge-popular",children:t("botPlan.plans.mostPopular","Most popular")})]}),s.jsxs("div",{className:"onb-plan-card-price",children:[kh(V.monthlyAmountCents,V.currency),s.jsxs("span",{className:"onb-plan-card-price-period",children:["/",t("botPlan.perMonth","month")]})]}),V.description&&s.jsx("p",{className:"onb-plan-card-description",children:V.description}),s.jsx("ul",{className:"onb-plan-card-meta",children:s.jsxs("li",{children:[s.jsxs("span",{className:"onb-plan-meta-label",children:[t("botPlan.plans.tokensPerMonthLabel","Energy per month"),s.jsx("span",{className:"onb-plan-meta-info","aria-label":t("botPlan.energyInfo.tooltip","Energy is a unified credit that covers assistant messages, retrieval and ingestion. WhatsApp template messages have a separate limit."),title:t("botPlan.energyInfo.tooltip","Energy is a unified credit that covers assistant messages, retrieval and ingestion. WhatsApp template messages have a separate limit."),children:"i"})]}),":"," ",s.jsx("strong",{children:r(V.monthlyTokens)})]})}),s.jsx("ul",{className:"onb-plan-features",children:q.map(ee=>s.jsxs("li",{className:"onb-plan-feature",children:[s.jsx("span",{className:"onb-plan-feature-icon "+(ee.available?"onb-plan-feature-icon--ok":"onb-plan-feature-icon--off"),children:ee.available?"":""}),s.jsx("span",{className:"onb-plan-feature-text",children:ee.label})]},ee.id))})]})})},V.id)})})]}),s.jsxs("section",{className:"onb-plan-card onb-plan-card--side",children:[s.jsxs("header",{className:"onb-plan-card-header",children:[s.jsx("h2",{children:t("botPlan.summary.title","Monthly cost summary")}),s.jsx("p",{className:"onb-plan-card-subtitle",children:t("botPlan.summary.subtitle","Selected plan, Energy and estimated total.")})]}),s.jsx("h3",{className:"onb-plan-side-heading",children:t("botPlan.summary.selectedPlan","Selected plan")}),ie?s.jsxs("div",{className:"onb-plan-summary-lines",children:[s.jsxs("div",{className:"onb-plan-summary-line",children:[s.jsx("span",{className:"onb-plan-summary-line-label",children:ie.name}),s.jsxs("span",{className:"onb-plan-summary-line-amount",children:[kh(ie.monthlyAmountCents,ie.currency),"/",t("botPlan.perMonth","month")]})]}),s.jsxs("div",{className:"onb-plan-summary-line",children:[s.jsxs("span",{className:"onb-plan-summary-line-label",children:[t("botPlan.plans.tokensPerMonthLabel","Energy per month"),s.jsx("span",{className:"onb-plan-meta-info","aria-label":t("botPlan.energyInfo.tooltip","Energy is a unified credit that covers assistant messages, retrieval and ingestion. WhatsApp template messages have a separate limit."),title:t("botPlan.energyInfo.tooltip","Energy is a unified credit that covers assistant messages, retrieval and ingestion. WhatsApp template messages have a separate limit."),children:"i"})]}),s.jsx("span",{className:"onb-plan-summary-line-amount",children:r(ie.monthlyTokens)})]})]}):s.jsx("p",{className:"muted",children:t("botPlan.summary.noPlanSelected","Select a plan on the left to see details.")}),ie&&s.jsx("ul",{className:"onb-plan-features onb-plan-features--summary",children:c(ie).map(V=>s.jsxs("li",{className:"onb-plan-feature",children:[s.jsx("span",{className:"onb-plan-feature-icon "+(V.available?"onb-plan-feature-icon--ok":"onb-plan-feature-icon--off"),children:V.available?"":""}),s.jsx("span",{className:"onb-plan-feature-text",children:V.label})]},V.id))}),s.jsxs("div",{className:"onb-plan-summary-total onb-plan-summary-total--strong",children:[s.jsx("span",{children:t("botPlan.summary.totalPerMonth","Estimated total per month")}),s.jsx("strong",{children:U??t("botPlan.summary.selectPlanToSeeTotal","Select a plan to see the total")})]})]})]}),s.jsxs("div",{className:"onboarding-form-actions",style:{marginTop:"1.2rem"},children:[s.jsx("button",{className:"btn-secondary btn-color",type:"button",onClick:A,disabled:M,children:t("common.back","Back")}),s.jsx("button",{className:"btn-primary",type:"button",onClick:B,disabled:M||!ie,children:M?G?t("botPlan.actions.updating","Updating"):t("botPlan.actions.redirecting","Redirecting"):G?t("botPlan.actions.changePlan","Change plan"):t("botPlan.actions.activatePay","Activate & pay")})]})]})})},dQ=4e3,uQ=/^[a-z0-9][a-z0-9-]*\.myshopify\.com$/,pQ=()=>{const{t:e}=Le(),{id:t}=St(),n=Bt(),a=lt();m.useEffect(()=>{Ml(t,a.search)},[t,a.search]);const i=Ol(t);m.useEffect(()=>{if(!t||!i)return;const I=new URLSearchParams(a.search),Y=I.get("checkout")==="success",W=I.get("free")==="1";(Y||W)&&(Qk(),n(`/app/bots/${encodeURIComponent(t)}`,{replace:!0}))},[t,i,a.search,n]);const[r,o]=m.useState(null),[l,c]=m.useState(!0),[d,u]=m.useState("RAG"),[p,h]=m.useState(!1),[f,g]=m.useState(!1),[v,y]=m.useState([]),[b,x]=m.useState(""),[w,j]=m.useState(!1),[S,k]=m.useState(!1),[T,L]=m.useState(""),[F,O]=m.useState(!1),[M,P]=m.useState(!1),[D,E]=m.useState("idle"),[N,R]=m.useState(null),[C,A]=m.useState(null),[_,B]=m.useState(!1),[H,Z]=m.useState(null),[ie,U]=m.useState(null);m.useEffect(()=>{t&&(c(!0),U(null),wt(t).then(I=>{o(I),L(I.domain||"");const Y=I.knowledgeSource||"RAG";u(Y),Y==="RAG"&&I.knowledgeClientId&&I.domain?(E("completed"),A(e("botKnowledge.onboarding.status.readyExisting","Your content is already indexed. You can re-index anytime to keep Coslo up to date."))):(E("idle"),A(null))}).catch(I=>{console.error(I),U((I==null?void 0:I.message)||e("botKnowledge.onboarding.errors.loadBot","Unable to load this bot right now."))}).finally(()=>c(!1)))},[t,e]),m.useEffect(()=>{if(!t||!N)return;let I=!1,Y=null;const W=async()=>{try{const ae=await Vd(t,N);if(I||!ae.job)return;const pe=ae.job;pe.status==="completed"?(E("completed"),A(e("botKnowledge.onboarding.status.completed","Knowledge ready. Coslo now understands your website.")),Y&&window.clearInterval(Y)):pe.status==="failed"?(E("failed"),A(pe.errorMessage||e("botKnowledge.onboarding.status.failed","The crawl failed. Check your domain and try again.")),Y&&window.clearInterval(Y)):(E("running"),A(e("botKnowledge.onboarding.status.running","Indexing in progress. You can already use your bot while we finish crawling.")))}catch(ae){console.error(ae),I||A(e("botKnowledge.onboarding.status.pollError","Were having trouble refreshing the status, but the crawl is still running."))}};return W().catch(()=>{}),Y=window.setInterval(()=>{W().catch(()=>{})},dQ),()=>{I=!0,Y&&window.clearInterval(Y)}},[t,N,e]),m.useEffect(()=>{if(!t||!r||d!=="SHOPIFY"){h(!1),y([]);return}g(!0),cl(r.id).then(I=>{const Y=I.items||[],W=Y.some(pe=>pe.isActive),ae=Y.find(pe=>pe.isActive)||Y[0];y(Y),x(pe=>pe||(ae==null?void 0:ae.shopDomain)||""),h(W)}).catch(I=>{console.error(I),h(!1),y([])}).finally(()=>g(!1))},[t,r,d]);let G,V="neutral";const $=d==="SHOPIFY",q=v.find(I=>I.isActive)||v[0]||null;switch(D){case"running":G=e("botKnowledge.onboarding.statusPill.running","Indexing in progress"),V="info";break;case"completed":G=e("botKnowledge.onboarding.statusPill.completed","Knowledge ready"),V="success";break;case"failed":G=e("botKnowledge.onboarding.statusPill.failed","Crawl failed"),V="warn";break;default:G=e("botKnowledge.onboarding.statusPill.idle","Not started yet")}$&&(f?(G=e("botKnowledge.onboarding.statusPill.shopifyChecking","Checking Shopify connection"),V="info"):p?(G=e("botKnowledge.onboarding.statusPill.shopifyConnected","Shopify connected"),V="success"):(G=e("botKnowledge.onboarding.statusPill.shopifyNotConnected","Shopify not connected"),V="warn"));const z=!$&&!!T.trim()&&!_&&!!r&&t!=null,ee=d==="RAG"&&!!(r!=null&&r.domain)&&!!(r!=null&&r.knowledgeClientId),J=!!b.trim(),X=!!(q!=null&&q.lastProductsSyncAt),ne=$?p:D==="completed"||ee,ue=$?e("shopifyPage.connect.title","Connect your store"):e("botKnowledge.onboarding.step1.title","Connect your domain"),fe=$?e("shopifyPage.connect.subtitle","Install the app on your Shopify store and link it to this assistant."):e("botKnowledge.onboarding.step1.text","Add the main website your customers use."),we=$?e("shopifyPage.actions.install","Install / Update app"):e("botKnowledge.onboarding.step2.title","Coslo crawls your pages"),Ae=$?e("botKnowledge.onboarding.shopifySteps.install","Authorize Coslo to read your catalog and orders."):e("botKnowledge.onboarding.step2.text","We follow links, extract content and clean it up."),Q=$?e("shopifyPage.actions.sync","Sync products"):e("botKnowledge.onboarding.step3.title","Your bot answers like a pro"),be=$?e("botKnowledge.onboarding.shopifySteps.sync","Pull the latest products so your assistant can answer live catalog questions."):e("botKnowledge.onboarding.step3.text","Use Coslo in any channel, backed by your sites content."),Oe=async I=>{if(I.preventDefault(),!(!t||!r)){O(!0),U(null);try{const Y=await ln(t,{domain:T.trim()||null});o(Y)}catch(Y){console.error(Y),U((Y==null?void 0:Y.message)||e("botKnowledge.onboarding.errors.saveDomain","Unable to save this domain."))}finally{O(!1)}}},Ie=async I=>{if(u(I),!(!t||!r)){P(!0),U(null);try{const W=await ln(t,I==="SHOPIFY"?{knowledgeSource:I,useDomainCrawler:!1,usePdfCrawler:!1}:{knowledgeSource:I,useDomainCrawler:!0,usePdfCrawler:!0});o(W),u(W.knowledgeSource||I),I==="SHOPIFY"&&(E("idle"),A(null))}catch(Y){console.error(Y),U((Y==null?void 0:Y.message)||e("botKnowledge.onboarding.errors.saveSource","Unable to save knowledge source."))}finally{P(!1)}}},We=I=>{d!==I&&Ie(I)},ze=()=>{if(!t)return;U(null);const I=b.trim().toLowerCase();if(!uQ.test(I)){U(e("shopifyPage.errors.invalidShop","Enter a valid .myshopify.com domain (e.g. mystore.myshopify.com)."));return}j(!0);const Y=`${window.location.pathname}${window.location.search}`,W=`${ma}/shopify/install?shop=${encodeURIComponent(I)}&botId=${encodeURIComponent(t)}&returnTo=${encodeURIComponent(Y)}`;window.location.href=W},ke=async()=>{if(!(!q||!r)){U(null),k(!0);try{await Wv(q.shopDomain);const Y=(await cl(r.id)).items||[],W=Y.some(pe=>pe.isActive),ae=Y.find(pe=>pe.isActive)||Y[0];y(Y),h(W),x(pe=>pe||(ae==null?void 0:ae.shopDomain)||"")}catch(I){console.error(I),U((I==null?void 0:I.message)||e("shopifyPage.errors.syncFailed","Product sync failed."))}finally{k(!1)}}},qe=async()=>{if(!t||!r||!T.trim())return;if(d!=="RAG"){U(e("botKnowledge.onboarding.errors.shopifySelected","Shopify knowledge is selected. Switch to website knowledge to crawl a domain."));return}U(null),B(!0),E("idle"),A(null);const I=W=>{var Te;if(W.canProceed===!1){const he=W.requiredTokens??0,_e=W.remainingTokens??0;U(e("botKnowledge.errors.crawlLimitExceeded","This crawl would exceed your monthly limit ({{required}} needed, {{remaining}} remaining).",{required:he.toLocaleString(),remaining:_e.toLocaleString()}));return}const ae=W.requiredTokens??((Te=W.estimate)==null?void 0:Te.tokensEstimated)??0,pe=W.remainingTokens??null;Z({requiredTokens:ae,remainingTokens:pe,onConfirm:async()=>{B(!0),E("running"),A(e("botKnowledge.onboarding.status.running","Indexing in progress. You can already use your bot while we finish crawling."));const he=await fr(t,T.trim(),{confirm:!0,estimateId:W.estimateId??null});if(!he||!("jobId"in he))throw new Error(e("botKnowledge.onboarding.errors.crawlFailed","We couldn't start the crawl. Please check your domain and try again."));R(he.jobId)}})},Y=async W=>{if(!t)return;const ae=90,pe=2e3;for(let Te=0;Te<ae;Te+=1){await new Promise(_e=>setTimeout(_e,pe));const he=await cP(t,W);if(he.status!=="running"){if(he.status==="failed"){U(he.error||e("botKnowledge.errors.estimateFailed"));return}if(he.status==="estimate"){I(he);return}}}U(e("botKnowledge.errors.estimateFailed"))};try{const W=await ln(t,{domain:T.trim()});o(W);const ae=await fr(t,T.trim());if(ae&&"status"in ae){if(ae.status==="estimate"){I(ae);return}if(ae.status==="estimate_pending"&&ae.estimateId){await Y(ae.estimateId);return}}const pe=await fr(t,T.trim(),{confirm:!0});if(!pe||!("jobId"in pe))throw new Error(e("botKnowledge.onboarding.errors.crawlFailed","We couldn't start the crawl. Please check your domain and try again."));R(pe.jobId)}catch(W){console.error(W),E("failed"),A((W==null?void 0:W.message)||e("botKnowledge.onboarding.errors.crawlFailed","We couldnt start the crawl. Please check your domain and try again."))}finally{B(!1)}},Ee=()=>{n("/app/dashboard")};return s.jsxs(is,{currentStep:"knowledge",botId:t,flow:i?"shopify":"default",layout:"full",title:e("botKnowledge.onboarding.title","Were preparing your bots knowledge"),subtitle:e($?"botKnowledge.onboarding.subtitleShopify":"botKnowledge.onboarding.subtitle",$?"Connect your Shopify store so Coslo can use your live catalog.":"Connect your website so Coslo can crawl it and answer detailed, up-to-date questions."),children:[l?s.jsx("div",{className:"knowledge-shell",children:s.jsx("p",{className:"muted",children:"Loading"})}):s.jsx("div",{className:"knowledge-shell",children:s.jsx("section",{className:"knowledge-hero knowledge-hero--light",children:s.jsxs("div",{className:"knowledge-hero-inner",children:[s.jsxs("div",{className:"knowledge-main",children:[s.jsxs("div",{className:"knowledge-status-row",children:[s.jsx("span",{className:["knowledge-status-pill",`knowledge-status-pill--${V}`].join(" "),children:G}),C&&s.jsx("span",{className:"knowledge-status-caption",children:C})]}),s.jsx("h2",{className:"knowledge-main-title",children:e("botKnowledge.onboarding.heroTitle","Teach Coslo about your website in one click")}),s.jsx("p",{className:"knowledge-main-copy",children:$?e("botKnowledge.onboarding.heroBodyShopify","Connect your Shopify store so Coslo can answer questions from your live catalog."):e("botKnowledge.onboarding.heroBody","Well crawl your main domain to extract FAQs, help articles and key pages so your assistant feels like a real member of your team.")}),ie&&s.jsx("div",{className:"alert alert-warn knowledge-alert",children:ie}),s.jsxs("div",{className:"knowledge-source-grid",children:[s.jsxs("section",{className:["knowledge-source-card",d==="RAG"?"is-selected":""].join(" "),role:"button",tabIndex:0,onClick:()=>We("RAG"),onKeyDown:I=>{(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),We("RAG"))},children:[s.jsx("div",{className:"knowledge-source-card-header",children:s.jsxs("div",{children:[s.jsx("span",{className:"knowledge-source-pill",children:"RAG"}),s.jsx("h3",{className:"knowledge-source-title",children:e("botKnowledge.onboarding.source.rag","Website / docs (RAG)")}),s.jsx("p",{className:"knowledge-source-description",children:e("botKnowledge.onboarding.heroBody","We will crawl your main domain to extract FAQs, help articles and key pages so your assistant feels like a real member of your team.")})]})}),d==="RAG"&&s.jsx("span",{className:"knowledge-source-selected",children:e("botKnowledge.onboarding.source.selected","Selected")}),d==="RAG"&&s.jsxs("form",{className:"knowledge-source-form",onSubmit:Oe,autoComplete:"off",onClick:I=>I.stopPropagation(),children:[s.jsxs("label",{className:"knowledge-field",children:[s.jsx("span",{className:"knowledge-field-label",children:e("botKnowledge.onboarding.domainLabel","Website domain")}),s.jsxs("div",{className:"knowledge-domain-row",children:[s.jsxs("div",{className:"knowledge-domain-input-wrap",children:[s.jsx("span",{className:"knowledge-domain-prefix",children:"WEB"}),s.jsx("input",{type:"url",className:"knowledge-input",placeholder:e("botKnowledge.onboarding.domainPlaceholder","https://your-website.com"),value:T,onChange:I=>L(I.target.value)})]}),s.jsx("button",{type:"submit",className:"btn-secondary btn-color",disabled:F||!T.trim(),onClick:I=>I.stopPropagation(),children:F?e("botKnowledge.onboarding.savingDomain","Saving..."):e("botKnowledge.onboarding.saveDomain","Save domain")})]}),s.jsx("p",{className:"knowledge-field-hint",children:e("botKnowledge.onboarding.domainHint","We only use publicly available pages and always respect your robots.txt.")})]}),s.jsx("div",{className:"knowledge-actions",children:s.jsx("button",{type:"button",className:"btn-primary",onClick:qe,disabled:!z,children:_||D==="running"?e("botKnowledge.onboarding.btnIndexing","Indexing website..."):D==="completed"?e("botKnowledge.onboarding.btnReindex","Re-index website"):e("botKnowledge.onboarding.btnStartIndexing","Start indexing")})})]})]}),s.jsxs("section",{className:["knowledge-source-card",d==="SHOPIFY"?"is-selected":""].join(" "),role:"button",tabIndex:0,onClick:()=>We("SHOPIFY"),onKeyDown:I=>{(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),We("SHOPIFY"))},children:[s.jsx("div",{className:"knowledge-source-card-header",children:s.jsxs("div",{children:[s.jsx("span",{className:"knowledge-source-pill",children:"SHOPIFY"}),s.jsx("h3",{className:"knowledge-source-title",children:e("botKnowledge.onboarding.source.shopify","Shopify catalog")}),s.jsx("p",{className:"knowledge-source-description",children:e("botKnowledge.onboarding.heroBodyShopify","Connect your Shopify store so Coslo can answer questions from your live catalog.")})]})}),d==="SHOPIFY"&&s.jsx("span",{className:"knowledge-source-selected",children:e("botKnowledge.onboarding.source.selected","Selected")}),d==="SHOPIFY"&&s.jsxs("div",{className:"knowledge-source-form",onClick:I=>I.stopPropagation(),children:[s.jsxs("label",{className:"knowledge-field",children:[s.jsx("span",{className:"knowledge-field-label",children:e("shopifyPage.connect.shopDomain","Shop domain")}),s.jsx("div",{className:"knowledge-domain-row",children:s.jsxs("div",{className:"knowledge-domain-input-wrap",children:[s.jsx("span",{className:"knowledge-domain-prefix",children:"SHOP"}),s.jsx("input",{type:"text",className:"knowledge-input",placeholder:e("shopifyPage.connect.shopPlaceholder","mystore.myshopify.com"),value:b,onChange:I=>x(I.target.value)})]})}),s.jsx("p",{className:"knowledge-field-hint",children:e("shopifyPage.connect.subtitle","Install the app on your Shopify store and link it to this assistant.")})]}),!p&&s.jsx("button",{type:"button",className:"btn-primary",disabled:w,onClick:ze,children:w?e("shopifyPage.actions.redirecting","Redirecting..."):e("shopifyPage.actions.install","Install / Update app")}),q&&s.jsxs("div",{className:"shopify-summary",children:[s.jsxs("div",{className:"shopify-summary-row",children:[s.jsx("span",{className:"shopify-summary-label",children:e("shopifyPage.summary.connectedShop","Connected shop")}),s.jsx("span",{children:q.shopDomain})]}),s.jsxs("div",{className:"shopify-summary-row",children:[s.jsx("span",{className:"shopify-summary-label",children:e("shopifyPage.summary.catalog","Catalog cache")}),s.jsxs("span",{children:[e("shopifyPage.summary.products","Products"),": ",q.productCount," -"," ",e("shopifyPage.summary.variants","Variants"),": ",q.variantCount]})]}),s.jsxs("div",{className:"shopify-summary-row",children:[s.jsx("span",{className:"shopify-summary-label",children:e("shopifyPage.summary.lastSync","Last sync")}),s.jsx("span",{children:q.lastProductsSyncAt?new Date(q.lastProductsSyncAt).toLocaleString():e("shopifyPage.summary.neverSynced","Never")})]})]}),p&&s.jsx("div",{className:"knowledge-actions",children:s.jsx("button",{type:"button",className:"btn-primary",onClick:ke,disabled:!q||S,children:S?e("shopifyPage.actions.syncing","Syncing..."):e("shopifyPage.actions.sync","Sync products")})})]})]})]}),s.jsx("div",{className:"knowledge-actions knowledge-footer-actions",children:s.jsx("button",{type:"button",className:"btn-secondary knowledge-secondary-cta btn-color",onClick:Ee,disabled:!ne,children:e("botKnowledge.onboarding.goToDashboard","Go to dashboard")})}),!ne&&s.jsx("p",{className:"knowledge-dash-hint",children:$?e("botKnowledge.onboarding.dashboardHintShopify","Connect your Shopify store to unlock the dashboard button."):e("botKnowledge.onboarding.dashboardHint","We will unlock the dashboard button right after the first index is completed.")})]}),s.jsxs("aside",{className:"knowledge-side knowledge-side--light",children:[s.jsx("div",{className:"knowledge-orb",children:s.jsxs("div",{className:"knowledge-orb-inner",children:[s.jsx("div",{className:"knowledge-orb-pulse"}),s.jsx("div",{className:"knowledge-orb-core",children:s.jsx("span",{children:""})})]})}),s.jsxs("div",{className:"knowledge-steps",children:[s.jsxs("div",{className:["knowledge-step",$?J?"knowledge-step--done":"knowledge-step--idle":T.trim()?"knowledge-step--done":"knowledge-step--idle"].join(" "),children:[s.jsx("span",{className:"knowledge-step-bullet"}),s.jsxs("div",{className:"knowledge-step-body",children:[s.jsx("div",{className:"knowledge-step-title",children:ue}),s.jsx("div",{className:"knowledge-step-text",children:fe})]})]}),s.jsxs("div",{className:["knowledge-step",$?p?"knowledge-step--done":J?"knowledge-step--active":"knowledge-step--idle":D==="running"?"knowledge-step--active":D==="completed"?"knowledge-step--done":"knowledge-step--idle"].join(" "),children:[s.jsx("span",{className:"knowledge-step-bullet"}),s.jsxs("div",{className:"knowledge-step-body",children:[s.jsx("div",{className:"knowledge-step-title",children:we}),s.jsx("div",{className:"knowledge-step-text",children:Ae})]})]}),s.jsxs("div",{className:["knowledge-step",$?X?"knowledge-step--done":p?"knowledge-step--active":"knowledge-step--idle":D==="completed"||ee?"knowledge-step--done":"knowledge-step--idle"].join(" "),children:[s.jsx("span",{className:"knowledge-step-bullet"}),s.jsxs("div",{className:"knowledge-step-body",children:[s.jsx("div",{className:"knowledge-step-title",children:Q}),s.jsx("div",{className:"knowledge-step-text",children:be})]})]})]})]})]})})}),H&&s.jsx("div",{className:"meta-page-select-modal-backdrop",onClick:I=>{I.target===I.currentTarget&&Z(null)},children:s.jsxs("div",{className:"meta-page-select-modal",role:"dialog","aria-modal":"true",children:[s.jsxs("div",{className:"meta-page-select-modal-header",children:[s.jsx("h2",{style:{margin:0},children:e("botKnowledge.modal.crawlTitle")}),s.jsx("button",{type:"button",onClick:()=>Z(null),children:""})]}),s.jsxs("div",{className:"meta-page-select-modal-body",children:[s.jsx("p",{className:"muted",children:e("botKnowledge.modal.crawlBody")}),s.jsx("div",{className:"form-fieldset",style:{marginTop:"0.8rem"},children:s.jsxs("div",{className:"form-row",children:[s.jsxs("label",{children:[s.jsx("span",{children:e("botKnowledge.modal.estimatedTokens")}),s.jsxs("strong",{style:{display:"block",marginTop:"0.2rem"},children:[H.requiredTokens.toLocaleString()," ",e("botKnowledge.estimate.tokensUnit")]})]}),H.remainingTokens!=null&&s.jsxs("label",{children:[s.jsx("span",{children:e("botKnowledge.modal.remainingTokens")}),s.jsxs("strong",{style:{display:"block",marginTop:"0.2rem"},children:[H.remainingTokens.toLocaleString()," ",e("botKnowledge.estimate.tokensUnit")]})]})]})})]}),s.jsxs("div",{className:"meta-page-select-modal-footer",children:[s.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>Z(null),children:e("botKnowledge.modal.cancel")}),s.jsx("button",{type:"button",className:"btn-primary",onClick:async()=>{const I=H.onConfirm;Z(null);try{await I()}catch(Y){console.error(Y),U((Y==null?void 0:Y.message)||e("botKnowledge.onboarding.errors.crawlFailed","We couldn't start the crawl. Please check your domain and try again.")),E("failed")}finally{B(!1)}},children:e("botKnowledge.modal.confirm")})]})]})})]})},mQ="G-ZZHXCFT7FW";function hQ(){const e=lt();return m.useEffect(()=>{if(!window.gtag)return;const t=e.pathname+e.search;window.gtag("event","page_view",{page_path:t,page_location:window.location.href,page_title:document.title,send_to:mQ})},[e]),null}const fQ=()=>s.jsxs("div",{className:"app-root",children:[s.jsx(hQ,{}),s.jsx(gR,{}),s.jsxs(aF,{children:[s.jsxs(je,{element:s.jsx(jw,{}),children:[s.jsx(je,{path:"/",element:s.jsx(vQ,{})}),s.jsx(je,{path:"/policy",element:s.jsx(Pz,{})}),s.jsx(je,{path:"/terms",element:s.jsx(MR,{})}),s.jsx(je,{path:"/login",element:s.jsx(nR,{})}),s.jsx(je,{path:"/register",element:s.jsx(sR,{})}),s.jsx(je,{path:"/forgot-password",element:s.jsx(oR,{})}),s.jsx(je,{path:"/verify-email",element:s.jsx(iR,{})}),s.jsx(je,{path:"/demo/:slug",element:s.jsx(bz,{})})]}),s.jsx(je,{path:"/widget/:slug",element:s.jsx(rY,{})}),s.jsxs(je,{path:"/onboarding",element:s.jsx(Vm,{children:s.jsx(Pn,{allowed:["ADMIN","CLIENT","REFERRER"],children:s.jsx(jw,{})})}),children:[s.jsx(je,{path:"bots/new",element:s.jsx(XY,{})}),s.jsx(je,{path:"bots/:id/shopify",element:s.jsx(JY,{})}),s.jsx(je,{path:"bots/:id/channels",element:s.jsx(nQ,{})}),s.jsx(je,{path:"bots/:id/booking",element:s.jsx(sQ,{})}),s.jsx(je,{path:"bots/:id/lead-ads",element:s.jsx(lQ,{})}),s.jsx(je,{path:"bots/:id/plan",element:s.jsx(cQ,{})}),s.jsx(je,{path:"bots/:id/knowledge",element:s.jsx(pQ,{})})]}),s.jsxs(je,{path:"/app",element:s.jsx(Vm,{children:s.jsx(Sw,{})}),children:[s.jsx(je,{index:!0,element:s.jsx($S,{})}),s.jsx(je,{path:"dashboard",element:s.jsx($S,{})}),s.jsx(je,{path:"dashboard/health",element:s.jsx(aY,{})}),s.jsx(je,{path:"dashboard/conversion",element:s.jsx(iY,{})}),s.jsx(je,{path:"bots",element:s.jsx(wR,{})}),s.jsx(je,{path:"bots/new",element:s.jsx(jR,{})}),s.jsx(je,{path:"bots/:id",element:s.jsx(SR,{})}),s.jsx(je,{path:"bots/:id/channels",element:s.jsx(NR,{})}),s.jsx(je,{path:"bots/:id/conversations",element:s.jsx(CR,{})}),s.jsx(je,{path:"bots/:id/knowledge",element:s.jsx(TR,{})}),s.jsx(je,{path:"bots/:id/knowledge/jobs/:jobId",element:s.jsx(IR,{})}),s.jsx(je,{path:"bots/:id/features",element:s.jsx(OR,{})}),s.jsx(je,{path:"bots/:id/plan",element:s.jsx(dY,{})}),s.jsx(je,{path:"bots/:id/shopify",element:s.jsx(hY,{})}),s.jsx(je,{path:"bots/:id/settings",element:s.jsx(uY,{})}),s.jsx(je,{path:"billing",element:s.jsx($R,{})}),s.jsx(je,{path:"account",element:s.jsx(d_,{})}),s.jsx(je,{path:"bots/:id/whatsapp-templates",element:s.jsx(xR,{})}),s.jsx(je,{path:"referrals",element:s.jsx(Pn,{allowed:["REFERRER","ADMIN"],children:s.jsx(fY,{})})}),s.jsx(je,{path:"admin/referrals",element:s.jsx(Pn,{allowed:["ADMIN"],children:s.jsx(bY,{})})}),s.jsx(je,{path:"admin/referrals/partners/:id",element:s.jsx(Pn,{allowed:["ADMIN"],children:s.jsx(xY,{})})}),s.jsx(je,{path:"admin/users",element:s.jsx(Pn,{allowed:["ADMIN"],children:s.jsx(SY,{})})}),s.jsx(je,{path:"admin/bots",element:s.jsx(Pn,{allowed:["ADMIN"],children:s.jsx(CY,{})})}),s.jsx(je,{path:"admin/bookings",element:s.jsx(Pn,{allowed:["ADMIN"],children:s.jsx(PY,{})})}),s.jsx(je,{path:"admin/emails",element:s.jsx(Pn,{allowed:["ADMIN"],children:s.jsx(TY,{})})}),s.jsx(je,{path:"admin/payments",element:s.jsx(Pn,{allowed:["ADMIN"],children:s.jsx(OY,{})})}),s.jsx(je,{path:"admin/openai-usage",element:s.jsx(Pn,{allowed:["ADMIN"],children:s.jsx(MY,{})})}),s.jsx(je,{path:"admin/integrations",element:s.jsx(Pn,{allowed:["ADMIN"],children:s.jsx(RY,{})})}),s.jsx(je,{path:"admin/plans",element:s.jsx(Pn,{allowed:["ADMIN"],children:s.jsx(HY,{})})}),s.jsx(je,{path:"admin/conversations",element:s.jsx(Pn,{allowed:["ADMIN"],children:s.jsx(QY,{})})})]}),s.jsx(je,{path:"/app/conversations/:id",element:s.jsx(Vm,{children:s.jsx(Sw,{})}),children:s.jsx(je,{index:!0,element:s.jsx(AR,{})})}),s.jsx(je,{path:"*",element:s.jsx(gQ,{})})]})]}),gQ=()=>s.jsxs("div",{className:"page-container",children:[s.jsx("h2",{children:"Page not found"}),s.jsxs("p",{children:["Check the URL or go back to the ",s.jsx("a",{href:"/",children:"home page"}),"."]})]}),vQ=()=>{const e=typeof window<"u"?window.location.search:"";return new URLSearchParams(e).get("embedded")==="1"?s.jsx(jz,{}):s.jsx(wz,{})},{slice:bQ,forEach:yQ}=[];function xQ(e){return yQ.call(bQ.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}function wQ(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(e))}const rN=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,jQ=function(e,t){const a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(t);let r=`${e}=${i}`;if(a.maxAge>0){const o=a.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(o)}`}if(a.domain){if(!rN.test(a.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${a.domain}`}if(a.path){if(!rN.test(a.path))throw new TypeError("option path is invalid");r+=`; Path=${a.path}`}if(a.expires){if(typeof a.expires.toUTCString!="function")throw new TypeError("option expires is invalid");r+=`; Expires=${a.expires.toUTCString()}`}if(a.httpOnly&&(r+="; HttpOnly"),a.secure&&(r+="; Secure"),a.sameSite)switch(typeof a.sameSite=="string"?a.sameSite.toLowerCase():a.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a.partitioned&&(r+="; Partitioned"),r},oN={create(e,t,n,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),a&&(i.domain=a),document.cookie=jQ(e,t,i)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let a=0;a<n.length;a++){let i=n[a];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var SQ={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return oN.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:a,cookieDomain:i,cookieOptions:r}=t;n&&typeof document<"u"&&oN.create(n,e,a,i,r)}},NQ={name:"querystring",lookup(e){var a;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((a=window.location.hash)==null?void 0:a.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let l=0;l<o.length;l++){const c=o[l].indexOf("=");c>0&&o[l].substring(0,c)===t&&(n=o[l].substring(c+1))}}return n}},CQ={name:"hash",lookup(e){var i;let{lookupHash:t,lookupFromHashIndex:n}=e,a;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const o=r.substring(1);if(t){const l=o.split("&");for(let c=0;c<l.length;c++){const d=l[c].indexOf("=");d>0&&l[c].substring(0,d)===t&&(a=l[c].substring(d+1))}}if(a)return a;if(!a&&n>-1){const l=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?(i=l[typeof n=="number"?n:0])==null?void 0:i.replace("/",""):void 0}}}return a}};let Hi=null;const lN=()=>{if(Hi!==null)return Hi;try{if(Hi=typeof window<"u"&&window.localStorage!==null,!Hi)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Hi=!1}return Hi};var kQ={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&lN())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&lN()&&window.localStorage.setItem(n,e)}};let Ki=null;const cN=()=>{if(Ki!==null)return Ki;try{if(Ki=typeof window<"u"&&window.sessionStorage!==null,!Ki)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Ki=!1}return Ki};var PQ={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&cN())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&cN()&&window.sessionStorage.setItem(n,e)}},AQ={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:a,language:i}=navigator;if(n)for(let r=0;r<n.length;r++)t.push(n[r]);a&&t.push(a),i&&t.push(i)}return t.length>0?t:void 0}},EQ={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const a=t||(typeof document<"u"?document.documentElement:null);return a&&typeof a.getAttribute=="function"&&(n=a.getAttribute("lang")),n}},TQ={name:"path",lookup(e){var i;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof t=="number"?t:0])==null?void 0:i.replace("/",""):void 0}},IQ={name:"subdomain",lookup(e){var i,r;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,a=typeof window<"u"&&((r=(i=window.location)==null?void 0:i.hostname)==null?void 0:r.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(a)return a[n]}};let bO=!1;try{document.cookie,bO=!0}catch{}const yO=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];bO||yO.splice(1,1);const OQ=()=>({order:yO,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class xO{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=xQ(n,this.options||{},OQ()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=a,this.addDetector(SQ),this.addDetector(NQ),this.addDetector(kQ),this.addDetector(PQ),this.addDetector(AQ),this.addDetector(EQ),this.addDetector(TQ),this.addDetector(IQ),this.addDetector(CQ)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return t.forEach(a=>{if(this.detectors[a]){let i=this.detectors[a].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.filter(a=>a!=null&&!wQ(a)).map(a=>this.options.convertDetectedLanguage(a)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(a=>{this.detectors[a]&&this.detectors[a].cacheUserLanguage(t,this.options)}))}}xO.type="languageDetector";const LQ={language:{en:"English",it:"Italian",es:"Spanish"},error:"Error",saving:"Saving...",loading:"Loading",back:"Back"},MQ={noSlug:"No bot slug provided.",loading:"Loading bot...",errorTitle:"Error",notFoundTitle:"Bot not found",notFoundBody:"Please check the link you were given.",defaultError:"Failed to load bot"},DQ={hero:{title:"Why choose our Artificial Intelligence platform?",subtitle:"Transform your business with an AI assistant that supports customers 24/7, responds instantly and handles the repetitive operational flows that waste your time.",ctaPrimary:"Get started",ctaSecondary:"Log in",note:"A digital assistant always available on your website, social channels and messaging, designed to answer customer questions and handle common support and booking flows using your business information.",badge:"Coslo  AI assistant for your business",altHero:"Coslo, your AI assistant"},intro:{title:"Continuous, precise and truly useful assistance",imageAlt:"Coslo always working 24/7 at the computer",p1:"Our platform is designed to simplify companies' work, increase conversions and offer customers a communication experience that is modern, smooth and immediate.",p2:"Thanks to an advanced system for automation and content understanding, your business can guarantee constant, consistent and high-quality support without increasing the workload of your internal team.",p3:"Here youll find in detail all the features that make our AI assistant a truly essential tool for your business."},multichannel:{title:"Multichannel: present wherever your customers are",p1:"People expect quick answers, without having to switch channels or wait hours. Thats why the AI assistant integrates with the tools your customers use every day.",p2:"This way your brand is always reachable and ready to interact, improving the user experience and increasing conversion opportunities.",cards:{webWidget:{title:"Web widget",text:"Integrated directly into your website, always visible and active 24/7 to answer questions and guide users towards action."},whatsapp:{title:"WhatsApp",text:"The most widely used messaging channel: perfect for support, quick requests and instant bookings."},messenger:{title:"Facebook Messenger",text:"Ideal for following up with users coming from your campaigns and social content, without missing any conversation."},instagram:{title:"Instagram Direct",text:"Perfect for capturing questions and requests that arise from posts, reels and stories, turning them into contacts and opportunities."}}},knowledge:{source:{rag:{title:"Website / docs (RAG)",description:"Use your website pages and uploaded documents as the bot's knowledge base."},shopify:{title:"Shopify catalog",description:"Answer questions directly from your connected Shopify products and variants."}},title:"Deep knowledge of your content",imageAlt:"Coslo studying your content",labels:{pdf:"PDF",site:"Website",faq:"FAQ"},p1:"The assistant doesnt just generate generic answers: it responds based on your materials and what you publish online.",p2:"Thanks to an advanced crawling and analysis system, the platform:",list:{l1:"autonomously browses your website,",l2:"reads and understands the content of your PDFs,",l3:"processes texts, FAQs, guides, articles and technical documentation,",l4:"organises all information into a clear and consistent knowledge base."},p3:"This way the assistant can reflect your business: products, services, internal processes, specific terminology and strengths. The result is answers that stay accurate, precise and consistent with your brand identity as your sources evolve.",p4:"You dont need ad-hoc texts: its enough to use what you already have, and the assistant will do the rest."},booking:{title:"Real, confirmed bookings directly in your Google Calendar",p1:"The assistant isnt just informational support, but a real operational collaborator. One of the most appreciated features is the complete management of bookings.",p2:"Heres what it can do on its own:",list:{l1:"propose available dates and time slots,",l2:"collect customer data (name, contact details, request),",l3:"confirm the appointment in real time,",l4:"create the event in your Google Calendar with all the details."},p3:"No more scattered messages, cross-checks or appointments written down by hand: the flow is simple, automated and minimises errors and time waste.",calendar:{header:"Google Calendar",event1:{time:"14:00",title:"Client appointment",subtitle:"Mario Rossi  Consultation"},event2:{time:"16:30",title:"Product demo",subtitle:"Laura Bianchi  Presentation"}}},growth:{title:"An assistant that grows with your company",imageAlt:"Coslo building your AI assistant",p1:"Every new document and every update to your website helps keep the assistants answers accurate and aligned over time. The platform evolves together with your business.",p2:"You can use it, for example, for:",p3:"Its like having a digital assistant thats always available, able to answer simple and complex business questions and to take care of the most repetitive tasks for you.",pills:{p1:"Customer support",p2:"Bookings and appointments",p3:"Replies to social contacts",p4:"Lead generation",p5:"Technical support",p6:"Information management"}},benefits:{title:"Why companies that try it never go back",cards:{c1:{title:"Reduced response times",text:"You improve customer satisfaction thanks to quick and consistent answers at any time of day."},c2:{title:"More contacts and bookings",text:"Multichannel presence increases touchpoints and lets you turn more conversations into appointments or sales opportunities."},c3:{title:"Smart automation",text:"By delegating repetitive tasks to AI, your team can focus on strategic activities that generate more value."},c4:{title:"Brand consistency",text:"Answers are aligned with your information, tone of voice and brand guidelines, without improvisation."}}},miniCoslo:{title:"Coslo talks to your customers like a real assistant",imageAlt:"Coslo  AI assistant",p1:"Customer chats are handled with a natural, professional tone: Coslo answers FAQs, suggests appointments and collects important data without wasting your teams time.",p2:"Below you can see a simplified example of what a typical conversation with your customers might look like.",bubbleUser:"Hi Coslo, can I reschedule my appointment for tomorrow?",bubbleBot:"Of course! Just tell me the day and time you prefer and Ill update the calendar right away."},cta:{title:"Take your business into the future",text:"In an increasingly competitive market, the quality and speed of communication make the difference. With our AI assistant you can offer a modern, professional and fully automated experience.",primaryCta:"Get started",secondaryCta:"Access your area"}},FQ={pageTitle:"Log in to your Coslo space",subtitle:"Manage your AI assistants, review conversations and update settings in just a few clicks.",bullets:{b1:"A single dashboard for all your channels",b2:"Real-time statistics on bot performance",b3:"Secure access with two-factor authentication"},cardTitle:"Login",email:"Email",password:"Password",forgotPassword:"Forgot password?",submit:"Log in",submitting:"Logging in...",divider:"or",noAccount:"Dont have an account yet?",register:"Sign up",googleError:"Google login failed",loginError:"Login failed",mfaTitle:"Two-factor authentication",mfaSubtitle:"Open your authenticator app (Google Authenticator, 1Password, Authy, etc.) and enter the 6-digit code to finish logging in.",mfaCodeLabel:"Security code",mfaSubmit:"Confirm and log in",mfaSubmitting:"Verifying...",mfaError:"Invalid code. Please try again.",backToCredentials:"Back to email and password login",mfaHelp:"No longer have access to your authentication app? Use one of the backup codes you saved when you enabled 2FA."},zQ={title:"Recover your password",subtitle:{request:"Enter the email you used to register. We'll send you a 6-digit code.",reset:"Enter the code we emailed you and choose a new password."},bullets:{b1:"Use the same email you registered with.",b2:"Codes expire in 10 minutes.",b3:"You'll choose a new password after verifying the code."},emailLabel:"Email",codeLabel:"Reset code",newPassword:"New password",confirmPassword:"Confirm password",actions:{sending:"Sending...",sendCode:"Send reset code",updating:"Updating...",resetPassword:"Reset password"},success:{requested:"If an account exists, we sent a reset code to your email.",reset:"Password updated successfully. You can log in now."},cancel:{cta:"Cancel subscription",processing:"Canceling?",confirm:"Cancel this subscription at the end of the current billing period?",scheduled:"Cancellation scheduled",until:"until",success:"Cancellation scheduled. Your plan stays active until the end of the current billing period.",successWithDate:"Cancellation scheduled. Your plan stays active until {{date}}.",error:"Failed to cancel subscription."},errors:{requestFailed:"We couldn't send the reset code. Please try again.",mismatch:"Passwords do not match.",requirements:"Password does not meet the requirements.",resetFailed:"Invalid or expired code. Please try again."},backToLogin:"Back to"},RQ={pageTitle:"Create your Coslo account",subtitle:"In just a few minutes you connect your channels and have an AI assistant ready to answer your customers 24/7.",bullets:{b1:"Multi-channel (web, WhatsApp, social, calendar)",b2:"Guided and customizable configuration",b3:"Multi-tenant plan designed for agencies and teams"},cardTitle:"Sign up",email:"Email",password:"Password",passwordConfirm:"Confirm password",submit:"Create account",submitting:"Creating account...",success:"Registration completed! Check your email and verify your account before logging in.",errorGeneric:"Registration failed",errorPasswordMismatch:"Passwords do not match",errorPasswordRequirements:"The password does not meet the requirements. Please check the list below the password field.",pwTitle:"Password requirements:",pwRules:{minLength:"At least 8 characters",uppercase:"At least one uppercase letter (AZ)",lowercase:"At least one lowercase letter (az)",digit:"At least one digit (09)",special:"At least one special character (e.g. !@#$%^&*)"},alreadyAccount:"Already have an account?",login:"Log in"},_Q={title:"Verify email",loading:"We are verifying your email...",missingToken:"Verification token missing.",successDefault:"Email successfully verified!",invalidOrExpired:"Invalid or expired token.",genericError:"Verification failed.",backToLogin:"You can now go back to",loginLink:"login"},BQ={sidebarTitle:"Dashboard",brandSmall:"Coslo - AI Assistant",logout:"Logout",nav:{dashboard:"Dashboard",bots:"Bots",billing:"Billing",profile:"Profile"},aria:{openNav:"Open navigation",closeNav:"Close navigation"}},$Q={title:"Billing & usage",subtitle:"See your active bot subscriptions, usage this month and payment history.",loading:"Loading billing data...",activeSubscriptions:"Active subscriptions",totalMonthlyAcrossAllBots:"Total monthly across all bots:",thisMonth:"This month:",tokens:"Energy",of:"of",noActiveSubscriptions:"You don't have any active subscriptions yet.",slugLabel:"Slug",perMonth:"month",breakdown:{features:"Features",plan:"Plan"},usageThisMonth:"Usage this month:",noConfiguredLimit:"(no configured limit)",subscriptionStatus:{active:"Active",pastDue:"Past due",canceled:"Canceled",trial:"Trial",unpaid:"Unpaid",incomplete:"Incomplete",incompleteExpired:"Incomplete (expired)"},usageStatus:{overLimit:"Over limit",atLimit:"At limit",highUsage:"High usage",healthyUsage:"Healthy usage"},paymentHistory:{title:"Payment history",empty:"No payments recorded yet.",table:{date:"Date",bot:"Bot",amount:"Amount",status:"Status",period:"Period"}},invoice:{ariaDownload:"Download invoice",ariaOpening:"Opening invoice",titleDownload:"Download invoice",titleOpening:"Opening",srDownload:"Download invoice",srOpening:"Opening invoice"},errors:{loadFailed:"Failed to load billing overview",invoiceUnavailable:"Invoice is not available for this payment.",invoiceDownloadFailed:"Failed to download invoice."},cancel:{cta:"Cancel subscription",processing:"Canceling?",confirm:"Cancel this subscription at the end of the current billing period?",scheduled:"Cancellation scheduled",until:"until",success:"Cancellation scheduled. Your plan stays active until the end of the current billing period.",successWithDate:"Cancellation scheduled. Your plan stays active until {{date}}.",error:"Failed to cancel subscription."}},UQ={title:"Dashboard",subtitle:"Overview of your bots, conversations and energy usage.",sections:{overview:"At a glance",overviewSubtitle:"Core health signals across your bots.",trends:"Trends",trendsSubtitle:"Conversations, usage, and performance over time."},loading:"Loading dashboard data...",actions:{createNewBot:"+ Create new bot"},empty:{title:"No bots yet",subtitle:"Start by creating your first bot. Once traffic arrives, youll see conversations, energy usage and top performers here.",cta:"Create your first bot"},kpis:{totalBots:"Total bots",activeBots:"Active bots",conversationsLast30Days:"Conversations (last {{days}} days)",tokensThisMonth:"Energy used (last {{days}} days)",emailsThisMonth:"Emails sent (last {{days}} days)",whatsappLeadsThisMonth:"WhatsApp leads (last {{days}} days)"},kpisHints:{totalBots:"All bots created under this account.",activeBots:"Bots currently live and serving traffic.",conversationsLast30Days:"Across all channels & bots.",tokensThisMonth:"Useful to keep an eye on costs.",whatsappLeadsThisMonth:"Number of WhatsApp lead templates sent in the last {{days}} days",unlimitedPlan:"Unlimited plan",of:"of"},charts:{conversationsLast10Days:{title:"Conversations (last {{days}} days)",subtitle:"Each line represents a bot. Hover or tap to see daily volumes.",empty:"No conversations yet in the last 10 days."},tokensLast10Days:{title:"Energy usage (last {{days}} days)",subtitle:"Total Energy per day for each bot.",empty:"No Energy usage recorded yet in the last 10 days."},tokensSplitLast10Days:{title:"Tokens by channel (last {{days}} days)",subtitle:"OpenAI + knowledge vs emails vs WhatsApp templates",empty:"Not enough data yet to show the split."},tokensSplitByBotLast10Days:{title:"Tokens by bot & channel (last {{days}} days)",subtitle:"How each bot consumes tokens via OpenAI + knowledge, emails, and WhatsApp templates",empty:"Not enough data yet to show per-bot split."},topBots:{title:"Top bots by conversations",subtitle:"Ranked by conversation volume in the selected period.",empty:"No conversations yet in the last 30 days."}},tokensSplit:{legend:{openAi:"OpenAI + knowledge",emails:"Emails",whatsapp:"WhatsApp templates"}},activity:{title:"Activity details",subtitle:"Quick view of your most active bots.",empty:"No active bots in the last 30 days.",lastConversation:"Last conversation",convAbbrev:"conv.",view:"View"},range:{label:"Time range",last:"Last",days:"days",loading:"Updating charts",hint:"Charts update based on this range."},insights:{alertsTitle:"Alerts & anomalies",alertsSubtitle:"Early signals from recent activity",noAlerts:"No unusual activity detected.",now:"Now",prev:"Prev",compareTitle:"Period comparison",compareSubtitle:"Current vs previous period",compareEmpty:"Comparison unavailable.",bookings:"Bookings"},coaching:{title:"Get your dashboard moving",subtitle:"No conversations yet in this range. Here are quick ways to get activity.",createBot:"Create a bot",connectChannels:"Connect channels",addKnowledge:"Add knowledge"},conversion:{title:"User journey",subtitle:"Conversations  leads  bookings",back:"Back to dashboard",conversations:"Conversations",leads:"Leads",bookings:"Bookings",leadRate:"Lead rate",bookingRate:"Booking rate",perBot:"Per-bot breakdown",perBotSubtitle:"Track which bots convert best.",bot:"Bot",viewDetails:"View per-bot breakdown",empty:"No conversion data yet."},health:{title:"Bot health",subtitle:"Quick overview of bot readiness, channels, and recent activity.",back:"Back to dashboard",status:"Status",lastConversation:"Last conversation",conversationsLast30:"Conversations (30d)",knowledge:"Knowledge",bookings:"Bookings",viewBot:"View bot",settings:"Settings",empty:"No bots found yet."},errors:{loadFailed:"Failed to load dashboard"}},WQ={pageTitle:"Account",pageSubtitle:"Manage your profile information, login and security.",loading:"Loading account...",confirmDelete:"This will permanently delete your account, all your bots and their data. This action cannot be undone. Continue?",common:{cancel:"Cancel"},profile:{title:"Profile",subtitle:"This information is visible inside your dashboard only.",avatarAlt:"Avatar",displayName:{label:"Display name",placeholder:"Your name or company name"},avatarUrl:{label:"Avatar URL",placeholder:"https://",help:"You can paste a link to an image (e.g. from your site or logo CDN)."},actions:{save:"Save profile",saving:"Saving"},success:"Profile updated."},security:{title:"Login & security",emailLabel:"Email",loginMethodLabel:"Login method",loginMethod:{google:"Google",emailPassword:"Email & password",unknown:"Unknown"},googleOnlyNoteStrongPrefix:"This account uses",googleSignInStrong:"Google Sign-In",googleOnlyNoteSuffix:"Password login is not enabled."},password:{current:{label:"Current password"},new:{label:"New password",help:"At least 8 characters, with upper & lower case, a number and a symbol."},confirm:{label:"Confirm new password"},actions:{change:"Change password",updating:"Updating"},success:"Password updated.",errors:{mismatch:"New password and confirmation do not match."}},mfa:{title:"Two-factor authentication",subtitle:"Extra protection for your account using an authenticator app. After login, you'll be asked for a 6-digit code from your phone.",statusLabel:"Status",status:{enabled:"Enabled",disabled:"Disabled"},recommendation:"We strongly recommend enabling two-factor authentication, especially if you reuse this email elsewhere or share devices.",setup:{step1Title:"1. Scan the QR code",step1Body:"Open your authenticator app (Google Authenticator, 1Password, Authy, etc.) and scan this code. If you can't scan the QR code, enter the secret manually.",manualSecretLabel:"Manual secret:",step2Title:"2. Enter the 6-digit code",step2Body:"After you've added the account to your app, enter the current 6-digit code to confirm everything works.",codeLabel:"Code from your app"},actions:{enable:"Enable two-factor authentication",preparing:"Preparing",confirmEnable:"Confirm & enable 2FA",verifying:"Verifying",disabling:"Disabling"},enabledNote:"At each login, after your primary method (email/password or Google), we'll ask for a 6-digit code from your authenticator app.",backupCodes:{title:"Backup codes (save now)",body:"These codes are shown only once. Save them somewhere safe (password manager, secure note, printed copy). Each code can be used one time if you lose access to your phone.",copyAll:"Copy all codes"},disable:{intro:"If you ever change device or authenticator app, you can disable 2FA and set it up again.",open:"Disable two-factor authentication",confirmBody:"For your security, confirm with a code from your authenticator app or with a backup code.",codeLabel:"Code from your app (6 digits)",backupCodeLabel:"Or a backup code",confirm:"Confirm disable 2FA"},success:{enabledSaveBackupCodes:"Two-factor authentication enabled. Save your backup codes in a safe place.",disabled:"Two-factor authentication disabled.",backupCodesCopied:"Backup codes copied to clipboard. Store them somewhere safe."},errors:{startFailed:"Failed to start two-factor authentication setup.",confirmFailed:"Could not confirm the code. Check the code and try again.",disableRequiresCode:"Enter a code from your authenticator app or a backup code.",disableFailed:"Could not disable two-factor authentication. Check the code and try again.",backupCodesCopyFailed:"Unable to copy codes automatically. Please copy them manually and store them somewhere safe."}},team:{title:"Team access",subtitle:"Invite teammates to access specific bots and reply as human.",loading:"Loading team data...",invite:{emailLabel:"Team member email",emailPlaceholder:"name@company.com",botLabel:"Bots they can access",noBots:"Create a bot first to invite teammates.",send:"Send invite",sending:"Sending..."},members:{title:"Team members",empty:"No team members yet.",columns:{member:"Member",bots:"Bots",lastLogin:"Last login",actions:"Actions"},never:"Never",revoke:"Revoke access",remove:"Remove member",editMember:"Edit member",save:"Save",saving:"Saving...",cancel:"Cancel",confirmRemove:"Remove this team member's access?"},invites:{title:"Pending invites",empty:"No pending invites.",columns:{email:"Email",bots:"Bots",sent:"Sent",actions:"Actions"},revoke:"Revoke invite"},success:{inviteSent:"Invite sent successfully.",inviteRevoked:"Invite revoked.",memberRevoked:"Member access revoked.",memberUpdated:"Member access updated."},errors:{loadFailed:"Failed to load team data.",inviteFailed:"Failed to send invite.",revokeFailed:"Failed to revoke access.",updateFailed:"Failed to update member access.",emailRequired:"Enter an email address.",botsRequired:"Select at least one bot."}},danger:{title:"Danger zone",subtitle:"Permanently delete your account and all your bots, conversations, documents and usage data. This action cannot be undone.",passwordConfirm:{label:"Confirm with your password",help:"For your security, we require your current password to delete the account."},googleNote:"This account uses Google Sign-In. Click the button below to confirm with Google and delete your account and all associated bots and data.",actions:{delete:"Delete my account",deleting:"Deleting",deletingInline:"Deleting your account"},unsupported:"This account does not support self-service deletion yet."},errors:{loadFailed:"Failed to load account",updateProfileFailed:"Failed to update profile.",changePasswordFailed:"Failed to change password.",deleteFailed:"Failed to delete account."}},qQ={title:"Features",subtitle:"Step 1  configure channels, crawlers and booking for {{botName}}. These options influence your subscription price.",backToBot:" Back to overview",missingId:"Missing bot ID.",loadingBot:"Loading bot...",errorTitle:"Error",notFoundTitle:"Bot not found",calendarIncomplete:"Calendar booking is enabled but calendar ID or time zone is missing. Fill them below to allow bookings to work properly.",perMonth:"month",groups:{knowledge:"Knowledge features",channels:"Channels",calendar:"Bookings & calendar",leadAds:"Lead Ads"},knowledge:{source:{rag:{title:"Website / docs (RAG)",description:"Use your website pages and uploaded documents as the bot's knowledge base."},shopify:{title:"Shopify catalog",description:"Answer questions directly from your connected Shopify products and variants."}},domain:{title:"Domain crawler (website content)",description:"Automatically scan your website so the bot always answers with fresh, up-to-date content."},pdf:{title:"PDF / document ingestion",description:"Upload manuals, brochures or documents and let the bot answer questions based on them."}},channels:{web:{title:"Web widget & hosted demo",description:"Embed a chat widget on your site and get a hosted demo link to share with your customers."},whatsapp:{title:"WhatsApp",description:"Connect your bot to WhatsApp so customers can chat with you from anywhere."},messenger:{title:"Facebook Messenger",description:"Answer questions directly on your Facebook page via Messenger."},instagram:{title:"Instagram DM",description:"Reply to Instagram direct messages automatically with your bot."}},calendar:{title:"Google Calendar bookings",description:"Let the bot schedule meetings directly in your Google Calendar, with availability checks and time zones handled for you.",fields:{calendarId:"Google Calendar ID",timeZone:"Business time zone",defaultDuration:"Default appointment duration (minutes)"},placeholders:{calendarId:"your-calendar-id@group.calendar.google.com",timeZone:"Europe/Rome"}},leadAds:{whatsapp:{title:"Lead Ads  WhatsApp",description:"Automatically send a WhatsApp message to new leads from your Meta lead forms.",selectTier:"Select a WhatsApp messages tier",requiresWhatsapp:"This feature requires the WhatsApp channel to be enabled."}},actions:{save:"Save features",saving:"Saving...",next:"Next: choose plan & pay",viewChangePlan:"View / change plan",cancelSubscription:"Cancel subscription",cancelling:"Cancelling...",backToBot:" Back to overview"},side:{title:"Plan & billing",statusLabel:"Status:",subtitle:"Step 2  choose a usage plan and confirm payment. The total price is: features subtotal + usage plan.",loadingPricing:"Loading pricing",featuresSubtotal:"Features subtotal",featuresTotalPerMonth:"Features total (per month)",nextNote:"You'll be redirected to a Stripe checkout page to confirm your subscription."},success:{featuresUpdated:"Features updated.",subscriptionCanceled:"Subscription canceled and bot deactivated.",saved:"Features updated."},errors:{loadBot:"Failed to load bot",updateFeatures:"Failed to update bot features",loadPricing:"Unable to load pricing right now.",cancelSubscription:"Failed to cancel subscription",saveFeatures:"Failed to update bot features"}},HQ={title:"Plan & billing",subtitle:"Step 2  choose a usage plan for {{botName}}. Final price = features subtotal + plan.",backToFeatures:" Back to features",missingId:"Missing bot ID.",loading:"Loading plan options...",errorTitle:"Error",notFoundTitle:"Bot not found",perMonth:"month",plans:{title:"Usage plans",subtitle:"Pick how much usage you expect. You can change your plan later.",loading:"Loading plans",empty:"No usage plans are configured yet. Please contact support.",tokensPerMonth:"Energy per month:",tokensPerMonthLabel:"Energy per month",unlimited:"Unlimited",select:"Select this plan",selected:"Selected",planImageAlt:"{{planName}} plan",mostPopular:"Most popular"},summary:{title:"Summary",statusLabel:"Status:",subtitle:"Final price = features subtotal + selected usage plan.",featuresSubtotal:"Features subtotal",loadingPricing:"Loading pricing",featuresTotalPerMonth:"Features total (per month)",selectedPlan:"Selected plan",noPlanSelected:"No plan selected.",totalPerMonth:"Total per month",selectPlanToSeeTotal:"Select a plan to see total"},actions:{activatePay:"Activate & Pay",changePlan:"Change plan",redirecting:"Redirecting...",updating:"Updating..."},notes:{redirectToStripe:"You'll be redirected to Stripe to confirm and pay for this bot.",proration:"Your subscription will be updated immediately. Stripe will apply prorated charges/credits."},success:{planUpdatedProration:"Plan updated. Stripe has applied proration to your subscription.",title:"Plan updated"},errors:{loadFailed:"Failed to load plan data",selectPlan:"Please select a plan.",updateFailed:"Failed to update plan"},onboarding:{title:"Choose your plan and start using Coslo",subtitle:"Weve preconfigured your channels, bookings and Lead Ads. Now pick the plan that matches your volume.",summaryTitle:"Configuration summary",summarySubtitle:"Heres what youve configured for this bot so far.",summary:{channels:"Channels",none:"None configured",booking:"Bookings",leadAds:"Lead Ads  WhatsApp",enabled:"Enabled",disabled:"Disabled"},edit:"Edit"},energyInfo:{title:"How Energy and limits work",main:"Almost every action on the platform consumes Energy (assistant messages, document retrieval, tools, ingestion). WhatsApp template messages (outbound) have their own limit and do not consume Energy.",estimates:'The "Up to" values shown in each plan are maximum estimates if you spent all your Energy on a single type of task. Actual usage varies based on message length, document size and context.',tooltip:"Energy is a unified credit that covers assistant messages, retrieval and ingestion. WhatsApp template messages have a separate limit."},features:{free:{energy:"{{amount}} Energy per month",messages:"Up to 150 AI Assistant messages (estimate)",pages:"Up to 100 ingested pages (estimate)",emails:"Up to 20 emails",whatsappTemplates:"Up to 0 WhatsApp template messages (outbound)"},starter:{energy:"{{amount}} Energy per month",messages:"Up to 3,500 AI Assistant messages (estimate)",pages:"Up to 2,000 ingested pages (estimate)",emails:"Up to 1,000 emails",whatsappTemplates:"Up to 200 WhatsApp template messages (outbound)"},growth:{energy:"{{amount}} Energy per month",messages:"Up to 20,000 AI Assistant messages (estimate)",pages:"Up to 10,000 ingested pages (estimate)",emails:"Up to 5,000 emails",whatsappTemplates:"Up to 1,000 WhatsApp template messages (outbound)"},scale:{energy:"{{amount}} Energy per month",messages:"Up to 85,000 AI Assistant messages (estimate)",pages:"Up to 50,000 ingested pages (estimate)",emails:"Up to 20,000 emails",whatsappTemplates:"Up to 5,000 WhatsApp template messages (outbound)"},default:{energy:"{{amount}} Energy per month"}}},KQ={title:"Conversations",subtitle:"All conversations across web, WhatsApp, Facebook Messenger and Instagram.",missingId:"Missing bot ID.",loading:"Loading conversations...",empty:"No conversations yet.",notEvaluated:"Not evaluated",backToBot:" Back to overview",actions:{evaluateSelected:"Evaluate selected",evaluateSelectedCount:"Evaluate selected ({{count}})",evaluatingSelected:"Evaluating selected...",evaluate:"Evaluate",reevaluate:"Re-evaluate",evaluating:"Evaluating...",view:"View"},pagination:{total:"Total conversations: {{total}}",pageOf:"Page {{page}} of {{totalPages}}",prev:"Previous",next:"Next"},table:{selectAll:"Select all conversations on this page",selectRow:"Select conversation",channel:"Channel",externalUser:"External user",lastMessage:"Last message",score:"Score"},errors:{loadFailed:"Failed to load conversations",evalFailed:"Failed to evaluate conversation",bulkEvalFailed:"Failed to bulk evaluate conversations",someFailed:"Some conversations could not be evaluated (e.g. too short or other errors)."}},VQ={title:"Create new bot",subtitle:"Step 1: choose a name and a slug. You can configure channels, knowledge, bookings and billing after this.",fields:{name:"Name",slug:"Slug",slugHelp:"Used in demo URLs, widget, and internal routing.",description:"Description (optional)"},actions:{create:"Create bot",creating:"Creating..."},errors:{createFailed:"Failed to create bot"},onboarding:{title:"Create your first Coslo bot",subtitle:"Give your assistant a name and a short description. You can change this later.",intro:"This information is used in the dashboard and in your internal tools, not in the public widget.",namePlaceholder:"e.g. Acme Support Assistant",slugPlaceholder:"e.g. acme-support",descriptionPlaceholder:"Optional. A short sentence about what this bot does."}},GQ={missingId:"Missing bot ID.",loading:"Loading bot...",errorTitle:"Error",notFoundTitle:"Bot not found",slugLabel:"Slug:",actions:{openDemo:"Open demo",activatePay:"Activate & Pay",viewPlanBilling:"View plan & billing",saveBasics:"Save basics",saving:"Saving..."},basics:{title:"Bot basics",subtitle:"High-level description and core behavior for this assistant.",descriptionLabel:"Description",descriptionPlaceholder:"Short description of what this bot does...",systemPromptLabel:"System prompt (advanced behavior)",systemPromptPlaceholder:"Internal instructions the AI must always follow...",systemPromptHelp:"This is not shown to end users. Use it to define tone, boundaries and special rules for the bot.",autoEvalLabel:"Automatic conversation evaluation",autoEvalHelp:"Automatically score conversations in the background to help you monitor quality. This uses your bot's energy plan but does not affect users."},health:{title:"Health overview",botStatusTitle:"Bot status",knowledgeTitle:"Knowledge status",channelsTitle:"Channels status",calendarTitle:"Calendar status",evalTitle:"Conversation evaluation",badges:{configured:"Configured",disabled:"Disabled",enabledNotInitialized:"Enabled, not initialized",shopifyChecking:"Checking Shopify connection...",shopifyNotConnected:"Shopify is selected, but no store is connected yet.",shopifyConnected:"Shopify store is connected.",enabledNotConfigured:"Enabled, not configured",noChannelsEnabled:"No channels enabled",allChannelsConfigured:"All enabled channels configured",someChannelsNeedSetup:"Some channels need setup"},botStatus:{active:"This bot is active and ready to handle conversations.",draft:"This bot is not active yet. You can activate it from the billing flow.",inactive:"This bot is currently not active. Check your plan & billing or contact support if this is unexpected."},knowledge:{source:{rag:{title:"Website / docs (RAG)",description:"Use your website pages and uploaded documents as the bot's knowledge base."},shopify:{title:"Shopify catalog",description:"Answer questions directly from your connected Shopify products and variants."}},disabled:"Domain crawler / PDF ingestion are disabled for this bot.",enabledNotInitialized:"Knowledge features are enabled, but no crawl/upload has initialized the knowledge base yet.",shopifyChecking:"Checking Shopify connection...",shopifyNotConnected:"Shopify knowledge is selected, but no store is connected yet.",shopifyConnected:"Shopify store is connected and ready.",configured:"Knowledge base is created and can be used for answers."},channels:{and:"and configure them in",none:"No channels are enabled yet. Enable them in",enabledList:"Enabled channels: {{channels}}. All of them have the required configuration.",missingConfig:"Some enabled channels are missing required configuration: {{missing}}. Go to"},calendar:{disabled:"Google Calendar bookings are disabled. You can enable them in Features & Plan.",enabledNotConfigured:"Calendar bookings are enabled, but calendar ID, time zone or duration are missing. Configure them in Features & Plan.",configured:"Bookings use Google Calendar ({{calendarId}}) in {{timeZone}}, with default duration of {{duration}} minutes."},eval:{automatic:"Automatic",manual:"Manual only",automaticDesc:"New conversations may be automatically scored in the background to help you monitor quality.",manualDesc:"Conversations are only evaluated when you trigger it manually from the Conversations section."}},channels:{names:{web:"Web",whatsapp:"WhatsApp",messenger:"Facebook Messenger",instagram:"Instagram DM"},missing:{webDomain:"Web domain",whatsappExternalId:"WhatsApp external ID",facebookPageId:"Facebook Page ID",instagramBusinessId:"Instagram Business ID"}},workspace:{title:"Bot workspace",subtitle:"Jump to configuration and monitoring areas for this bot."},billing:{title:"Current billing",perMonth:"month",totalPerMonth:"Total per month",manage:"Manage plan & billing"},nav:{featuresPlan:"Features & Plan",featuresPlanDesc:"Enable channels, crawlers and choose the usage plan.",knowledge:"Content & Knowledge",knowledgeDesc:"Upload documents and configure how the bot learns.",channels:"Channels",channelsDesc:"Connect WhatsApp, website, Facebook and Instagram.",conversations:"Conversations",conversationsDesc:"Review user chats and debug bot behavior.",settings:"Booking Settings",settingsDesc:"Manage your booking settings",adsSettings:"Lead ADS Settings",adsSettingsDesc:"Manage your lead ads settings"},success:{basicsUpdated:"Bot basics updated successfully."},errors:{loadBot:"Failed to load bot",updateBot:"Failed to update bot",loadPricing:"Unable to load current plan pricing."}},YQ={title:"Channels",subtitle:"Connect your bot to web, WhatsApp, Facebook Pages and Instagram Business profiles.",backToBot:" Back to overview",missingId:"Missing bot ID.",loading:"Loading channels...",labels:{facebookPage:"Facebook Page",instagramBusiness:"Instagram Business Profile",whatsapp:"WhatsApp",whatsappBusiness:"WhatsApp Business",webWidget:"Web widget"},status:{notConnected:"Not connected",active:"Active",connected:"Connected",connectedUnknownExpiry:"Connected (expiry unknown)",needsReconnect:"Needs reconnect",expiringSoon:"Expiring soon",expired:"Expired"},meta:{loadingPages:"Loading Meta pages...",sessionLoadFailed:"Failed to load Meta session",selectTitle:"Select {{channel}}",selectSubtitle:"We retrieved the pages you manage from Meta. Choose which one to link to this bot.",selectPlaceholder:"Select a page...",instagramEligiblePagesLabel:"Page with Instagram Business account",instagramHint:"Only pages with an attached Instagram Business account can be used for Instagram.",connectedViaMeta:"Connected via Meta",permissionsDialog:{titleFacebook:"Review access for Facebook",titleInstagram:"Review access for Instagram",introFacebook:"Before you continue with Facebook, please review the access this app will receive from Meta.",introInstagram:"Before you continue with Instagram, please review the access this app will receive from Meta.",listTitle:"We will be able to:",facebook:{pagesShowList:"See the list of Facebook Pages you manage so you can choose which Page to connect.",pagesMessaging:"Read and send messages on your connected Page so your bot can reply to people via Messenger.",pagesManageMetadata:"Manage Page messaging settings and webhooks so we can receive new messages in real time.",businessManagement:"Access Facebook assets (Pages and Instagram accounts) you manage in Meta Business Manager in order to connect them to this bot."},instagram:{pagesShowList:"See the Facebook Pages linked to your Instagram Business account so you can choose which one to connect.",instagramBasic:"Read basic profile information (name, username, profile picture) of your Instagram Business account to show it inside the dashboard.",instagramManageMessages:"Read and send Instagram Direct messages so your bot can reply to DMs.",pagesManageMetadata:"Manage Page messaging settings and webhooks so we can receive new Instagram messages in real time.",businessManagement:"Access Facebook assets (Pages and Instagram accounts) you manage in Meta Business Manager in order to connect them to this bot."},checkboxLabel:"I understand and agree to grant this access.",continueFacebook:"Continue with Facebook",continueInstagram:"Continue with Instagram",footerNote:"You can revoke this access at any time from your Facebook and Instagram account settings."},selectModal:{titleFacebook:"Select a Facebook Page",titleInstagram:"Select a Page for Instagram",introFacebook:"We retrieved the Facebook Pages you can manage from Meta. Choose one Page to connect to this bot.",introInstagram:"We retrieved the Facebook Pages linked to your Instagram Business accounts. Choose one Page to connect.",personalGroupTitle:"Personal pages",businessGroupTitle:"Business managed pages",noPages:"No eligible pages were found for this connection.",editPreviousSettingsHint:'If you expected to see Instagram pages here, when the Facebook popup opens click "Edit previous settings" and make sure you select both your Facebook page and the connected Instagram account.'}},whatsapp:{selectNumberTitle:"Select WhatsApp number",selectNumberSubtitle:"We retrieved the WhatsApp numbers in your WhatsApp Business account. Choose which one to link to this bot.",numberLabel:"WhatsApp number",selectPlaceholder:"Select a number...",number:"Number: {{number}}",numberId:"Number ID: {{id}}",confirmReconnectWithinWeek:"You recently connected WhatsApp. Start a new embedded signup anyway?",pinLabel:"WhatsApp two-step verification PIN",pinPlaceholder:"6-digit PIN set in WhatsApp Manager",pinModal:{title:"Connect WhatsApp Business",intro:"Select the WhatsApp Business phone number you want to connect and enter the two-step verification PIN for that number.",whatIsPin:"This PIN is the 6-digit two-step verification PIN configured for this phone number in WhatsApp Manager, not your Google Authenticator code or login 2FA.",step1:"Open WhatsApp Manager and go to Account tools  Phone numbers.",step2:"Click the gear icon next to your phone number and open Two-step verification.",step3:"If you don't remember the PIN, turn off two-step verification from there (you'll get an email), then set a new 6-digit PIN.",step4:"Come back here and enter that exact 6-digit PIN.",pinHint:"Enter exactly the same 6-digit PIN you see under Two-step verification for this phone number in WhatsApp Manager."}},connectSocial:{title:"Connect social channels",subtitle:"Use Meta login to connect your Facebook Page, Instagram Business account or WhatsApp Business number. We'll store the necessary tokens securely and keep your bot responding.",facebookDesc:"Connect a Facebook Page so your bot can respond via Messenger.",instagramDesc:"Connect an Instagram Business account to reply to DMs.",whatsappDesc:"Connect a WhatsApp Business number using embedded signup.",connectedPage:"Connected page",connectedAccount:"Linked business account",connectedNumber:"Connected number"},connected:{title:"Connected channels",subtitle:"Review and manage all channels attached to this bot.",empty:"No channels connected yet."},table:{type:"Type",details:"Details",status:"Status"},fields:{type:"Type",externalId:"External ID",accessToken:"Access token",metaJson:"Meta (JSON)"},placeholders:{metaJson:`{
  "example": true
}`},create:{title:"Add channel",metaWarning:"Facebook/Instagram channels must be connected via the Meta connect buttons above."},edit:{title:"Edit channel"},web:{externalId:"External ID: {{id}}",defaultWidget:"Default website widget"},generic:{externalId:"External ID: {{id}}"},actions:{connectSelected:"Connect selected",connecting:"Connecting...",cancel:"Cancel",connectFacebook:"Connect Facebook",reconnectFacebook:"Reconnect Facebook",connectInstagram:"Connect Instagram",reconnectInstagram:"Reconnect Instagram",connectWhatsapp:"Connect WhatsApp",reconnectWhatsapp:"Reconnect WhatsApp",connectingWhatsapp:"Connecting WhatsApp...",disconnect:"Disconnect",edit:"Edit",save:"Save",addChannel:"Add channel",create:"Create"},confirm:{deleteChannel:"Delete this channel?"},errors:{loadFailed:"Failed to load channels",createFailed:"Failed to create channel",updateFailed:"Failed to update channel",deleteFailed:"Failed to delete channel",metaSessionLoad:"Failed to load Meta session",metaAttachFailed:"Failed to attach Meta page",metaMustUseConnect:"Facebook/Instagram channels must be connected via the Meta connect buttons above.",metaManagedExternally:"Facebook and Instagram channels are managed via Meta. To update them, disconnect and reconnect using the buttons above.",facebookConnectFailed:"Failed to start Facebook connection",instagramConnectFailed:"Failed to start Instagram connection",whatsappEnvMissing:"WhatsApp signup is not configured. Please set VITE_META_APP_ID and VITE_WHATSAPP_EMBEDDED_CONFIG_ID.",whatsappCancelled:"WhatsApp signup was cancelled or did not complete.",whatsappSignupFailed:"Failed to complete WhatsApp embedded signup",whatsappInitFailed:"Failed to initialize WhatsApp signup",whatsappAttachFailed:"Failed to attach WhatsApp number"},onboarding:{common:{skip:"Skip for now"},channels:{title:"Where should Coslo talk with your customers?",subtitle:"Connect at least one channel now. You can always add more later from the dashboard.",meta:{title:"Meta inbox (Facebook & Instagram)",subtitle:"Connect your Facebook page and Instagram Business account so Coslo can reply to messages automatically.",toggleOn:"Meta inbox is ON",toggleOff:"Meta inbox is OFF",toggleOffHint:"Keep Meta inbox disabled if you don't want Coslo to reply on Facebook or Instagram for this bot.",disabledBody:"Meta inbox is disabled for this bot. Turn it on above if you want to connect Facebook or Instagram."},whatsapp:{title:"WhatsApp Business (embedded signup)",subtitle:"Connect a WhatsApp Business number using the official Meta embedded signup flow.",toggleOn:"WhatsApp is ON",toggleOff:"WhatsApp is OFF",toggleOffHint:"Keep WhatsApp disabled if you don't want Coslo to send messages on WhatsApp for this bot.",disabledBody:"WhatsApp is disabled for this bot. Turn it on above if you want to connect a number."},next:"Continue to bookings"}}},QQ={title:"Content & Knowledge",subtitle:"Configure domain, prompt and trigger crawls or document ingestion for {{botName}}.",backToBot:" Back to overview",missingId:"Missing bot ID.",loadingBot:"Loading bot...",notFound:"Bot not found",featuresAndPlan:"Features & Plan",status:{knowledgeStatus:"Knowledge status",locked:"Locked",missing:"Missing"},lockedBody:"This bot is currently {{status}}. Activate it in",missingBody:"No knowledge base has been built yet. Crawl your domain or upload PDFs to give this bot real context.",shopifyOnly:{title:"Shopify knowledge active",body:"This bot uses Shopify as its knowledge source. Manage catalog sync and connection in",shopifyLink:"Shopify settings",featuresLink:"Features"},feature:{enabled:"Feature enabled",disabled:"Feature disabled"},fields:{domain:"Domain",systemPrompt:"System prompt (for knowledge usage)"},placeholders:{domain:"https://example.com",systemPrompt:"Explain how the bot should use website / document knowledge in its answers..."},domainCard:{title:"Domain knowledge",description:"Configure the website to crawl and refine how the bot should use it in answers.",domainNote:"This domain is used when crawling your site and as context for knowledge search.",disabledNote:"Domain crawler is disabled for this bot. Enable it in"},docsCard:{title:"Documents & PDFs",description:"Upload PDFs and other documents to enrich the bot's knowledge with manuals, FAQs or product sheets.",disabledNote:"PDF ingestion is disabled for this bot. Enable it in",uploadLabel:"Upload one or more files",supportedFormats:"Supported formats: PDF, DOC, DOCX, TXT."},actions:{saveKnowledgeSettings:"Save knowledge settings",crawlNow:"Crawl domain now",crawling:"Crawling...",uploading:"Uploading and ingesting documents",estimateTokens:"Estimate energy",estimating:"Estimating..."},estimate:{crawlCostLabel:"Estimated crawl cost:",tokensUnit:"Energy",sampledPages:"(based on {{count}} sampled page(s))"},modal:{crawlTitle:"Confirm crawl",docsTitle:"Confirm document upload",crawlBody:"This crawl will index your website and consume energy based on the estimated total.",docsBody:"These documents will be ingested into your knowledge base using the estimated energy below.",estimatedTokens:"Estimated energy",remainingTokens:"Remaining this month",confirm:"Confirm",cancel:"Cancel"},confirm:{crawlEstimate:`Estimated Energy cost: ~{{tokens}} energy.
Remaining this month: {{remaining}} energy.

Start crawling now?`,crawlEstimateNoLimit:`Estimated Energy cost: ~{{tokens}} energy.

Start crawling now?`,uploadDocsEstimate:`Estimated Energy cost: ~{{tokens}} energy.

Do you want to upload and ingest these documents now?`,deactivateJob:"Deactivate all chunks for this job?"},history:{title:"Crawl history",autoRefreshNote:"Auto-refresh updates only running rows on this page (every {{seconds}}s).",refreshPage:"Refresh page",refreshingPage:"Refreshing...",loadingRows:"Loading...",uploadInProgress:"Upload in progress",uploadedDocument:"Uploaded document",storedUnder:"Stored under: {{namespace}}",pagesStored:"{{count}} pages",refreshRow:"Refresh",refreshingRow:"Refreshing",deactivate:"Deactivate",deactivating:"Deactivating...",prev:"Prev",next:"Next",tokenUsageNote:"Note: energy usage is best-effort, computed from usage events within the crawls time window.",footer:"Showing {{shown}} of {{total}}  page {{page}} / {{totalPages}} ({{pageSize}} per page)",empty:{noClient:"No knowledge client yet. Start a crawl or upload a document to initialize.",noRuns:"No crawl runs yet."},status:{queued:"queued",running:"running",completed:"completed",failed:"failed",deactivated:"deactivated"},jobType:{docs:"DOCUMENT",domain:"DOMAIN"},table:{status:"Status",type:"Type",origin:"Origin",started:"Started",finished:"Finished",pages:"Pages",chunks:"Chunks",tokens:"Energy",actions:"Actions"}},chunks:{title:"Job chunks",subtitle:"Edit and delete chunks for {{botName}}.",backToHistory:"Back to crawl history",missingId:"Missing bot or job ID.",loading:"Loading chunks...",empty:"No chunks found for this job.",jobTitle:"Job details",jobSubtitle:"Source: {{origin}}",jobIdLabel:"Job ID",startedLabel:"Started",finishedLabel:"Finished",chunkLabel:"Chunk #{{index}}",sourceLabel:"Source URL",save:"Save",saving:"Saving...",delete:"Delete",deleting:"Deleting...",confirm:{delete:"Permanently delete this chunk?"},success:{saved:"Chunk {{chunkId}} updated.",deleted:"Chunk {{chunkId}} deleted."},errors:{loadFailed:"Failed to load job chunks",saveFailed:"Failed to save chunk",deleteFailed:"Failed to delete chunk"}},success:{settingsUpdated:"Knowledge settings updated.",domainCrawlStarted:"Domain crawl started/completed for {{domain}}. The knowledge base will be refreshed shortly.",uploadedDocs:"Uploaded and ingested {{count}} document(s): {{files}}",deactivateJob:"Deactivated {{count}} chunks for job {{jobId}}."},errors:{loadBot:"Failed to load bot",updateSettings:"Failed to update settings",mustBeActiveToCrawl:"This bot is not active yet. Activate it before crawling content.",mustBeActiveToUpload:"This bot is not active yet. Activate it before uploading documents.",domainRequired:"Please set a domain before crawling.",domainCrawlerDisabled:"Domain crawler feature is disabled for this bot.",pdfUploadDisabled:"PDF upload feature is disabled for this bot.",crawlFailed:"Failed to crawl domain",uploadFailed:"Failed to upload documents",estimateFailed:"Failed to estimate crawl cost.",crawlLimitExceeded:"This crawl would exceed your monthly limit ({{required}} needed, {{remaining}} remaining).",deactivateFailed:"Failed to deactivate job chunks."},onboarding:{title:"Were preparing your bots knowledge",subtitle:"Connect your website so Coslo can crawl it and answer detailed, up-to-date questions.",subtitleShopify:"Connect your Shopify store so Coslo can use your live catalog.",status:{readyExisting:"Your content is already indexed. You can re-index anytime to keep Coslo up to date.",completed:"Knowledge ready. Coslo now understands your website.",failed:"The crawl failed. Check your domain and try again.",deactivated:"deactivated",running:"Indexing in progress. You can already use your bot while we finish crawling.",pollError:"Were having trouble refreshing the status, but the crawl is still running."},statusPill:{shopifyChecking:"Checking Shopify connection",shopifyConnected:"Shopify connected",shopifyNotConnected:"Shopify not connected",running:"Indexing in progress",completed:"Knowledge ready",failed:"Crawl failed",deactivated:"deactivated",idle:"Not started yet"},errors:{loadBot:"Unable to load this bot right now.",saveDomain:"Unable to save this domain.",saveSource:"Unable to save knowledge source.",shopifySelected:"Shopify knowledge is selected. Switch to website knowledge to crawl a domain.",crawlFailed:"We couldnt start the crawl. Please check your domain and try again."},heroTitle:"Teach Coslo about your website in one click",heroBody:"Well crawl your main domain to extract FAQs, help articles and key pages so your assistant feels like a real member of your team.",heroBodyShopify:"Connect your Shopify store so Coslo can answer questions from your live catalog.",source:{label:"Knowledge source",rag:"Website / docs (RAG)",shopify:"Shopify catalog",saving:"Saving..."},domainLabel:"Website domain",domainPlaceholder:"https://your-website.com",savingDomain:"Saving",saveDomain:"Save domain",domainHint:"We only use publicly available pages and always respect your robots.txt.",shopifyHint:"Shopify knowledge is selected. Connect your store in the Shopify tab instead.",btnIndexing:"Indexing website",btnReindex:"Re-index website",btnStartIndexing:"Start indexing",openShopify:"Open Shopify settings",goToDashboard:"Go to dashboard",dashboardHint:"Well unlock the dashboard button right after the first index is completed.",dashboardHintShopify:"Connect your Shopify store to unlock the dashboard button.",step1:{title:"Connect your domain",text:"Add the main website your customers use."},step2:{title:"Coslo crawls your pages",text:"We follow links, extract content and clean it up."},step3:{title:"Your bot answers like a pro",text:"Use Coslo in any channel, backed by your sites content."}}},ZQ={title:"Your bots",loading:"Loading bots...",empty:"No bots yet.",table:{name:"Name",slug:"Slug",status:"Status",domain:"Domain",channels:"Channels",actions:"Actions"},channels:{web:"Web",whatsapp:"WhatsApp",messenger:"Messenger",instagram:"Instagram"},actions:{create:"Create new bot",openBot:"Open bot",deleteBot:"Delete bot"},confirm:{typeSlug:'Type the slug of this bot ("{{slug}}") to confirm deletion:',slugMismatch:"Slug does not match. Bot was not deleted.",deleteBot:'This will permanently delete bot "{{name}}" and all its conversations and data. Continue?'},errors:{loadFailed:"Failed to load bots",deleteFailed:"Failed to delete bot"}},XQ={title:"Conversation",backToBots:" Back to overview",backToConversations:" Back to conversations",missingId:"Missing conversation ID.",loading:"Loading messages...",empty:"No messages.",aiModeNotice:"Switch to human mode to chat with this contact.",windowExpiredPill:"24h window expired",switchToHuman:"Switch to human mode",switchToAi:"Switch to AI",roles:{user:"User",assistant:"Assistant",human:"Human",system:"System"},parties:{title:"Conversation parties",business:"Your channel",user:"Contact"},testSend:{title:"Test send (Meta verification)",description:"Send a manual test message to this contact using the connected channel. Intended only for Meta App verification.",placeholder:"Type a test message",button:"Send test message",sending:"Sending",empty:"Please enter a message before sending.",success:"Test message sent.",error:"Failed to send the test message."},manualSend:{title:"Manual reply (HUMAN)",description:"Send a manual reply as a human agent over this channel.",windowExpired:"You can no longer send manual messages: the last user message is more than 24 hours old on this channel. Meta requires templates beyond the 24h window.",placeholder:"Type a manual reply...",empty:"Please enter a message before sending.",sending:"Sending...",button:"Send",success:"Message sent as HUMAN.",failed:"Failed to send the message."},mode:{title:"Conversation mode",humanDescription:"Human handoff is active. The bot will not reply automatically to user messages.",aiDescription:"The AI assistant replies automatically to new user messages.",humanLabel:"HUMAN",aiLabel:"AI",switchingToHuman:"Switching",toHumanButton:"Switch to HUMAN (pause AI)",switchingToAi:"Switching",toAiButton:"Back to AI",error:"Failed to update conversation mode."},errors:{loadFailed:"Failed to load messages"}},JQ={title:"Calendar & bookings",backToOverview:" Back to overview",featuresAndPlan:"Features & plan",missingId:"Missing bot id.",loading:"Loading bot settings",notFound:"Bot not found.",intro:"Connect this bot to your Google Calendar and fine-tune how bookings, reminders, and emails behave.",calendarDisabled:{title:"Calendar is disabled for this bot.",body:"Booking features will only be active once you enable the calendar add-on in"},sections:{calendarConnection:{title:"Calendar connection",hint:"Configure which Google Calendar the assistant should use and the default duration for new bookings."},bookingRules:{title:"Booking rules",hint:"Define how far in advance customers can book."},reminderWindow:{title:"Reminder window",hint:"Control when reminder emails are sent relative to the appointment start time."},emails:{title:"Emails",hint:"Customize booking confirmation and reminder emails. You can use placeholders like"},bookingFields:{title:"Booking fields",hint:"These are the fields the assistant will try to collect when booking an appointment."},availability:{title:"Available days & hours",hint:"Choose which days you take bookings and the time ranges for each day.",addRange:"Add time range",removeRange:"Remove",note:"Bookings will only be accepted inside these ranges (in your bot's time zone).",enabledHint:"Bookings are allowed on this day within the time ranges below.",disabledHint:"Bookings are not allowed on this day until you enable it.",acceptBookings:"Accept bookings this day",from:"From",to:"To",slots:"Slots",slotsPlaceholder:"e.g. 1",slotsRequired:"Slots indicate how many bookings you can handle at the same time."},timezone:{title:"Business time zone",hint:"Used to validate booking times across all services."},services:{title:"Services & calendars",hint:"Create one service per calendar and set its duration, capacity, and opening hours.",unnamed:"Service",cardHint:"Configure the calendar and availability for this service.",remove:"Remove service",add:"Add service"}},weekdays:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},fields:{calendarId:{label:"Calendar ID",placeholder:"primary or your-calendar-id@group.calendar.google.com",help:"Use"},timeZone:{label:"Time zone",placeholder:"e.g. Europe/Rome",help:"IANA timezone name. The assistant uses it to compute available slots and email times."},defaultDurationMinutes:{label:"Default booking duration (minutes)",placeholder:"30",help:"Used when the user doesnt specify a duration explicitly."},bookingMinLeadHours:{label:"Minimum lead time (hours)",placeholder:"e.g. 2",help:"The appointment must start at least this many hours after it is created."},bookingMaxAdvanceDays:{label:"Maximum days in advance",placeholder:"e.g. 30",help:"Do not accept bookings further than this many days from now. Leave empty for no limit."},bookingMaxSimultaneousBookings:{label:"Maximum bookings per time slot",placeholder:"e.g. 1",help:"Limit how many bookings can be accepted for the same time slot. Leave empty for no limit."},bookingReminderWindowHours:{label:"Reminder window (hours before start)",placeholder:"e.g. 24",help:"Appointments starting within this many hours will be eligible for reminders."},bookingReminderMinLeadHours:{label:"Min hours between creation and start",placeholder:"e.g. 3",help:"Avoid sending reminders for last-minute bookings. Leave empty to disable this extra constraint."}},advanced:{prompt:"Need more control over booking rules, reminders and emails?",show:"Advanced settings",hide:"Hide advanced settings"},toggles:{confirmationEmail:"Send confirmation email after a new booking",reminderEmail:"Send reminder email before the appointment"},emailFields:{subject:"Subject",bodyText:"Body (text)",bodyHtmlOptional:"Body (HTML, optional)"},emailGroups:{confirmation:{title:"Confirmation email",subjectPlaceholder:"Your booking with {{bot.name}} is confirmed",textPlaceholder:`Hi {{client.name}},

your booking for {{booking.service}} on {{booking.start}} is confirmed.
If you need to reschedule, please contact us.

 {{bot.name}}`,htmlPlaceholder:"<p>Hi {{client.name}},</p><p>Your booking for {{booking.service}} on {{booking.start}} is confirmed.</p>",htmlHelp:"If provided, HTML will be used as the main email body. Keep it simple and mobile-friendly."},reminder:{title:"Reminder email",subjectPlaceholder:"Reminder: your booking with {{bot.name}}",textPlaceholder:`Hi {{client.name}},

this is a reminder for your booking {{booking.service}} on {{booking.start}}.

 {{bot.name}}`,htmlPlaceholder:"<p>Hi {{client.name}},</p><p>This is a reminder for your booking {{booking.service}} on {{booking.start}}.</p>",htmlHelp:"Leave empty to use the text-only version."},cancellation:{title:"Cancellation email",subjectPlaceholder:"Your booking with {{bot.name}} has been cancelled",textPlaceholder:`Hi {{client.name}},

your booking for {{booking.service}} on {{booking.start}} has been cancelled.
If this is a mistake, please contact us.

 {{bot.name}}`,htmlPlaceholder:"<p>Hi {{client.name}},</p><p>Your booking for {{booking.service}} on {{booking.start}} has been cancelled.</p>",htmlHelp:"Leave empty to use the text-only version."}},bookingFields:{alwaysRequiredTitle:"Always required",alwaysRequiredHelp:"These core fields are always required for bookings and cannot be removed.",additionalTitle:"Additional fields",additionalEmpty:"No extra fields configured yet. Add any extra pieces of information you want the bot to ask for (e.g.",addPlaceholder:"Add a field key, e.g. notes",addButton:"Add",keysHelp:"Use short, machine-friendly keys (no spaces). The assistant will still talk to users in natural language.",removeFieldAria:"Remove field {{field}}"},actions:{save:"Save settings",saving:"Saving",note:"Changes apply to new conversations and bookings."},side:{title:"How calendar & bookings are used",subtitle:"Calendar configuration controls where events are created. Advanced settings fine-tune how your assistant offers time slots and sends notifications.",cards:{calendar:{title:"Calendar connection",text:"The assistant creates events on the service calendars you configure here."},timeRules:{title:"Time rules",text:"Booking rules prevent last-minute or too-far-in-the-future appointments, so your schedule stays under control."},emailTemplates:{title:"Email templates",text:"If SMTP is misconfigured, the backend falls back to sending confirmations only in chat. When emails are sent, placeholders like",and:"and",replaced:"are replaced with real data"},bookingFields:{title:"Booking fields",text:"Extra fields you configure are stored with each appointment and can be used in your own workflows or CRM."}}},success:{saved:"Settings updated successfully."},errors:{loadFailed:"Could not load bot settings. Please refresh and try again.",saveFailed:"Could not save settings. Please check the values and try again."},onboarding:{common:{skip:"Skip for now"},booking:{title:"Enable bookings from chat",subtitle:"Connect your calendar, define your available slots and booking rules.",toggleTitle:"Let Coslo propose and book meetings",toggleSubtitle:"When enabled, Coslo will check your calendar and offer time slots directly in chat.",toggleOn:"Bookings are ON",toggleOff:"Bookings are OFF",toggleOffHint:"You can keep bookings disabled for now and still complete onboarding. Youll be able to turn them on later from the app.",enableToContinue:"Turn on bookings above or skip this step to continue.",nextWhenDisabled:"Continue to Lead Ads",next:"Save & continue to Lead Ads",servicesRequired:"Add at least one service with a calendar before continuing.",tablesRequired:"Add at least one table before continuing.",serviceNameRequired:"Service name is required when you add multiple services."}},services:{fields:{name:"Service name",namePlaceholder:"e.g. Haircut",aliases:"Aliases (optional)",aliasesPlaceholder:"e.g. womens haircut, haircut for women",duration:"Duration (minutes)",labelOptional:"Label (optional)",labelPlaceholder:"e.g. General"}}},eZ={hero:{kicker:"Legal",title:"Privacy & Data Policy",intro:"Coslo is a multi-tenant SaaS platform that connects your business channels (Web Widget, WhatsApp, Facebook Messenger, Instagram Direct) to an AI assistant and optional booking automation with Google Calendar. This page explains what data we process, why we process it, how its protected, and what controls you have.",lastUpdatedLabel:"Last updated"},sections:{whoWeAre:{title:"1) Who we are",serviceLabel:"Service",serviceValue:"Coslo (coslo.it)",providerLabel:"Provider",addressLabel:"Address",emailLabel:"Email"},appliesTo:{title:"2) Who this policy applies to",paragraphs:["This policy applies to (a) account owners and team members who use Coslo to configure and operate an assistant (the Business Users), and (b) end-users who message a business where the business uses Coslo to provide automated replies (the End Users).","In most business messaging scenarios, the business you contact determines how it uses its messaging channels and what information it provides to the assistant. If you are an End User, you should typically contact the business directly for requests about your conversation (access/deletion), unless the business instructs you otherwise."]},dataWeProcess:{title:"3) What data we collect / process",paragraphs:["We process the following categories of data, depending on what you enable:"],list:["Account data: email address and authentication data (passwords are stored in hashed form), plus basic account settings.","Assistant configuration: bot name, slug, connected domain, system instructions/prompts, enabled features, and channel settings.","Knowledge base inputs: content you connect or upload to power the assistant, such as your public website content and PDFs (and related metadata like source URL / filename).","Knowledge base outputs: processed representations of the above content (for example: extracted text, chunks, and embeddings/vectors) used to retrieve relevant information.","Conversation data: message content exchanged with the assistant (text) and related metadata (timestamps, channel type, and identifiers required to route replies).","Integration identifiers: identifiers needed to connect channels and deliver messages (e.g., WhatsApp phone number IDs, Facebook Page IDs, Instagram Business IDs) and authorization credentials/tokens used to send/receive messages on your behalf.","Booking data (if enabled): information needed to schedule an appointment (e.g., name, contact details, service, date/time, and notes or custom fields you configure).","Service analytics (tenant-scoped): metrics for the business account owner such as number of conversations, message volumes, usage over time, and quality indicators (e.g., whether the assistant answered successfully).","Technical and security logs: operational logs (e.g., error logs, webhook delivery logs, and security events) used to run and protect the service."]},howWeUse:{title:"4) How we use your data",paragraphs:["We use data to operate Coslo and deliver the features you enable:"],list:["Provide the service: create and manage accounts, assistants, dashboards, and connected channels.","Deliver messaging: receive messages from connected channels and send replies on behalf of the business.","Generate responses: retrieve relevant knowledge from your configured sources (website/PDFs/FAQs) and generate replies consistent with the assistant configuration.","Bookings (optional): check availability and create bookings/events in Google Calendar when enabled.","Analytics & quality monitoring: provide tenant-scoped analytics and allow the business owner to review conversation history to evaluate assistant performance, resolve customer requests, and improve content/configuration.","Security & reliability: detect abuse, prevent fraud, troubleshoot issues, and maintain platform stability."]},shopifyData:{title:"5) Shopify app data and e-commerce interactions",paragraphs:["If you connect a Shopify store, we process Shopify store data needed to provide the integration. This may include store domain, product and variant details, inventory availability, and order lookups requested by End Users.","We access Shopify data using the Admin API on behalf of the store owner and only for the purposes of powering the assistant features (e.g., product discovery, availability checks, cart links, and order status).","We do not sell Shopify data or use it for advertising. We keep Shopify data limited to what is needed to provide the service and to support the businesss customer requests."],list:["Store identifiers (e.g., shop domain) and installed app metadata.","Product and variant data (title, handle, pricing, tags, images).","Inventory availability and stock status (if the store enables inventory access).","Order status lookups initiated by End Users (email + order number)."]},aiProcessing:{title:"6) AI processing and knowledge-scoped answers",paragraphs:["Coslo is designed for business support use cases. Your assistant is configured to respond using the business knowledge sources you provide (for example: public website pages, PDFs, FAQs).","When generating a reply, we may send to our AI provider the End Users message text, relevant retrieved knowledge snippets (RAG), and the assistants configuration (such as system instructions). This processing is necessary to provide the requested AI response.","We may keep logs of AI requests/responses to operate, debug, and improve the service. We do not use Customer conversation content to train or improve a shared/general-purpose AI model, and we do not use one businesss conversation data to build or improve another businesss assistant."]},tenantSeparation:{title:"7) Conversation review, access & multi-tenant separation",paragraphs:["Coslo is multi-tenant. Conversation data, knowledge bases, and analytics generated for one business account are isolated from other business accounts.","Businesses can review their own assistants conversation history inside the Coslo dashboard for operational purposes (e.g., quality checks, resolving requests, improving the knowledge base). Access is limited to authorized users of that same business account.","End Users do not get access to the businesss internal analytics dashboards or operational tools."]},messagingChannels:{title:"8) Messaging channels (WhatsApp, Facebook, Instagram)",paragraphs:["If you connect Meta channels, Coslo uses Meta APIs to deliver messages and receive events (webhooks). This requires storing channel identifiers (such as Page IDs / Business IDs / phone number IDs) and credentials/tokens needed to send and receive messages on your behalf.","Businesses are responsible for ensuring they have the appropriate rights/permissions to connect and use these channels, and for communicating with End Users about how messaging is handled.","Where required to provide the service, authorization credentials/tokens are stored securely (including encryption at rest) and access is restricted to authorized systems and personnel."]},automationEscalation:{title:"9) Automation and human escalation",paragraphs:["Businesses may use Coslo to automate parts of customer support on messaging channels. If a request requires a human, the business should provide a clear way for End Users to reach a person (for example: talk to a human, phone, email, or a support form). Coslo supports these workflows through configuration and business-defined escalation options."]},googleCalendar:{title:"10) Google Calendar bookings (optional feature)",paragraphs:["If you enable booking automation, Coslo will create calendar events in the Google Calendar you connect (or grant access to) and may check for availability/conflicts to propose time slots.","Events created in your Google Calendar are stored under your Google account and remain there unless you remove them directly in Google Calendar."]},thirdParties:{title:"11) Third-party services (subprocessors)",paragraphs:["We rely on third-party providers to deliver Coslo. Depending on your enabled features, data may be processed by:"],list:["Meta (WhatsApp, Facebook, Instagram) for messaging delivery and webhooks.","AI provider (e.g., OpenAI) to generate assistant responses.","Google (Google Calendar) for booking automation.","Stripe for billing and payments.","Hosting/infrastructure providers to run the application and store data securely."]},retention:{title:"12) Data retention",paragraphs:["We retain data to operate the service and provide the dashboard features you enable. In general:"],list:["Conversations & assistant configuration: retained until you delete the assistant, delete your account, or request deletion (subject to limited backup retention).","Knowledge base data: retained until you remove the source (website/PDF), delete the assistant, delete your account, or request deletion.","Operational logs: retained for a limited period for security, debugging, and reliability, then overwritten or deleted."]},deletion:{title:"13) Deletion, disconnecting channels, and requests",useTrans:"true",paragraphs:["You can disconnect connected channels (WhatsApp, Facebook, Instagram) from your Coslo dashboard at any time.","You can delete a specific assistant from the Bot List page. This deletes the assistant and all data related to that assistant (including its knowledge base and conversations) from our primary systems.","You can delete your entire account from the Profile page (Danger Zone). This deletes your account and all related data from our primary systems.","Some limited technical data may remain for a short period in security logs and backups, then is overwritten or deleted.","For privacy questions or deletion requests, contact <a>support</a>."]},security:{title:"14) Security",paragraphs:["We apply reasonable technical and organizational measures to protect data, such as access controls and secure communications. No method of transmission or storage is 100% secure, but we continuously work to reduce risk and prevent unauthorized access."]},transfers:{title:"15) International data transfers",paragraphs:["Some of our service providers may process data in countries different from your own. Where applicable, we rely on appropriate safeguards for international transfers (such as contractual protections) in line with applicable law."]},children:{title:"16) Children",paragraphs:["Coslo is intended for business use. It is not designed to be directed to children, and businesses should ensure their use of messaging channels complies with applicable age-related requirements."]},rights:{title:"17) Your rights",useTrans:"true",paragraphs:["Depending on your location (including the EU/EEA), you may have rights to access, correct, delete, or object to certain processing of your personal data. To exercise these rights, contact <a>support</a>.","If you are an End User messaging a business, you should typically contact that business first because it controls the conversation and how it is handled."]},changes:{title:"18) Changes to this policy",paragraphs:["We may update this policy from time to time. When we do, we will update the Last updated date at the top of this page."]},questions:{title:"19) Questions",useTrans:"true",paragraphs:["For any questions about privacy, data use, or deletion requests, contact <a>support</a>."]}}},tZ={hero:{kicker:"Legal",title:"Terms & Conditions",intro:"These Terms & Conditions govern your use of Coslo (the Platform), a multi-tenant SaaS service that connects your business channels (e.g., Web Widget, WhatsApp, Facebook Messenger, Instagram Direct) to an AI assistant and, if enabled, booking automation (e.g., Google Calendar). By using the Platform, you agree to these Terms.",lastUpdatedLabel:"Last updated"},sections:{provider:{title:"1) Provider information",labels:{provider:"Provider",address:"Address",contact:"Contact"}},definitions:{title:"2) Definitions",paragraphs:["For the purposes of these Terms: (a) Platform means Coslo; (b) Customer means the business user creating an account; (c) End Users means people messaging the Customer; (d) Customer Content means content and data configured or provided by the Customer (including knowledge sources and conversations); (e) Third-Party Services means integrated external services (e.g., Meta channels, Google Calendar, AI providers, Stripe, hosting)."]},scope:{title:"3) Service scope and eligibility",paragraphs:["Coslo allows Customers to create and manage AI assistants for messaging channels, connect knowledge sources (e.g., website/PDFs), automate workflows (e.g., bookings), integrate Third-Party Services, and view tenant-scoped analytics and conversation history.","The Platform is intended for business/professional use. If you use Coslo on behalf of an organization, you represent that you have authority to bind that organization to these Terms."]},shopifyApp:{title:"4) Shopify app terms",paragraphs:["If you connect a Shopify store, you authorize the Platform to access store data via the Shopify Admin API for the purposes of powering assistant features (product discovery, availability checks, cart links, and order status).","You confirm you have the right to grant this access and to use the data to serve End Users. You are responsible for complying with Shopify policies and applicable laws.","You must not use the Platform to access or process Shopify data for purposes unrelated to your business or outside the permitted scopes."]},account:{title:"5) Account, security, and access",paragraphs:["You must provide accurate and up-to-date information when creating an account and keep your credentials secure.","You are responsible for activity under your account and for safeguarding connected channels, tokens, and permissions.","We may suspend or terminate access if we reasonably believe there is abuse, unlawful activity, or a violation of these Terms or Third-Party policies."]},plansPayments:{title:"6) Plans, subscriptions, and payments",paragraphs:["Access may be offered through free plans, trials, or paid subscriptions as described in the Platform or on our website.","Paid plans are billed on a recurring basis (monthly/annual) via our payment processor (e.g., Stripe). You authorize recurring charges while your subscription remains active.","Unless required by law or explicitly stated in your plan, payments are non-refundable."]},permittedUseCompliance:{title:"7) Permitted use, prohibited use, and channel compliance",paragraphs:["You are responsible for your assistants, Customer Content, and interactions with End Users.","You must not use Coslo for unlawful activity, spam, phishing, malware, harassment, or infringement of third-party rights.","You must comply with Third-Party terms/policies for connected channels (including WhatsApp/Meta policies). These policies may restrict automation and AI usage.","Coslo is intended for business support use cases (support, information, bookings, lead handling). You must not configure or promote it as a general-purpose chatbot unrelated to your business, nor use it in ways that violate channel rules.","Where required, you must provide End Users with a clear escalation path to reach a human (e.g., talk to a human, phone, email, support form). You are responsible for configuring and maintaining the human-contact option presented to End Users on your connected channels."]},privacyMultiTenant:{title:"8) Privacy, data handling, and multi-tenant separation",paragraphs:["Coslo is multi-tenant: each Customers data is logically separated from other tenants and accessible only to authorized users of the same Customer account.","Our Privacy & Data Policy forms part of these Terms and describes what data we process, why, retention, and the available deletion controls (including how to delete assistants and accounts).","Depending on your use case, a Data Processing Addendum (DPA) may be made available for business Customers."]},aiLimitations:{title:"9) AI: limitations and responsibilities",paragraphs:["Assistant outputs are generated automatically based on your configuration, knowledge sources, and third-party AI models.","AI may produce inaccurate or incomplete outputs. The Platform is provided on a best-effort basis and does not replace professional advice (legal/medical/tax).","You are responsible for reviewing and using assistant outputs appropriately, especially in regulated or high-impact contexts.","We do not use Customer conversation content to train or improve a shared/general-purpose AI model, and we do not use one Customers conversation data to build or improve another Customers assistant."]},thirdParties:{title:"10) Third-Party Services",paragraphs:["The Platform integrates with Third-Party Services (e.g., Meta channels, Google Calendar, AI providers, Stripe, hosting). Your use of those services is subject to their own terms and policies.","We are not responsible for outages, restrictions, or changes imposed by Third-Party Services, including revoked API access or policy changes."]},availabilitySupport:{title:"11) Availability, maintenance, and support",useTrans:"true",paragraphs:["We aim to keep the Platform reasonably available, but availability may be affected by maintenance, updates, and Third-Party Services.","Support may vary by plan. For support, contact <a>{{email}}</a>."]},ip:{title:"12) Intellectual property",paragraphs:["All rights in the Platform (software, design, trademarks, documentation) remain with the Provider and its licensors.","You retain rights to your Customer Content. You grant us a limited license to process Customer Content only to provide and operate the Platform."]},termination:{title:"13) Term, suspension, and termination",paragraphs:["Your account remains active while you maintain an active plan or otherwise have access to the Platform.","You may cancel your subscription according to the cancellation flow available in the Platform.","We may suspend or terminate access for material breaches, non-payment, or unlawful use.","Events created in your Google Calendar remain in your Google account unless you remove them there."]},warranty:{title:"14) Disclaimer of warranties",paragraphs:["The Platform is provided as is and as available, to the maximum extent permitted by law. We disclaim all warranties, express or implied.","We do not warrant that the Platform will be uninterrupted, error-free, or that AI outputs will always be accurate."]},liability:{title:"15) Limitation of liability",paragraphs:["To the maximum extent permitted by law, our total liability is limited to the amounts you paid us in the twelve (12) months preceding the event giving rise to the claim.","We are not liable for indirect, incidental, consequential, punitive damages, loss of profits, loss of business, or loss of opportunities."]},indemnity:{title:"16) Indemnity",paragraphs:["You agree to indemnify and hold us harmless from claims, damages, losses, and expenses (including reasonable legal fees) arising from: (a) your unlawful or non-compliant use of the Platform; (b) your violation of these Terms or Third-Party policies; (c) infringement or violations arising from your Customer Content."]},changes:{title:"17) Changes to the Platform and these Terms",paragraphs:["We may update the Platform and these Terms from time to time. If we make material changes, we may provide notice via email or in-product notifications.","Continued use of the Platform after changes take effect constitutes acceptance of the updated Terms."]},lawForum:{title:"18) Governing law and jurisdiction",paragraphs:["Unless otherwise agreed in writing, these Terms are governed by Italian law. Any dispute shall be subject to the exclusive jurisdiction of the court where the Provider has its registered office, except where mandatory law provides otherwise."]},specificApproval:{title:"19) Specific approval (Italy)",paragraphs:["Under Articles 1341 and 1342 of the Italian Civil Code, you specifically approve the clauses on suspension/termination, warranty disclaimers, limitation of liability, indemnity, changes to terms, and governing law/jurisdiction.","Operational note: for stronger enforceability, consider implementing a dedicated checkbox at signup for this specific approval."]},contacts:{title:"20) Contact",useTrans:"true",paragraphs:["For questions about these Terms, contact <a>{{email}}</a>."]}}},nZ={legalNotice:{p1:"By continuing, you agree to the",terms:"Terms & Conditions",and:"and",privacy:"Privacy & Data Policy"}},aZ={title:"WhatsApp message templates",titleFallback:"WhatsApp templates",subtitle:"Lead Ads  WhatsApp automation for {{name}}",status:{facebookStatus:"Facebook status",facebookNotConnected:"Not connected",whatsappStatus:"WhatsApp status",notConnected:"Not connected"},facebookNotConnectedBody:"Lead Ads from Facebook will not be received until you connect a Facebook page on the Channels page.",notConnectedBody:"You can configure Lead Ads and see incoming leads, but to send WhatsApp templates you must connect a WhatsApp business number on the Channels page.",leadFeatureNotEnabledTitle:"Lead Ads feature not enabled",leadFeatureNotEnabledBody:"To configure Lead Ads  WhatsApp automation, first enable the Lead Ads add-on on the Features page for this bot.",leadFeatureGoToFeatures:"Go to Features",leadAutomation:{title:"Lead Ads  WhatsApp automation",loading:"Loading automation settings",phoneField:"Phone field name",phoneFieldHelp:"Name of the form field that contains the phone number in the lead payload.",consentField:"Consent field name (optional)",consentFieldHelp:"Name of the yes/no field used for WhatsApp consent.",requireOptIn:"Require explicit WhatsApp opt-in",template:"Template to send",templatePlaceholder:"Select an approved template",templateHelp:"Template used for new leads from Meta. Only approved templates are available.",save:"Save automation",saveSuccess:"Lead automation settings saved.",saveError:"Failed to save lead automation settings.",errors:{missingPhoneField:"Please specify the phone field name from your lead forms.",missingConsentField:"If you require explicit opt-in, you must specify the consent field name.",missingTemplate:"Please select an approved WhatsApp template."}},history:{title:"Template history"},filters:{search:"Search",searchPlaceholder:"Search by name or language",status:"Status",statusAll:"All",statusApproved:"Approved",statusPending:"Pending",statusRejected:"Rejected",category:"Category",categoryAll:"All"},category:{utility:"Utility",marketing:"Marketing",authentication:"Authentication"},loadingTemplates:"Loading templates",templates:{requireWhatsapp:"Connect a WhatsApp number on the Channels page to sync and manage templates."},empty:"No WhatsApp templates found for this bot yet.",emptyCta:"Create your first template",columns:{name:"Template",status:"Status",updated:"Last update"},actions:{edit:"Edit",create:"Create template",update:"Update template"},messages:{created:"Template created.",updated:"Template updated.",saveFailed:"Failed to save template."},modal:{createTitle:"New WhatsApp template",editTitle:"Edit WhatsApp template"},form:{name:"Template name",namePlaceholder:"e.g. order_update",nameHelp:"Lowercase, numbers and underscores only. This is not visible to end users.",language:"Language",languageHelp:"Use WhatsApp language codes like en_US, it_IT, es_ES",category:"Category",header:"Header (optional)",headerPlaceholder:"Short title shown above the body",headerHelp:"Up to 60 characters. You can use variables like {{1}}.",body:"Body",bodyPlaceholder:"Main message text. Use {{1}}, {{2}},  for variables.",bodyHelp:"Keep it clear and concise. Variables will be filled at send time.",footer:"Footer (optional)",footerPlaceholder:"Small line below the message (e.g. legal or brand).",buttons:"Buttons",addButton:"Add button",buttonsHelp:"Optional quick reply, URL or phone buttons."},buttons:{quickReply:"Quick reply",url:"URL",phone:"Phone number",textPlaceholder:"Button label",remove:"Remove"},leads:{title:"Recent leads",refresh:"Refresh",loading:"Loading leads",requireFacebook:"Connect a Facebook page on the Channels page to start receiving leads.",empty:"No leads received yet.",refreshError:"Failed to refresh leads.",createdAt:"Received at",phone:"Phone",messageSent:"Message sent",status:"Status"},onboarding:{title:"Connect Facebook Lead Ads and WhatsApp automation",subtitle:"Choose or create a WhatsApp template and map the fields from your Lead Ads forms.",common:{skip:"Skip for now"},warningTitle:"Connect channels to activate automation",warningFacebook:"Connect a Facebook page in the Channels step so Coslo can read new leads.",warningWhatsapp:"Connect a WhatsApp Business number in the Channels step to send messages.",requirementsTitle:"Connection status",toggleOn:"Lead Ads automation is ON",toggleOff:"Lead Ads automation is OFF",toggleDisabledHint:"Connect both channels to turn this automation on.",toggleOnHint:"New leads from your Facebook forms will automatically receive a WhatsApp message using the template below.",disabledHint:"You can keep Lead Ads automation turned off for now and still complete onboarding. Youll be able to come back here later from the app and turn it on.",automationHint:"When a new lead arrives from Meta, Coslo will send a WhatsApp template and optionally check for explicit opt-in.",previewLabel:"Selected template:",autoSaveHint:"Settings and templates will be saved when you click Review plan & pay.",next:"Review plan & pay",errors:{channelsNotReady:"To enable this automation, connect both Facebook and WhatsApp in the Channels step.",save:"Could not save Lead Ads configuration."}}},sZ={eyebrow:"Guided onboarding  {current}/{total}",steps:{bot:"1. Create bot",botDescription:"Name your assistant and choose how customers will see it.",channels:"2. Channels",channelsDescription:"Connect WhatsApp, Facebook, Instagram or your website.",booking:"3. Bookings",bookingDescription:"Let Coslo propose and book meetings directly from chat.",leadAds:"4. Lead Ads",leadAdsDescription:"Sync your Facebook Lead Ads and send WhatsApp messages automatically.",plan:"5. Plan & billing",planDescription:"Review configuration, pick your plan and start using Coslo.",knowledge:"6. Knowledge",knowledgeDescription:"Let Coslo learn from your website so it can answer detailed questions."}},iZ={common:LQ,demoBot:MQ,landing:DQ,login:FQ,forgotPassword:zQ,register:RQ,verifyEmail:_Q,appLayout:BQ,billing:$Q,dashboard:UQ,profile:WQ,botFeatures:qQ,botPlan:HQ,botConversations:KQ,botCreate:VQ,botDetails:GQ,botChannels:YQ,botKnowledge:QQ,botsList:ZQ,conversationDetail:XQ,botSettings:JQ,policy:eZ,terms:tZ,auth:nZ,whatsappTemplates:aZ,onboardingLayout:sZ},rZ={aria:{closeNav:"Chiudi navigazione",openNav:"Apri navigazione"},brandSmall:"Coslo - Assistente AI",logout:"Esci",nav:{billing:"Fatturazione",bots:"Bot",dashboard:"Dashboard",profile:"Profilo"},sidebarTitle:"Dashboard"},oZ={legalNotice:{and:"e la",p1:"Continuando, accetti i",privacy:"Privacy & Data Policy",terms:"Termini e Condizioni"}},lZ={activeSubscriptions:"Abbonamenti attivi",breakdown:{features:"Funzionalit",plan:"Piano"},cancel:{confirm:"Annullare l'abbonamento alla fine del periodo di fatturazione corrente?",cta:"Annulla abbonamento",error:"Impossibile annullare l'abbonamento.",processing:"Annullamento?",scheduled:"Annullamento programmato",success:"Annullamento programmato. Il piano resta attivo fino alla fine del periodo di fatturazione corrente.",successWithDate:"Annullamento programmato. Il piano resta attivo fino al {{date}}.",until:"fino al"},errors:{invoiceDownloadFailed:"Download della fattura non riuscito.",invoiceUnavailable:"La fattura non  disponibile per questo pagamento.",loadFailed:"Impossibile caricare la panoramica di fatturazione"},invoice:{ariaDownload:"Scarica fattura",ariaOpening:"Apertura fattura",srDownload:"Scarica fattura",srOpening:"Apertura fattura",titleDownload:"Scarica fattura",titleOpening:"Apertura"},loading:"Caricamento dati di fatturazione...",noActiveSubscriptions:"Non hai ancora abbonamenti attivi.",noConfiguredLimit:"(nessun limite configurato)",of:"di",paymentHistory:{empty:"Nessun pagamento registrato.",table:{amount:"Importo",bot:"Bot",date:"Data",period:"Periodo",status:"Stato"},title:"Storico pagamenti"},perMonth:"mese",slugLabel:"Slug",subscriptionStatus:{active:"Attivo",canceled:"Annullato",incomplete:"Incompleto",incompleteExpired:"Incompleto (scaduto)",pastDue:"Scaduto",trial:"Prova",unpaid:"Non pagato"},subtitle:"Visualizza gli abbonamenti attivi dei bot, l'utilizzo di questo mese e lo storico pagamenti.",thisMonth:"Questo mese:",title:"Fatturazione e utilizzo",tokens:"Energia",totalMonthlyAcrossAllBots:"Totale mensile su tutti i bot:",usageStatus:{atLimit:"Al limite",healthyUsage:"Uso regolare",highUsage:"Uso elevato",overLimit:"Oltre limite"},usageThisMonth:"Utilizzo questo mese:"},cZ={actions:{addChannel:"Aggiungi canale",cancel:"Annulla",connectFacebook:"Collega Facebook",connectInstagram:"Collega Instagram",connectSelected:"Collega selezionato",connectWhatsapp:"Collega WhatsApp",connecting:"Collegamento...",connectingWhatsapp:"Collegamento WhatsApp...",create:"Crea",disconnect:"Disconnetti",edit:"Modifica",reconnectFacebook:"Ricollega Facebook",reconnectInstagram:"Ricollega Instagram",reconnectWhatsapp:"Ricollega WhatsApp",save:"Salva"},backToBot:" Torna alla panoramica",confirm:{deleteChannel:"Eliminare questo canale?"},connectSocial:{connectedAccount:"Account business collegato",connectedNumber:"Numero collegato",connectedPage:"Pagina collegata",facebookDesc:"Collega una Pagina Facebook cos il bot pu rispondere via Messenger.",instagramDesc:"Collega un account Instagram Business per rispondere ai DM.",subtitle:"Usa il login Meta per collegare la tua Pagina Facebook, account Instagram Business o numero WhatsApp Business. Salveremo i token necessari in modo sicuro.",title:"Collega canali social",whatsappDesc:"Collega un numero WhatsApp Business con embedded signup."},connected:{empty:"Nessun canale collegato per ora.",subtitle:"Rivedi e gestisci tutti i canali collegati a questo bot.",title:"Canali collegati"},create:{metaWarning:"I canali Facebook/Instagram devono essere collegati usando i pulsanti Meta qui sopra.",title:"Aggiungi canale"},edit:{title:"Modifica canale"},errors:{createFailed:"Impossibile creare il canale",deleteFailed:"Impossibile eliminare il canale",facebookConnectFailed:"Impossibile avviare la connessione Facebook",instagramConnectFailed:"Impossibile avviare la connessione Instagram",loadFailed:"Impossibile caricare i canali",metaAttachFailed:"Impossibile collegare la pagina Meta",metaManagedExternally:"I canali Facebook e Instagram sono gestiti via Meta. Per aggiornarli, disconnetti e ricollega usando i pulsanti qui sopra.",metaMustUseConnect:"I canali Facebook/Instagram devono essere collegati usando i pulsanti Meta qui sopra.",metaSessionLoad:"Impossibile caricare la sessione Meta",updateFailed:"Impossibile aggiornare il canale",whatsappAttachFailed:"Impossibile collegare il numero WhatsApp",whatsappCancelled:"La procedura WhatsApp  stata annullata o non completata.",whatsappEnvMissing:"WhatsApp non  configurato. Imposta VITE_META_APP_ID e VITE_WHATSAPP_EMBEDDED_CONFIG_ID.",whatsappInitFailed:"Impossibile inizializzare la procedura WhatsApp",whatsappSignupFailed:"Impossibile completare l'embedded signup WhatsApp"},fields:{accessToken:"Access token",externalId:"External ID",metaJson:"Meta (JSON)",type:"Tipo"},generic:{externalId:"External ID: {{id}}"},labels:{facebookPage:"Pagina Facebook",instagramBusiness:"Profilo Instagram Business",webWidget:"Widget web",whatsapp:"WhatsApp",whatsappBusiness:"WhatsApp Business"},loading:"Caricamento canali...",meta:{connectedViaMeta:"Collegato tramite Meta",instagramEligiblePagesLabel:"Pagina con account Instagram Business",instagramHint:"Solo le pagine con un account Instagram Business collegato possono essere usate per Instagram.",loadingPages:"Caricamento pagine Meta...",permissionsDialog:{checkboxLabel:"Ho letto e accetto di concedere questi permessi.",continueFacebook:"Continua con Facebook",continueInstagram:"Continua con Instagram",facebook:{businessManagement:"Accedere alle risorse Facebook (Pagine e account Instagram) che gestisci in Meta Business Manager per poterle collegare a questo bot.",pagesManageMetadata:"Gestire le impostazioni di messaggistica e i webhook della Pagina, cos possiamo ricevere i nuovi messaggi in tempo reale.",pagesMessaging:"Leggere e inviare messaggi sulla Pagina collegata, in modo che il bot possa rispondere via Messenger.",pagesShowList:"Vedere l'elenco delle Pagine Facebook che gestisci, cos puoi scegliere quale collegare."},footerNote:"Puoi revocare questi permessi in qualsiasi momento dalle impostazioni del tuo account Facebook e Instagram.",instagram:{businessManagement:"Accedere alle risorse Facebook (Pagine e account Instagram) che gestisci in Meta Business Manager per poterle collegare a questo bot.",instagramBasic:"Leggere le informazioni di base del profilo (nome, username, immagine del profilo) del tuo account Instagram Business per mostrarle nella dashboard.",instagramManageMessages:"Leggere e inviare messaggi Direct su Instagram, cos il bot pu rispondere ai DM.",pagesManageMetadata:"Gestire le impostazioni di messaggistica e i webhook, cos possiamo ricevere i nuovi messaggi Instagram in tempo reale.",pagesShowList:"Vedere le Pagine Facebook collegate al tuo account Instagram Business, cos puoi scegliere quale collegare."},introFacebook:"Prima di continuare con Facebook, rivedi quali permessi questa app ricever da Meta.",introInstagram:"Prima di continuare con Instagram, rivedi quali permessi questa app ricever da Meta.",listTitle:"Potremo:",titleFacebook:"Rivedi gli accessi per Facebook",titleInstagram:"Rivedi gli accessi per Instagram"},selectModal:{businessGroupTitle:"Pagine gestite tramite Business Manager",editPreviousSettingsHint:`Se ti aspettavi di vedere qui le pagine Instagram, quando si apre il popup di Facebook clicca su "Modifica le impostazioni precedenti" e assicurati di selezionare sia la pagina Facebook sia l'account Instagram collegato.`,introFacebook:"Abbiamo recuperato da Meta le Pagine Facebook che puoi gestire. Scegline una da collegare a questo bot.",introInstagram:"Abbiamo recuperato da Meta le Pagine Facebook collegate ai tuoi account Instagram Business. Scegline una da collegare.",noPages:"Non sono state trovate pagine idonee per questa connessione.",personalGroupTitle:"Pagine personali",titleFacebook:"Seleziona una Pagina Facebook",titleInstagram:"Seleziona una pagina per Instagram"},selectPlaceholder:"Seleziona una pagina...",selectSubtitle:"Abbiamo recuperato le pagine che gestisci da Meta. Scegli quale collegare a questo bot.",selectTitle:"Seleziona {{channel}}",sessionLoadFailed:"Impossibile caricare la sessione Meta"},missingId:"ID bot mancante.",onboarding:{channels:{meta:{disabledBody:"Meta inbox  disattivata per questo bot. Attivala qui sopra se vuoi collegare Facebook o Instagram.",subtitle:"Collega la tua Pagina Facebook e l'account Instagram Business cos Coslo potr rispondere automaticamente ai messaggi.",title:"Meta inbox (Facebook e Instagram)",toggleOff:"Meta inbox DISATTIVATA",toggleOffHint:"Lascia Meta inbox disattivata se non vuoi che Coslo risponda su Facebook o Instagram per questo bot.",toggleOn:"Meta inbox ATTIVA"},next:"Continua alle prenotazioni",subtitle:"Collega almeno un canale adesso. Potrai sempre aggiungerne altri in seguito dalla dashboard.",title:"Dove dovrebbe parlare Coslo con i tuoi clienti?",whatsapp:{disabledBody:"WhatsApp  disattivato per questo bot. Attivalo qui sopra se vuoi collegare un numero.",subtitle:"Collega un numero WhatsApp Business usando il flusso ufficiale di embedded signup di Meta.",title:"WhatsApp Business (embedded signup)",toggleOff:"WhatsApp DISATTIVATO",toggleOffHint:"Lascia WhatsApp disattivato se non vuoi che Coslo invii messaggi su WhatsApp per questo bot.",toggleOn:"WhatsApp ATTIVO"}},common:{skip:"Salta per ora"}},placeholders:{metaJson:`{
  "example": true
}`},status:{active:"Attivo",connected:"Collegato",connectedUnknownExpiry:"Collegato (scadenza sconosciuta)",expired:"Scaduto",expiringSoon:"In scadenza",needsReconnect:"Ricollegamento necessario",notConnected:"Non collegato"},subtitle:"Collega il tuo bot a web, WhatsApp, Pagine Facebook e profili Instagram Business.",table:{details:"Dettagli",status:"Stato",type:"Tipo"},title:"Canali",web:{defaultWidget:"Widget sito predefinito",externalId:"External ID: {{id}}"},whatsapp:{confirmReconnectWithinWeek:"Hai collegato WhatsApp di recente. Vuoi avviare comunque una nuova procedura di embedded signup?",number:"Numero: {{number}}",numberId:"ID numero: {{id}}",numberLabel:"Numero WhatsApp",pinLabel:"PIN di verifica in due passaggi di WhatsApp",pinModal:{intro:"Seleziona il numero WhatsApp Business da collegare e inserisci il PIN di verifica in due passaggi per quel numero.",pinHint:"Inserisci esattamente lo stesso PIN a 6 cifre che vedi sotto Verifica in due passaggi per questo numero in WhatsApp Manager.",step1:"Apri WhatsApp Manager e vai su Strumenti dell'account  Numeri di telefono.",step2:"Clicca sull'icona a forma di ingranaggio accanto al tuo numero di telefono e apri Verifica in due passaggi.",step3:"Se non ricordi il PIN, disattiva da l la verifica in due passaggi (riceverai un'email), poi imposta un nuovo PIN a 6 cifre.",step4:"Torna qui e inserisci esattamente quel PIN a 6 cifre.",title:"Collega WhatsApp Business",whatIsPin:"Questo PIN  il codice a 6 cifre della verifica in due passaggi configurato per questo numero in WhatsApp Manager, non il codice di Google Authenticator o l'autenticazione a due fattori per l'accesso."},pinPlaceholder:"PIN a 6 cifre impostato in WhatsApp Manager",selectNumberSubtitle:"Abbiamo recuperato i numeri nel tuo account WhatsApp Business. Scegli quale collegare a questo bot.",selectNumberTitle:"Seleziona numero WhatsApp",selectPlaceholder:"Seleziona un numero..."}},dZ={actions:{evaluate:"Valuta",evaluateSelected:"Valuta selezionate",evaluateSelectedCount:"Valuta selezionate ({{count}})",evaluating:"Valutazione...",evaluatingSelected:"Valutazione selezionate...",reevaluate:"Rivaluta",view:"Vedi"},backToBot:" Torna alla panoramica",empty:"Nessuna conversazione per ora.",errors:{bulkEvalFailed:"Impossibile valutare in blocco le conversazioni",evalFailed:"Impossibile valutare la conversazione",loadFailed:"Impossibile caricare le conversazioni",someFailed:"Alcune conversazioni non possono essere valutate (es. troppo corte o altri errori)."},loading:"Caricamento conversazioni...",missingId:"ID bot mancante.",notEvaluated:"Non valutata",pagination:{next:"Successiva",pageOf:"Pagina {{page}} di {{totalPages}}",prev:"Precedente",total:"Totale conversazioni: {{total}}"},subtitle:"Tutte le conversazioni su web, WhatsApp, Facebook Messenger e Instagram.",table:{channel:"Canale",externalUser:"Utente esterno",lastMessage:"Ultimo messaggio",score:"Punteggio",selectAll:"Seleziona tutte le conversazioni in questa pagina",selectRow:"Seleziona conversazione"},title:"Conversazioni"},uZ={actions:{create:"Crea bot",creating:"Creazione..."},errors:{createFailed:"Impossibile creare il bot"},fields:{description:"Descrizione (opzionale)",name:"Nome",slug:"Slug",slugHelp:"Usato negli URL demo, widget e routing interno."},onboarding:{descriptionPlaceholder:"Opzionale. Una breve frase su cosa fa questo bot.",intro:"Queste informazioni vengono usate nella dashboard e nei tuoi strumenti interni, non nel widget pubblico.",namePlaceholder:"es. Acme Support Assistant",slugPlaceholder:"es. acme-support",subtitle:"Dai al tuo assistente un nome e una breve descrizione. Potrai modificarli in seguito.",title:"Crea il tuo primo bot Coslo"},subtitle:"Step 1: scegli un nome e uno slug. Puoi configurare canali, conoscenza, prenotazioni e fatturazione dopo.",title:"Crea nuovo bot"},pZ={actions:{activatePay:"Attiva e paga",openDemo:"Apri demo",saveBasics:"Salva impostazioni base",saving:"Salvataggio...",viewPlanBilling:"Vedi piano e fatturazione"},basics:{autoEvalHelp:"Valuta automaticamente le conversazioni in background per monitorare la qualit. Usa l'energia del piano ma non impatta gli utenti.",autoEvalLabel:"Valutazione automatica conversazioni",descriptionLabel:"Descrizione",descriptionPlaceholder:"Breve descrizione di cosa fa questo bot...",subtitle:"Descrizione ad alto livello e comportamento principale dell'assistente.",systemPromptHelp:"Non viene mostrato agli utenti finali. Usalo per definire tono, limiti e regole speciali del bot.",systemPromptLabel:"System prompt (comportamento avanzato)",systemPromptPlaceholder:"Istruzioni interne che l'AI deve seguire sempre...",title:"Impostazioni base del bot"},billing:{manage:"Gestisci piano e fatturazione",perMonth:"mese",title:"Fatturazione attuale",totalPerMonth:"Totale al mese"},channels:{missing:{facebookPageId:"ID pagina Facebook",instagramBusinessId:"ID business Instagram",webDomain:"Dominio web",whatsappExternalId:"External ID WhatsApp"},names:{instagram:"Instagram DM",messenger:"Facebook Messenger",web:"Web",whatsapp:"WhatsApp"}},errorTitle:"Errore",errors:{loadBot:"Impossibile caricare il bot",loadPricing:"Impossibile caricare i prezzi del piano attuale.",updateBot:"Impossibile aggiornare il bot"},health:{badges:{allChannelsConfigured:"Tutti i canali attivi configurati",configured:"Configurato",disabled:"Disattivato",enabledNotConfigured:"Attivo, non configurato",enabledNotInitialized:"Attivo, non inizializzato",noChannelsEnabled:"Nessun canale attivo",shopifyChecking:"Verifica connessione Shopify...",shopifyConnected:"Il negozio Shopify  connesso e pronto.",shopifyNotConnected:"Shopify selezionato, ma nessun negozio  connesso.",someChannelsNeedSetup:"Alcuni canali richiedono setup"},botStatus:{active:"Questo bot  attivo e pronto a gestire conversazioni.",draft:"Questo bot non  ancora attivo. Puoi attivarlo dal flusso di fatturazione.",inactive:"Questo bot non  attivo. Controlla piano e fatturazione o contatta il supporto se non te lo aspetti."},botStatusTitle:"Stato bot",calendar:{configured:"Le prenotazioni usano Google Calendar ({{calendarId}}) in {{timeZone}}, durata predefinita {{duration}} minuti.",disabled:"Le prenotazioni Google Calendar sono disattivate. Puoi attivarle in Funzionalit e Piano.",enabledNotConfigured:"Le prenotazioni sono attive, ma mancano ID calendario, fuso orario o durata. Configura in Funzionalit e Piano."},calendarTitle:"Stato calendario",channels:{and:"e configuralo in",enabledList:"Canali attivi: {{channels}}. Tutti hanno la configurazione richiesta.",missingConfig:"Alcuni canali attivi non sono configurati correttamente: {{missing}}. Vai su",none:"Nessun canale  attivo. Attivali in"},channelsTitle:"Stato canali",eval:{automatic:"Automatica",automaticDesc:"Le nuove conversazioni possono essere valutate automaticamente in background per monitorare la qualit.",manual:"Solo manuale",manualDesc:"Le conversazioni vengono valutate solo quando le avvii manualmente dalla sezione Conversazioni."},evalTitle:"Valutazione conversazioni",knowledge:{configured:"La base di conoscenza  creata e pu essere usata per le risposte.",disabled:"Crawler dominio / importazione PDF sono disattivati per questo bot.",enabledNotInitialized:"Le funzioni di conoscenza sono attive, ma nessuna scansione/caricamento ha ancora inizializzato la base di conoscenza.",shopifyChecking:"Verifica connessione Shopify...",shopifyConnected:"Il negozio Shopify  connesso e pronto.",shopifyNotConnected:"Shopify selezionato, ma nessun negozio  connesso.",source:{rag:{description:"Usa le pagine del sito e i documenti caricati come base di conoscenza del bot.",title:"Sito web / documenti (RAG)"},shopify:{description:"Risponde con prodotti e varianti del tuo Shopify connesso.",title:"Catalogo Shopify"}}},knowledgeTitle:"Stato conoscenza",title:"Panoramica stato"},loading:"Caricamento bot...",missingId:"ID bot mancante.",nav:{adsSettings:"Impostazioni Lead ADS",adsSettingsDesc:"Gestisci le impostazioni Lead ADS",channels:"Canali",channelsDesc:"Collega WhatsApp, sito, Facebook e Instagram.",conversations:"Conversazioni",conversationsDesc:"Rivedi le chat e analizza il comportamento del bot.",featuresPlan:"Funzionalit e Piano",featuresPlanDesc:"Attiva canali, crawler e scegli il piano di utilizzo.",knowledge:"Contenuti e Conoscenza",knowledgeDesc:"Carica documenti e configura come il bot apprende.",settings:"Impostazioni prenotazioni",settingsDesc:"Gestisci le impostazioni delle prenotazioni"},notFoundTitle:"Bot non trovato",slugLabel:"Slug:",success:{basicsUpdated:"Impostazioni base del bot aggiornate."},workspace:{subtitle:"Vai alle aree di configurazione e monitoraggio di questo bot.",title:"Area bot"}},mZ={actions:{backToBot:" Torna alla panoramica",cancelSubscription:"Annulla abbonamento",cancelling:"Annullamento...",next:"Avanti: scegli piano e paga",save:"Salva funzionalit",saving:"Salvataggio...",viewChangePlan:"Vedi / cambia piano"},backToBot:" Torna alla panoramica",calendar:{description:"Permetti al bot di pianificare appuntamenti direttamente su Google Calendar, con disponibilit e fusi orari gestiti automaticamente.",fields:{calendarId:"ID Google Calendar",defaultDuration:"Durata predefinita appuntamento (minuti)",timeZone:"Fuso orario business"},placeholders:{calendarId:"tuo-calendar-id@group.calendar.google.com",timeZone:"Europe/Rome"},title:"Prenotazioni Google Calendar"},calendarIncomplete:"Le prenotazioni via calendario sono attive ma manca l'ID calendario o il fuso orario. Compilali qui sotto per far funzionare correttamente le prenotazioni.",channels:{instagram:{description:"Rispondi automaticamente ai messaggi diretti di Instagram con il tuo bot.",title:"Instagram DM"},messenger:{description:"Rispondi alle domande direttamente sulla tua pagina Facebook via Messenger.",title:"Facebook Messenger"},web:{description:"Incorpora un widget chat sul tuo sito e ottieni un link demo da condividere con i clienti.",title:"Widget web e demo ospitata"},whatsapp:{description:"Collega il bot a WhatsApp cos i clienti possono scriverti ovunque.",title:"WhatsApp"}},errorTitle:"Errore",errors:{cancelSubscription:"Impossibile annullare l'abbonamento",loadBot:"Impossibile caricare il bot",loadPricing:"Impossibile caricare i prezzi in questo momento.",saveFeatures:"Impossibile aggiornare le funzionalit del bot",updateFeatures:"Impossibile aggiornare le funzionalit del bot"},groups:{calendar:"Prenotazioni e calendario",channels:"Canali",knowledge:"Funzionalit conoscenza",leadAds:"Lead Ads"},knowledge:{domain:{description:"Scansiona automaticamente il tuo sito cos il bot risponde sempre con contenuti aggiornati.",title:"Crawler dominio (contenuti sito)"},pdf:{description:"Carica manuali, brochure o documenti e lascia che il bot risponda basandosi su di essi.",title:"Importazione PDF / documenti"},source:{rag:{description:"Usa le pagine del sito e i documenti caricati come base di conoscenza del bot.",title:"Sito web / documenti (RAG)"},shopify:{description:"Risponde con prodotti e varianti del tuo Shopify connesso.",title:"Catalogo Shopify"}}},leadAds:{whatsapp:{description:"Invia automaticamente un messaggio WhatsApp ai nuovi lead provenienti dai moduli lead di Meta.",requiresWhatsapp:"Questa funzionalit richiede che il canale WhatsApp sia attivo.",selectTier:"Seleziona un pacchetto di messaggi WhatsApp",title:"Lead Ads  WhatsApp"}},loadingBot:"Caricamento bot...",missingId:"ID bot mancante.",notFoundTitle:"Bot non trovato",perMonth:"mese",side:{featuresSubtotal:"Subtotal funzionalit",featuresTotalPerMonth:"Totale funzionalit (al mese)",loadingPricing:"Caricamento prezzi",nextNote:"Verrai reindirizzato a Stripe per confermare l'abbonamento.",statusLabel:"Stato:",subtitle:"Step 2  scegli un piano di utilizzo e conferma il pagamento. Prezzo totale = subtotal funzionalit + piano utilizzo.",title:"Piano e fatturazione"},subtitle:"Step 1  configura canali, crawler e prenotazioni per {{botName}}. Queste opzioni influenzano il prezzo dell'abbonamento.",success:{featuresUpdated:"Funzionalit aggiornate.",saved:"Funzionalit aggiornate.",subscriptionCanceled:"Abbonamento annullato e bot disattivato."},title:"Funzionalit"},hZ={actions:{crawlNow:"Esegui crawl del dominio",crawling:"Crawl in corso...",estimateTokens:"Stima energia",estimating:"Stima in corso...",saveKnowledgeSettings:"Salva impostazioni conoscenza",uploading:"Caricamento e ingestione documenti"},backToBot:" Torna alla panoramica",chunks:{backToHistory:"Torna alla cronologia",chunkLabel:"Chunk #{{index}}",confirm:{delete:"Eliminare definitivamente questo chunk?"},delete:"Elimina",deleting:"Eliminazione...",empty:"Nessun chunk trovato per questo job.",errors:{deleteFailed:"Impossibile eliminare il chunk",loadFailed:"Impossibile caricare i chunk del job",saveFailed:"Impossibile salvare il chunk"},finishedLabel:"Fine",jobIdLabel:"ID job",jobSubtitle:"Fonte: {{origin}}",jobTitle:"Dettagli job",loading:"Caricamento chunk...",missingId:"ID bot o job mancante.",save:"Salva",saving:"Salvataggio...",sourceLabel:"URL sorgente",startedLabel:"Inizio",subtitle:"Modifica ed elimina i chunk per {{botName}}.",success:{deleted:"Chunk {{chunkId}} eliminato.",saved:"Chunk {{chunkId}} aggiornato."},title:"Chunk del job"},confirm:{crawlEstimate:`Costo stimato in energia: ~{{tokens}} energia.
Rimanenti questo mese: {{remaining}} energia.

Avviare la scansione ora?`,crawlEstimateNoLimit:`Costo stimato in energia: ~{{tokens}} energia.

Avviare la scansione ora?`,deactivateJob:"Disattivare tutti i chunk per questo job?",uploadDocsEstimate:`Costo stimato in energia: ~{{tokens}} energia.

Vuoi caricare e indicizzare questi documenti adesso?`},docsCard:{description:"Carica PDF e altri documenti per arricchire la conoscenza del bot con manuali, FAQ o schede prodotto.",disabledNote:"Lingestione PDF  disattivata per questo bot. Attivala in",supportedFormats:"Formati supportati: PDF, DOC, DOCX, TXT.",title:"Documenti & PDF",uploadLabel:"Carica uno o pi file"},domainCard:{description:"Configura il sito da analizzare e raffina come il bot deve usarlo nelle risposte.",disabledNote:"Il crawler dominio  disattivato per questo bot. Attivalo in",domainNote:"Questo dominio viene usato per il crawl del sito e come contesto per la ricerca.",title:"Conoscenza dal dominio"},errors:{crawlFailed:"Impossibile eseguire il crawl del dominio",crawlLimitExceeded:"Questa scansione supererebbe il limite mensile ({{required}} necessari, {{remaining}} rimanenti).",deactivateFailed:"Impossibile disattivare i chunk del job.",domainCrawlerDisabled:"La funzionalit di crawl dominio  disattivata per questo bot.",domainRequired:"Imposta un dominio prima di eseguire il crawl.",estimateFailed:"Impossibile stimare il costo della scansione.",loadBot:"Impossibile caricare il bot",mustBeActiveToCrawl:"Questo bot non  ancora attivo. Attivalo prima di eseguire il crawl dei contenuti.",mustBeActiveToUpload:"Questo bot non  ancora attivo. Attivalo prima di caricare documenti.",pdfUploadDisabled:"La funzionalit di upload PDF  disattivata per questo bot.",updateSettings:"Impossibile aggiornare le impostazioni",uploadFailed:"Impossibile caricare i documenti"},estimate:{crawlCostLabel:"Costo stimato della scansione:",sampledPages:"(basato su {{count}} pagina/e campionata/e)",tokensUnit:"Energia"},feature:{disabled:"Funzionalit disattiva",enabled:"Funzionalit attiva"},featuresAndPlan:"Funzionalit & Piano",fields:{domain:"Dominio",systemPrompt:"System prompt (uso della conoscenza)"},history:{autoRefreshNote:"Laggiornamento automatico aggiorna solo le righe in esecuzione su questa pagina (ogni {{seconds}}s).",deactivate:"Disattiva",deactivating:"Disattivazione...",empty:{noClient:"Nessun client di knowledge ancora. Avvia una scansione o carica un documento per inizializzare.",noRuns:"Nessuna scansione ancora."},footer:"Mostrati {{shown}} di {{total}}  pagina {{page}} / {{totalPages}} ({{pageSize}} per pagina)",jobType:{docs:"DOCUMENTO",domain:"DOMINIO"},loadingRows:"Caricamento...",next:"Succ",pagesStored:"{{count}} pagine",prev:"Prec",refreshPage:"Aggiorna pagina",refreshRow:"Aggiorna",refreshingPage:"Aggiornamento...",refreshingRow:"Aggiornamento",status:{completed:"completata",deactivated:"disattivato",failed:"fallita",queued:"in coda",running:"in esecuzione"},storedUnder:"Archiviato sotto: {{namespace}}",table:{actions:"Azioni",chunks:"Chunk",finished:"Fine",origin:"Origine",pages:"Pagine",started:"Inizio",status:"Stato",tokens:"Energia",type:"Tipo"},title:"Cronologia scansioni",tokenUsageNote:"Nota: luso dell'energia  una stima, calcolata dagli eventi di utilizzo nella finestra temporale della scansione.",uploadInProgress:"Caricamento in corso",uploadedDocument:"Documento caricato"},loadingBot:"Caricamento bot...",lockedBody:"Questo bot  attualmente {{status}}. Attivalo in",missingBody:"Non  stata ancora creata alcuna knowledge base. Esegui il crawl del dominio o carica PDF per dare contesto reale al bot.",missingId:"ID bot mancante.",modal:{cancel:"Annulla",confirm:"Conferma",crawlBody:"Questa scansione indicizzera' il sito e consumera' energia in base alla stima.",crawlTitle:"Conferma scansione",docsBody:"Questi documenti verranno indicizzati nella knowledge base con il consumo stimato sotto.",docsTitle:"Conferma caricamento documenti",estimatedTokens:"Energia stimata",remainingTokens:"Rimanenti questo mese"},notFound:"Bot non trovato",onboarding:{btnIndexing:"Indicizzazione del sito",btnReindex:"Reindicizza sito",btnStartIndexing:"Avvia indicizzazione",dashboardHint:"Sbloccheremo il pulsante dashboard subito dopo il completamento della prima indicizzazione.",dashboardHintShopify:"Collega il tuo store Shopify per sbloccare il dashboard.",domainHint:"Usiamo solo pagine pubbliche e rispettiamo sempre il tuo robots.txt.",domainLabel:"Dominio del sito",domainPlaceholder:"https://tuo-sito.com",errors:{crawlFailed:"Non siamo riusciti ad avviare il crawl. Controlla il dominio e riprova.",loadBot:"Impossibile caricare questo bot in questo momento.",saveDomain:"Impossibile salvare questo dominio.",saveSource:"Impossibile salvare la fonte di conoscenza.",shopifySelected:"Shopify selezionato. Passa alla conoscenza web per avviare il crawl."},goToDashboard:"Vai alla dashboard",heroBody:"Analizziamo il tuo dominio principale per estrarre FAQ, articoli di supporto e pagine chiave, cos lassistente sembra un vero membro del team.",heroBodyShopify:"Collega il tuo store Shopify per rispondere con il catalogo live.",heroTitle:"Insegna a Coslo il tuo sito in un clic",openShopify:"Apri impostazioni Shopify",saveDomain:"Salva dominio",savingDomain:"Salvataggio",shopifyHint:"Shopify selezionato. Collega lo store nella scheda Shopify.",source:{label:"Fonte di conoscenza",rag:"Sito web / documenti (RAG)",saving:"Salvataggio...",shopify:"Catalogo Shopify"},status:{completed:"Conoscenza pronta. Coslo ora conosce il tuo sito.",deactivated:"disattivato",failed:"Il crawl non  andato a buon fine. Controlla il dominio e riprova.",pollError:"Stiamo avendo problemi ad aggiornare lo stato, ma il crawl  ancora in esecuzione.",readyExisting:"I tuoi contenuti sono gi indicizzati. Puoi rieseguire lindicizzazione in qualsiasi momento per mantenere Coslo aggiornato.",running:"Indicizzazione in corso. Puoi gi usare il bot mentre completiamo la scansione."},statusPill:{completed:"Conoscenza pronta",deactivated:"disattivato",failed:"Crawl fallito",idle:"Non ancora avviato",running:"Indicizzazione in corso",shopifyChecking:"Verifica connessione Shopify",shopifyConnected:"Shopify connesso",shopifyNotConnected:"Shopify non connesso"},step1:{text:"Aggiungi il sito principale usato dai tuoi clienti.",title:"Collega il tuo dominio"},step2:{text:"Seguiamo i link, estraiamo i contenuti e li ripuliamo.",title:"Coslo analizza le tue pagine"},step3:{text:"Usa Coslo su qualsiasi canale, con il contenuto del tuo sito a supporto.",title:"Il tuo bot risponde come un professionista"},subtitle:"Collega il tuo sito cos Coslo pu analizzarlo e rispondere con informazioni dettagliate e aggiornate.",subtitleShopify:"Collega il tuo store Shopify per usare il catalogo.",title:"Stiamo preparando la conoscenza del tuo bot"},placeholders:{domain:"https://example.com",systemPrompt:"Spiega come il bot dovrebbe usare la conoscenza del sito/documenti nelle risposte..."},shopifyOnly:{body:"Questo bot usa Shopify come fonte di conoscenza. Gestisci connessione e catalogo in",featuresLink:"Funzionalita",shopifyLink:"Impostazioni Shopify",title:"Conoscenza Shopify attiva"},status:{knowledgeStatus:"Stato conoscenza",locked:"Bloccato",missing:"Mancante"},subtitle:"Configura dominio, prompt e avvia crawl o ingestione documenti per {{botName}}.",success:{deactivateJob:"Disattivati {{count}} chunk per il job {{jobId}}.",domainCrawlStarted:"Crawl avviato/completato per {{domain}}. La knowledge base verr aggiornata a breve.",settingsUpdated:"Impostazioni conoscenza aggiornate.",uploadedDocs:"Caricati e indicizzati {{count}} documento/i: {{files}}"},title:"Contenuti & Conoscenza"},fZ={actions:{activatePay:"Attiva e paga",changePlan:"Cambia piano",redirecting:"Reindirizzamento...",updating:"Aggiornamento..."},backToFeatures:" Torna alle funzionalit",energyInfo:{estimates:'I valori "Fino a" mostrati in ogni piano sono stime massime se utilizzassi tutta lEnergia su un singolo tipo di attivit. Lutilizzo reale varia in base alla lunghezza dei messaggi, alla dimensione dei documenti e al contesto.',main:"Quasi ogni azione sulla piattaforma consuma Energia (messaggi dellassistente, recupero dai documenti, strumenti, ingestione). I messaggi template WhatsApp (outbound) hanno un limite separato e non consumano Energia.",title:"Come funzionano Energia e limiti",tooltip:"LEnergia  un credito unico che copre messaggi dellassistente, recupero dai documenti e ingestione. I messaggi template WhatsApp hanno un limite separato."},errorTitle:"Errore",errors:{loadFailed:"Impossibile caricare i dati del piano",selectPlan:"Seleziona un piano.",updateFailed:"Impossibile aggiornare il piano"},features:{default:{energy:"{{amount}} Energia al mese"},free:{emails:"Fino a 20 email",energy:"{{amount}} Energia al mese",messages:"Fino a 150 messaggi dellassistente AI (stima)",pages:"Fino a 100 pagine ingerite (stima)",whatsappTemplates:"Fino a 0 messaggi template WhatsApp (outbound)"},growth:{emails:"Fino a 5.000 email",energy:"{{amount}} Energia al mese",messages:"Fino a 20.000 messaggi dellassistente AI (stima)",pages:"Fino a 10.000 pagine ingerite (stima)",whatsappTemplates:"Fino a 1.000 messaggi template WhatsApp (outbound)"},scale:{emails:"Fino a 20.000 email",energy:"{{amount}} Energia al mese",messages:"Fino a 85.000 messaggi dellassistente AI (stima)",pages:"Fino a 50.000 pagine ingerite (stima)",whatsappTemplates:"Fino a 5.000 messaggi template WhatsApp (outbound)"},starter:{emails:"Fino a 1.000 email",energy:"{{amount}} Energia al mese",messages:"Fino a 3.500 messaggi dellassistente AI (stima)",pages:"Fino a 2.000 pagine ingerite (stima)",whatsappTemplates:"Fino a 200 messaggi template WhatsApp (outbound)"}},loading:"Caricamento opzioni piano...",missingId:"ID bot mancante.",notFoundTitle:"Bot non trovato",notes:{proration:"L'abbonamento verr aggiornato subito. Stripe applicher addebiti/crediti pro-rata.",redirectToStripe:"Verrai reindirizzato a Stripe per confermare e pagare questo bot."},onboarding:{edit:"Modifica",subtitle:"Abbiamo gi preconfigurato canali, prenotazioni e Lead Ads. Ora scegli il piano che meglio si adatta ai tuoi volumi.",summary:{booking:"Prenotazioni",channels:"Canali",disabled:"Disattivo",enabled:"Attivo",leadAds:"Lead Ads  WhatsApp",none:"Nessun canale configurato"},summarySubtitle:"Ecco cosa hai configurato finora per questo bot.",summaryTitle:"Riepilogo configurazione",title:"Scegli il piano e inizia a usare Coslo"},perMonth:"mese",plans:{empty:"Nessun piano di utilizzo configurato. Contatta il supporto.",loading:"Caricamento piani",mostPopular:"Pi scelto",planImageAlt:"Piano {{planName}}",select:"Seleziona questo piano",selected:"Selezionato",subtitle:"Scegli quanto utilizzo ti aspetti. Puoi cambiare piano pi avanti.",title:"Piani di utilizzo",tokensPerMonth:"Energia al mese:",tokensPerMonthLabel:"Energia al mese",unlimited:"Illimitati"},subtitle:"Step 2  scegli un piano di utilizzo per {{botName}}. Prezzo finale = subtotal funzionalit + piano.",success:{planUpdatedProration:"Piano aggiornato. Stripe ha applicato la proratazione all'abbonamento.",title:"Piano aggiornato"},summary:{featuresSubtotal:"Subtotal funzionalit",featuresTotalPerMonth:"Totale funzionalit (al mese)",loadingPricing:"Caricamento prezzi",noPlanSelected:"Nessun piano selezionato.",selectPlanToSeeTotal:"Seleziona un piano per vedere il totale",selectedPlan:"Piano selezionato",statusLabel:"Stato:",subtitle:"Prezzo finale = subtotal funzionalit + piano selezionato.",title:"Riepilogo",totalPerMonth:"Totale al mese"},title:"Piano e fatturazione"},gZ={actions:{note:"Le modifiche si applicano alle nuove conversazioni e prenotazioni.",save:"Salva impostazioni",saving:"Salvataggio"},advanced:{hide:"Nascondi impostazioni avanzate",prompt:"Serve pi controllo su regole, promemoria ed email?",show:"Impostazioni avanzate"},backToOverview:" Torna alla panoramica",bookingFields:{addButton:"Aggiungi",addPlaceholder:"Aggiungi una chiave campo, es. notes",additionalEmpty:"Nessun campo extra configurato. Aggiungi le informazioni extra che vuoi far chiedere al bot (es.",additionalTitle:"Campi aggiuntivi",alwaysRequiredHelp:"Questi campi base sono sempre obbligatori e non possono essere rimossi.",alwaysRequiredTitle:"Sempre richiesti",keysHelp:"Usa chiavi brevi e machine-friendly (senza spazi). Lassistente parler comunque in linguaggio naturale.",removeFieldAria:"Rimuovi campo {{field}}"},calendarDisabled:{body:"Le funzionalit di prenotazione saranno attive solo dopo aver abilitato ladd-on calendario in",title:"Il calendario  disattivato per questo bot."},emailFields:{bodyHtmlOptional:"Testo (HTML, opzionale)",bodyText:"Testo (plain)",subject:"Oggetto"},emailGroups:{cancellation:{htmlHelp:"Lascia vuoto per usare la versione solo testo.",htmlPlaceholder:"<p>Ciao {{client.name}},</p><p>La tua prenotazione per {{booking.service}} il {{booking.start}}  stata cancellata.</p>",subjectPlaceholder:"La tua prenotazione con {{bot.name}}  stata cancellata",textPlaceholder:`Ciao {{client.name}},

la tua prenotazione per {{booking.service}} il {{booking.start}}  stata cancellata.
Se si tratta di un errore, contattaci.

 {{bot.name}}`,title:"Email di cancellazione"},confirmation:{htmlHelp:"Se presente, lHTML verr usato come corpo principale dellemail. Mantienilo semplice e adatto al mobile.",htmlPlaceholder:"<p>Ciao {{client.name}},</p><p>La tua prenotazione per {{booking.service}} il {{booking.start}}  confermata.</p>",subjectPlaceholder:"La tua prenotazione con {{bot.name}}  confermata",textPlaceholder:`Ciao {{client.name}},

la tua prenotazione per {{booking.service}} il {{booking.start}}  confermata.
Se devi riprogrammare, contattaci.

 {{bot.name}}`,title:"Email di conferma"},reminder:{htmlHelp:"Lascia vuoto per usare la versione solo testo.",htmlPlaceholder:"<p>Ciao {{client.name}},</p><p>Questo  un promemoria per la tua prenotazione {{booking.service}} il {{booking.start}}.</p>",subjectPlaceholder:"Promemoria: la tua prenotazione con {{bot.name}}",textPlaceholder:`Ciao {{client.name}},

questo  un promemoria per la tua prenotazione {{booking.service}} il {{booking.start}}.

 {{bot.name}}`,title:"Email di promemoria"}},errors:{loadFailed:"Impossibile caricare le impostazioni del bot. Aggiorna la pagina e riprova.",saveFailed:"Impossibile salvare le impostazioni. Controlla i valori e riprova."},featuresAndPlan:"Funzionalit e piano",fields:{bookingMaxAdvanceDays:{help:"Non accettare prenotazioni oltre questo numero di giorni da oggi. Lascia vuoto per nessun limite.",label:"Massimo giorni di anticipo",placeholder:"es. 30"},bookingMaxSimultaneousBookings:{help:"Limita quante prenotazioni possono essere accettate per lo stesso orario. Lascia vuoto per nessun limite.",label:"Numero massimo di prenotazioni per slot",placeholder:"es. 1"},bookingMinLeadHours:{help:"Lappuntamento deve iniziare almeno questo numero di ore dopo la creazione.",label:"Anticipo minimo (ore)",placeholder:"es. 2"},bookingReminderMinLeadHours:{help:"Evita promemoria per prenotazioni last-minute. Lascia vuoto per disabilitare questo vincolo aggiuntivo.",label:"Ore minime tra creazione e inizio",placeholder:"es. 3"},bookingReminderWindowHours:{help:"Gli appuntamenti che iniziano entro questo numero di ore saranno idonei ai promemoria.",label:"Finestra promemoria (ore prima dellinizio)",placeholder:"es. 24"},calendarId:{help:"Usa",label:"ID calendario",placeholder:"primary oppure your-calendar-id@group.calendar.google.com"},defaultDurationMinutes:{help:"Usata quando lutente non specifica esplicitamente una durata.",label:"Durata predefinita prenotazione (minuti)",placeholder:"30"},timeZone:{help:"Nome IANA del fuso orario. Lassistente lo usa per calcolare disponibilit e orari nelle email.",label:"Fuso orario",placeholder:"es. Europe/Rome"}},intro:"Collega questo bot al tuo Google Calendar e ottimizza il comportamento di prenotazioni, promemoria ed email.",loading:"Caricamento impostazioni bot",missingId:"ID bot mancante.",notFound:"Bot non trovato.",onboarding:{booking:{enableToContinue:"Attiva le prenotazioni qui sopra oppure salta questo passaggio per continuare.",next:"Salva e continua a Lead Ads",nextWhenDisabled:"Continua a Lead Ads",serviceNameRequired:"Il nome del servizio e obbligatorio quando aggiungi piu servizi.",servicesRequired:"Aggiungi almeno un servizio con calendario prima di continuare.",subtitle:"Collega il calendario, definisci gli slot disponibili e le regole di prenotazione.",tablesRequired:"Aggiungi almeno un tavolo prima di continuare.",title:"Abilita le prenotazioni dalla chat",toggleOff:"Prenotazioni DISATTIVATE",toggleOffHint:"Puoi lasciare le prenotazioni disattivate e completare comunque lonboarding. Potrai attivarle in seguito dallapp.",toggleOn:"Prenotazioni ATTIVE",toggleSubtitle:"Quando  attivo, Coslo controller il tuo calendario e proporr gli slot disponibili direttamente in chat.",toggleTitle:"Lascia che Coslo proponga e prenoti appuntamenti"},common:{skip:"Salta per ora"}},sections:{availability:{acceptBookings:"Accetta prenotazioni in questo giorno",addRange:"Aggiungi fascia oraria",disabledHint:"Le prenotazioni non sono consentite in questo giorno finch non lo abiliti.",enabledHint:"Le prenotazioni sono consentite in questo giorno all'interno delle fasce orarie sottostanti.",from:"Dalle",hint:"Scegli in quali giorni accetti prenotazioni e gli intervalli orari per ciascun giorno.",note:"Le prenotazioni saranno accettate solo all'interno di questi intervalli (nel fuso orario del bot).",removeRange:"Rimuovi",slots:"Posti",slotsPlaceholder:"es. 1",slotsRequired:"Gli slot indicano quante prenotazioni puoi gestire contemporaneamente.",title:"Giorni e orari disponibili",to:"Alle"},bookingFields:{hint:"Questi sono i campi che lassistente prover a raccogliere durante la prenotazione.",title:"Campi prenotazione"},bookingRules:{hint:"Definisci con quanto anticipo i clienti possono prenotare.",title:"Regole di prenotazione"},calendarConnection:{hint:"Configura quale Google Calendar usare e la durata predefinita per le nuove prenotazioni.",title:"Connessione calendario"},emails:{hint:"Personalizza le email di conferma e promemoria. Puoi usare segnaposto come",title:"Email"},reminderWindow:{hint:"Gestisci quando vengono inviate le email di promemoria rispetto allorario di inizio.",title:"Finestra promemoria"},services:{add:"Aggiungi servizio",cardHint:"Configura calendario e disponibilita per questo servizio.",hint:"Crea un servizio per calendario e imposta durata, capienza e orari.",remove:"Rimuovi servizio",title:"Servizi e calendari",unnamed:"Servizio"},timezone:{hint:"Usato per validare gli orari di prenotazione per tutti i servizi.",title:"Fuso orario aziendale"}},services:{fields:{aliases:"Alias (opzionali)",aliasesPlaceholder:"es. taglio donna, taglio per donne",duration:"Durata (minuti)",labelOptional:"Etichetta (opzionale)",labelPlaceholder:"es. Generale",name:"Nome servizio",namePlaceholder:"es. Taglio capelli"}},side:{cards:{bookingFields:{text:"I campi extra configurati vengono salvati con ogni appuntamento e possono essere usati nei tuoi workflow o nel CRM.",title:"Campi prenotazione"},calendar:{text:"L'assistente crea eventi sui calendari dei servizi che configuri qui.",title:"Connessione calendario"},emailTemplates:{and:"e",replaced:"vengono sostituiti con dati reali",text:"Se SMTP  configurato male, il backend ripiega sullinvio delle conferme solo in chat. Quando le email vengono inviate, segnaposto come",title:"Template email"},timeRules:{text:"Le regole di prenotazione evitano appuntamenti troppo last-minute o troppo lontani nel tempo, mantenendo sotto controllo la tua agenda.",title:"Regole temporali"}},subtitle:"La configurazione del calendario controlla dove vengono creati gli eventi. Le impostazioni avanzate ottimizzano come lassistente propone gli slot e invia notifiche.",title:"Come vengono usati calendario e prenotazioni"},success:{saved:"Impostazioni aggiornate correttamente."},title:"Calendario e prenotazioni",toggles:{confirmationEmail:"Invia email di conferma dopo una nuova prenotazione",reminderEmail:"Invia email di promemoria prima dellappuntamento"},weekdays:{friday:"Venerd",monday:"Luned",saturday:"Sabato",sunday:"Domenica",thursday:"Gioved",tuesday:"Marted",wednesday:"Mercoled"}},vZ={actions:{create:"Crea nuovo bot",deleteBot:"Elimina bot",openBot:"Apri bot"},channels:{instagram:"Instagram",messenger:"Messenger",web:"Web",whatsapp:"WhatsApp"},confirm:{deleteBot:'Questo eliminer definitivamente il bot "{{name}}" e tutte le sue conversazioni e dati. Continuare?',slugMismatch:"Lo slug non corrisponde. Il bot non  stato eliminato.",typeSlug:'Digita lo slug di questo bot ("{{slug}}") per confermare leliminazione:'},empty:"Nessun bot ancora.",errors:{deleteFailed:"Impossibile eliminare il bot",loadFailed:"Impossibile caricare i bot"},loading:"Caricamento bot...",table:{actions:"Azioni",channels:"Canali",domain:"Dominio",name:"Nome",slug:"Slug",status:"Stato"},title:"I tuoi bot"},bZ={back:"Indietro",error:"Errore",language:{en:"Inglese",es:"Spagnolo",it:"Italiano"},loading:"Caricamento...",saving:"Salvataggio..."},yZ={aiModeNotice:"Passa alla modalita umana per chattare con questo contatto.",backToBots:" Torna ai bot",backToConversations:" Torna alle conversazioni",empty:"Nessun messaggio.",errors:{loadFailed:"Impossibile caricare i messaggi"},loading:"Caricamento messaggi...",manualSend:{button:"Invia",description:"Invia una risposta manuale come operatore umano tramite questo canale.",empty:"Inserisci un messaggio prima di inviare.",failed:"Invio del messaggio non riuscito.",placeholder:"Scrivi una risposta manuale...",sending:"Invio in corso...",success:"Messaggio inviato come UMANO.",title:"Risposta manuale (UMANO)",windowExpired:"Non puoi pi inviare messaggi manuali: l'ultimo messaggio dell'utente risale a pi di 24 ore fa su questo canale. Meta richiede i template oltre la finestra di 24 ore."},missingId:"ID conversazione mancante.",mode:{aiDescription:"L'assistente AI risponde automaticamente ai nuovi messaggi dell'utente.",aiLabel:"AI",error:"Impossibile aggiornare la modalit della conversazione.",humanDescription:"Il passaggio all'operatore umano  attivo. Il bot non risponder automaticamente ai messaggi dell'utente.",humanLabel:"UMANO",switchingToAi:"Cambio in corso",switchingToHuman:"Cambio in corso",title:"Modalit conversazione",toAiButton:"Torna all'AI",toHumanButton:"Passa a UMANO (metti in pausa l'AI)"},parties:{business:"Il tuo canale",title:"Partecipanti alla conversazione",user:"Contatto"},roles:{assistant:"Assistente",human:"Umano",system:"Sistema",user:"Utente"},switchToAi:"Passa a AI",switchToHuman:"Passa a modalita umana",testSend:{button:"Invia messaggio di prova",description:"Invia un messaggio di prova a questo contatto usando il canale collegato. Pensato solo per la verifica dell'app Meta.",empty:"Inserisci un messaggio prima di inviare.",error:"Invio del messaggio di prova non riuscito.",placeholder:"Scrivi un messaggio di prova",sending:"Invio in corso",success:"Messaggio di prova inviato.",title:"Invio di test (verifica Meta)"},title:"Conversazione",windowExpiredPill:"Finestra 24h scaduta"},xZ={actions:{createNewBot:"+ Crea nuovo bot"},activity:{convAbbrev:"conv.",empty:"Nessun bot attivo negli ultimi 30 giorni.",lastConversation:"Ultima conversazione",subtitle:"Vista rapida dei bot pi attivi.",title:"Dettagli attivit",view:"Vedi"},charts:{conversationsLast10Days:{empty:"Nessuna conversazione negli ultimi 10 giorni.",subtitle:"Ogni linea rappresenta un bot. Passa sopra o tocca per vedere i volumi giornalieri.",title:"Conversazioni (ultimi {{days}} giorni)"},tokensLast10Days:{empty:"Nessun utilizzo d'energia registrato negli ultimi 10 giorni.",subtitle:"Energia totale per giorno per ciascun bot.",title:"Utilizzo energia (ultimi {{days}} giorni)"},tokensSplitByBotLast10Days:{empty:"Non ci sono ancora dati sufficienti per mostrare la suddivisione per bot.",subtitle:"Come ogni bot consuma token tramite OpenAI + conoscenza, email e template WhatsApp",title:"Token per bot e canale (ultimi {{days}} giorni)"},tokensSplitLast10Days:{empty:"Non ci sono ancora dati sufficienti per mostrare la suddivisione.",subtitle:"OpenAI + conoscenza vs email vs template WhatsApp",title:"Token per canale (ultimi {{days}} giorni)"},topBots:{empty:"Nessuna conversazione negli ultimi 30 giorni.",subtitle:"In ordine di volume conversazioni nel periodo selezionato.",title:"Top bot per conversazioni"}},coaching:{addKnowledge:"Aggiungi conoscenza",connectChannels:"Collega i canali",createBot:"Crea un bot",subtitle:"Nessuna conversazione in questo intervallo. Ecco come iniziare.",title:"Metti in moto la dashboard"},conversion:{back:"Torna alla dashboard",bookingRate:"Tasso prenotazioni",bookings:"Prenotazioni",bot:"Bot",conversations:"Conversazioni",empty:"Nessun dato di conversione.",leadRate:"Tasso lead",leads:"Lead",perBot:"Dettaglio per bot",perBotSubtitle:"Scopri quali bot convertono di pi.",subtitle:"Conversazioni  lead  prenotazioni",title:"Percorso utente",viewDetails:"Vedi dettaglio per bot"},empty:{cta:"Crea il tuo primo bot",subtitle:"Inizia creando il tuo primo bot. Quando arriver traffico, qui vedrai conversazioni, utilizzo energia e i migliori risultati.",title:"Nessun bot"},errors:{loadFailed:"Impossibile caricare la dashboard"},health:{back:"Torna alla dashboard",bookings:"Prenotazioni",conversationsLast30:"Conversazioni (30g)",empty:"Nessun bot trovato.",knowledge:"Conoscenza",lastConversation:"Ultima conversazione",settings:"Impostazioni",status:"Stato",subtitle:"Panoramica su stato, canali e attivit recente.",title:"Salute bot",viewBot:"Vedi bot"},insights:{alertsSubtitle:"Segnali precoci dall'attivit recente",alertsTitle:"Avvisi e anomalie",bookings:"Prenotazioni",compareEmpty:"Confronto non disponibile.",compareSubtitle:"Periodo attuale vs precedente",compareTitle:"Confronto periodo",noAlerts:"Nessuna attivit insolita rilevata.",now:"Ora",prev:"Prima"},kpis:{activeBots:"Bot attivi",conversationsLast30Days:"Conversazioni (ultimi {{days}} giorni)",emailsThisMonth:"Email inviate (ultimi {{days}} giorni)",tokensThisMonth:"Energia usata (ultimi {{days}} giorni)",totalBots:"Totale bot",whatsappLeadsThisMonth:"Lead WhatsApp (ultimi {{days}} giorni)"},kpisHints:{activeBots:"Bot attualmente live e operativi.",conversationsLast30Days:"Su tutti i canali e bot.",of:"di",tokensThisMonth:"Utile per tenere d'occhio i costi.",totalBots:"Tutti i bot creati con questo account.",unlimitedPlan:"Piano illimitato",whatsappLeadsThisMonth:"Numero di template WhatsApp lead inviati negli ultimi {{days}} giorni"},loading:"Caricamento dati dashboard...",range:{days:"giorni",hint:"I grafici si aggiornano in base a questo intervallo.",label:"Intervallo di tempo",last:"Ultimi",loading:"Aggiorno i grafici"},sections:{overview:"Panoramica",overviewSubtitle:"I segnali principali sulla salute dei tuoi bot.",trends:"Trend",trendsSubtitle:"Conversazioni, utilizzo e performance nel tempo."},subtitle:"Panoramica di bot, conversazioni e utilizzo energia.",title:"Dashboard",tokensSplit:{legend:{emails:"Email",openAi:"OpenAI + conoscenza",whatsapp:"Template WhatsApp"}}},wZ={defaultError:"Impossibile caricare il bot",errorTitle:"Errore",loading:"Caricamento bot...",noSlug:"Nessuno slug del bot fornito.",notFoundBody:"Controlla il link che hai ricevuto.",notFoundTitle:"Bot non trovato"},jZ={actions:{resetPassword:"Reimposta password",sendCode:"Invia codice di reset",sending:"Invio in corso...",updating:"Aggiornamento..."},backToLogin:"Torna al",bullets:{b1:"Usa la stessa email con cui ti sei registrato.",b2:"I codici scadono in 10 minuti.",b3:"Scegli una nuova password dopo aver verificato il codice."},cancel:{confirm:"Annullare l'abbonamento alla fine del periodo di fatturazione corrente?",cta:"Annulla abbonamento",error:"Impossibile annullare l'abbonamento.",processing:"Annullamento?",scheduled:"Annullamento programmato",success:"Annullamento programmato. Il piano resta attivo fino alla fine del periodo di fatturazione corrente.",successWithDate:"Annullamento programmato. Il piano resta attivo fino al {{date}}.",until:"fino al"},codeLabel:"Codice di reset",confirmPassword:"Conferma password",emailLabel:"Email",errors:{mismatch:"Le password non coincidono.",requestFailed:"Impossibile inviare il codice. Riprova.",requirements:"La password non rispetta i requisiti.",resetFailed:"Codice non valido o scaduto. Riprova."},newPassword:"Nuova password",subtitle:{request:"Inserisci l'email usata per registrarti. Ti invieremo un codice a 6 cifre.",reset:"Inserisci il codice che ti abbiamo inviato e scegli una nuova password."},success:{requested:"Se esiste un account, ti abbiamo inviato un codice via email.",reset:"Password aggiornata. Ora puoi accedere."},title:"Recupera la tua password"},SZ={benefits:{cards:{c1:{text:"Migliori la soddisfazione dei clienti grazie a risposte rapide e consistenti, in qualsiasi momento della giornata.",title:"Tempi di risposta ridotti"},c2:{text:"La presenza multicanale aumenta i punti di contatto e ti permette di trasformare pi conversazioni in appuntamenti o opportunit commerciali.",title:"Pi contatti e prenotazioni"},c3:{text:"Delegando all'AI i compiti ripetitivi, il tuo team pu concentrarsi sulle attivit strategiche che generano maggior valore.",title:"Automazione intelligente"},c4:{text:"Le risposte sono in linea con le informazioni, il tono di voce e le linee guida della tua azienda, senza improvvisazioni.",title:"Coerenza con il brand"}},title:"Perch le aziende che lo provano non tornano indietro"},booking:{calendar:{event1:{subtitle:"Mario Rossi - Consulenza",time:"14:00",title:"Appuntamento Cliente"},event2:{subtitle:"Laura Bianchi - Presentazione",time:"16:30",title:"Demo Prodotto"},header:"Google Calendar"},list:{l1:"propone date e fasce orarie disponibili,",l2:"raccoglie i dati del cliente (nome, contatto, richiesta),",l3:"conferma l'appuntamento in tempo reale,",l4:"inserisce l'evento nel tuo Google Calendar con tutti i dettagli."},p1:"L'assistente non  solo un supporto informativo, ma un vero collaboratore operativo. Tra le funzioni pi apprezzate c' la gestione completa delle prenotazioni.",p2:"Ecco cosa pu fare in autonomia:",p3:"Niente pi messaggi sparsi, controlli incrociati o appuntamenti trascritti a mano: il flusso  semplice, automatizzato e riduce al minimo errori e perdite di tempo.",title:"Prenotazioni reali e confermate, direttamente nel tuo Google Calendar"},cta:{primaryCta:"Inizia ora",secondaryCta:"Accedi alla tua area",text:"In un mercato sempre pi competitivo, la qualit e la velocit della comunicazione fanno la differenza. Con il nostro assistente AI puoi offrire un'esperienza moderna, professionale e completamente automatizzata.",title:"Porta il tuo business nel futuro"},features:{multichannelDesc:"Widget web, WhatsApp, Messenger, Instagram  un solo bot, ovunque."},growth:{imageAlt:"Coslo costruisce il tuo assistente AI",p1:"Ogni nuovo documento e ogni aggiornamento del tuo sito aiutano a mantenere le risposte dellassistente accurate e allineate nel tempo. La piattaforma evolve insieme al tuo business.",p2:"Puoi utilizzarlo, ad esempio, per:",p3:" come avere un assistente digitale sempre disponibile, capace di rispondere a domande semplici e complesse legate al business e di occuparsi delle attivit pi ripetitive al posto tuo.",pills:{p1:"Assistenza clienti",p2:"Prenotazioni e appuntamenti",p3:"Risposte ai contatti social",p4:"Lead generation",p5:"Supporto tecnico",p6:"Gestione delle informazioni"},title:"Un assistente che cresce con la tua azienda"},hero:{altHero:"Coslo, il tuo assistente AI",badge:"Coslo  Assistente AI per il tuo business",ctaPrimary:"Inizia ora",ctaSecondary:"Accedi",note:"Un assistente digitale sempre disponibile su sito, canali social e messaggistica, progettato per rispondere alle domande dei clienti e gestire flussi di assistenza e prenotazione utilizzando le informazioni del tuo business.",subtitle:"Trasforma il tuo business con un assistente AI che supporta i clienti 24/7, risponde in modo immediato e gestisce i flussi operativi ripetitivi che ti fanno perdere tempo.",title:"Perch scegliere la nostra piattaforma di Intelligenza Artificiale?"},intro:{imageAlt:"Coslo sempre operativo 24/7 al computer",p1:"La nostra piattaforma  pensata per semplificare il lavoro delle aziende, aumentare le conversioni e offrire ai clienti unesperienza di comunicazione moderna, fluida e immediata.",p2:"Grazie a un sistema avanzato di automazione e comprensione dei contenuti, il tuo business pu garantire un supporto costante, coerente e di qualit, senza aumentare il carico di lavoro del team interno.",p3:"Qui troverai nel dettaglio tutte le funzionalit che rendono il nostro assistente AI uno strumento davvero indispensabile per la tua attivit.",title:"Un'assistenza continua, precisa e realmente utile"},knowledge:{imageAlt:"Coslo che studia i tuoi contenuti",labels:{faq:"FAQ",pdf:"PDF",site:"Sito"},list:{l1:"naviga autonomamente il tuo sito web,",l2:"legge e comprende i contenuti dei tuoi PDF,",l3:"elabora testi, FAQ, guide, articoli e documentazione tecnica,",l4:"organizza tutte le informazioni in una base di conoscenza chiara e coerente."},p1:"L'assistente non si limita a generare risposte generiche: risponde in base al tuo materiale e a ci che comunichi online.",p2:"Grazie a un sistema avanzato di crawling e analisi, la piattaforma:",p3:"In questo modo lassistente pu riflettere a fondo il tuo business: prodotti, servizi, processi interni, terminologia specifica e punti di forza. Il risultato sono risposte accurate, precise e in linea con l'identit del brand, anche quando i tuoi contenuti si aggiornano.",p4:"Non servono testi ad hoc:  sufficiente utilizzare ci che hai gi a disposizione, e l'assistente far il resto.",source:{rag:{description:"Usa le pagine del sito e i documenti caricati come base di conoscenza del bot.",title:"Sito web / documenti (RAG)"},shopify:{description:"Risponde con prodotti e varianti del tuo Shopify connesso.",title:"Catalogo Shopify"}},title:"Conoscenza profonda dei tuoi contenuti"},miniCoslo:{bubbleBot:"Certo! Dimmi solo il giorno e l'orario che preferisci e aggiorno subito il calendario.",bubbleUser:"Ciao Coslo, posso spostare il mio appuntamento di domani?",imageAlt:"Coslo - Assistente AI",p1:"Le chat con i clienti vengono gestite con un tono professionale e naturale: Coslo risponde alle domande frequenti, propone appuntamenti e raccoglie i dati importanti senza far perdere tempo al tuo team.",p2:"Qui sotto vedi un esempio semplificato di come potrebbe apparire una conversazione tipica con i tuoi clienti.",title:"Coslo parla con i tuoi clienti, come un vero assistente"},multichannel:{cards:{instagram:{text:"Perfetto per intercettare domande e richieste che nascono da post, reel e storie, trasformandole in contatti e opportunit.",title:"Instagram Direct"},messenger:{text:"Ideale per seguire gli utenti che arrivano dalle tue campagne e dai contenuti social, senza farti perdere nessuna conversazione.",title:"Facebook Messenger"},webWidget:{text:"Integrato direttamente nel tuo sito, sempre visibile e attivo 24/7 per rispondere alle domande e guidare gli utenti all'azione.",title:"Web Widget"},whatsapp:{text:"Il canale di messaggistica pi utilizzato: perfetto per assistenza, richieste rapide e prenotazioni immediate.",title:"WhatsApp"}},p1:"Le persone si aspettano risposte rapide, senza dover cambiare canale o aspettare ore. Per questo l'assistente AI si integra con gli strumenti che i tuoi clienti usano ogni giorno.",p2:"In questo modo il tuo brand  sempre raggiungibile e pronto a interagire, migliorando l'esperienza utente e aumentando le opportunit di conversione.",title:"Multicanale: presente dove sono i tuoi clienti"}},NZ={backToCredentials:"Torna al login con email e password",bullets:{b1:"Un'unica dashboard per tutti i tuoi canali",b2:"Statistiche in tempo reale sulle performance del bot",b3:"Accesso sicuro e protetto con autenticazione a due fattori"},cardTitle:"Login",divider:"oppure",email:"Email",forgotPassword:"Password dimenticata?",googleError:"Accesso con Google non riuscito",loginError:"Login non riuscito",mfaCodeLabel:"Codice di sicurezza",mfaError:"Codice non valido. Riprova.",mfaHelp:"Non hai pi accesso alla tua app di autenticazione? Usa uno dei codici di backup che hai salvato quando hai attivato la 2FA.",mfaSubmit:"Conferma e accedi",mfaSubmitting:"Verifica in corso...",mfaSubtitle:"Apri la tua app di autenticazione (Google Authenticator, 1Password, Authy, ecc.) e inserisci il codice a 6 cifre per completare l'accesso.",mfaTitle:"Autenticazione a due fattori",noAccount:"Non hai ancora un account?",pageTitle:"Accedi al tuo spazio Coslo",password:"Password",register:"Registrati",submit:"Accedi",submitting:"Accesso in corso...",subtitle:"Gestisci i tuoi assistenti AI, controlla le conversazioni e modifica le impostazioni in pochi clic."},CZ={eyebrow:"Onboarding guidato  {current}/{total}",steps:{booking:"3. Prenotazioni",bookingDescription:"Lascia che Coslo proponga e prenoti appuntamenti direttamente dalla chat.",bot:"1. Crea bot",botDescription:"Dai un nome al tuo assistente e scegli come verr mostrato ai clienti.",channels:"2. Canali",channelsDescription:"Collega WhatsApp, Facebook, Instagram o il tuo sito web.",knowledge:"6. Conoscenza",knowledgeDescription:"Fai imparare a Coslo il tuo sito cos pu rispondere a domande dettagliate.",leadAds:"4. Lead Ads",leadAdsDescription:"Sincronizza i tuoi Facebook Lead Ads e invia messaggi WhatsApp in automatico.",plan:"5. Piano e fatturazione",planDescription:"Rivedi la configurazione, scegli il piano e inizia a usare Coslo."}},kZ={hero:{intro:"Coslo  una piattaforma SaaS multi-tenant che collega i canali della tua azienda (Web Widget, WhatsApp, Facebook Messenger, Instagram Direct) a un assistente AI e, opzionalmente, allautomazione delle prenotazioni con Google Calendar. Questa pagina spiega quali dati trattiamo, perch li trattiamo, come li proteggiamo e quali controlli hai a disposizione.",kicker:"Legale",lastUpdatedLabel:"Ultimo aggiornamento",title:"Informativa Privacy & Trattamento Dati"},sections:{aiProcessing:{paragraphs:["Coslo  pensato per casi duso di supporto business. Lassistente  configurato per rispondere utilizzando le fonti di conoscenza che fornisci (ad esempio: pagine del sito pubblico, PDF, FAQ).","Per generare una risposta, potremmo inviare al nostro provider AI il testo del messaggio dellUtente Finale, gli snippet di conoscenza recuperati (RAG) e la configurazione dellassistente (come le istruzioni di sistema). Questo trattamento  necessario per fornire la risposta AI richiesta.","Potremmo conservare log delle richieste/risposte AI per operare, effettuare debug e migliorare il servizio. Non utilizziamo i contenuti conversazionali dei Clienti per addestrare o migliorare un modello AI condiviso/generico e non utilizziamo i dati conversazionali di unazienda per costruire o migliorare lassistente di unaltra azienda."],title:"5) Trattamento AI e risposte basate sulla knowledge"},appliesTo:{paragraphs:["Questa informativa si applica a (a) titolari dellaccount e membri del team che utilizzano Coslo per configurare e gestire un assistente (i Utenti Business) e (b) utenti finali che contattano unazienda tramite messaggistica, quando lazienda usa Coslo per fornire risposte automatizzate (gli Utenti Finali).","Nella maggior parte dei casi, lazienda contattata determina come utilizza i canali di messaggistica e quali informazioni fornisce allassistente. Se sei un Utente Finale, per richieste relative alla conversazione (accesso/cancellazione) dovresti in genere contattare direttamente lazienda, salvo diverse istruzioni."],title:"2) A chi si applica questa informativa"},automationEscalation:{paragraphs:["Le aziende possono usare Coslo per automatizzare parte dellassistenza clienti sui canali di messaggistica. Se una richiesta richiede un umano, lazienda dovrebbe fornire un modo chiaro per contattare una persona (ad esempio: parla con un operatore, telefono, email o form di supporto). Coslo supporta questi flussi tramite configurazione e opzioni di escalation definite dallazienda."],title:"8) Automazione e passaggio a un operatore umano"},changes:{paragraphs:["Potremmo aggiornare questa informativa di tanto in tanto. In tal caso aggiorneremo la data di Ultimo aggiornamento in cima a questa pagina."],title:"17) Modifiche a questa informativa"},children:{paragraphs:["Coslo  destinato alluso business. Non  progettato per essere rivolto a minori e le aziende devono assicurarsi che luso dei canali di messaggistica rispetti eventuali requisiti di et applicabili."],title:"16) Minori"},dataWeProcess:{list:["Dati account: indirizzo email e dati di autenticazione (le password sono memorizzate in forma hashata), oltre a impostazioni base dellaccount.","Configurazione dellassistente: nome del bot, slug, dominio collegato, istruzioni/prompt di sistema, funzionalit abilitate e impostazioni dei canali.","Input della knowledge base: contenuti che colleghi o carichi per alimentare lassistente, come contenuti del tuo sito pubblico e PDF (e metadati correlati come URL sorgente / nome file).","Output della knowledge base: rappresentazioni elaborate dei contenuti (ad esempio: testo estratto, chunk e embedding/vettori) utilizzate per recuperare informazioni rilevanti.","Dati conversazione: contenuto dei messaggi scambiati con lassistente (testo) e metadati correlati (timestamp, tipo canale e identificativi necessari per instradare le risposte).","Identificativi integrazioni: identificativi necessari per collegare i canali e consegnare i messaggi (es. WhatsApp phone number IDs, Facebook Page IDs, Instagram Business IDs) e credenziali/token di autorizzazione usati per inviare/ricevere messaggi per tuo conto.","Dati prenotazione (se abilitati): informazioni necessarie a pianificare un appuntamento (es. nome, contatti, servizio, data/ora e note o campi personalizzati configurati).","Analitiche del servizio (per tenant): metriche per il titolare dellaccount business come numero di conversazioni, volume messaggi, utilizzo nel tempo e indicatori di qualit (es. se lassistente ha risposto correttamente).","Log tecnici e di sicurezza: log operativi (es. log errori, log consegna webhook ed eventi di sicurezza) utilizzati per gestire e proteggere il servizio."],paragraphs:["Trattiamo le seguenti categorie di dati, in base alle funzionalit che abiliti:"],title:"3) Quali dati raccogliamo / trattiamo"},deletion:{paragraphs:["Puoi disconnettere i canali collegati (WhatsApp, Facebook, Instagram) dalla dashboard Coslo in qualsiasi momento.","Puoi eliminare un assistente specifico dalla pagina Bot List. Questo elimina lassistente e tutti i dati relativi a quellassistente (inclusi knowledge base e conversazioni) dai nostri sistemi primari.","Puoi eliminare lintero account dalla pagina Profilo (Danger Zone). Questo elimina il tuo account e tutti i dati correlati dai nostri sistemi primari.","Alcuni dati tecnici limitati possono rimanere per un breve periodo in log di sicurezza e backup, quindi vengono sovrascritti o eliminati.","Per domande sulla privacy o richieste di cancellazione, contatta <a>lassistenza</a>."],title:"13) Cancellazione, disconnessione canali e richieste",useTrans:"true"},googleCalendar:{paragraphs:["Se abiliti lautomazione delle prenotazioni, Coslo creer eventi nel Google Calendar che colleghi (o a cui concedi accesso) e potr verificare disponibilit/conflitti per proporre fasce orarie.","Gli eventi creati nel tuo Google Calendar sono memorizzati nel tuo account Google e rimangono l finch non li rimuovi direttamente da Google Calendar."],title:"9) Prenotazioni su Google Calendar (funzionalit opzionale)"},howWeUse:{list:["Fornire il servizio: creare e gestire account, assistenti, dashboard e canali collegati.","Consegnare la messaggistica: ricevere messaggi dai canali collegati e inviare risposte per conto dellazienda.","Generare risposte: recuperare conoscenza rilevante dalle fonti configurate (sito/PDF/FAQ) e generare risposte coerenti con la configurazione dellassistente.","Prenotazioni (opzionale): verificare disponibilit e creare prenotazioni/eventi in Google Calendar quando abilitato.","Analitiche & controllo qualit: fornire analitiche per tenant e consentire al titolare dellaccount di consultare lo storico conversazioni per valutare le performance dellassistente, gestire richieste e migliorare contenuti/configurazione.","Sicurezza & affidabilit: rilevare abusi, prevenire frodi, risolvere problemi e mantenere la stabilit della piattaforma."],paragraphs:["Utilizziamo i dati per gestire Coslo e fornire le funzionalit che abiliti:"],title:"4) Come utilizziamo i tuoi dati"},messagingChannels:{paragraphs:["Se colleghi canali Meta, Coslo utilizza le API Meta per consegnare messaggi e ricevere eventi (webhook). Questo richiede la memorizzazione di identificativi di canale (come Page ID / Business ID / phone number ID) e credenziali/token necessari per inviare e ricevere messaggi per tuo conto.","Le aziende sono responsabili di assicurarsi di avere i diritti/autorizzazioni necessari per collegare e utilizzare questi canali e di comunicare agli Utenti Finali come viene gestita la messaggistica.","Quando necessario per fornire il servizio, le credenziali/token di autorizzazione vengono archiviati in modo sicuro (inclusa la cifratura a riposo) e laccesso  limitato a sistemi e personale autorizzati."],title:"8) Canali di messaggistica (WhatsApp, Facebook, Instagram)"},questions:{paragraphs:["Per qualsiasi domanda su privacy, uso dei dati o richieste di cancellazione, contatta <a>lassistenza</a>."],title:"18) Contatti",useTrans:"true"},retention:{list:["Conversazioni e configurazione dellassistente: conservate finch elimini lassistente, elimini laccount o richiedi la cancellazione (salvo una conservazione limitata nei backup).","Dati della knowledge base: conservati finch rimuovi la fonte (sito/PDF), elimini lassistente, elimini laccount o richiedi la cancellazione.","Log operativi: conservati per un periodo limitato per sicurezza, debug e affidabilit, poi sovrascritti o eliminati."],paragraphs:["Conserviamo i dati per gestire il servizio e fornire le funzionalit dashboard che abiliti. In generale:"],title:"12) Conservazione dei dati"},rights:{paragraphs:["In base alla tua posizione (inclusa UE/SEE), potresti avere diritti di accesso, rettifica, cancellazione o opposizione a determinati trattamenti dei tuoi dati personali. Per esercitare questi diritti, contatta <a>lassistenza</a>.","Se sei un Utente Finale che contatta unazienda, in genere dovresti contattare prima lazienda stessa perch controlla la conversazione e le modalit con cui viene gestita."],title:"17) I tuoi diritti",useTrans:"true"},security:{paragraphs:["Applichiamo misure tecniche e organizzative ragionevoli per proteggere i dati, come controlli di accesso e comunicazioni sicure. Nessun metodo di trasmissione o archiviazione  sicuro al 100%, ma lavoriamo continuamente per ridurre i rischi e prevenire accessi non autorizzati."],title:"14) Sicurezza"},shopifyData:{list:["Identificativi dello store (es. dominio) e metadati dellapp installata.","Dati di prodotti e varianti (titolo, handle, prezzi, tag, immagini).","Disponibilit inventario e stato stock (se lo store abilita laccesso inventario).","Richieste di stato ordine avviate dagli utenti finali (email + numero ordine)."],paragraphs:["Se colleghi uno store Shopify, trattiamo i dati necessari per fornire lintegrazione. Possono includere dominio dello store, prodotti e varianti, disponibilit inventario e richieste di stato ordine da parte degli utenti finali.","Accediamo ai dati Shopify tramite Admin API per conto del titolare dello store e solo per fornire le funzioni dellassistente (es. ricerca prodotti, disponibilit, link al carrello e stato ordine).","Non vendiamo i dati Shopify n li usiamo per pubblicit. Manteniamo i dati limitati a quanto necessario per il servizio e per rispondere alle richieste dei clienti."],title:"5) Dati Shopify e interazioni e-commerce"},tenantSeparation:{paragraphs:["Coslo  multi-tenant. Dati conversazionali, knowledge base e analitiche generate per un account business sono isolate dagli altri account business.","Le aziende possono consultare lo storico conversazioni del proprio assistente nella dashboard Coslo per finalit operative (es. controllo qualit, gestione richieste, miglioramento della knowledge base). Laccesso  limitato agli utenti autorizzati dello stesso account business.","Gli Utenti Finali non hanno accesso alle dashboard analitiche interne o agli strumenti operativi dellazienda."],title:"6) Consultazione conversazioni, accessi e separazione multi-tenant"},thirdParties:{list:["Meta (WhatsApp, Facebook, Instagram) per la consegna messaggi e i webhook.","Provider AI (es. OpenAI) per generare le risposte dellassistente.","Google (Google Calendar) per lautomazione delle prenotazioni.","Stripe per fatturazione e pagamenti.","Provider di hosting/infrastruttura per eseguire lapplicazione e archiviare i dati in modo sicuro."],paragraphs:["Ci affidiamo a fornitori terzi per erogare Coslo. In base alle funzionalit abilitate, i dati possono essere trattati da:"],title:"10) Servizi di terze parti (subprocessor)"},transfers:{paragraphs:["Alcuni fornitori potrebbero trattare i dati in paesi diversi dal tuo. Ove applicabile, ci affidiamo a garanzie adeguate per i trasferimenti internazionali (ad esempio tutele contrattuali) in conformit alla normativa applicabile."],title:"14) Trasferimenti internazionali di dati"},whoWeAre:{addressLabel:"Indirizzo",emailLabel:"Email",providerLabel:"Titolare",serviceLabel:"Servizio",serviceValue:"Coslo (coslo.it)",title:"1) Chi siamo"}}},PZ={common:{cancel:"Annulla"},confirmDelete:"Questo eliminer definitivamente il tuo account, tutti i tuoi bot e i relativi dati. Questa azione non pu essere annullata. Continuare?",danger:{actions:{delete:"Elimina il mio account",deleting:"Eliminazione",deletingInline:"Eliminazione account"},googleNote:"Questo account usa Google Sign-In. Clicca il pulsante qui sotto per confermare con Google ed eliminare l'account e tutti i bot e dati associati.",passwordConfirm:{help:"Per la tua sicurezza richiediamo la password attuale per eliminare l'account.",label:"Conferma con la tua password"},subtitle:"Elimina definitivamente il tuo account e tutti i bot, conversazioni, documenti e dati di utilizzo. Questa azione non pu essere annullata.",title:"Zona pericolosa",unsupported:"Questo account non supporta ancora l'eliminazione self-service."},errors:{changePasswordFailed:"Impossibile cambiare la password.",deleteFailed:"Impossibile eliminare l'account.",loadFailed:"Impossibile caricare l'account",updateProfileFailed:"Impossibile aggiornare il profilo."},loading:"Caricamento account...",mfa:{actions:{confirmEnable:"Conferma e attiva 2FA",disabling:"Disattivazione",enable:"Attiva autenticazione a due fattori",preparing:"Preparazione",verifying:"Verifica"},backupCodes:{body:"Questi codici vengono mostrati solo una volta. Salvali in un luogo sicuro (password manager, nota protetta, copia stampata). Ogni codice pu essere usato una sola volta se perdi accesso al telefono.",copyAll:"Copia tutti i codici",title:"Codici di backup (salvali ora)"},disable:{backupCodeLabel:"Oppure un codice di backup",codeLabel:"Codice dalla tua app (6 cifre)",confirm:"Conferma disattivazione 2FA",confirmBody:"Per la tua sicurezza, conferma con un codice della tua app di autenticazione o con un codice di backup.",intro:"Se cambi dispositivo o app di autenticazione, puoi disattivare la 2FA e configurarla di nuovo.",open:"Disattiva autenticazione a due fattori"},enabledNote:"Ad ogni accesso, dopo il metodo principale (email/password o Google), ti chiederemo un codice a 6 cifre dalla tua app di autenticazione.",errors:{backupCodesCopyFailed:"Impossibile copiare i codici automaticamente. Copiali manualmente e conservali in un luogo sicuro.",confirmFailed:"Impossibile confermare il codice. Controlla il codice e riprova.",disableFailed:"Impossibile disattivare l'autenticazione a due fattori. Controlla il codice e riprova.",disableRequiresCode:"Inserisci un codice dall'app di autenticazione o un codice di backup.",startFailed:"Impossibile avviare la configurazione dell'autenticazione a due fattori."},recommendation:"Consigliamo vivamente di attivare l'autenticazione a due fattori, soprattutto se riusi questa email altrove o condividi dispositivi.",setup:{codeLabel:"Codice dalla tua app",manualSecretLabel:"Segreto manuale:",step1Body:"Apri la tua app di autenticazione (Google Authenticator, 1Password, Authy, ecc.) e scansiona questo codice. Se non puoi scansionare il QR, inserisci il segreto manualmente.",step1Title:"1. Scansiona il QR code",step2Body:"Dopo aver aggiunto l'account nell'app, inserisci il codice corrente a 6 cifre per confermare che tutto funzioni.",step2Title:"2. Inserisci il codice a 6 cifre"},status:{disabled:"Disattiva",enabled:"Attiva"},statusLabel:"Stato",subtitle:"Protezione extra per il tuo account tramite un'app di autenticazione. Dopo il login ti verr richiesto un codice a 6 cifre dal telefono.",success:{backupCodesCopied:"Codici di backup copiati negli appunti. Conservali in un luogo sicuro.",disabled:"Autenticazione a due fattori disattivata.",enabledSaveBackupCodes:"Autenticazione a due fattori attivata. Salva i codici di backup in un luogo sicuro."},title:"Autenticazione a due fattori"},pageSubtitle:"Gestisci profilo, accesso e sicurezza.",pageTitle:"Account",password:{actions:{change:"Cambia password",updating:"Aggiornamento"},confirm:{label:"Conferma nuova password"},current:{label:"Password attuale"},errors:{mismatch:"La nuova password e la conferma non coincidono."},new:{help:"Almeno 8 caratteri, con maiuscole e minuscole, un numero e un simbolo.",label:"Nuova password"},success:"Password aggiornata."},profile:{actions:{save:"Salva profilo",saving:"Salvataggio"},avatarAlt:"Avatar",avatarUrl:{help:"Puoi incollare un link a un'immagine (es. dal tuo sito o CDN del logo).",label:"URL avatar",placeholder:"https://"},displayName:{label:"Nome visualizzato",placeholder:"Il tuo nome o nome azienda"},subtitle:"Queste informazioni sono visibili solo all'interno della tua dashboard.",success:"Profilo aggiornato.",title:"Profilo"},security:{emailLabel:"Email",googleOnlyNoteStrongPrefix:"Questo account usa",googleOnlyNoteSuffix:"L'accesso con password non  abilitato.",googleSignInStrong:"Google Sign-In",loginMethod:{emailPassword:"Email e password",google:"Google",unknown:"Sconosciuto"},loginMethodLabel:"Metodo di accesso",title:"Accesso e sicurezza"},team:{errors:{botsRequired:"Seleziona almeno un bot.",emailRequired:"Inserisci un'email.",inviteFailed:"Impossibile inviare l'invito.",loadFailed:"Impossibile caricare i dati del team.",revokeFailed:"Impossibile revocare l'accesso.",updateFailed:"Impossibile aggiornare l'accesso del membro."},invite:{botLabel:"Bot accessibili",emailLabel:"Email membro del team",emailPlaceholder:"nome@azienda.com",noBots:"Crea prima un bot per invitare il team.",send:"Invia invito",sending:"Invio..."},invites:{columns:{actions:"Azioni",bots:"Bot",email:"Email",sent:"Inviato"},empty:"Nessun invito in sospeso.",revoke:"Revoca invito",title:"Inviti in sospeso"},loading:"Caricamento dati team...",members:{cancel:"Annulla",columns:{actions:"Azioni",bots:"Bot",lastLogin:"Ultimo accesso",member:"Membro"},confirmRemove:"Rimuovere l'accesso di questo membro del team?",editMember:"Modifica membro",empty:"Nessun membro del team.",never:"Mai",remove:"Rimuovi membro",revoke:"Revoca accesso",save:"Salva",saving:"Salvataggio...",title:"Membri del team"},subtitle:"Invita i membri del team ad accedere a bot specifici e rispondere come umano.",success:{inviteRevoked:"Invito revocato.",inviteSent:"Invito inviato con successo.",memberRevoked:"Accesso del membro revocato.",memberUpdated:"Accesso del membro aggiornato."},title:"Accesso team"}},AZ={alreadyAccount:"Hai gi un account?",bullets:{b1:"Multi-canale (web, WhatsApp, social, calendario)",b2:"Configurazione guidata e personalizzabile",b3:"Piano multi-tenant pensato per agenzie e team"},cardTitle:"Registrazione",email:"Email",errorGeneric:"Registrazione fallita",errorPasswordMismatch:"Le password non coincidono",errorPasswordRequirements:"La password non soddisfa i requisiti. Controlla i punti sotto il campo password.",login:"Accedi",pageTitle:"Crea il tuo account Coslo",password:"Password",passwordConfirm:"Conferma password",pwRules:{digit:"Almeno una cifra (0-9)",lowercase:"Almeno una lettera minuscola (a-z)",minLength:"Almeno 8 caratteri",special:"Almeno un carattere speciale (es. !@#$%^&*)",uppercase:"Almeno una lettera maiuscola (A-Z)"},pwTitle:"Requisiti password:",submit:"Crea account",submitting:"Creazione in corso...",subtitle:"In pochi minuti colleghi i tuoi canali e hai un assistente AI pronto a rispondere ai tuoi clienti 24/7.",success:"Registrazione completata! Controlla la tua email e verifica l'account prima di effettuare il login."},EZ={hero:{intro:"I presenti Termini e Condizioni regolano lutilizzo di Coslo (la Piattaforma), un servizio SaaS multi-tenant che collega i canali della tua azienda (es. Web Widget, WhatsApp, Facebook Messenger, Instagram Direct) a un assistente di Intelligenza Artificiale e, se abilitato, allautomazione delle prenotazioni (es. Google Calendar). Utilizzando la Piattaforma, accetti i presenti Termini.",kicker:"Legale",lastUpdatedLabel:"Ultimo aggiornamento",title:"Termini e Condizioni dUso"},sections:{account:{paragraphs:["Devi fornire informazioni accurate e aggiornate durante la registrazione e mantenere sicure le credenziali.","Sei responsabile delle attivit svolte tramite il tuo account e della protezione di canali collegati, token e permessi.","Possiamo sospendere o terminare laccesso se riteniamo ragionevolmente che vi siano abusi, attivit illecite o violazioni dei presenti Termini o delle policy di Terze Parti."],title:"4) Account, sicurezza e accessi"},aiLimitations:{paragraphs:["Gli output dellassistente sono generati automaticamente in base alla configurazione, alle fonti di conoscenza e ai modelli AI di terze parti.","LAI pu produrre contenuti inesatti o incompleti. La Piattaforma  fornita best effort e non sostituisce consulenze professionali (legali/mediche/fiscali).","Sei responsabile della verifica e delluso appropriato degli output, soprattutto in contesti regolamentati o ad alto impatto."],title:"8) AI: limiti e responsabilit"},availabilitySupport:{paragraphs:["Puntiamo a mantenere la Piattaforma ragionevolmente disponibile, ma la disponibilit pu essere influenzata da manutenzioni, aggiornamenti e Servizi di Terze Parti.","Il supporto pu variare in base al piano. Per assistenza, contatta <a>{{email}}</a>."],title:"10) Disponibilit, manutenzione e supporto",useTrans:"true"},changes:{paragraphs:["Possiamo aggiornare la Piattaforma e i presenti Termini nel tempo. In caso di modifiche sostanziali, potremmo fornire una notifica via email o tramite notifiche in-app.","Luso continuato della Piattaforma dopo lentrata in vigore delle modifiche implica laccettazione dei Termini aggiornati."],title:"17) Modifiche alla Piattaforma e ai Termini"},contacts:{paragraphs:["Per domande su questi Termini, contatta <a>{{email}}</a>."],title:"20) Contatti",useTrans:"true"},definitions:{paragraphs:["Ai fini dei presenti Termini: (a) Piattaforma indica Coslo; (b) Cliente indica lutente business che crea un account; (c) Utenti Finali indica le persone che contattano il Cliente; (d) Contenuti del Cliente indica contenuti e dati configurati o forniti dal Cliente (incluse fonti di conoscenza e conversazioni); (e) Servizi di Terze Parti indica servizi esterni integrati (es. canali Meta, Google Calendar, provider AI, Stripe, hosting)."],title:"2) Definizioni"},indemnity:{paragraphs:["Accetti di manlevare e tenere indenne il Fornitore da reclami, danni, perdite e spese (incluse ragionevoli spese legali) derivanti da: (a) uso illecito o non conforme della Piattaforma; (b) violazione dei presenti Termini o delle policy di Terze Parti; (c) violazioni o illeciti connessi ai tuoi Contenuti del Cliente."],title:"16) Manleva"},ip:{paragraphs:["Tutti i diritti sulla Piattaforma (software, design, marchi, documentazione) restano del Fornitore e dei suoi licenzianti.","Mantieni i diritti sui tuoi Contenuti del Cliente. Concedi al Fornitore una licenza limitata a trattare tali contenuti solo per erogare e gestire la Piattaforma."],title:"11) Propriet intellettuale"},lawForum:{paragraphs:["Salvo diverso accordo scritto, i presenti Termini sono regolati dalla legge italiana. Qualsiasi controversia sar devoluta in via esclusiva al foro del luogo in cui il Fornitore ha la sede legale, salvo quanto previsto da norme inderogabili."],title:"17) Legge applicabile e foro"},liability:{paragraphs:["Nei limiti massimi consentiti dalla legge, la nostra responsabilit complessiva  limitata agli importi da te pagati nei dodici (12) mesi precedenti levento che ha originato la richiesta.","Non siamo responsabili per danni indiretti, incidentali, consequenziali o punitivi, perdita di profitti, perdita di business o di opportunit."],title:"14) Limitazione di responsabilit"},permittedUseCompliance:{paragraphs:["Sei responsabile dei tuoi assistenti, dei Contenuti del Cliente e delle interazioni con gli Utenti Finali.","Non devi utilizzare Coslo per attivit illecite, spam, phishing, malware, molestie o violazioni di diritti di terzi.","Devi rispettare termini e policy dei Servizi di Terze Parti per i canali collegati (incluse le policy WhatsApp/Meta). Tali policy possono limitare automazione e utilizzo di AI.","Coslo  pensato per casi duso di supporto business (assistenza, informazioni, prenotazioni, gestione lead). Non devi configurarlo o promuoverlo come chatbot general purpose non correlato al tuo business, n usarlo in modo contrario alle regole dei canali.","Dove richiesto, devi fornire agli Utenti Finali un percorso chiaro per contattare un operatore umano (es. parla con un operatore, telefono, email, form). Sei responsabile della configurazione e del mantenimento dellopzione di contatto umano presentata agli Utenti Finali sui canali collegati."],title:"6) Uso consentito, divieti e compliance dei canali"},plansPayments:{paragraphs:["Laccesso pu essere offerto tramite piani gratuiti, prove o abbonamenti a pagamento come descritti in Piattaforma o sul sito.","I piani a pagamento sono fatturati in modalit ricorrente (mensile/annuale) tramite un payment processor (es. Stripe). Autorizzi gli addebiti ricorrenti finch labbonamento resta attivo.","Salvo quanto richiesto dalla legge o indicato nel tuo piano, i pagamenti non sono rimborsabili."],title:"6) Piani, abbonamenti e pagamenti"},privacyMultiTenant:{paragraphs:["Coslo  multi-tenant: i dati di ciascun Cliente sono logicamente separati dagli altri tenant e accessibili solo agli utenti autorizzati dello stesso account Cliente.","La Privacy & Data Policy  parte integrante dei presenti Termini e descrive quali dati trattiamo, perch, i tempi di conservazione e i controlli di cancellazione.","In base al caso duso, pu essere reso disponibile un accordo di trattamento dati (DPA) per Clienti business."],title:"7) Privacy, trattamento dati e separazione multi-tenant"},provider:{labels:{address:"Indirizzo",contact:"Contatti",provider:"Fornitore"},title:"1) Informazioni sul Fornitore"},scope:{paragraphs:["Coslo consente ai Clienti di creare e gestire assistenti AI per canali di messaggistica, collegare fonti di conoscenza (es. sito/PDF), automatizzare flussi (es. prenotazioni), integrare Servizi di Terze Parti e consultare analitiche per tenant e storico conversazioni.","La Piattaforma  destinata a un utilizzo business/professionale. Se utilizzi Coslo per conto di unorganizzazione, dichiari di avere lautorit per vincolare tale organizzazione ai presenti Termini."],title:"3) Ambito del servizio e idoneit"},shopifyApp:{paragraphs:["Se colleghi uno store Shopify, autorizzi la Piattaforma ad accedere ai dati tramite Shopify Admin API per fornire le funzioni dellassistente (ricerca prodotti, disponibilit, link al carrello, stato ordine).","Confermi di avere il diritto di concedere tale accesso e di usare i dati per servire gli utenti finali. Sei responsabile del rispetto delle policy Shopify e delle leggi applicabili.","Non devi usare la Piattaforma per accedere o trattare dati Shopify per scopi non legati al tuo business o oltre gli scope autorizzati."],title:"4) Termini Shopify"},specificApproval:{paragraphs:["Ai sensi degli artt. 1341 e 1342 c.c., approvi specificamente le clausole su sospensione/cessazione, esclusioni di garanzia, limitazione di responsabilit, manleva, modifiche ai termini, legge applicabile e foro.","Nota operativa: per una maggiore efficacia, valuta di implementare una checkbox dedicata in fase di registrazione per lapprovazione specifica."],title:"19) Approvazione specifica (Italia)"},termination:{paragraphs:["Laccount resta attivo finch mantieni un piano attivo o hai accesso alla Piattaforma.","Puoi annullare labbonamento secondo il flusso di cancellazione disponibile in Piattaforma.","Possiamo sospendere o terminare laccesso per violazioni rilevanti, mancato pagamento o uso illecito.","Gli eventi creati in Google Calendar restano nel tuo account Google finch non li rimuovi da Google Calendar."],title:"13) Durata, sospensione e cessazione"},thirdParties:{paragraphs:["La Piattaforma integra Servizi di Terze Parti (es. canali Meta, Google Calendar, provider AI, Stripe, hosting). Luso di tali servizi  soggetto ai rispettivi termini e policy.","Non siamo responsabili per interruzioni, restrizioni o modifiche imposte dai Servizi di Terze Parti, incluse revoche di accesso API o cambi policy."],title:"9) Servizi di Terze Parti"},warranty:{paragraphs:["La Piattaforma  fornita cos com e come disponibile, nei limiti massimi consentiti dalla legge. Escludiamo ogni garanzia espressa o implicita.","Non garantiamo che la Piattaforma sia ininterrotta o priva di errori, n che gli output AI siano sempre accurati."],title:"13) Esclusioni di garanzia"}}},TZ={backToLogin:"Ora puoi tornare al",genericError:"Verifica fallita.",invalidOrExpired:"Token non valido o scaduto.",loading:"Stiamo verificando la tua email...",loginLink:"login",missingToken:"Token di verifica mancante.",successDefault:"Email verificata con successo!",title:"Verifica email"},IZ={actions:{create:"Crea modello",edit:"Modifica",update:"Aggiorna modello"},buttons:{phone:"Numero di telefono",quickReply:"Risposta rapida",remove:"Rimuovi",textPlaceholder:"Etichetta pulsante",url:"URL"},category:{authentication:"Autenticazione",marketing:"Marketing",utility:"Utilit"},columns:{name:"Modello",status:"Stato",updated:"Ultimo aggiornamento"},empty:"Nessun modello WhatsApp trovato per questo bot.",emptyCta:"Crea il tuo primo modello",facebookNotConnectedBody:"Le Lead Ads da Facebook non verranno ricevute finch non colleghi una pagina Facebook nella pagina Canali.",filters:{category:"Categoria",categoryAll:"Tutte",search:"Cerca",searchPlaceholder:"Cerca per nome o lingua",status:"Stato",statusAll:"Tutti",statusApproved:"Approvati",statusPending:"In revisione",statusRejected:"Rifiutati"},form:{addButton:"Aggiungi pulsante",body:"Corpo",bodyHelp:"Mantieni il testo chiaro e conciso. Le variabili verranno compilate al momento dellinvio.",bodyPlaceholder:"Testo principale del messaggio. Usa {{1}}, {{2}},  per le variabili.",buttons:"Pulsanti",buttonsHelp:"Pulsanti opzionali di risposta rapida, URL o telefono.",category:"Categoria",footer:"Footer (opzionale)",footerPlaceholder:"Riga piccola sotto il messaggio (es. note legali o brand).",header:"Header (opzionale)",headerHelp:"Fino a 60 caratteri. Puoi usare variabili come {{1}}.",headerPlaceholder:"Breve titolo mostrato sopra il corpo",language:"Lingua",languageHelp:"Usa i codici lingua WhatsApp come en_US, it_IT, es_ES",name:"Nome modello",nameHelp:"Solo lettere minuscole, numeri e underscore. Non  visibile agli utenti finali.",namePlaceholder:"es. order_update"},history:{title:"Cronologia modelli"},leadAutomation:{consentField:"Nome campo consenso (opzionale)",consentFieldHelp:"Nome del campo s/no utilizzato per il consenso WhatsApp.",errors:{missingConsentField:"Se richiedi opt-in esplicito devi indicare il nome del campo di consenso.",missingPhoneField:"Specifica il nome del campo telefono nei tuoi moduli lead.",missingTemplate:"Seleziona un template WhatsApp approvato."},loading:"Caricamento impostazioni di automazione",phoneField:"Nome campo telefono",phoneFieldHelp:"Nome del campo del form che contiene il numero di telefono nel payload del lead.",requireOptIn:"Richiedi opt-in esplicito WhatsApp",save:"Salva automazione",saveError:"Impossibile salvare le impostazioni di automazione dei lead.",saveSuccess:"Impostazioni di automazione dei lead salvate.",template:"Modello da inviare",templateHelp:"Modello utilizzato per i nuovi lead da Meta. Sono disponibili solo i modelli approvati.",templatePlaceholder:"Seleziona un modello approvato",title:"Automazione Lead Ads  WhatsApp"},leadFeatureGoToFeatures:"Vai a Funzionalit",leadFeatureNotEnabledBody:"Per configurare lautomazione Lead Ads  WhatsApp, abilita prima il componente aggiuntivo Lead Ads nella pagina Funzionalit di questo bot.",leadFeatureNotEnabledTitle:"Funzionalit Lead Ads non abilitata",leads:{createdAt:"Ricevuto il",empty:"Nessun lead ricevuto.",loading:"Caricamento lead",messageSent:"Messaggio inviato",phone:"Telefono",refresh:"Aggiorna",refreshError:"Impossibile aggiornare i lead.",requireFacebook:"Collega una pagina Facebook nella pagina Canali per iniziare a ricevere lead.",status:"Stato",title:"Lead recenti"},loadingTemplates:"Caricamento modelli",messages:{created:"Modello creato.",saveFailed:"Impossibile salvare il modello.",updated:"Modello aggiornato."},modal:{createTitle:"Nuovo modello WhatsApp",editTitle:"Modifica modello WhatsApp"},notConnectedBody:"Puoi configurare le Lead Ads e vedere i lead in arrivo, ma per inviare i modelli WhatsApp devi collegare un numero WhatsApp Business nella pagina Canali.",onboarding:{autoSaveHint:"Le impostazioni e i template verranno salvati quando clicchi Rivedi piano e paga.",automationHint:"Quando arriva un nuovo lead da Meta, Coslo invier un template WhatsApp e, se vuoi, controller il consenso esplicito.",common:{skip:"Salta per ora"},disabledHint:"Puoi lasciare l'automazione Lead Ads disattivata e completare comunque l'onboarding. Potrai tornare qui dall'app e attivarla in seguito.",errors:{channelsNotReady:"Per abilitare questa automazione devi collegare sia Facebook che WhatsApp nel passo Canali.",save:"Impossibile salvare la configurazione Lead Ads."},next:"Rivedi piano e paga",previewLabel:"Template selezionato:",requirementsTitle:"Stato connessione",subtitle:"Scegli o crea un template WhatsApp e mappa i campi dei tuoi moduli Lead Ads.",title:"Collega Facebook Lead Ads e automazione WhatsApp",toggleDisabledHint:"Collega entrambi i canali per attivare questa automazione.",toggleOff:"Automazione Lead Ads DISATTIVA",toggleOn:"Automazione Lead Ads ATTIVA",toggleOnHint:"I nuovi lead dai tuoi moduli Facebook riceveranno automaticamente un messaggio WhatsApp usando il template qui sotto.",warningFacebook:"Collega una pagina Facebook nel passo Canali cos Coslo pu leggere i nuovi lead.",warningTitle:"Collega i canali per attivare l'automazione",warningWhatsapp:"Collega un numero WhatsApp Business nel passo Canali per inviare i messaggi."},status:{facebookNotConnected:"Non collegato",facebookStatus:"Stato Facebook",notConnected:"Non collegato",whatsappStatus:"Stato WhatsApp"},subtitle:"Automazione Lead Ads  WhatsApp per {{name}}",templates:{requireWhatsapp:"Collega un numero WhatsApp nella pagina Canali per sincronizzare e gestire i modelli."},title:"Modelli di messaggi WhatsApp",titleFallback:"Modelli WhatsApp"},OZ={appLayout:rZ,auth:oZ,billing:lZ,botChannels:cZ,botConversations:dZ,botCreate:uZ,botDetails:pZ,botFeatures:mZ,botKnowledge:hZ,botPlan:fZ,botSettings:gZ,botsList:vZ,common:bZ,conversationDetail:yZ,dashboard:xZ,demoBot:wZ,forgotPassword:jZ,landing:SZ,login:NZ,onboardingLayout:CZ,policy:kZ,profile:PZ,register:AZ,terms:EZ,verifyEmail:TZ,whatsappTemplates:IZ},LZ={aria:{closeNav:"Cerrar navegacin",openNav:"Abrir navegacin"},brandSmall:"Coslo - Asistente de IA",logout:"Cerrar sesin",nav:{billing:"Facturacin",bots:"Bots",dashboard:"Panel",profile:"Perfil"},sidebarTitle:"Panel"},MZ={legalNotice:{and:"y la",p1:"Al continuar, aceptas los",privacy:"Poltica de Privacidad y Datos",terms:"Trminos y Condiciones"}},DZ={activeSubscriptions:"Suscripciones activas",breakdown:{features:"Funciones",plan:"Plan"},cancel:{confirm:"?Cancelar esta suscripci?n al final del per?odo de facturaci?n actual?",cta:"Cancelar suscripci?n",error:"No se pudo cancelar la suscripci?n.",processing:"Cancelando?",scheduled:"Cancelaci?n programada",success:"Cancelaci?n programada. Tu plan seguir? activo hasta el final del per?odo de facturaci?n actual.",successWithDate:"Cancelaci?n programada. Tu plan seguir? activo hasta {{date}}.",until:"hasta"},errors:{invoiceDownloadFailed:"No se ha podido descargar la factura.",invoiceUnavailable:"La factura no est disponible para este pago.",loadFailed:"No se ha podido cargar el resumen de facturacin"},invoice:{ariaDownload:"Descargar factura",ariaOpening:"Abriendo factura",srDownload:"Descargar factura",srOpening:"Abriendo factura",titleDownload:"Descargar factura",titleOpening:"Abriendo"},loading:"Cargando datos de facturacin...",noActiveSubscriptions:"Todava no tienes suscripciones activas.",noConfiguredLimit:"(sin lmite configurado)",of:"de",paymentHistory:{empty:"An no hay pagos registrados.",table:{amount:"Importe",bot:"Bot",date:"Fecha",period:"Periodo",status:"Estado"},title:"Historial de pagos"},perMonth:"mes",slugLabel:"Slug",subscriptionStatus:{active:"Activo",canceled:"Cancelado",incomplete:"Incompleto",incompleteExpired:"Incompleto (caducado)",pastDue:"Vencido",trial:"Prueba",unpaid:"Impagado"},subtitle:"Consulta tus suscripciones activas, el uso de este mes y el historial de pagos.",thisMonth:"Este mes:",title:"Facturacin y uso",tokens:"energa",totalMonthlyAcrossAllBots:"Total mensual en todos los bots:",usageStatus:{atLimit:"En el lmite",healthyUsage:"Uso saludable",highUsage:"Uso alto",overLimit:"Por encima del lmite"},usageThisMonth:"Uso este mes:"},FZ={actions:{addChannel:"Aadir canal",cancel:"Cancelar",connectFacebook:"Conectar Facebook",connectInstagram:"Conectar Instagram",connectSelected:"Conectar seleccionado",connectWhatsapp:"Conectar WhatsApp",connecting:"Conectando...",connectingWhatsapp:"Conectando WhatsApp...",create:"Crear",disconnect:"Desconectar",edit:"Editar",reconnectFacebook:"Reconectar Facebook",reconnectInstagram:"Reconectar Instagram",reconnectWhatsapp:"Reconectar WhatsApp",save:"Guardar"},backToBot:" Volver al resumen",confirm:{deleteChannel:"Eliminar este canal?"},connectSocial:{connectedAccount:"Cuenta business vinculada",connectedNumber:"Nmero conectado",connectedPage:"Pgina conectada",facebookDesc:"Conecta una Pgina de Facebook para que tu bot pueda responder por Messenger.",instagramDesc:"Conecta una cuenta de Instagram Business para responder a los DMs.",subtitle:"Usa el login de Meta para conectar tu Pgina de Facebook, cuenta de Instagram Business o nmero de WhatsApp Business. Guardaremos los tokens necesarios de forma segura.",title:"Conectar canales sociales",whatsappDesc:"Conecta un nmero de WhatsApp Business con embedded signup."},connected:{empty:"An no hay canales conectados.",subtitle:"Revisa y gestiona todos los canales vinculados a este bot.",title:"Canales conectados"},create:{metaWarning:"Los canales de Facebook/Instagram deben conectarse usando los botones de Meta de arriba.",title:"Aadir canal"},edit:{title:"Editar canal"},errors:{createFailed:"No se ha podido crear el canal",deleteFailed:"No se ha podido eliminar el canal",facebookConnectFailed:"No se ha podido iniciar la conexin con Facebook",instagramConnectFailed:"No se ha podido iniciar la conexin con Instagram",loadFailed:"No se han podido cargar los canales",metaAttachFailed:"No se ha podido vincular la pgina de Meta",metaManagedExternally:"Los canales de Facebook e Instagram se gestionan a travs de Meta. Para actualizarlos, desconecta y vuelve a conectar usando los botones de arriba.",metaMustUseConnect:"Los canales de Facebook/Instagram deben conectarse usando los botones de Meta de arriba.",metaSessionLoad:"No se ha podido cargar la sesin de Meta",updateFailed:"No se ha podido actualizar el canal",whatsappAttachFailed:"No se ha podido vincular el nmero de WhatsApp",whatsappCancelled:"El registro de WhatsApp se cancel o no se complet.",whatsappEnvMissing:"WhatsApp no est configurado. Configura VITE_META_APP_ID y VITE_WHATSAPP_EMBEDDED_CONFIG_ID.",whatsappInitFailed:"No se ha podido inicializar el registro de WhatsApp",whatsappSignupFailed:"No se ha podido completar el embedded signup de WhatsApp"},fields:{accessToken:"Access token",externalId:"External ID",metaJson:"Meta (JSON)",type:"Tipo"},generic:{externalId:"External ID: {{id}}"},labels:{facebookPage:"Pgina de Facebook",instagramBusiness:"Perfil de Instagram Business",webWidget:"Widget web",whatsapp:"WhatsApp",whatsappBusiness:"WhatsApp Business"},loading:"Cargando canales...",meta:{connectedViaMeta:"Conectado mediante Meta",instagramEligiblePagesLabel:"Pgina con cuenta de Instagram Business",instagramHint:"Solo las pginas con una cuenta de Instagram Business vinculada pueden usarse para Instagram.",loadingPages:"Cargando pginas de Meta...",permissionsDialog:{checkboxLabel:"Entiendo y acepto conceder estos permisos.",continueFacebook:"Continuar con Facebook",continueInstagram:"Continuar con Instagram",facebook:{businessManagement:"Acceder a los activos de Facebook (Pginas y cuentas de Instagram) que administras en Meta Business Manager para poder conectarlos a este bot.",pagesManageMetadata:"Gestionar la configuracin de mensajera y los webhooks de la Pgina para recibir los mensajes nuevos en tiempo real.",pagesMessaging:"Leer y enviar mensajes en la Pgina conectada para que tu bot pueda responder por Messenger.",pagesShowList:"Ver la lista de Pginas de Facebook que administras para que puedas elegir cul conectar."},footerNote:"Puedes revocar estos permisos en cualquier momento desde la configuracin de tus cuentas de Facebook e Instagram.",instagram:{businessManagement:"Acceder a los activos de Facebook (Pginas y cuentas de Instagram) que administras en Meta Business Manager para poder conectarlos a este bot.",instagramBasic:"Leer la informacin bsica del perfil (nombre, usuario e imagen de perfil) de tu cuenta de Instagram Business para mostrarla en el panel.",instagramManageMessages:"Leer y enviar mensajes directos de Instagram para que tu bot pueda responder a los DMs.",pagesManageMetadata:"Gestionar la configuracin de mensajera y los webhooks para recibir los mensajes nuevos de Instagram en tiempo real.",pagesShowList:"Ver las Pginas de Facebook vinculadas a tu cuenta de Instagram Business para que puedas elegir cul conectar."},introFacebook:"Antes de continuar con Facebook, revisa los permisos que esta aplicacin recibir de Meta.",introInstagram:"Antes de continuar con Instagram, revisa los permisos que esta aplicacin recibir de Meta.",listTitle:"Podremos:",titleFacebook:"Revisa los accesos para Facebook",titleInstagram:"Revisa los accesos para Instagram"},selectModal:{businessGroupTitle:"Pginas gestionadas por empresa",editPreviousSettingsHint:'Si esperabas ver pginas de Instagram aqu, cuando se abra la ventana de Facebook haz clic en "Editar configuracin anterior" y asegrate de seleccionar tanto la pgina de Facebook como la cuenta de Instagram conectada.',introFacebook:"Hemos recuperado desde Meta las Pginas de Facebook que puedes administrar. Elige una para conectarla a este bot.",introInstagram:"Hemos recuperado desde Meta las Pginas de Facebook vinculadas a tus cuentas de Instagram Business. Elige una para conectarla.",noPages:"No se han encontrado pginas aptas para esta conexin.",personalGroupTitle:"Pginas personales",titleFacebook:"Selecciona una Pgina de Facebook",titleInstagram:"Selecciona una pgina para Instagram"},selectPlaceholder:"Selecciona una pgina...",selectSubtitle:"Hemos recuperado las pginas que administras en Meta. Elige cul vincular a este bot.",selectTitle:"Selecciona {{channel}}",sessionLoadFailed:"No se ha podido cargar la sesin de Meta"},missingId:"Falta el ID del bot.",onboarding:{channels:{meta:{disabledBody:"La bandeja Meta est desactivada para este bot. Actvala arriba si quieres conectar Facebook o Instagram.",subtitle:"Conecta tu pgina de Facebook y cuenta de Instagram Business para que Coslo pueda responder a los mensajes automticamente.",title:"Bandeja Meta (Facebook e Instagram)",toggleOff:"Bandeja Meta DESACTIVADA",toggleOffHint:"Deja la bandeja Meta desactivada si no quieres que Coslo responda en Facebook o Instagram para este bot.",toggleOn:"Bandeja Meta ACTIVADA"},next:"Continuar a reservas",subtitle:"Conecta al menos un canal ahora. Siempre podrs aadir ms desde el panel.",title:"Dnde debera hablar Coslo con tus clientes?",whatsapp:{disabledBody:"WhatsApp est desactivado para este bot. Actvalo arriba si quieres conectar un nmero.",subtitle:"Conecta un nmero de WhatsApp Business usando el flujo oficial de embedded signup de Meta.",title:"WhatsApp Business (embedded signup)",toggleOff:"WhatsApp DESACTIVADO",toggleOffHint:"Deja WhatsApp desactivado si no quieres que Coslo enve mensajes por WhatsApp para este bot.",toggleOn:"WhatsApp ACTIVADO"}},common:{skip:"Saltar por ahora"}},placeholders:{metaJson:`{
  "example": true
}`},status:{active:"Activo",connected:"Conectado",connectedUnknownExpiry:"Conectado (caducidad desconocida)",expired:"Caducado",expiringSoon:"Caduca pronto",needsReconnect:"Requiere reconexin",notConnected:"No conectado"},subtitle:"Conecta tu bot a web, WhatsApp, Pginas de Facebook y perfiles de Instagram Business.",table:{details:"Detalles",status:"Estado",type:"Tipo"},title:"Canales",web:{defaultWidget:"Widget web por defecto",externalId:"External ID: {{id}}"},whatsapp:{confirmReconnectWithinWeek:"Has conectado WhatsApp hace poco. Quieres iniciar igualmente un nuevo flujo de registro integrado?",number:"Nmero: {{number}}",numberId:"ID de nmero: {{id}}",numberLabel:"Nmero de WhatsApp",pinLabel:"PIN de verificacin en dos pasos de WhatsApp",pinModal:{intro:"Selecciona el nmero de WhatsApp Business que quieres conectar e introduce el PIN de verificacin en dos pasos para ese nmero.",pinHint:"Introduce exactamente el mismo PIN de 6 dgitos que ves en Verificacin en dos pasos para este nmero en WhatsApp Manager.",step1:"Abre WhatsApp Manager y ve a Herramientas de la cuenta  Nmeros de telfono.",step2:"Haz clic en el icono de engranaje junto a tu nmero de telfono y abre Verificacin en dos pasos.",step3:"Si no recuerdas el PIN, desactiva all la verificacin en dos pasos (recibirs un correo), luego configura un nuevo PIN de 6 dgitos.",step4:"Vuelve aqu e introduce exactamente ese PIN de 6 dgitos.",title:"Conectar WhatsApp Business",whatIsPin:"Este PIN es el cdigo de 6 dgitos de verificacin en dos pasos configurado para este nmero en WhatsApp Manager, no tu cdigo de Google Authenticator ni el 2FA de inicio de sesin."},pinPlaceholder:"PIN de 6 dgitos configurado en WhatsApp Manager",selectNumberSubtitle:"Hemos recuperado los nmeros de tu cuenta de WhatsApp Business. Elige cul vincular a este bot.",selectNumberTitle:"Selecciona nmero de WhatsApp",selectPlaceholder:"Selecciona un nmero..."}},zZ={actions:{evaluate:"Evaluar",evaluateSelected:"Evaluar seleccionadas",evaluateSelectedCount:"Evaluar seleccionadas ({{count}})",evaluating:"Evaluando...",evaluatingSelected:"Evaluando seleccionadas...",reevaluate:"Reevaluar",view:"Ver"},backToBot:" Volver al resumen",empty:"Todava no hay conversaciones.",errors:{bulkEvalFailed:"No se han podido evaluar en bloque las conversaciones",evalFailed:"No se ha podido evaluar la conversacin",loadFailed:"No se han podido cargar las conversaciones",someFailed:"Algunas conversaciones no se han podido evaluar (p. ej. demasiado cortas u otros errores)."},loading:"Cargando conversaciones...",missingId:"Falta el ID del bot.",notEvaluated:"No evaluada",pagination:{next:"Siguiente",pageOf:"Pgina {{page}} de {{totalPages}}",prev:"Anterior",total:"Total de conversaciones: {{total}}"},subtitle:"Todas las conversaciones en web, WhatsApp, Facebook Messenger e Instagram.",table:{channel:"Canal",externalUser:"Usuario externo",lastMessage:"ltimo mensaje",score:"Puntuacin",selectAll:"Seleccionar todas las conversaciones de esta pgina",selectRow:"Seleccionar conversacin"},title:"Conversaciones"},RZ={actions:{create:"Crear bot",creating:"Creando..."},errors:{createFailed:"No se ha podido crear el bot"},fields:{description:"Descripcin (opcional)",name:"Nombre",slug:"Slug",slugHelp:"Se usa en URLs de demo, widget y routing interno."},onboarding:{descriptionPlaceholder:"Opcional. Una frase corta sobre lo que hace este bot.",intro:"Esta informacin se usa en el panel y en tus herramientas internas, no en el widget pblico.",namePlaceholder:"p. ej. Acme Support Assistant",slugPlaceholder:"p. ej. acme-support",subtitle:"Ponle un nombre a tu asistente y una breve descripcin. Podrs cambiarlo ms adelante.",title:"Crea tu primer bot de Coslo"},subtitle:"Paso 1: elige un nombre y un slug. Podrs configurar canales, conocimiento, reservas y facturacin despus.",title:"Crear nuevo bot"},_Z={actions:{activatePay:"Activar y pagar",openDemo:"Abrir demo",saveBasics:"Guardar bsicos",saving:"Guardando...",viewPlanBilling:"Ver plan y facturacin"},basics:{autoEvalHelp:"Punta conversaciones en segundo plano para ayudarte a monitorizar la calidad. Usa energa del plan pero no afecta a los usuarios.",autoEvalLabel:"Evaluacin automtica de conversaciones",descriptionLabel:"Descripcin",descriptionPlaceholder:"Breve descripcin de lo que hace este bot...",subtitle:"Descripcin general y comportamiento principal de este asistente.",systemPromptHelp:"No se muestra a los usuarios finales. salo para definir tono, lmites y reglas especiales del bot.",systemPromptLabel:"System prompt (comportamiento avanzado)",systemPromptPlaceholder:"Instrucciones internas que la IA debe seguir siempre...",title:"Bsicos del bot"},billing:{manage:"Gestionar plan y facturacin",perMonth:"mes",title:"Facturacin actual",totalPerMonth:"Total por mes"},channels:{missing:{facebookPageId:"ID de pgina de Facebook",instagramBusinessId:"ID de Instagram Business",webDomain:"Dominio web",whatsappExternalId:"External ID de WhatsApp"},names:{instagram:"Instagram DM",messenger:"Facebook Messenger",web:"Web",whatsapp:"WhatsApp"}},errorTitle:"Error",errors:{loadBot:"No se ha podido cargar el bot",loadPricing:"No se ha podido cargar el precio del plan actual.",updateBot:"No se ha podido actualizar el bot"},health:{badges:{allChannelsConfigured:"Todos los canales activados configurados",configured:"Configurado",disabled:"Desactivado",enabledNotConfigured:"Activado, no configurado",enabledNotInitialized:"Activado, no inicializado",noChannelsEnabled:"Sin canales activados",shopifyChecking:"Comprobando conexin de Shopify...",shopifyConnected:"La tienda Shopify est conectada y lista.",shopifyNotConnected:"Shopify est seleccionado, pero no hay tienda conectada.",someChannelsNeedSetup:"Algunos canales requieren configuracin"},botStatus:{active:"Este bot est activo y listo para gestionar conversaciones.",draft:"Este bot an no est activo. Puedes activarlo desde el flujo de facturacin.",inactive:"Este bot no est activo. Revisa el plan y la facturacin o contacta con soporte si no lo esperabas."},botStatusTitle:"Estado del bot",calendar:{configured:"Las reservas usan Google Calendar ({{calendarId}}) en {{timeZone}}, con duracin por defecto de {{duration}} minutos.",disabled:"Las reservas con Google Calendar estn desactivadas. Puedes activarlas en Funciones y Plan.",enabledNotConfigured:"Las reservas estn activadas, pero faltan ID del calendario, zona horaria o duracin. Configralo en Funciones y Plan."},calendarTitle:"Estado del calendario",channels:{and:"y configralos en",enabledList:"Canales activados: {{channels}}. Todos tienen la configuracin requerida.",missingConfig:"A algunos canales activados les falta configuracin requerida: {{missing}}. Ve a",none:"An no hay canales activados. Actvalos en"},channelsTitle:"Estado de canales",eval:{automatic:"Automtica",automaticDesc:"Las nuevas conversaciones pueden puntuarse automticamente en segundo plano para ayudarte a monitorizar la calidad.",manual:"Solo manual",manualDesc:"Las conversaciones solo se evalan cuando las lanzas manualmente desde la seccin de Conversaciones."},evalTitle:"Evaluacin de conversaciones",knowledge:{configured:"La base de conocimiento est creada y puede usarse para responder.",disabled:"El rastreador de dominio / la ingesta de PDF estn desactivados para este bot.",enabledNotInitialized:"Las funciones de conocimiento estn activadas, pero todava no se ha inicializado la base de conocimiento con un rastreo/carga.",shopifyChecking:"Comprobando conexin de Shopify...",shopifyConnected:"La tienda Shopify est conectada y lista.",shopifyNotConnected:"Shopify est seleccionado, pero no hay tienda conectada.",source:{rag:{description:"Usa las paginas de tu web y documentos subidos como base de conocimiento del bot.",title:"Sitio web / docs (RAG)"},shopify:{description:"Responde con productos y variantes de tu tienda Shopify conectada.",title:"Catlogo de Shopify"}}},knowledgeTitle:"Estado de conocimiento",title:"Resumen de estado"},loading:"Cargando bot...",missingId:"Falta el ID del bot.",nav:{adsSettings:"Configuracin de Lead ADS",adsSettingsDesc:"Gestiona la configuracin de tus lead ads",channels:"Canales",channelsDesc:"Conecta WhatsApp, web, Facebook e Instagram.",conversations:"Conversaciones",conversationsDesc:"Revisa chats y depura el comportamiento del bot.",featuresPlan:"Funciones y Plan",featuresPlanDesc:"Activa canales, rastreadores y elige el plan de uso.",knowledge:"Contenido y Conocimiento",knowledgeDesc:"Sube documentos y configura cmo aprende el bot.",settings:"Configuracin de reservas",settingsDesc:"Gestiona la configuracin de tus reservas"},notFoundTitle:"Bot no encontrado",slugLabel:"Slug:",success:{basicsUpdated:"Bsicos del bot actualizados correctamente."},workspace:{subtitle:"Salta a las reas de configuracin y monitorizacin de este bot.",title:"rea del bot"}},BZ={actions:{backToBot:" Volver al resumen",cancelSubscription:"Cancelar suscripcin",cancelling:"Cancelando...",next:"Siguiente: elegir plan y pagar",save:"Guardar funciones",saving:"Guardando...",viewChangePlan:"Ver / cambiar plan"},backToBot:" Volver al resumen",calendar:{description:"Permite que el bot programe reuniones directamente en tu Google Calendar, con disponibilidad y zonas horarias gestionadas automticamente.",fields:{calendarId:"ID de Google Calendar",defaultDuration:"Duracin por defecto de la cita (minutos)",timeZone:"Zona horaria del negocio"},placeholders:{calendarId:"tu-calendar-id@group.calendar.google.com",timeZone:"Europe/Rome"},title:"Reservas con Google Calendar"},calendarIncomplete:"Las reservas por calendario estn activadas pero falta el ID del calendario o la zona horaria. Rellnalos abajo para que las reservas funcionen correctamente.",channels:{instagram:{description:"Responde automticamente a los mensajes directos de Instagram con tu bot.",title:"Instagram DM"},messenger:{description:"Responde preguntas directamente en tu pgina de Facebook a travs de Messenger.",title:"Facebook Messenger"},web:{description:"Incrusta un widget de chat en tu sitio y obtn un enlace de demo alojada para compartir con tus clientes.",title:"Widget web y demo alojada"},whatsapp:{description:"Conecta tu bot a WhatsApp para que los clientes puedan chatear desde cualquier lugar.",title:"WhatsApp"}},errorTitle:"Error",errors:{cancelSubscription:"No se ha podido cancelar la suscripcin",loadBot:"No se ha podido cargar el bot",loadPricing:"No se pueden cargar los precios ahora mismo.",saveFeatures:"No se han podido actualizar las funciones del bot",updateFeatures:"No se han podido actualizar las funciones del bot"},groups:{calendar:"Reservas y calendario",channels:"Canales",knowledge:"Funciones de conocimiento",leadAds:"Lead Ads"},knowledge:{domain:{description:"Escanea automticamente tu sitio para que el bot responda siempre con contenido actualizado.",title:"Rastreador de dominio (contenido web)"},pdf:{description:"Sube manuales, folletos o documentos y deja que el bot responda basndose en ellos.",title:"Ingesta de PDF / documentos"},source:{rag:{description:"Usa las paginas de tu web y documentos subidos como base de conocimiento del bot.",title:"Sitio web / docs (RAG)"},shopify:{description:"Responde con productos y variantes de tu tienda Shopify conectada.",title:"Catlogo de Shopify"}}},leadAds:{whatsapp:{description:"Enva automticamente un mensaje de WhatsApp a los nuevos leads de tus formularios de clientes potenciales de Meta.",requiresWhatsapp:"Esta funcin requiere que el canal de WhatsApp est activado.",selectTier:"Selecciona un paquete de mensajes de WhatsApp",title:"Lead Ads  WhatsApp"}},loadingBot:"Cargando bot...",missingId:"Falta el ID del bot.",notFoundTitle:"Bot no encontrado",perMonth:"mes",side:{featuresSubtotal:"Subtotal de funciones",featuresTotalPerMonth:"Total de funciones (al mes)",loadingPricing:"Cargando precios",nextNote:"Sers redirigido a Stripe para confirmar tu suscripcin.",statusLabel:"Estado:",subtitle:"Paso 2  elige un plan de uso y confirma el pago. Precio total = subtotal de funciones + plan de uso.",title:"Plan y facturacin"},subtitle:"Paso 1  configura canales, rastreadores y reservas para {{botName}}. Estas opciones influyen en el precio de tu suscripcin.",success:{featuresUpdated:"Funciones actualizadas.",saved:"Funciones actualizadas.",subscriptionCanceled:"Suscripcin cancelada y bot desactivado."},title:"Funciones"},$Z={actions:{crawlNow:"Hacer crawl del dominio",crawling:"Haciendo crawl...",estimateTokens:"Estimar energa",estimating:"Estimando...",saveKnowledgeSettings:"Guardar ajustes de conocimiento",uploading:"Subiendo e ingiriendo documentos"},backToBot:" Volver al resumen",chunks:{backToHistory:"Volver al historial",chunkLabel:"Fragmento #{{index}}",confirm:{delete:"Eliminar permanentemente este fragmento?"},delete:"Eliminar",deleting:"Eliminando...",empty:"No se encontraron fragmentos para este job.",errors:{deleteFailed:"No se pudo eliminar el fragmento",loadFailed:"No se pudieron cargar los fragmentos del job",saveFailed:"No se pudo guardar el fragmento"},finishedLabel:"Fin",jobIdLabel:"ID del job",jobSubtitle:"Fuente: {{origin}}",jobTitle:"Detalles del job",loading:"Cargando fragmentos...",missingId:"Falta el ID del bot o del job.",save:"Guardar",saving:"Guardando...",sourceLabel:"URL de origen",startedLabel:"Inicio",subtitle:"Edita y elimina fragmentos para {{botName}}.",success:{deleted:"Fragmento {{chunkId}} eliminado.",saved:"Fragmento {{chunkId}} actualizado."},title:"Fragmentos del job"},confirm:{crawlEstimate:`Costo estimado en energia: ~{{tokens}} energia.
Restante este mes: {{remaining}} energia.

Iniciar el rastreo ahora?`,crawlEstimateNoLimit:`Costo estimado en energia: ~{{tokens}} energia.

Iniciar el rastreo ahora?`,deactivateJob:"Desactivar todos los fragmentos de este job?",uploadDocsEstimate:`Costo estimado en energa: ~{{tokens}} energa.

Quieres subir e indexar estos documentos ahora?`},docsCard:{description:"Sube PDFs y otros documentos para enriquecer el conocimiento del bot con manuales, FAQs o fichas de producto.",disabledNote:"La ingestin de PDF est deshabilitada para este bot. Habiltala en",supportedFormats:"Formatos compatibles: PDF, DOC, DOCX, TXT.",title:"Documentos y PDFs",uploadLabel:"Sube uno o ms archivos"},domainCard:{description:"Configura el sitio a rastrear y ajusta cmo debe usarlo el bot en las respuestas.",disabledNote:"El crawler de dominio est deshabilitado para este bot. Habiltalo en",domainNote:"Este dominio se usa para el crawl del sitio y como contexto para la bsqueda de conocimiento.",title:"Conocimiento del dominio"},errors:{crawlFailed:"No se pudo hacer crawl del dominio",crawlLimitExceeded:"Este rastreo superaria el limite mensual ({{required}} necesarios, {{remaining}} restantes).",deactivateFailed:"No se pudieron desactivar los fragmentos del job.",domainCrawlerDisabled:"La funcin de crawler de dominio est deshabilitada para este bot.",domainRequired:"Establece un dominio antes de hacer crawl.",estimateFailed:"No se pudo estimar el costo del rastreo.",loadBot:"No se pudo cargar el bot",mustBeActiveToCrawl:"Este bot an no est activo. Actvalo antes de hacer crawl de contenido.",mustBeActiveToUpload:"Este bot an no est activo. Actvalo antes de subir documentos.",pdfUploadDisabled:"La funcin de subida de PDF est deshabilitada para este bot.",updateSettings:"No se pudieron actualizar los ajustes",uploadFailed:"No se pudieron subir los documentos"},estimate:{crawlCostLabel:"Costo estimado del rastreo:",sampledPages:"(basado en {{count}} pgina(s) de muestra)",tokensUnit:"energa"},feature:{disabled:"Funcin deshabilitada",enabled:"Funcin habilitada"},featuresAndPlan:"Funciones y Plan",fields:{domain:"Dominio",systemPrompt:"System prompt (uso del conocimiento)"},history:{autoRefreshNote:"La actualizacin automtica solo actualiza las filas en ejecucin de esta pgina (cada {{seconds}}s).",deactivate:"Desactivar",deactivating:"Desactivando...",empty:{noClient:"An no hay cliente de knowledge. Inicia un rastreo o sube un documento para inicializar.",noRuns:"An no hay ejecuciones."},footer:"Mostrando {{shown}} de {{total}}  pgina {{page}} / {{totalPages}} ({{pageSize}} por pgina)",jobType:{docs:"DOCUMENTO",domain:"DOMINIO"},loadingRows:"Cargando...",next:"Sig",pagesStored:"{{count}} pginas",prev:"Ant",refreshPage:"Actualizar pgina",refreshRow:"Actualizar",refreshingPage:"Actualizando...",refreshingRow:"Actualizando",status:{completed:"completado",deactivated:"desactivado",failed:"fallido",queued:"en cola",running:"en ejecucin"},storedUnder:"Guardado bajo: {{namespace}}",table:{actions:"Acciones",chunks:"Chunks",finished:"Fin",origin:"Origen",pages:"Pginas",started:"Inicio",status:"Estado",tokens:"Energa",type:"Tipo"},title:"Historial de rastreos",tokenUsageNote:"Nota: el uso de energa es aproximado, calculado a partir de eventos de uso dentro de la ventana temporal del rastreo.",uploadInProgress:"Subida en curso",uploadedDocument:"Documento subido"},loadingBot:"Cargando bot...",lockedBody:"Este bot est actualmente {{status}}. Actvalo en",missingBody:"An no se ha creado una base de conocimiento. Haz crawl del dominio o sube PDFs para dar contexto real al bot.",missingId:"Falta el ID del bot.",modal:{cancel:"Cancelar",confirm:"Confirmar",crawlBody:"Este rastreo indexar tu sitio y consumir energa segn la estimacin total.",crawlTitle:"Confirmar rastreo",docsBody:"Estos documentos se incorporarn a tu base de conocimiento usando la energa estimada abajo.",docsTitle:"Confirmar subida de documentos",estimatedTokens:"Energa estimada",remainingTokens:"Restante este mes"},notFound:"Bot no encontrado",onboarding:{btnIndexing:"Indexando sitio web",btnReindex:"Reindexar sitio web",btnStartIndexing:"Iniciar indexacin",dashboardHint:"Desbloquearemos el botn del panel justo despus de que termine la primera indexacin.",dashboardHintShopify:"Conecta tu tienda Shopify para desbloquear el panel.",domainHint:"Solo usamos pginas pblicas y siempre respetamos tu robots.txt.",domainLabel:"Dominio del sitio web",domainPlaceholder:"https://tu-sitio.com",errors:{crawlFailed:"No hemos podido iniciar el rastreo. Revisa el dominio e intntalo de nuevo.",loadBot:"No se puede cargar este bot en este momento.",saveDomain:"No se puede guardar este dominio.",saveSource:"No se pudo guardar la fuente de conocimiento.",shopifySelected:"Shopify esta seleccionado. Cambia a conocimiento web para rastrear un dominio."},goToDashboard:"Ir al panel",heroBody:"Rastrearemos tu dominio principal para extraer FAQs, artculos de ayuda y pginas clave, para que el asistente se sienta como parte real de tu equipo.",heroBodyShopify:"Conecta tu tienda Shopify para que Coslo responda con tu catalogo en vivo.",heroTitle:"Ensea tu sitio a Coslo con un solo clic",openShopify:"Abrir ajustes de Shopify",saveDomain:"Guardar dominio",savingDomain:"Guardando",shopifyHint:"Se eligio Shopify. Conecta tu tienda en la pestana Shopify.",source:{label:"Fuente de conocimiento",rag:"Sitio web / docs (RAG)",saving:"Guardando...",shopify:"Catlogo de Shopify"},status:{completed:"Conocimiento listo. Coslo ahora entiende tu sitio web.",deactivated:"desactivado",failed:"El rastreo ha fallado. Revisa el dominio e intntalo de nuevo.",pollError:"Tenemos problemas para actualizar el estado, pero el rastreo sigue en ejecucin.",readyExisting:"Tu contenido ya est indexado. Puedes volver a indexar cuando quieras para mantener a Coslo al da.",running:"Indexacin en curso. Ya puedes usar tu bot mientras terminamos el rastreo."},statusPill:{completed:"Conocimiento listo",deactivated:"desactivado",failed:"Rastreo fallido",idle:"An no iniciado",running:"Indexacin en curso",shopifyChecking:"Comprobando conexin de Shopify",shopifyConnected:"Shopify conectado",shopifyNotConnected:"Shopify no conectado"},step1:{text:"Aade el sitio principal que usan tus clientes.",title:"Conecta tu dominio"},step2:{text:"Seguimos los enlaces, extraemos el contenido y lo limpiamos.",title:"Coslo rastrea tus pginas"},step3:{text:"Usa Coslo en cualquier canal, respaldado por el contenido de tu sitio.",title:"Tu bot responde como un profesional"},subtitle:"Conecta tu sitio web para que Coslo pueda rastrearlo y responder con informacin detallada y actualizada.",subtitleShopify:"Conecta tu tienda Shopify para que Coslo use tu catlogo.",title:"Estamos preparando el conocimiento de tu bot"},placeholders:{domain:"https://example.com",systemPrompt:"Explica cmo debe usar el bot el conocimiento del sitio/documentos en sus respuestas..."},shopifyOnly:{body:"Este bot usa Shopify como fuente de conocimiento. Gestiona la conexion y el catalogo en",featuresLink:"Funciones",shopifyLink:"Configuracion de Shopify",title:"Conocimiento de Shopify activo"},status:{knowledgeStatus:"Estado del conocimiento",locked:"Bloqueado",missing:"Falta"},subtitle:"Configura dominio, prompt y lanza crawls o ingestin de documentos para {{botName}}.",success:{deactivateJob:"Se desactivaron {{count}} fragmentos para el job {{jobId}}.",domainCrawlStarted:"Crawl iniciado/completado para {{domain}}. La base de conocimiento se actualizar pronto.",settingsUpdated:"Ajustes de conocimiento actualizados.",uploadedDocs:"Se subieron e ingirieron {{count}} documento(s): {{files}}"},title:"Contenido y Conocimiento"},UZ={actions:{activatePay:"Activar y pagar",changePlan:"Cambiar plan",redirecting:"Redirigiendo...",updating:"Actualizando..."},backToFeatures:" Volver a funciones",energyInfo:{estimates:'Los valores "Hasta" que ves en cada plan son estimaciones mximas si gastaras toda tu Energa en un nico tipo de tarea. El uso real vara segn la longitud de los mensajes, el tamao de los documentos y el contexto.',main:"Casi todas las acciones de la plataforma consumen Energa (mensajes del asistente, recuperacin de documentos, herramientas, ingestin). Los mensajes plantilla de WhatsApp (outbound) tienen su propio lmite y no consumen Energa.",title:"Cmo funcionan la Energa y los lmites",tooltip:"La Energa es un crdito unificado que cubre mensajes del asistente, recuperacin de documentos e ingestin. Los mensajes plantilla de WhatsApp tienen un lmite separado."},errorTitle:"Error",errors:{loadFailed:"No se han podido cargar los datos del plan",selectPlan:"Selecciona un plan.",updateFailed:"No se ha podido actualizar el plan"},features:{default:{energy:"{{amount}} Energa al mes"},free:{emails:"Hasta 20 correos electrnicos",energy:"{{amount}} Energa al mes",messages:"Hasta 150 mensajes del asistente de IA (estimacin)",pages:"Hasta 100 pginas ingeridas (estimacin)",whatsappTemplates:"Hasta 0 mensajes plantilla de WhatsApp (outbound)"},growth:{emails:"Hasta 5.000 correos electrnicos",energy:"{{amount}} Energa al mes",messages:"Hasta 20.000 mensajes del asistente de IA (estimacin)",pages:"Hasta 10.000 pginas ingeridas (estimacin)",whatsappTemplates:"Hasta 1.000 mensajes plantilla de WhatsApp (outbound)"},scale:{emails:"Hasta 20.000 correos electrnicos",energy:"{{amount}} Energa al mes",messages:"Hasta 85.000 mensajes del asistente de IA (estimacin)",pages:"Hasta 50.000 pginas ingeridas (estimacin)",whatsappTemplates:"Hasta 5.000 mensajes plantilla de WhatsApp (outbound)"},starter:{emails:"Hasta 1.000 correos electrnicos",energy:"{{amount}} Energa al mes",messages:"Hasta 3.500 mensajes del asistente de IA (estimacin)",pages:"Hasta 2.000 pginas ingeridas (estimacin)",whatsappTemplates:"Hasta 200 mensajes plantilla de WhatsApp (outbound)"}},loading:"Cargando opciones de plan...",missingId:"Falta el ID del bot.",notFoundTitle:"Bot no encontrado",notes:{proration:"Tu suscripcin se actualizar inmediatamente. Stripe aplicar cargos/crditos prorrateados.",redirectToStripe:"Sers redirigido a Stripe para confirmar y pagar este bot."},onboarding:{edit:"Editar",subtitle:"Ya hemos preconfigurado canales, reservas y Lead Ads. Ahora elige el plan que mejor encaje con tu volumen.",summary:{booking:"Reservas",channels:"Canales",disabled:"Desactivado",enabled:"Activado",leadAds:"Lead Ads  WhatsApp",none:"Ningn canal configurado"},summarySubtitle:"Esto es lo que has configurado hasta ahora para este bot.",summaryTitle:"Resumen de configuracin",title:"Elige tu plan y empieza a usar Coslo"},perMonth:"mes",plans:{empty:"An no hay planes de uso configurados. Contacta con soporte.",loading:"Cargando planes",mostPopular:"Ms popular",planImageAlt:"Plan {{planName}}",select:"Seleccionar este plan",selected:"Seleccionado",subtitle:"Elige cunto uso esperas. Puedes cambiar de plan ms tarde.",title:"Planes de uso",tokensPerMonth:"Energa por mes:",tokensPerMonthLabel:"Energa por mes",unlimited:"Ilimitado"},subtitle:"Paso 2  elige un plan de uso para {{botName}}. Precio final = subtotal de funciones + plan.",success:{planUpdatedProration:"Plan actualizado. Stripe ha aplicado el prorrateo a tu suscripcin.",title:"Plan actualizado"},summary:{featuresSubtotal:"Subtotal de funciones",featuresTotalPerMonth:"Total de funciones (al mes)",loadingPricing:"Cargando precios",noPlanSelected:"No hay plan seleccionado.",selectPlanToSeeTotal:"Selecciona un plan para ver el total",selectedPlan:"Plan seleccionado",statusLabel:"Estado:",subtitle:"Precio final = subtotal de funciones + plan seleccionado.",title:"Resumen",totalPerMonth:"Total por mes"},title:"Plan y facturacin"},WZ={actions:{note:"Los cambios se aplican a nuevas conversaciones y reservas.",save:"Guardar ajustes",saving:"Guardando"},advanced:{hide:"Ocultar ajustes avanzados",prompt:"Necesitas ms control sobre reglas, recordatorios y correos?",show:"Ajustes avanzados"},backToOverview:" Volver al resumen",bookingFields:{addButton:"Aadir",addPlaceholder:"Aade una clave de campo, p. ej. notes",additionalEmpty:"An no hay campos extra configurados. Agrega cualquier dato adicional que quieras que el bot pida (p. ej.",additionalTitle:"Campos adicionales",alwaysRequiredHelp:"Estos campos base siempre son obligatorios y no se pueden quitar.",alwaysRequiredTitle:"Siempre requeridos",keysHelp:"Usa claves cortas y aptas para mquina (sin espacios). El asistente igual hablar con lenguaje natural.",removeFieldAria:"Quitar campo {{field}}"},calendarDisabled:{body:"Las funciones de reserva solo estarn activas cuando habilites el complemento de calendario en",title:"El calendario est desactivado para este bot."},emailFields:{bodyHtmlOptional:"Cuerpo (HTML, opcional)",bodyText:"Cuerpo (texto)",subject:"Asunto"},emailGroups:{cancellation:{htmlHelp:"Djalo vaco para usar la versin solo texto.",htmlPlaceholder:"<p>Hola {{client.name}},</p><p>Tu reserva de {{booking.service}} para {{booking.start}} ha sido cancelada.</p>",subjectPlaceholder:"Tu reserva con {{bot.name}} ha sido cancelada",textPlaceholder:`Hola {{client.name}},

tu reserva de {{booking.service}} para {{booking.start}} ha sido cancelada.
Si se trata de un error, contctanos.

 {{bot.name}}`,title:"Correo de cancelacin"},confirmation:{htmlHelp:"Si se proporciona, el HTML se usar como cuerpo principal del correo. Mantnlo simple y apto para mvil.",htmlPlaceholder:"<p>Hola {{client.name}},</p><p>Tu reserva de {{booking.service}} para {{booking.start}} est confirmada.</p>",subjectPlaceholder:"Tu reserva con {{bot.name}} est confirmada",textPlaceholder:`Hola {{client.name}},

tu reserva de {{booking.service}} para {{booking.start}} est confirmada.
Si necesitas reprogramar, contctanos.

 {{bot.name}}`,title:"Correo de confirmacin"},reminder:{htmlHelp:"Djalo vaco para usar la versin solo texto.",htmlPlaceholder:"<p>Hola {{client.name}},</p><p>Este es un recordatorio de tu reserva {{booking.service}} para {{booking.start}}.</p>",subjectPlaceholder:"Recordatorio: tu reserva con {{bot.name}}",textPlaceholder:`Hola {{client.name}},

este es un recordatorio de tu reserva {{booking.service}} para {{booking.start}}.

 {{bot.name}}`,title:"Correo de recordatorio"}},errors:{loadFailed:"No se pudieron cargar los ajustes del bot. Actualiza e intntalo de nuevo.",saveFailed:"No se pudieron guardar los ajustes. Revisa los valores e intntalo de nuevo."},featuresAndPlan:"Funciones y plan",fields:{bookingMaxAdvanceDays:{help:"No aceptar reservas ms all de estos das desde hoy. Djalo vaco para no tener lmite.",label:"Mximo de das de antelacin",placeholder:"p. ej. 30"},bookingMaxSimultaneousBookings:{help:"Limita cuntas reservas se aceptan para la misma franja horaria. Djalo vaco para no tener lmite.",label:"Mximo de reservas por franja",placeholder:"p. ej. 1"},bookingMinLeadHours:{help:"La cita debe comenzar al menos estas horas despus de crearse.",label:"Antelacin mnima (horas)",placeholder:"p. ej. 2"},bookingReminderMinLeadHours:{help:"Evita enviar recordatorios para reservas de ltima hora. Djalo vaco para desactivar este requisito extra.",label:"Horas mnimas entre creacin e inicio",placeholder:"p. ej. 3"},bookingReminderWindowHours:{help:"Las citas que comienzan dentro de estas horas sern elegibles para recordatorios.",label:"Ventana de recordatorio (horas antes del inicio)",placeholder:"p. ej. 24"},calendarId:{help:"Usa",label:"ID del calendario",placeholder:"primary o tu-calendar-id@group.calendar.google.com"},defaultDurationMinutes:{help:"Se usa cuando el usuario no especifica una duracin explcitamente.",label:"Duracin por defecto (minutos)",placeholder:"30"},timeZone:{help:"Nombre IANA de la zona horaria. El asistente lo usa para calcular disponibilidad y horas en los correos.",label:"Zona horaria",placeholder:"p. ej. Europe/Rome"}},intro:"Conecta este bot a tu Google Calendar y ajusta cmo se comportan las reservas, recordatorios y correos.",loading:"Cargando ajustes del bot",missingId:"Falta el id del bot.",notFound:"Bot no encontrado.",onboarding:{booking:{enableToContinue:"Activa las reservas arriba o salta este paso para continuar.",next:"Guardar y continuar a Lead Ads",nextWhenDisabled:"Continuar a Lead Ads",serviceNameRequired:"El nombre del servicio es obligatorio cuando agregas varios servicios.",servicesRequired:"Agrega al menos un servicio con calendario antes de continuar.",subtitle:"Conecta tu calendario, define los horarios disponibles y las reglas de reserva.",tablesRequired:"Agrega al menos una mesa antes de continuar.",title:"Activa las reservas desde el chat",toggleOff:"Reservas DESACTIVADAS",toggleOffHint:"Puedes dejar las reservas desactivadas por ahora y completar igualmente el onboarding. Podrs activarlas ms adelante desde la app.",toggleOn:"Reservas ACTIVADAS",toggleSubtitle:"Cuando est activado, Coslo revisar tu calendario y ofrecer franjas horarias directamente en el chat.",toggleTitle:"Deja que Coslo proponga y reserve citas"},common:{skip:"Saltar por ahora"}},sections:{availability:{acceptBookings:"Aceptar reservas este da",addRange:"Aadir franja horaria",disabledHint:"Las reservas no estn permitidas este da hasta que lo habilites.",enabledHint:"Las reservas estn permitidas este da dentro de los rangos horarios de abajo.",from:"Desde",hint:"Elige en qu das aceptas reservas y los rangos horarios para cada da.",note:"Las reservas solo se aceptarn dentro de estos rangos (en la zona horaria del bot).",removeRange:"Quitar",slots:"Plazas",slotsPlaceholder:"p. ej. 1",slotsRequired:"Los cupos indican cu?ntas reservas puedes gestionar al mismo tiempo.",title:"Das y horarios disponibles",to:"Hasta"},bookingFields:{hint:"Estos son los campos que el asistente intentar recopilar al reservar una cita.",title:"Campos de reserva"},bookingRules:{hint:"Define con cuanta antelacion los clientes pueden reservar.",title:"Reglas de reserva"},calendarConnection:{hint:"Configura qu Google Calendar debe usar el asistente y la duracin por defecto de nuevas reservas.",title:"Conexin del calendario"},emails:{hint:"Personaliza los correos de confirmacin y recordatorio. Puedes usar variables como",title:"Correos"},reminderWindow:{hint:"Controla cundo se envan correos de recordatorio con respecto a la hora de inicio.",title:"Ventana de recordatorio"},services:{add:"Agregar servicio",cardHint:"Configura el calendario y la disponibilidad de este servicio.",hint:"Crea un servicio por calendario y define duracion, capacidad y horarios.",remove:"Eliminar servicio",title:"Servicios y calendarios",unnamed:"Servicio"},timezone:{hint:"Se usa para validar horarios de reserva en todos los servicios.",title:"Zona horaria del negocio"}},services:{fields:{aliases:"Alias (opcional)",aliasesPlaceholder:"p. ej. corte femenino, corte para mujeres",duration:"Duracion (minutos)",labelOptional:"Etiqueta (opcional)",labelPlaceholder:"p. ej. General",name:"Nombre del servicio",namePlaceholder:"p. ej. Corte de pelo"}},side:{cards:{bookingFields:{text:"Los campos extra que configures se guardan en cada cita y pueden usarse en tus flujos o CRM.",title:"Campos de reserva"},calendar:{text:"El asistente crea eventos en los calendarios de servicios que configuras aqui.",title:"Conexin del calendario"},emailTemplates:{and:"y",replaced:"se reemplazan por datos reales",text:"Si SMTP est mal configurado, el backend recurre a enviar confirmaciones solo en el chat. Cuando se envan correos, variables como",title:"Plantillas de correo"},timeRules:{text:"Las reglas de reserva evitan citas de ltima hora o demasiado lejanas, para mantener tu agenda bajo control.",title:"Reglas de tiempo"}},subtitle:"La configuracin del calendario controla dnde se crean los eventos. Los ajustes avanzados afinan cmo el asistente ofrece horarios y enva notificaciones.",title:"Cmo se usan calendario y reservas"},success:{saved:"Ajustes actualizados correctamente."},title:"Calendario y reservas",toggles:{confirmationEmail:"Enviar correo de confirmacin despus de una nueva reserva",reminderEmail:"Enviar correo de recordatorio antes de la cita"},weekdays:{friday:"Viernes",monday:"Lunes",saturday:"Sbado",sunday:"Domingo",thursday:"Jueves",tuesday:"Martes",wednesday:"Mircoles"}},qZ={actions:{create:"Crear nuevo bot",deleteBot:"Eliminar bot",openBot:"Abrir bot"},channels:{instagram:"Instagram",messenger:"Messenger",web:"Web",whatsapp:"WhatsApp"},confirm:{deleteBot:'Esto eliminar permanentemente el bot "{{name}}" y todas sus conversaciones y datos. Continuar?',slugMismatch:"El slug no coincide. El bot no fue eliminado.",typeSlug:'Escribe el slug de este bot ("{{slug}}") para confirmar la eliminacin:'},empty:"An no hay bots.",errors:{deleteFailed:"No se pudo eliminar el bot",loadFailed:"No se pudieron cargar los bots"},loading:"Cargando bots...",table:{actions:"Acciones",channels:"Canales",domain:"Dominio",name:"Nombre",slug:"Slug",status:"Estado"},title:"Tus bots"},HZ={back:"Atrs",error:"Error",language:{en:"Ingls",es:"Espaol",it:"Italiano"},loading:"Cargando",saving:"Guardando..."},KZ={aiModeNotice:"Cambia al modo humano para chatear con este contacto.",backToBots:" Volver a bots",backToConversations:" Volver a conversaciones",empty:"No hay mensajes.",errors:{loadFailed:"No se pudieron cargar los mensajes"},loading:"Cargando mensajes...",manualSend:{button:"Enviar",description:"Enva una respuesta manual como agente humano a travs de este canal.",empty:"Introduce un mensaje antes de enviarlo.",failed:"No se pudo enviar el mensaje.",placeholder:"Escribe una respuesta manual...",sending:"Enviando...",success:"Mensaje enviado como HUMANO.",title:"Respuesta manual (HUMANO)",windowExpired:"Ya no puedes enviar mensajes manuales: el ltimo mensaje del usuario tiene ms de 24 horas en este canal. Meta requiere plantillas fuera de la ventana de 24 horas."},missingId:"Falta el ID de la conversacin.",mode:{aiDescription:"El asistente de IA responde automticamente a los nuevos mensajes del usuario.",aiLabel:"IA",error:"No se pudo actualizar el modo de conversacin.",humanDescription:"La derivacin a un humano est activa. El bot no responder automticamente a los mensajes del usuario.",humanLabel:"HUMANO",switchingToAi:"Cambiando",switchingToHuman:"Cambiando",title:"Modo de conversacin",toAiButton:"Volver a IA",toHumanButton:"Cambiar a HUMANO (pausar IA)"},parties:{business:"Tu canal",title:"Participantes de la conversacin",user:"Contacto"},roles:{assistant:"Asistente",human:"Humano",system:"Sistema",user:"Usuario"},switchToAi:"Cambiar a IA",switchToHuman:"Cambiar a modo humano",testSend:{button:"Enviar mensaje de prueba",description:"Enva un mensaje de prueba manual a este contacto usando el canal conectado. Pensado solo para la verificacin de la app de Meta.",empty:"Introduce un mensaje antes de enviarlo.",error:"No se pudo enviar el mensaje de prueba.",placeholder:"Escribe un mensaje de prueba",sending:"Enviando",success:"Mensaje de prueba enviado.",title:"Envo de prueba (verificacin de Meta)"},title:"Conversacin",windowExpiredPill:"Ventana de 24h vencida"},VZ={actions:{createNewBot:"+ Crear nuevo bot"},activity:{convAbbrev:"conv.",empty:"No hay bots activos en los ltimos 30 das.",lastConversation:"ltima conversacin",subtitle:"Vista rpida de tus bots ms activos.",title:"Detalles de actividad",view:"Ver"},charts:{conversationsLast10Days:{empty:"An no hay conversaciones en los ltimos 10 das.",subtitle:"Cada lnea representa un bot. Pasa el cursor o toca para ver el volumen diario.",title:"Conversaciones (ltimos {{days}} das)"},tokensLast10Days:{empty:"An no se ha registrado uso de energa en los ltimos 10 das.",subtitle:"energa totales por da para cada bot.",title:"Uso de energa (ltimos {{days}} das)"},tokensSplitByBotLast10Days:{empty:"An no hay suficientes datos para mostrar el reparto por bot.",subtitle:"Cmo cada bot consume tokens mediante OpenAI + conocimiento, emails y plantillas de WhatsApp",title:"Tokens por bot y canal (ltimos {{days}} das)"},tokensSplitLast10Days:{empty:"An no hay suficientes datos para mostrar el reparto.",subtitle:"OpenAI + conocimiento vs emails vs plantillas de WhatsApp",title:"Tokens por canal (ltimos {{days}} das)"},topBots:{empty:"An no hay conversaciones en los ltimos 30 das.",subtitle:"Ordenado por volumen de conversaciones en el perodo seleccionado.",title:"Bots principales por conversaciones"}},coaching:{addKnowledge:"Aadir conocimiento",connectChannels:"Conectar canales",createBot:"Crear un bot",subtitle:"No hay conversaciones en este rango. Aqu tienes cmo empezar.",title:"Activa tu panel"},conversion:{back:"Volver al panel",bookingRate:"Tasa de reservas",bookings:"Reservas",bot:"Bot",conversations:"Conversaciones",empty:"Sin datos de conversin.",leadRate:"Tasa de leads",leads:"Leads",perBot:"Detalle por bot",perBotSubtitle:"Descubre qu bots convierten mejor.",subtitle:"Conversaciones ? leads ? reservas",title:"Recorrido del usuario",viewDetails:"Ver detalle por bot"},empty:{cta:"Crear tu primer bot",subtitle:"Empieza creando tu primer bot. Cuando llegue trfico, vers aqu conversaciones, uso de energa y los ms destacados.",title:"An no hay bots"},errors:{loadFailed:"No se ha podido cargar el panel"},health:{back:"Volver al panel",bookings:"Reservas",conversationsLast30:"Conversaciones (30d)",empty:"No se encontraron bots.",knowledge:"Conocimiento",lastConversation:"ltima conversacin",settings:"Ajustes",status:"Estado",subtitle:"Resumen del estado, canales y actividad reciente.",title:"Salud del bot",viewBot:"Ver bot"},insights:{alertsSubtitle:"Seales tempranas de la actividad reciente",alertsTitle:"Alertas y anomalas",bookings:"Reservas",compareEmpty:"Comparacin no disponible.",compareSubtitle:"Perodo actual vs anterior",compareTitle:"Comparacin de perodo",noAlerts:"No se detect actividad inusual.",now:"Ahora",prev:"Anterior"},kpis:{activeBots:"Bots activos",conversationsLast30Days:"Conversaciones (ltimos {{days}} das)",emailsThisMonth:"Emails enviados (ltimos {{days}} das)",tokensThisMonth:"Energa usada (ltimos {{days}} das)",totalBots:"Bots totales",whatsappLeadsThisMonth:"Leads de WhatsApp (ltimos {{days}} das)"},kpisHints:{activeBots:"Bots actualmente activos y atendiendo trfico.",conversationsLast30Days:"En todos los canales y bots.",of:"de",tokensThisMonth:"til para vigilar los costes.",totalBots:"Todos los bots creados en esta cuenta.",unlimitedPlan:"Plan ilimitado",whatsappLeadsThisMonth:"Nmero de plantillas de leads de WhatsApp enviadas en los ltimos {{days}} das"},loading:"Cargando datos del panel...",range:{days:"das",hint:"Los grficos se actualizan segn este rango.",label:"Rango de tiempo",last:"ltimos",loading:"Actualizando grficos"},sections:{overview:"Vista general",overviewSubtitle:"Se?ales clave sobre la salud de tus bots.",trends:"Tendencias",trendsSubtitle:"Conversaciones, uso y rendimiento a lo largo del tiempo."},subtitle:"Resumen de tus bots, conversaciones y uso de energa.",title:"Panel",tokensSplit:{legend:{emails:"Emails",openAi:"OpenAI + conocimiento",whatsapp:"Plantillas de WhatsApp"}}},GZ={defaultError:"No se ha podido cargar el bot",errorTitle:"Error",loading:"Cargando bot...",noSlug:"No se ha proporcionado el slug del bot.",notFoundBody:"Comprueba el enlace que has recibido.",notFoundTitle:"Bot no encontrado"},YZ={actions:{resetPassword:"Restablecer contrasea",sendCode:"Enviar cdigo",sending:"Enviando...",updating:"Actualizando..."},backToLogin:"Volver a",bullets:{b1:"Usa el mismo email con el que te registraste.",b2:"Los cdigos caducan en 10 minutos.",b3:"Elige una nueva contrasea despus de verificar el cdigo."},cancel:{confirm:"?Cancelar esta suscripci?n al final del per?odo de facturaci?n actual?",cta:"Cancelar suscripci?n",error:"No se pudo cancelar la suscripci?n.",processing:"Cancelando?",scheduled:"Cancelaci?n programada",success:"Cancelaci?n programada. Tu plan seguir? activo hasta el final del per?odo de facturaci?n actual.",successWithDate:"Cancelaci?n programada. Tu plan seguir? activo hasta {{date}}.",until:"hasta"},codeLabel:"Codigo de restablecimiento",confirmPassword:"Confirmar contrasea",emailLabel:"Email",errors:{mismatch:"Las contraseas no coinciden.",requestFailed:"No se pudo enviar el cdigo. Intentalo de nuevo.",requirements:"La contrasea no cumple los requisitos.",resetFailed:"Codigo invalido o caducado. Intentalo de nuevo."},newPassword:"Nueva contrasea",subtitle:{request:"Introduce el email con el que te registraste. Te enviaremos un cdigo de 6 digitos.",reset:"Introduce el cdigo que te enviamos y elige una nueva contrasea."},success:{requested:"Si existe una cuenta, te enviamos un cdigo por email.",reset:"Contrasena actualizada. Ya puedes iniciar sesion."},title:"Recupera tu contrasea"},QZ={benefits:{cards:{c1:{text:"Mejoras la satisfaccin de los clientes gracias a respuestas rpidas y consistentes en cualquier momento del da.",title:"Tiempos de respuesta reducidos"},c2:{text:"La presencia multicanal aumenta los puntos de contacto y te permite convertir ms conversaciones en citas u oportunidades comerciales.",title:"Ms contactos y reservas"},c3:{text:"Al delegar en la IA las tareas repetitivas, tu equipo puede centrarse en las actividades estratgicas que generan ms valor.",title:"Automatizacin inteligente"},c4:{text:"Las respuestas estn alineadas con tu informacin, tu tono de voz y tus directrices de marca, sin improvisaciones.",title:"Coherencia con la marca"}},title:"Por qu las empresas que lo prueban no vuelven atrs"},booking:{calendar:{event1:{subtitle:"Mario Rossi - Consulta",time:"14:00",title:"Cita con cliente"},event2:{subtitle:"Laura Bianchi - Presentacin",time:"16:30",title:"Demo de producto"},header:"Google Calendar"},list:{l1:"proponer fechas y franjas horarias disponibles,",l2:"recoger los datos del cliente (nombre, contacto, solicitud),",l3:"confirmar la cita en tiempo real,",l4:"crear el evento en tu Google Calendar con todos los detalles."},p1:"El asistente no es solo un soporte informativo, sino un verdadero colaborador operativo. Entre las funciones ms valoradas est la gestin completa de las reservas.",p2:"Esto es lo que puede hacer de forma autnoma:",p3:"Se acabaron los mensajes dispersos, las comprobaciones cruzadas o las citas apuntadas a mano: el flujo es sencillo, automatizado y reduce al mnimo errores y prdida de tiempo.",title:"Reservas reales y confirmadas, directamente en tu Google Calendar"},cta:{primaryCta:"Empieza ahora",secondaryCta:"Accede a tu rea",text:"En un mercado cada vez ms competitivo, la calidad y la velocidad de la comunicacin marcan la diferencia. Con nuestro asistente de IA puedes ofrecer una experiencia moderna, profesional y completamente automatizada.",title:"Lleva tu negocio al futuro"},features:{multichannelDesc:"Widget web, WhatsApp, Messenger, Instagram  un bot, en todas partes."},growth:{imageAlt:"Coslo construyendo tu asistente de IA",p1:"Cada nuevo documento y cada actualizacin de tu sitio ayudan a mantener las respuestas del asistente precisas y alineadas con el tiempo. La plataforma evoluciona junto con tu negocio.",p2:"Puedes usarlo, por ejemplo, para:",p3:"Es como tener un asistente digital siempre disponible, capaz de responder a preguntas simples y complejas relacionadas con tu negocio y de encargarse de las tareas ms repetitivas por ti.",pills:{p1:"Atencin al cliente",p2:"Reservas y citas",p3:"Respuestas a contactos en redes",p4:"Generacin de leads",p5:"Soporte tcnico",p6:"Gestin de la informacin"},title:"Un asistente que crece con tu empresa"},hero:{altHero:"Coslo, tu asistente de IA",badge:"Coslo  Asistente de IA para tu negocio",ctaPrimary:"Empieza ahora",ctaSecondary:"Inicia sesin",note:"Un asistente digital siempre disponible en web, redes sociales y mensajera, diseado para responder preguntas y gestionar flujos comunes de soporte y reservas usando la informacin de tu negocio.",subtitle:"Transforma tu negocio con un asistente de IA que apoya a tus clientes 24/7, responde al instante y gestiona los flujos operativos repetitivos que te hacen perder tiempo.",title:"Por qu elegir nuestra plataforma de Inteligencia Artificial?"},intro:{imageAlt:"Coslo siempre operativo 24/7 frente al ordenador",p1:"Nuestra plataforma est pensada para simplificar el trabajo de las empresas, aumentar las conversiones y ofrecer a los clientes una experiencia de comunicacin moderna, fluida e inmediata.",p2:"Gracias a un sistema avanzado de automatizacin y comprensin de contenidos, tu negocio puede garantizar por fin un soporte constante, coherente y de calidad, sin aumentar la carga de trabajo del equipo interno.",p3:"Aqu encontrars en detalle todas las funcionalidades que convierten a nuestro asistente de IA en una herramienta realmente imprescindible para tu actividad.",title:"Una asistencia continua, precisa y realmente til"},knowledge:{imageAlt:"Coslo estudiando tus contenidos",labels:{faq:"FAQ",pdf:"PDF",site:"Sitio"},list:{l1:"navega de forma autnoma por tu sitio web,",l2:"lee y comprende el contenido de tus PDF,",l3:"procesa textos, FAQ, guas, artculos y documentacin tcnica,",l4:"organiza toda la informacin en una base de conocimiento clara y coherente."},p1:"El asistente no se limita a generar respuestas genricas: responde basndose en tu material y en lo que comunicas online.",p2:"Gracias a un sistema avanzado de rastreo y anlisis, la plataforma:",p3:"As el asistente puede reflejar en profundidad tu negocio: productos, servicios, procesos internos, terminologa especfica y puntos fuertes. El resultado son respuestas precisas, coherentes y alineadas con la identidad de tu marca, incluso cuando tus contenidos se actualizan.",p4:"No hacen falta textos ad hoc: basta con utilizar lo que ya tienes y el asistente se encargar del resto.",source:{rag:{description:"Usa las paginas de tu web y documentos subidos como base de conocimiento del bot.",title:"Sitio web / docs (RAG)"},shopify:{description:"Responde con productos y variantes de tu tienda Shopify conectada.",title:"Catlogo de Shopify"}},title:"Conocimiento profundo de tus contenidos"},miniCoslo:{bubbleBot:"Claro! Solo dime el da y la hora que prefieres y actualizar el calendario de inmediato.",bubbleUser:"Hola Coslo, puedo cambiar mi cita de maana?",imageAlt:"Coslo - Asistente de IA",p1:"Las conversaciones con tus clientes se gestionan con un tono profesional y natural: Coslo responde a las preguntas frecuentes, propone citas y recoge los datos importantes sin hacer perder tiempo a tu equipo.",p2:"Aqu debajo ves un ejemplo simplificado de cmo podra ser una conversacin tpica con tus clientes.",title:"Coslo habla con tus clientes como un verdadero asistente"},multichannel:{cards:{instagram:{text:"Perfecto para captar preguntas y solicitudes que nacen de publicaciones, reels e historias, transformndolas en contactos y oportunidades.",title:"Instagram Direct"},messenger:{text:"Ideal para seguir a los usuarios que llegan de tus campaas y de tus contenidos en redes sociales, sin perder ninguna conversacin.",title:"Facebook Messenger"},webWidget:{text:"Integrado directamente en tu sitio web, siempre visible y activo 24/7 para responder a las preguntas y guiar a los usuarios a la accin.",title:"Web widget"},whatsapp:{text:"El canal de mensajera ms utilizado: perfecto para soporte, solicitudes rpidas y reservas inmediatas.",title:"WhatsApp"}},p1:"Las personas esperan respuestas rpidas, sin tener que cambiar de canal o esperar horas. Por eso el asistente de IA se integra con las herramientas que tus clientes utilizan cada da.",p2:"De este modo tu marca est siempre accesible y lista para interactuar, mejorando la experiencia de usuario y aumentando las oportunidades de conversin.",title:"Multicanal: presente donde estn tus clientes"}},ZZ={backToCredentials:"Volver al inicio de sesin con email y contrasea",bullets:{b1:"Un solo panel para todos tus canales",b2:"Estadsticas en tiempo real sobre el rendimiento del bot",b3:"Acceso seguro con autenticacin de dos factores"},cardTitle:"Inicio de sesin",divider:"o",email:"Email",forgotPassword:"Olvidaste tu contrasea?",googleError:"Inicio de sesin con Google no conseguido",loginError:"Inicio de sesin no conseguido",mfaCodeLabel:"Cdigo de seguridad",mfaError:"Cdigo no vlido. Intntalo de nuevo.",mfaHelp:"Ya no tienes acceso a tu app de autenticacin? Usa uno de los cdigos de copia de seguridad que guardaste cuando activaste el 2FA.",mfaSubmit:"Confirmar e iniciar sesin",mfaSubmitting:"Verificando...",mfaSubtitle:"Abre tu app de autenticacin (Google Authenticator, 1Password, Authy, etc.) e introduce el cdigo de 6 dgitos para completar el acceso.",mfaTitle:"Autenticacin de dos factores",noAccount:"Todava no tienes una cuenta?",pageTitle:"Accede a tu espacio Coslo",password:"Contrasea",register:"Regstrate",submit:"Iniciar sesin",submitting:"Iniciando sesin...",subtitle:"Gestiona tus asistentes de IA, revisa las conversaciones y modifica la configuracin en pocos clics."},XZ={eyebrow:"Onboarding guiado  {current}/{total}",steps:{booking:"3. Reservas",bookingDescription:"Deja que Coslo proponga y reserve reuniones directamente desde el chat.",bot:"1. Crear bot",botDescription:"Ponle un nombre a tu asistente y define cmo lo vern tus clientes.",channels:"2. Canales",channelsDescription:"Conecta WhatsApp, Facebook, Instagram o tu sitio web.",knowledge:"6. Conocimiento",knowledgeDescription:"Haz que Coslo aprenda de tu sitio web para responder preguntas detalladas.",leadAds:"4. Lead Ads",leadAdsDescription:"Sincroniza tus Facebook Lead Ads y enva mensajes de WhatsApp automticamente.",plan:"5. Plan y facturacin",planDescription:"Revisa la configuracin, elige tu plan y empieza a usar Coslo."}},JZ={hero:{intro:"Coslo es una plataforma SaaS multi-tenant que conecta los canales de tu negocio (Web Widget, WhatsApp, Facebook Messenger, Instagram Direct) con un asistente de IA y, opcionalmente, con la automatizacin de reservas mediante Google Calendar. Esta pgina explica qu datos tratamos, por qu los tratamos, cmo se protegen y qu controles tienes disponibles.",kicker:"Legal",lastUpdatedLabel:"ltima actualizacin",title:"Poltica de Privacidad y Datos"},sections:{aiProcessing:{paragraphs:["Coslo est diseado para casos de soporte empresarial. Tu asistente se configura para responder usando las fuentes de conocimiento que proporcionas (por ejemplo: pginas pblicas de tu web, PDFs, FAQs).","Al generar una respuesta, podemos enviar a nuestro proveedor de IA el texto del mensaje del Usuario Final, fragmentos de conocimiento recuperados (RAG) y la configuracin del asistente (como instrucciones del sistema). Este tratamiento es necesario para proporcionar la respuesta de IA solicitada.","Podemos conservar registros de solicitudes/respuestas de IA para operar, depurar y mejorar el servicio. No usamos el contenido conversacional de los Clientes para entrenar o mejorar un modelo de IA compartido/de propsito general, y no usamos los datos conversacionales de un negocio para construir o mejorar el asistente de otro negocio."],title:"5) Procesamiento de IA y respuestas con base en conocimiento"},appliesTo:{paragraphs:["Esta poltica se aplica a (a) propietarios de la cuenta y miembros del equipo que usan Coslo para configurar y operar un asistente (los Usuarios del Negocio) y (b) usuarios finales que escriben a un negocio cuando el negocio usa Coslo para ofrecer respuestas automatizadas (los Usuarios Finales).","En la mayora de los casos, el negocio al que contactas determina cmo utiliza sus canales de mensajera y qu informacin proporciona al asistente. Si eres un Usuario Final, normalmente deberas contactar directamente con el negocio para solicitudes sobre tu conversacin (acceso/eliminacin), salvo que el negocio indique lo contrario."],title:"2) A quin se aplica esta poltica"},automationEscalation:{paragraphs:["Los negocios pueden usar Coslo para automatizar parte del soporte al cliente en canales de mensajera. Si una solicitud requiere a una persona, el negocio debera proporcionar una forma clara para que los Usuarios Finales contacten con un humano (por ejemplo: hablar con un agente, telfono, email o formulario de soporte). Coslo admite estos flujos mediante configuracin y opciones de escalado definidas por el negocio."],title:"8) Automatizacin y escalado a un humano"},changes:{paragraphs:["Podemos actualizar esta poltica ocasionalmente. Cuando lo hagamos, actualizaremos la fecha de ltima actualizacin en la parte superior de esta pgina."],title:"17) Cambios en esta poltica"},children:{paragraphs:["Coslo est destinado a uso empresarial. No est diseado para dirigirse a menores, y los negocios deben asegurarse de que su uso de los canales de mensajera cumpla con los requisitos de edad aplicables."],title:"16) Menores"},dataWeProcess:{list:["Datos de cuenta: direccin de email y datos de autenticacin (las contraseas se almacenan en forma hash), adems de ajustes bsicos de la cuenta.","Configuracin del asistente: nombre del bot, slug, dominio conectado, instrucciones/prompts del sistema, funciones activadas y ajustes de canales.","Entradas de la base de conocimiento: contenidos que conectas o subes para alimentar al asistente, como el contenido pblico de tu web y PDFs (y metadatos relacionados como URL de origen / nombre de archivo).","Salidas de la base de conocimiento: representaciones procesadas de los contenidos (por ejemplo: texto extrado, fragmentos y embeddings/vectores) usadas para recuperar informacin relevante.","Datos de conversacin: contenido de los mensajes intercambiados con el asistente (texto) y metadatos relacionados (marcas de tiempo, tipo de canal e identificadores necesarios para enrutar respuestas).","Identificadores de integracin: identificadores necesarios para conectar canales y entregar mensajes (p. ej., WhatsApp phone number IDs, Facebook Page IDs, Instagram Business IDs) y credenciales/tokens de autorizacin usados para enviar/recibir mensajes en tu nombre.","Datos de reserva (si se activa): informacin necesaria para programar una cita (p. ej., nombre, datos de contacto, servicio, fecha/hora y notas o campos personalizados que configures).","Analtica del servicio (por tenant): mtricas para el propietario de la cuenta del negocio como nmero de conversaciones, volumen de mensajes, uso a lo largo del tiempo e indicadores de calidad (p. ej., si el asistente respondi correctamente).","Registros tcnicos y de seguridad: registros operativos (p. ej., errores, entrega de webhooks y eventos de seguridad) utilizados para operar y proteger el servicio."],paragraphs:["Tratamos las siguientes categoras de datos, segn las funciones que actives:"],title:"3) Qu datos recopilamos / tratamos"},deletion:{paragraphs:["Puedes desconectar los canales conectados (WhatsApp, Facebook, Instagram) desde tu panel de Coslo en cualquier momento.","Puedes eliminar un asistente especfico desde la pgina Bot List. Esto elimina el asistente y todos los datos relacionados con ese asistente (incluida su base de conocimiento y conversaciones) de nuestros sistemas principales.","Puedes eliminar tu cuenta completa desde la pgina Perfil (Danger Zone). Esto elimina tu cuenta y todos los datos relacionados de nuestros sistemas principales.","Algunos datos tcnicos limitados pueden permanecer durante un breve periodo en registros de seguridad y copias de seguridad, y luego se sobrescriben o eliminan.","Para preguntas de privacidad o solicitudes de eliminacin, contacta con <a>soporte</a>."],title:"12) Eliminacin, desconexin de canales y solicitudes",useTrans:"true"},googleCalendar:{paragraphs:["Si habilitas la automatizacin de reservas, Coslo crear eventos en el Google Calendar que conectes (o al que otorgues acceso) y puede comprobar disponibilidad/conflictos para proponer franjas horarias.","Los eventos creados en tu Google Calendar se almacenan en tu cuenta de Google y permanecen all hasta que los elimines directamente en Google Calendar."],title:"9) Reservas en Google Calendar (funcin opcional)"},howWeUse:{list:["Prestar el servicio: crear y gestionar cuentas, asistentes, paneles y canales conectados.","Entregar mensajera: recibir mensajes de canales conectados y enviar respuestas en nombre del negocio.","Generar respuestas: recuperar conocimiento relevante de tus fuentes configuradas (web/PDF/FAQs) y generar respuestas coherentes con la configuracin del asistente.","Reservas (opcional): comprobar disponibilidad y crear reservas/eventos en Google Calendar cuando est activado.","Analtica y control de calidad: proporcionar analtica por tenant y permitir al propietario del negocio revisar el historial de conversaciones para evaluar el rendimiento del asistente, resolver solicitudes y mejorar contenido/configuracin.","Seguridad y fiabilidad: detectar abusos, prevenir fraude, solucionar incidencias y mantener la estabilidad de la plataforma."],paragraphs:["Usamos los datos para operar Coslo y ofrecer las funciones que actives:"],title:"4) Cmo usamos tus datos"},messagingChannels:{paragraphs:["Si conectas canales de Meta, Coslo utiliza las APIs de Meta para entregar mensajes y recibir eventos (webhooks). Esto requiere almacenar identificadores del canal (como Page ID / Business ID / phone number ID) y credenciales/tokens necesarios para enviar y recibir mensajes en tu nombre.","Los negocios son responsables de asegurar que tienen los derechos/permisos necesarios para conectar y usar estos canales y de informar a los Usuarios Finales sobre cmo se gestiona la mensajera.","Cuando sea necesario para prestar el servicio, las credenciales/tokens de autorizacin se almacenan de forma segura (incluida la encriptacin en reposo) y el acceso se limita a sistemas y personal autorizados."],title:"7) Canales de mensajera (WhatsApp, Facebook, Instagram)"},questions:{paragraphs:["Para cualquier pregunta sobre privacidad, uso de datos o solicitudes de eliminacin, contacta con <a>soporte</a>."],title:"18) Contacto",useTrans:"true"},retention:{list:["Conversaciones y configuracin del asistente: se conservan hasta que elimines el asistente, elimines tu cuenta o solicites la eliminacin (sujeto a una retencin limitada en copias de seguridad).","Datos de la base de conocimiento: se conservan hasta que elimines la fuente (web/PDF), elimines el asistente, elimines tu cuenta o solicites la eliminacin.","Registros operativos: se conservan durante un periodo limitado por motivos de seguridad, depuracin y fiabilidad, y luego se sobrescriben o eliminan."],paragraphs:["Conservamos datos para operar el servicio y ofrecer las funciones del panel que actives. En general:"],title:"11) Conservacin de datos"},rights:{paragraphs:["Segn tu ubicacin (incluido UE/EEE), puedes tener derechos para acceder, corregir, eliminar u oponerte a ciertos tratamientos de tus datos personales. Para ejercer estos derechos, contacta con <a>soporte</a>.","Si eres un Usuario Final que escribe a un negocio, normalmente debes contactar primero con ese negocio porque controla la conversacin y cmo se gestiona."],title:"17) Tus derechos",useTrans:"true"},security:{paragraphs:["Aplicamos medidas tcnicas y organizativas razonables para proteger los datos, como controles de acceso y comunicaciones seguras. Ningn mtodo de transmisin o almacenamiento es 100% seguro, pero trabajamos continuamente para reducir riesgos y prevenir accesos no autorizados."],title:"14) Seguridad"},shopifyData:{list:["Identificadores de la tienda (p. ej., dominio) y metadatos de la app instalada.","Datos de productos y variantes (ttulo, handle, precios, etiquetas, imgenes).","Disponibilidad de inventario y estado de stock (si la tienda habilita acceso al inventario).","Consultas de estado de pedido iniciadas por los usuarios finales (email + nmero de pedido)."],paragraphs:["Si conectas una tienda Shopify, tratamos los datos necesarios para proporcionar la integracin. Esto puede incluir el dominio de la tienda, productos y variantes, disponibilidad de inventario y consultas de estado de pedidos solicitadas por usuarios finales.","Accedemos a los datos de Shopify mediante la Admin API en nombre del propietario de la tienda y solo para impulsar las funciones del asistente (por ejemplo, bsqueda de productos, disponibilidad, enlaces al carrito y estado del pedido).","No vendemos los datos de Shopify ni los usamos para publicidad. Limitamos los datos a lo necesario para prestar el servicio y responder a las solicitudes de los clientes."],title:"5) Datos de Shopify e interacciones de comercio"},tenantSeparation:{paragraphs:["Coslo es multi-tenant. Los datos de conversacin, bases de conocimiento y analticas generadas para una cuenta de negocio estn aisladas de otras cuentas de negocio.","Los negocios pueden revisar el historial de conversaciones de su propio asistente en el panel de Coslo con fines operativos (p. ej., control de calidad, resolucin de solicitudes, mejora de la base de conocimiento). El acceso est limitado a usuarios autorizados de esa misma cuenta de negocio.","Los Usuarios Finales no tienen acceso a los paneles internos de analtica ni a las herramientas operativas del negocio."],title:"6) Revisin de conversaciones, acceso y separacin multi-tenant"},thirdParties:{list:["Meta (WhatsApp, Facebook, Instagram) para la entrega de mensajes y webhooks.","Proveedor de IA (p. ej., OpenAI) para generar las respuestas del asistente.","Google (Google Calendar) para la automatizacin de reservas.","Stripe para facturacin y pagos.","Proveedores de hosting/infraestructura para ejecutar la aplicacin y almacenar datos de forma segura."],paragraphs:["Dependemos de proveedores externos para ofrecer Coslo. Segn las funciones activadas, los datos pueden ser tratados por:"],title:"11) Servicios de terceros (subprocesadores)"},transfers:{paragraphs:["Algunos de nuestros proveedores pueden tratar datos en pases diferentes al tuyo. Cuando corresponda, utilizamos salvaguardas adecuadas para transferencias internacionales (como protecciones contractuales) de acuerdo con la normativa aplicable."],title:"14) Transferencias internacionales de datos"},whoWeAre:{addressLabel:"Direccin",emailLabel:"Email",providerLabel:"Proveedor",serviceLabel:"Servicio",serviceValue:"Coslo (coslo.it)",title:"1) Quines somos"}}},eX={common:{cancel:"Cancelar"},confirmDelete:"Esto eliminar permanentemente tu cuenta, todos tus bots y sus datos. Esta accin no se puede deshacer. Continuar?",danger:{actions:{delete:"Eliminar mi cuenta",deleting:"Eliminando",deletingInline:"Eliminando tu cuenta"},googleNote:"Esta cuenta usa Google Sign-In. Haz clic en el botn de abajo para confirmar con Google y eliminar tu cuenta y todos los bots y datos asociados.",passwordConfirm:{help:"Por tu seguridad, requerimos tu contrasea actual para eliminar la cuenta.",label:"Confirmar con tu contrasea"},subtitle:"Elimina permanentemente tu cuenta y todos tus bots, conversaciones, documentos y datos de uso. Esta accin no se puede deshacer.",title:"Zona de peligro",unsupported:"Esta cuenta todava no admite eliminacin autoservicio."},errors:{changePasswordFailed:"No se ha podido cambiar la contrasea.",deleteFailed:"No se ha podido eliminar la cuenta.",loadFailed:"No se ha podido cargar la cuenta",updateProfileFailed:"No se ha podido actualizar el perfil."},loading:"Cargando cuenta...",mfa:{actions:{confirmEnable:"Confirmar y activar 2FA",disabling:"Desactivando",enable:"Activar autenticacin de dos factores",preparing:"Preparando",verifying:"Verificando"},backupCodes:{body:"Estos cdigos se muestran solo una vez. Gurdalos en un lugar seguro (gestor de contraseas, nota segura, copia impresa). Cada cdigo se puede usar una sola vez si pierdes acceso al telfono.",copyAll:"Copiar todos los cdigos",title:"Cdigos de respaldo (gurdalos ahora)"},disable:{backupCodeLabel:"O un cdigo de respaldo",codeLabel:"Cdigo de tu app (6 dgitos)",confirm:"Confirmar desactivacin de 2FA",confirmBody:"Por seguridad, confirma con un cdigo de tu app de autenticacin o con un cdigo de respaldo.",intro:"Si cambias de dispositivo o de app de autenticacin, puedes desactivar 2FA y configurarla de nuevo.",open:"Desactivar autenticacin de dos factores"},enabledNote:"En cada inicio de sesin, tras tu mtodo principal (email/contrasea o Google), te pediremos un cdigo de 6 dgitos de tu app de autenticacin.",errors:{backupCodesCopyFailed:"No se pueden copiar los cdigos automticamente. Cpialos manualmente y gurdalos en un lugar seguro.",confirmFailed:"No se ha podido confirmar el cdigo. Comprueba el cdigo e intntalo de nuevo.",disableFailed:"No se ha podido desactivar la autenticacin de dos factores. Comprueba el cdigo e intntalo de nuevo.",disableRequiresCode:"Introduce un cdigo de tu app de autenticacin o un cdigo de respaldo.",startFailed:"No se ha podido iniciar la configuracin de la autenticacin de dos factores."},recommendation:"Recomendamos encarecidamente activar la autenticacin de dos factores, especialmente si reutilizas este email en otros sitios o compartes dispositivos.",setup:{codeLabel:"Cdigo de tu app",manualSecretLabel:"Secreto manual:",step1Body:"Abre tu app de autenticacin (Google Authenticator, 1Password, Authy, etc.) y escanea este cdigo. Si no puedes escanear el QR, introduce el secreto manualmente.",step1Title:"1. Escanea el cdigo QR",step2Body:"Despus de aadir la cuenta en tu app, introduce el cdigo actual de 6 dgitos para confirmar que todo funciona.",step2Title:"2. Introduce el cdigo de 6 dgitos"},status:{disabled:"Desactivada",enabled:"Activada"},statusLabel:"Estado",subtitle:"Proteccin extra para tu cuenta usando una app de autenticacin. Despus del acceso, se te pedir un cdigo de 6 dgitos del telfono.",success:{backupCodesCopied:"Cdigos de respaldo copiados al portapapeles. Gurdalos en un lugar seguro.",disabled:"Autenticacin de dos factores desactivada.",enabledSaveBackupCodes:"Autenticacin de dos factores activada. Guarda los cdigos de respaldo en un lugar seguro."},title:"Autenticacin de dos factores"},pageSubtitle:"Gestiona tu perfil, el acceso y la seguridad.",pageTitle:"Cuenta",password:{actions:{change:"Cambiar contrasea",updating:"Actualizando"},confirm:{label:"Confirmar nueva contrasea"},current:{label:"Contrasea actual"},errors:{mismatch:"La nueva contrasea y la confirmacin no coinciden."},new:{help:"Al menos 8 caracteres, con maysculas y minsculas, un nmero y un smbolo.",label:"Nueva contrasea"},success:"Contrasea actualizada."},profile:{actions:{save:"Guardar perfil",saving:"Guardando"},avatarAlt:"Avatar",avatarUrl:{help:"Puedes pegar un enlace a una imagen (por ejemplo, desde tu web o CDN del logo).",label:"URL del avatar",placeholder:"https://"},displayName:{label:"Nombre visible",placeholder:"Tu nombre o nombre de la empresa"},subtitle:"Esta informacin solo es visible dentro de tu panel.",success:"Perfil actualizado.",title:"Perfil"},security:{emailLabel:"Email",googleOnlyNoteStrongPrefix:"Esta cuenta usa",googleOnlyNoteSuffix:"El acceso con contrasea no est habilitado.",googleSignInStrong:"Google Sign-In",loginMethod:{emailPassword:"Email y contrasea",google:"Google",unknown:"Desconocido"},loginMethodLabel:"Mtodo de acceso",title:"Acceso y seguridad"},team:{errors:{botsRequired:"Selecciona al menos un bot.",emailRequired:"Introduce un email.",inviteFailed:"No se ha podido enviar la invitacin.",loadFailed:"No se han podido cargar los datos del equipo.",revokeFailed:"No se ha podido revocar el acceso.",updateFailed:"No se ha podido actualizar el acceso del miembro."},invite:{botLabel:"Bots con acceso",emailLabel:"Email del miembro",emailPlaceholder:"nombre@empresa.com",noBots:"Crea un bot primero para invitar al equipo.",send:"Enviar invitacin",sending:"Enviando..."},invites:{columns:{actions:"Acciones",bots:"Bots",email:"Email",sent:"Enviada"},empty:"No hay invitaciones pendientes.",revoke:"Revocar invitacin",title:"Invitaciones pendientes"},loading:"Cargando datos del equipo...",members:{cancel:"Cancelar",columns:{actions:"Acciones",bots:"Bots",lastLogin:"ltimo acceso",member:"Miembro"},confirmRemove:"Eliminar el acceso de este miembro del equipo?",editMember:"Editar miembro",empty:"An no hay miembros del equipo.",never:"Nunca",remove:"Eliminar miembro",revoke:"Revocar acceso",save:"Guardar",saving:"Guardando...",title:"Miembros del equipo"},subtitle:"Invita a miembros del equipo a acceder a bots especficos y responder como humano.",success:{inviteRevoked:"Invitacin revocada.",inviteSent:"Invitacin enviada correctamente.",memberRevoked:"Acceso del miembro revocado.",memberUpdated:"Acceso del miembro actualizado."},title:"Acceso del equipo"}},tX={alreadyAccount:"Ya tienes una cuenta?",bullets:{b1:"Multicanal (web, WhatsApp, redes sociales, calendario)",b2:"Configuracin guiada y personalizable",b3:"Plan multi-tenant pensado para agencias y equipos"},cardTitle:"Registro",email:"Email",errorGeneric:"Registro fallido",errorPasswordMismatch:"Las contraseas no coinciden",errorPasswordRequirements:"La contrasea no cumple los requisitos. Revisa los puntos bajo el campo de la contrasea.",login:"Iniciar sesin",pageTitle:"Crea tu cuenta Coslo",password:"Contrasea",passwordConfirm:"Confirmar contrasea",pwRules:{digit:"Al menos un nmero (09)",lowercase:"Al menos una letra minscula (az)",minLength:"Al menos 8 caracteres",special:"Al menos un carcter especial (ej. !@#$%^&*)",uppercase:"Al menos una letra mayscula (AZ)"},pwTitle:"Requisitos de la contrasea:",submit:"Crear cuenta",submitting:"Creando cuenta...",subtitle:"En pocos minutos conectas tus canales y tienes un asistente de IA listo para responder a tus clientes 24/7.",success:"Registro completado. Revisa tu email y verifica la cuenta antes de iniciar sesin."},nX={hero:{intro:"Estos Trminos y Condiciones regulan el uso de Coslo (la Plataforma), un servicio SaaS multi-tenant que conecta los canales de tu negocio (p. ej., Web Widget, WhatsApp, Facebook Messenger, Instagram Direct) con un asistente de IA y, si est habilitado, con la automatizacin de reservas (p. ej., Google Calendar). Al usar la Plataforma, aceptas estos Trminos.",kicker:"Legal",lastUpdatedLabel:"ltima actualizacin",title:"Trminos y Condiciones"},sections:{account:{paragraphs:["Debes proporcionar informacin precisa y actualizada al crear una cuenta y mantener seguras tus credenciales.","Eres responsable de la actividad en tu cuenta y de proteger canales conectados, tokens y permisos.","Podemos suspender o terminar el acceso si creemos razonablemente que hay abuso, actividad ilegal o una infraccin de estos Trminos o de polticas de terceros."],title:"5) Cuenta, seguridad y acceso"},aiLimitations:{paragraphs:["Las respuestas del asistente se generan automticamente en funcin de tu configuracin, fuentes de conocimiento y modelos de IA de terceros.","La IA puede producir resultados inexactos o incompletos. La Plataforma se ofrece en base a mejor esfuerzo y no sustituye asesoramiento profesional (legal/mdico/fiscal).","Eres responsable de revisar y usar los resultados de forma adecuada, especialmente en contextos regulados o de alto impacto."],title:"9) IA: limitaciones y responsabilidades"},availabilitySupport:{paragraphs:["Buscamos mantener la Plataforma razonablemente disponible, pero la disponibilidad puede verse afectada por mantenimiento, actualizaciones y Servicios de Terceros.","El soporte puede variar segn el plan. Para soporte, contacta con <a>{{email}}</a>."],title:"11) Disponibilidad, mantenimiento y soporte",useTrans:"true"},changes:{paragraphs:["Podemos actualizar la Plataforma y estos Trminos ocasionalmente. Si realizamos cambios materiales, podemos avisar por email o mediante notificaciones dentro del producto.","El uso continuado de la Plataforma tras la entrada en vigor de los cambios constituye la aceptacin de los Trminos actualizados."],title:"16) Cambios en la Plataforma y en estos Trminos"},contacts:{paragraphs:["Para preguntas sobre estos Trminos, contacta con <a>{{email}}</a>."],title:"20) Contacto",useTrans:"true"},definitions:{paragraphs:["A efectos de estos Trminos: (a) Plataforma significa Coslo; (b) Cliente significa el usuario de negocio que crea una cuenta; (c) Usuarios Finales significa las personas que escriben al Cliente; (d) Contenido del Cliente significa el contenido y datos configurados o proporcionados por el Cliente (incluyendo fuentes de conocimiento y conversaciones); (e) Servicios de Terceros significa servicios externos integrados (p. ej., canales de Meta, Google Calendar, proveedores de IA, Stripe, hosting)."],title:"2) Definiciones"},indemnity:{paragraphs:["Aceptas indemnizarnos y mantenernos indemnes frente a reclamaciones, daos, prdidas y gastos (incluidos honorarios legales razonables) derivados de: (a) tu uso ilegal o no conforme de la Plataforma; (b) tu incumplimiento de estos Trminos o de polticas de terceros; (c) infracciones o ilcitos relacionados con tu Contenido del Cliente."],title:"15) Indemnizacin"},ip:{paragraphs:["Todos los derechos sobre la Plataforma (software, diseo, marcas, documentacin) permanecen con el Proveedor y sus licenciantes.","Conservas los derechos sobre tu Contenido del Cliente. Concedes una licencia limitada para tratar ese contenido solo con el fin de proporcionar y operar la Plataforma."],title:"12) Propiedad intelectual"},lawForum:{paragraphs:["Salvo acuerdo escrito en contrario, estos Trminos se rigen por la ley italiana. Cualquier disputa estar sujeta a la jurisdiccin exclusiva del tribunal donde el Proveedor tenga su domicilio social, salvo que la ley imperativa disponga lo contrario."],title:"17) Ley aplicable y jurisdiccin"},liability:{paragraphs:["En la mxima medida permitida por la ley, nuestra responsabilidad total se limita a los importes que nos pagaste en los doce (12) meses anteriores al evento que dio lugar a la reclamacin.","No somos responsables de daos indirectos, incidentales, consecuenciales o punitivos, prdida de beneficios, prdida de negocio o prdida de oportunidades."],title:"14) Limitacin de responsabilidad"},permittedUseCompliance:{paragraphs:["Eres responsable de tus asistentes, del Contenido del Cliente y de las interacciones con Usuarios Finales.","No debes usar Coslo para actividades ilegales, spam, phishing, malware, acoso o infraccin de derechos de terceros.","Debes cumplir los trminos y polticas de Servicios de Terceros para los canales conectados (incluidas polticas de WhatsApp/Meta). Estas polticas pueden restringir la automatizacin y el uso de IA.","Coslo est pensado para soporte empresarial (soporte, informacin, reservas, gestin de leads). No debes configurarlo o promocionarlo como un chatbot de propsito general no relacionado con tu negocio, ni usarlo de forma contraria a las reglas del canal.","Cuando sea necesario, debes ofrecer a los Usuarios Finales una va clara para escalar a una persona (p. ej., hablar con un agente, telfono, email o formulario de soporte). Eres responsable de configurar y mantener la opcin de contacto humano presentada a los Usuarios Finales en tus canales conectados."],title:"7) Uso permitido, uso prohibido y cumplimiento de canales"},plansPayments:{paragraphs:["El acceso puede ofrecerse mediante planes gratuitos, pruebas o suscripciones de pago segn se describa en la Plataforma o en nuestro sitio.","Los planes de pago se facturan de forma recurrente (mensual/anual) mediante un procesador de pagos (p. ej., Stripe). Autorizas los cargos recurrentes mientras la suscripcin est activa.","Salvo que la ley lo exija o el plan lo indique expresamente, los pagos no son reembolsables."],title:"6) Planes, suscripciones y pagos"},privacyMultiTenant:{paragraphs:["Coslo es multi-tenant: los datos de cada Cliente estn separados lgicamente de otros tenants y solo son accesibles por usuarios autorizados de la misma cuenta del Cliente.","Nuestra Poltica de Privacidad y Datos forma parte de estos Trminos y describe qu datos tratamos, por qu, conservacin y controles de eliminacin.","Segn el caso de uso, puede ponerse a disposicin un Anexo de Tratamiento de Datos (DPA) para Clientes empresariales."],title:"7) Privacidad, tratamiento de datos y separacin multi-tenant"},provider:{labels:{address:"Direccin",contact:"Contacto",provider:"Proveedor"},title:"1) Informacin del proveedor"},scope:{paragraphs:["Coslo permite a los Clientes crear y gestionar asistentes de IA para canales de mensajera, conectar fuentes de conocimiento (p. ej., web/PDFs), automatizar flujos (p. ej., reservas), integrar Servicios de Terceros y ver analtica por tenant e historial de conversaciones.","La Plataforma est destinada a uso empresarial/profesional. Si usas Coslo en nombre de una organizacin, declaras que tienes autoridad para vincular a dicha organizacin a estos Trminos."],title:"3) Alcance del servicio y elegibilidad"},shopifyApp:{paragraphs:["Si conectas una tienda Shopify, autorizas a la Plataforma a acceder a los datos mediante la Admin API de Shopify para ofrecer las funciones del asistente (bsqueda de productos, disponibilidad, enlaces al carrito y estado de pedidos).","Confirmas que tienes derecho a otorgar este acceso y a usar los datos para atender a los usuarios finales. Eres responsable de cumplir las polticas de Shopify y las leyes aplicables.","No debes usar la Plataforma para acceder o tratar datos de Shopify con fines ajenos a tu negocio o fuera de los permisos autorizados."],title:"4) Trminos de Shopify"},specificApproval:{paragraphs:["Segn los artculos 1341 y 1342 del Cdigo Civil italiano, apruebas especficamente las clusulas sobre suspensin/terminacin, exclusin de garantas, limitacin de responsabilidad, indemnizacin, cambios en los trminos y ley/jurisdiccin aplicable.","Nota operativa: para una mayor fuerza, considera implementar una casilla especfica en el registro para esta aprobacin."],title:"18) Aprobacin especfica (Italia)"},termination:{paragraphs:["Tu cuenta permanece activa mientras mantengas un plan activo o tengas acceso a la Plataforma.","Puedes cancelar tu suscripcin segn el flujo de cancelacin disponible en la Plataforma.","Podemos suspender o terminar el acceso por incumplimientos materiales, falta de pago o uso ilegal.","Los eventos creados en Google Calendar permanecen en tu cuenta de Google hasta que los elimines en Google Calendar."],title:"12) Vigencia, suspensin y terminacin"},thirdParties:{paragraphs:["La Plataforma se integra con Servicios de Terceros (p. ej., canales de Meta, Google Calendar, proveedores de IA, Stripe, hosting). Tu uso de esos servicios est sujeto a sus propios trminos y polticas.","No somos responsables de interrupciones, restricciones o cambios impuestos por Servicios de Terceros, incluidas revocaciones de acceso a APIs o cambios de poltica."],title:"10) Servicios de terceros"},warranty:{paragraphs:["La Plataforma se proporciona tal cual y segn disponibilidad, en la mxima medida permitida por la ley. Renunciamos a todas las garantas expresas o implcitas.","No garantizamos que la Plataforma sea ininterrumpida o est libre de errores, ni que las salidas de IA sean siempre precisas."],title:"13) Exclusin de garantas"}}},aX={backToLogin:"Ahora puedes volver al",genericError:"Verificacin fallida.",invalidOrExpired:"Token no vlido o caducado.",loading:"Estamos verificando tu email...",loginLink:"inicio de sesin",missingToken:"Falta el token de verificacin.",successDefault:"Email verificado correctamente.",title:"Verificar email"},sX={actions:{create:"Crear plantilla",edit:"Editar",update:"Actualizar plantilla"},buttons:{phone:"Nmero de telfono",quickReply:"Respuesta rpida",remove:"Eliminar",textPlaceholder:"Etiqueta del botn",url:"URL"},category:{authentication:"Autenticacin",marketing:"Marketing",utility:"Utilidad"},columns:{name:"Plantilla",status:"Estado",updated:"ltima actualizacin"},empty:"No se encontraron plantillas de WhatsApp para este bot.",emptyCta:"Crea tu primera plantilla",facebookNotConnectedBody:"No se recibirn Lead Ads de Facebook hasta que conectes una pgina de Facebook en la pgina de Canales.",filters:{category:"Categora",categoryAll:"Todas",search:"Buscar",searchPlaceholder:"Buscar por nombre o idioma",status:"Estado",statusAll:"Todos",statusApproved:"Aprobadas",statusPending:"Pendientes",statusRejected:"Rechazadas"},form:{addButton:"Aadir botn",body:"Cuerpo",bodyHelp:"Mantn el texto claro y conciso. Las variables se rellenarn en el momento del envo.",bodyPlaceholder:"Texto principal del mensaje. Usa {{1}}, {{2}},  para variables.",buttons:"Botones",buttonsHelp:"Botones opcionales de respuesta rpida, URL o telfono.",category:"Categora",footer:"Pie (opcional)",footerPlaceholder:"Lnea pequea debajo del mensaje (p. ej. aviso legal o marca).",header:"Encabezado (opcional)",headerHelp:"Hasta 60 caracteres. Puedes usar variables como {{1}}.",headerPlaceholder:"Ttulo corto mostrado encima del cuerpo",language:"Idioma",languageHelp:"Usa cdigos de idioma de WhatsApp como en_US, it_IT, es_ES",name:"Nombre de la plantilla",nameHelp:"Solo minsculas, nmeros y guiones bajos. No es visible para los usuarios finales.",namePlaceholder:"p. ej. order_update"},history:{title:"Historial de plantillas"},leadAutomation:{consentField:"Nombre del campo de consentimiento (opcional)",consentFieldHelp:"Nombre del campo de s/no usado para el consentimiento de WhatsApp.",errors:{missingConsentField:"Si exiges opt-in explcito, debes indicar el nombre del campo de consentimiento.",missingPhoneField:"Indica el nombre del campo de telfono en tus formularios de leads.",missingTemplate:"Selecciona una plantilla de WhatsApp aprobada."},loading:"Cargando configuracin de automatizacin",phoneField:"Nombre del campo de telfono",phoneFieldHelp:"Nombre del campo del formulario que contiene el nmero de telfono en el payload del lead.",requireOptIn:"Requerir opt-in explcito de WhatsApp",save:"Guardar automatizacin",saveError:"No se pudo guardar la configuracin de automatizacin de leads.",saveSuccess:"Configuracin de automatizacin de leads guardada.",template:"Plantilla a enviar",templateHelp:"Plantilla utilizada para los nuevos leads de Meta. Solo estn disponibles las plantillas aprobadas.",templatePlaceholder:"Selecciona una plantilla aprobada",title:"Automatizacin Lead Ads  WhatsApp"},leadFeatureGoToFeatures:"Ir a Funciones",leadFeatureNotEnabledBody:"Para configurar la automatizacin Lead Ads  WhatsApp, primero activa el complemento de Lead Ads en la pgina de Funciones de este bot.",leadFeatureNotEnabledTitle:"Funcin de Lead Ads no habilitada",leads:{createdAt:"Recibido el",empty:"Todava no se han recibido leads.",loading:"Cargando leads",messageSent:"Mensaje enviado",phone:"Telfono",refresh:"Actualizar",refreshError:"No se pudieron actualizar los leads.",requireFacebook:"Conecta una pgina de Facebook en la pgina de Canales para empezar a recibir leads.",status:"Estado",title:"Leads recientes"},loadingTemplates:"Cargando plantillas",messages:{created:"Plantilla creada.",saveFailed:"No se pudo guardar la plantilla.",updated:"Plantilla actualizada."},modal:{createTitle:"Nueva plantilla de WhatsApp",editTitle:"Editar plantilla de WhatsApp"},notConnectedBody:"Puedes configurar las Lead Ads y ver los leads entrantes, pero para enviar plantillas de WhatsApp debes conectar un nmero de WhatsApp Business en la pgina de Canales.",onboarding:{autoSaveHint:"La configuracin y las plantillas se guardarn cuando hagas clic en Revisar plan y pagar.",automationHint:"Cuando llegue un nuevo lead desde Meta, Coslo enviar una plantilla de WhatsApp y, si quieres, comprobar el opt-in explcito.",common:{skip:"Omitir por ahora"},disabledHint:"Puedes dejar la automatizacin de Lead Ads desactivada y aun as completar el onboarding. Podrs volver aqu desde la app y activarla ms adelante.",errors:{channelsNotReady:"Para activar esta automatizacin, conecta tanto Facebook como WhatsApp en el paso Canales.",save:"No se ha podido guardar la configuracin de Lead Ads."},next:"Revisar plan y pagar",previewLabel:"Plantilla seleccionada:",requirementsTitle:"Estado de conexin",subtitle:"Elige o crea una plantilla de WhatsApp y asigna los campos de tus formularios de Lead Ads.",title:"Conecta Facebook Lead Ads y la automatizacin de WhatsApp",toggleDisabledHint:"Conecta ambos canales para poder activar esta automatizacin.",toggleOff:"La automatizacin de Lead Ads est DESACTIVADA",toggleOn:"La automatizacin de Lead Ads est ACTIVADA",toggleOnHint:"Los nuevos leads de tus formularios de Facebook recibirn automticamente un mensaje de WhatsApp usando la plantilla de abajo.",warningFacebook:"Conecta una pgina de Facebook en el paso Canales para que Coslo pueda leer los nuevos leads.",warningTitle:"Conecta los canales para activar la automatizacin",warningWhatsapp:"Conecta un nmero de WhatsApp Business en el paso Canales para enviar mensajes."},status:{facebookNotConnected:"No conectado",facebookStatus:"Estado de Facebook",notConnected:"No conectado",whatsappStatus:"Estado de WhatsApp"},subtitle:"Automatizacin Lead Ads  WhatsApp para {{name}}",templates:{requireWhatsapp:"Conecta un nmero de WhatsApp en la pgina de Canales para sincronizar y gestionar las plantillas."},title:"Plantillas de mensajes de WhatsApp",titleFallback:"Plantillas de WhatsApp"},iX={appLayout:LZ,auth:MZ,billing:DZ,botChannels:FZ,botConversations:zZ,botCreate:RZ,botDetails:_Z,botFeatures:BZ,botKnowledge:$Z,botPlan:UZ,botSettings:WZ,botsList:qZ,common:HZ,conversationDetail:KZ,dashboard:VZ,demoBot:GZ,forgotPassword:YZ,landing:QZ,login:ZZ,onboardingLayout:XZ,policy:JZ,profile:eX,register:tX,terms:nX,verifyEmail:aX,whatsappTemplates:sX};hn.use(xO).use(sz).init({resources:{en:{translation:iZ},it:{translation:OZ},es:{translation:iX}},fallbackLng:"en",supportedLngs:["en","it","es"],detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]},interpolation:{escapeValue:!1}});Ph.createRoot(document.getElementById("root")).render(s.jsx(ft.StrictMode,{children:s.jsx(uF,{children:s.jsx(zz,{children:s.jsx(fQ,{})})})}));
//# sourceMappingURL=index-CDGzUKPc.js.map
